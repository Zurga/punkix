(()=>{var Ot=Object.defineProperty;var Li=e=>Ot(e,"__esModule",{value:!0});var Ui=(e,t)=>{Li(e);for(var i in t)Ot(e,i,{get:t[i],enumerable:!0})};"use strict";(function(){var e=t();function t(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function s(n,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(n,o.bubbles,o.cancelable,o.detail),a}return s.prototype=window.Event.prototype,s}function i(s,n){var o=document.createElement("input");return o.type="hidden",o.name=s,o.value=n,o}function r(s,n){var o=s.getAttribute("data-to"),a=i("_method",s.getAttribute("data-method")),l=i("_csrf_token",s.getAttribute("data-csrf")),h=document.createElement("form"),c=document.createElement("input"),p=s.getAttribute("target");h.method=s.getAttribute("data-method")==="get"?"get":"post",h.action=o,h.style.display="none",p?h.target=p:n&&(h.target="_blank"),h.appendChild(l),h.appendChild(a),document.body.appendChild(h),c.type="submit",h.appendChild(c),c.click()}window.addEventListener("click",function(s){var n=s.target;if(!s.defaultPrevented)for(;n&&n.getAttribute;){var o=new e("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!n.dispatchEvent(o))return s.preventDefault(),s.stopImmediatePropagation(),!1;if(n.getAttribute("data-method"))return r(n,s.metaKey||s.shiftKey),s.preventDefault(),!1;n=n.parentNode}},!1),window.addEventListener("phoenix.link.click",function(s){var n=s.target.getAttribute("data-confirm");n&&!window.confirm(n)&&s.preventDefault()},!1)})();var be=e=>typeof e=="function"?e:function(){return e},Oi=typeof self!="undefined"?self:null,ye=typeof window!="undefined"?window:null,ce=Oi||ye||ce,Mi="2.0.0",V={connecting:0,open:1,closing:2,closed:3},Hi=1e4,Fi=1e3,M={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},q={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},ht={longpoll:"longpoll",websocket:"websocket"},Ni={complete:4},Me=class{constructor(e,t,i,r){this.channel=e,this.event=t,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:i}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}},Mt=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},Bi=class{constructor(e,t,i){this.state=M.closed,this.topic=e,this.params=be(t||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new Me(this,q.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Mt(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=M.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=M.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=M.closed,this.socket.remove(this)}),this.onError(r=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,r),this.isJoining()&&this.joinPush.reset(),this.state=M.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new Me(this,q.leave,be({}),this.timeout).send(),this.state=M.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(q.reply,(r,s)=>{this.trigger(this.replyEventName(s),r)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(q.close,e)}onError(e){return this.on(q.error,t=>e(t))}on(e,t){let i=this.bindingRef++;return this.bindings.push({event:e,ref:i,callback:t}),i}off(e,t){this.bindings=this.bindings.filter(i=>!(i.event===e&&(typeof t=="undefined"||t===i.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,i=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let r=new Me(this,e,function(){return t},i);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=M.leaving;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(q.close,"leave")},i=new Me(this,q.leave,be({}),e);return i.receive("ok",()=>t()).receive("timeout",()=>t()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(e,t,i){return t}isMember(e,t,i,r){return this.topic!==e?!1:r&&r!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:i,joinRef:r}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=M.joining,this.joinPush.resend(e))}trigger(e,t,i,r){let s=this.onMessage(e,t,i,r);if(t&&!s)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let n=this.bindings.filter(o=>o.event===e);for(let o=0;o<n.length;o++)n[o].callback(s,i,r||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===M.closed}isErrored(){return this.state===M.errored}isJoined(){return this.state===M.joined}isJoining(){return this.state===M.joining}isLeaving(){return this.state===M.leaving}},He=class{static request(e,t,i,r,s,n,o){if(ce.XDomainRequest){let a=new ce.XDomainRequest;return this.xdomainRequest(a,e,t,r,s,n,o)}else{let a=new ce.XMLHttpRequest;return this.xhrRequest(a,e,t,i,r,s,n,o)}}static xdomainRequest(e,t,i,r,s,n,o){return e.timeout=s,e.open(t,i),e.onload=()=>{let a=this.parseJSON(e.responseText);o&&o(a)},n&&(e.ontimeout=n),e.onprogress=()=>{},e.send(r),e}static xhrRequest(e,t,i,r,s,n,o,a){return e.open(t,i,!0),e.timeout=n,e.setRequestHeader("Content-Type",r),e.onerror=()=>a&&a(null),e.onreadystatechange=()=>{if(e.readyState===Ni.complete&&a){let l=this.parseJSON(e.responseText);a(l)}},o&&(e.ontimeout=o),e.send(s),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let i=[];for(var r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let s=t?`${t}[${r}]`:r,n=e[r];typeof n=="object"?i.push(this.serialize(n,s)):i.push(encodeURIComponent(s)+"="+encodeURIComponent(n))}return i.join("&")}static appendParams(e,t){if(Object.keys(t).length===0)return e;let i=e.match(/\?/)?"&":"?";return`${e}${i}${this.serialize(t)}`}},$i=e=>{let t="",i=new Uint8Array(e),r=i.byteLength;for(let s=0;s<r;s++)t+=String.fromCharCode(i[s]);return btoa(t)},xe=class{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=V.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+ht.websocket),"$1/"+ht.longpoll)}endpointURL(){return He.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,i){this.close(e,t,i),this.readyState=V.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===V.open||this.readyState===V.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),e=>{if(e){var{status:t,token:i,messages:r}=e;this.token=i}else t=0;switch(t){case 200:r.forEach(s=>{setTimeout(()=>this.onmessage({data:s}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=V.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${t}`)}})}send(e){typeof e!="string"&&(e=$i(e)),this.currentBatch?this.currentBatch.push(e):this.awaitingBatchAck?this.batchBuffer.push(e):(this.currentBatch=[e],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(e){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",e.join(`
`),()=>this.onerror("timeout"),t=>{this.awaitingBatchAck=!1,!t||t.status!==200?(this.onerror(t&&t.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(e,t,i){for(let s of this.reqs)s.abort();this.readyState=V.closed;let r=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:i});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent!="undefined"?this.onclose(new CloseEvent("close",r)):this.onclose(r)}ajax(e,t,i,r,s){let n,o=()=>{this.reqs.delete(n),r()};n=He.request(e,this.endpointURL(),t,i,this.timeout,o,a=>{this.reqs.delete(n),this.isActive()&&s(a)}),this.reqs.add(n)}};var Fe={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[i,r,s,n,o]=JSON.parse(e);return t({join_ref:i,ref:r,topic:s,event:n,payload:o})}},binaryEncode(e){let{join_ref:t,ref:i,event:r,topic:s,payload:n}=e,o=this.META_LENGTH+t.length+i.length+s.length+r.length,a=new ArrayBuffer(this.HEADER_LENGTH+o),l=new DataView(a),h=0;l.setUint8(h++,this.KINDS.push),l.setUint8(h++,t.length),l.setUint8(h++,i.length),l.setUint8(h++,s.length),l.setUint8(h++,r.length),Array.from(t,p=>l.setUint8(h++,p.charCodeAt(0))),Array.from(i,p=>l.setUint8(h++,p.charCodeAt(0))),Array.from(s,p=>l.setUint8(h++,p.charCodeAt(0))),Array.from(r,p=>l.setUint8(h++,p.charCodeAt(0)));var c=new Uint8Array(a.byteLength+n.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(n),a.byteLength),c.buffer},binaryDecode(e){let t=new DataView(e),i=t.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.push:return this.decodePush(e,t,r);case this.KINDS.reply:return this.decodeReply(e,t,r);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,r)}},decodePush(e,t,i){let r=t.getUint8(1),s=t.getUint8(2),n=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,a=i.decode(e.slice(o,o+r));o=o+r;let l=i.decode(e.slice(o,o+s));o=o+s;let h=i.decode(e.slice(o,o+n));o=o+n;let c=e.slice(o,e.byteLength);return{join_ref:a,ref:null,topic:l,event:h,payload:c}},decodeReply(e,t,i){let r=t.getUint8(1),s=t.getUint8(2),n=t.getUint8(3),o=t.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=i.decode(e.slice(a,a+r));a=a+r;let h=i.decode(e.slice(a,a+s));a=a+s;let c=i.decode(e.slice(a,a+n));a=a+n;let p=i.decode(e.slice(a,a+o));a=a+o;let f=e.slice(a,e.byteLength),m={status:p,response:f};return{join_ref:l,ref:h,topic:c,event:q.reply,payload:m}},decodeBroadcast(e,t,i){let r=t.getUint8(1),s=t.getUint8(2),n=this.HEADER_LENGTH+2,o=i.decode(e.slice(n,n+r));n=n+r;let a=i.decode(e.slice(n,n+s));n=n+s;let l=e.slice(n,e.byteLength);return{join_ref:null,ref:null,topic:o,event:a,payload:l}}},Ht=class{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||Hi,this.transport=t.transport||ce.WebSocket||xe,this.longPollFallbackMs=t.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=t.sessionStorage||ce.sessionStorage,this.establishedConnections=0,this.defaultEncoder=Fe.encode.bind(Fe),this.defaultDecoder=Fe.decode.bind(Fe),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==xe?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;ye&&ye.addEventListener&&(ye.addEventListener("pagehide",r=>{this.conn&&(this.disconnect(),i=this.connectClock)}),ye.addEventListener("pageshow",r=>{i===this.connectClock&&(i=null,this.connect())})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=r=>t.rejoinAfterMs?t.rejoinAfterMs(r):[1e3,2e3,5e3][r-1]||1e4,this.reconnectAfterMs=r=>t.reconnectAfterMs?t.reconnectAfterMs(r):[10,50,100,150,200,250,500,1e3,2e3][r-1]||5e3,this.logger=t.logger||null,!this.logger&&t.debug&&(this.logger=(r,s,n)=>{console.log(`${r}: ${s}`,n)}),this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=be(t.params||{}),this.endPoint=`${e}/${ht.websocket}`,this.vsn=t.vsn||Mi,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Mt(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return xe}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=He.appendParams(He.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,i){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(e,t,i)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=be(e)),!this.conn&&(this.longPollFallbackMs&&this.transport!==xe?this.connectWithFallback(xe,this.longPollFallbackMs):this.transportConnect())}log(e,t,i){this.logger&&this.logger(e,t,i)}hasLogger(){return this.logger!==null}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}ping(e){if(!this.isConnected())return!1;let t=this.makeRef(),i=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t});let r=this.onMessage(s=>{s.ref===t&&(this.off([r]),e(Date.now()-i))});return!0}transportConnect(){this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e)}getSession(e){return this.sessionStore&&this.sessionStore.getItem(e)}storeSession(e,t){this.sessionStore&&this.sessionStore.setItem(e,t)}connectWithFallback(e,t=2500){clearTimeout(this.fallbackTimer);let i=!1,r=!0,s,n,o=a=>{this.log("transport",`falling back to ${e.name}...`,a),this.off([s,n]),r=!1,this.storeSession("phx:longpoll","true"),this.replaceTransport(e),this.transportConnect()};if(this.getSession("phx:longpoll"))return o("memorized");this.fallbackTimer=setTimeout(o,t),n=this.onError(a=>{this.log("transport","error",a),r&&!i&&(clearTimeout(this.fallbackTimer),o(a))}),this.onOpen(()=>{if(i=!0,!r)return console.log("transport",`established ${e.name} fallback`);clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(o,t),this.ping(a=>{this.log("transport","connected to primary after",a),clearTimeout(this.fallbackTimer)})}),this.transportConnect()}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),Fi,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,i){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(t?this.conn.close(t,i||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,t=1){if(t===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,t+1)},150*t)}waitForSocketClosed(e,t=1){if(t===5||!this.conn||this.conn.readyState===V.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,t+1)},150*t)}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&t!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,i=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,r])=>{r(e,t,i)}),(t===this.transport||i>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(q.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case V.connecting:return"connecting";case V.open:return"open";case V.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([i])=>e.indexOf(i)===-1)}channel(e,t={}){let i=new Bi(e,t,this);return this.channels.push(i),i}push(e){if(this.hasLogger()){let{topic:t,event:i,payload:r,ref:s,join_ref:n}=e;this.log("push",`${t} ${i} (${n}, ${s})`,r)}this.isConnected()?this.encode(e,t=>this.conn.send(t)):this.sendBuffer.push(()=>this.encode(e,t=>this.conn.send(t)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:r,payload:s,ref:n,join_ref:o}=t;n&&n===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${s.status||""} ${i} ${r} ${n&&"("+n+")"||""}`,s);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];!l.isMember(i,r,s,o)||l.trigger(r,s,n,o)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(t)}})}leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i.isJoined()||i.isJoining()));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}};var Ft="consecutive-reloads",Vi=10,ji=5e3,Ji=1e4,zi=3e4,Wi=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading","phx-hook-loading"],K="data-phx-component",ct="data-phx-link",Xi="track-static",qi="data-phx-link-state",F="data-phx-ref",ne="data-phx-ref-src",Nt="track-uploads",G="data-phx-upload-ref",dt="data-phx-preflighted-refs",Ki="data-phx-done-refs",Bt="drop-target",ut="data-phx-active-refs",Ne="phx:live-file:updated",$t="data-phx-skip",Vt="data-phx-id",jt="data-phx-prune",Jt="page-loading",zt="phx-connected",Se="phx-loading",Be="phx-no-feedback",$e="phx-error",Wt="phx-client-error",ft="phx-server-error",oe="data-phx-parent-id",pt="data-phx-main",ae="data-phx-root-id",mt="viewport-top",gt="viewport-bottom",Gi="trigger-action",Ve="feedback-for",je="feedback-group",vt="phx-has-focused",Yi=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],Xt=["checkbox","radio"],Je="phx-has-submitted",Y="data-phx-session",de=`[${Y}]`,qt="data-phx-sticky",ue="data-phx-static",wt="data-phx-readonly",fe="data-phx-disabled",bt="disable-with",ze="data-phx-disable-with-restore",Ee="hook",Zi="debounce",Qi="throttle",We="update",yt="stream",xt="data-phx-stream",er="key",j="phxPrivate",Kt="auto-recover",Xe="phx:live-socket:debug",St="phx:live-socket:profiling",Et="phx:live-socket:latency-sim",tr="progress",Gt="mounted",ir=1,rr=200,sr="phx-",nr=3e4,Ae="debounce-trigger",ke="throttled",Yt="debounce-prev-key",or={debounce:300,throttle:300},qe="d",J="s",At="r",D="c",Zt="e",Qt="r",ei="t",ar="p",ti="stream",lr=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.errored=!1,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){this.errored||(this.uploadChannel.leave(),this.errored=!0,clearTimeout(this.chunkTimer),this.entry.error(e))}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return H("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))}).receive("error",({reason:t})=>this.error(t))}},H=(e,t)=>console.error&&console.error(e,t),Z=e=>{let t=typeof e;return t==="number"||t==="string"&&/^(0|[1-9]\d*)$/.test(e)};function hr(){let e=new Set,t=document.querySelectorAll("*[id]");for(let i=0,r=t.length;i<r;i++)e.has(t[i].id)?console.error(`Multiple IDs detected: ${t[i].id}. Ensure unique element ids.`):e.add(t[i].id)}var cr=(e,t,i,r)=>{e.liveSocket.isDebugEnabled()&&console.log(`${e.id} ${t}: ${i} - `,r)},Te=e=>typeof e=="function"?e:function(){return e},Ke=e=>JSON.parse(JSON.stringify(e)),Ce=(e,t,i)=>{do{if(e.matches(`[${t}]`)&&!e.disabled)return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1&&!(i&&i.isSameNode(e)||e.matches(de)));return null},pe=e=>e!==null&&typeof e=="object"&&!(e instanceof Array),dr=(e,t)=>JSON.stringify(e)===JSON.stringify(t),ii=e=>{for(let t in e)return!1;return!0},te=(e,t)=>e&&t(e),ur=function(e,t,i,r){e.forEach(s=>{new lr(s,i.config.chunk_size,r).upload()})},ri={canPushState(){return typeof history.pushState!="undefined"},dropLocal(e,t,i){return e.removeItem(this.localKey(t,i))},updateLocal(e,t,i,r,s){let n=this.getLocal(e,t,i),o=this.localKey(t,i),a=n===null?r:s(n);return e.setItem(o,JSON.stringify(a)),a},getLocal(e,t,i){return JSON.parse(e.getItem(this.localKey(t,i)))},updateCurrentState(e){!this.canPushState()||history.replaceState(e(history.state||{}),"",window.location.href)},pushState(e,t,i){if(this.canPushState()){if(i!==window.location.href){if(t.type=="redirect"&&t.scroll){let s=history.state||{};s.scroll=t.scroll,history.replaceState(s,"",window.location.href)}delete t.scroll,history[e+"State"](t,"",i||null);let r=this.getHashTargetEl(window.location.hash);r?r.scrollIntoView():t.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(e,t){document.cookie=`${e}=${t}`},getCookie(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${e}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(e,t){t&&ri.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e},localKey(e,t){return`${e}-${t}`},getHashTargetEl(e){let t=e.toString().substring(1);if(t!=="")return document.getElementById(t)||document.querySelector(`a[name="${t}"]`)}},z=ri,fr={focusMain(){let e=document.querySelector("main h1, main, h1");if(e){let t=e.tabIndex;e.tabIndex=-1,e.focus(),e.tabIndex=t}},anyOf(e,t){return t.find(i=>e instanceof i)},isFocusable(e,t){return e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||!e.disabled&&this.anyOf(e,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true"},attemptFocus(e,t){if(this.isFocusable(e,t))try{e.focus()}catch(i){}return!!document.activeElement&&document.activeElement.isSameNode(e)},focusFirstInteractive(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t,!0)||this.focusFirstInteractive(t,!0))return!0;t=t.nextElementSibling}},focusFirst(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t)||this.focusFirst(t))return!0;t=t.nextElementSibling}},focusLast(e){let t=e.lastElementChild;for(;t;){if(this.attemptFocus(t)||this.focusLast(t))return!0;t=t.previousElementSibling}}},me=fr,si=[],ni=200,pr={exec(e,t,i,r,s){let[n,o]=s||[null,{callback:s&&s.callback}];(t.charAt(0)==="["?JSON.parse(t):[[n,o]]).forEach(([l,h])=>{l===n&&o.data&&(h.data=Object.assign(h.data||{},o.data),h.callback=h.callback||o.callback),this.filterToEls(r,h).forEach(c=>{this[`exec_${l}`](e,t,i,r,c,h)})})},isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length>0)},isInViewport(e){let t=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth;return t.right>0&&t.bottom>0&&t.left<r&&t.top<i},exec_exec(e,t,i,r,s,{attr:n,to:o}){(o?d.all(document,o):[r]).forEach(l=>{let h=l.getAttribute(n);if(!h)throw new Error(`expected ${n} to contain JS command on "${o}"`);i.liveSocket.execJS(l,h,e)})},exec_dispatch(e,t,i,r,s,{to:n,event:o,detail:a,bubbles:l}){a=a||{},a.dispatcher=r,d.dispatchEvent(s,o,{detail:a,bubbles:l})},exec_push(e,t,i,r,s,n){let{event:o,data:a,target:l,page_loading:h,loading:c,value:p,dispatcher:f,callback:m}=n,v={loading:c,value:p,target:l,page_loading:!!h},b=e==="change"&&f?f:r,x=l||b.getAttribute(i.binding("target"))||b;i.withinTargets(x,(g,w)=>{if(!!g.isConnected())if(e==="change"){let{newCid:k,_target:C}=n;C=C||(d.isFormInput(r)?r.name:void 0),C&&(v._target=C),g.pushInput(r,w,k,o||t,v,m)}else if(e==="submit"){let{submitter:k}=n;g.submitForm(r,w,o||t,k,v,m)}else g.pushEvent(e,r,w,o||t,a,v,m)})},exec_navigate(e,t,i,r,s,{href:n,replace:o}){i.liveSocket.historyRedirect(n,o?"replace":"push")},exec_patch(e,t,i,r,s,{href:n,replace:o}){i.liveSocket.pushHistoryPatch(n,o?"replace":"push",r)},exec_focus(e,t,i,r,s){window.requestAnimationFrame(()=>me.attemptFocus(s))},exec_focus_first(e,t,i,r,s){window.requestAnimationFrame(()=>me.focusFirstInteractive(s)||me.focusFirst(s))},exec_push_focus(e,t,i,r,s){window.requestAnimationFrame(()=>si.push(s||r))},exec_pop_focus(e,t,i,r,s){window.requestAnimationFrame(()=>{let n=si.pop();n&&n.focus()})},exec_add_class(e,t,i,r,s,{names:n,transition:o,time:a}){this.addOrRemoveClasses(s,n,[],o,a,i)},exec_remove_class(e,t,i,r,s,{names:n,transition:o,time:a}){this.addOrRemoveClasses(s,[],n,o,a,i)},exec_toggle_class(e,t,i,r,s,{to:n,names:o,transition:a,time:l}){this.toggleClasses(s,o,a,l,i)},exec_toggle_attr(e,t,i,r,s,{attr:[n,o,a]}){s.hasAttribute(n)?a!==void 0?s.getAttribute(n)===o?this.setOrRemoveAttrs(s,[[n,a]],[]):this.setOrRemoveAttrs(s,[[n,o]],[]):this.setOrRemoveAttrs(s,[],[n]):this.setOrRemoveAttrs(s,[[n,o]],[])},exec_transition(e,t,i,r,s,{time:n,transition:o}){this.addOrRemoveClasses(s,[],[],o,n,i)},exec_toggle(e,t,i,r,s,{display:n,ins:o,outs:a,time:l}){this.toggle(e,i,s,n,o,a,l)},exec_show(e,t,i,r,s,{display:n,transition:o,time:a}){this.show(e,i,s,n,o,a)},exec_hide(e,t,i,r,s,{display:n,transition:o,time:a}){this.hide(e,i,s,n,o,a)},exec_set_attr(e,t,i,r,s,{attr:[n,o]}){this.setOrRemoveAttrs(s,[[n,o]],[])},exec_remove_attr(e,t,i,r,s,{attr:n}){this.setOrRemoveAttrs(s,[],[n])},show(e,t,i,r,s,n){this.isVisible(i)||this.toggle(e,t,i,r,s,null,n)},hide(e,t,i,r,s,n){this.isVisible(i)&&this.toggle(e,t,i,r,null,s,n)},toggle(e,t,i,r,s,n,o){o=o||ni;let[a,l,h]=s||[[],[],[]],[c,p,f]=n||[[],[],[]];if(a.length>0||c.length>0)if(this.isVisible(i)){let m=()=>{this.addOrRemoveClasses(i,p,a.concat(l).concat(h)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,c,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,f,p))})};i.dispatchEvent(new Event("phx:hide-start")),t.transition(o,m,()=>{this.addOrRemoveClasses(i,[],c.concat(f)),d.putSticky(i,"toggle",v=>v.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))})}else{if(e==="remove")return;let m=()=>{this.addOrRemoveClasses(i,l,c.concat(p).concat(f));let v=r||this.defaultDisplay(i);d.putSticky(i,"toggle",b=>b.style.display=v),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,h,l))})};i.dispatchEvent(new Event("phx:show-start")),t.transition(o,m,()=>{this.addOrRemoveClasses(i,[],a.concat(h)),i.dispatchEvent(new Event("phx:show-end"))})}else this.isVisible(i)?window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:hide-start")),d.putSticky(i,"toggle",m=>m.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:show-start"));let m=r||this.defaultDisplay(i);d.putSticky(i,"toggle",v=>v.style.display=m),i.dispatchEvent(new Event("phx:show-end"))})},toggleClasses(e,t,i,r,s){window.requestAnimationFrame(()=>{let[n,o]=d.getSticky(e,"classes",[[],[]]),a=t.filter(h=>n.indexOf(h)<0&&!e.classList.contains(h)),l=t.filter(h=>o.indexOf(h)<0&&e.classList.contains(h));this.addOrRemoveClasses(e,a,l,i,r,s)})},addOrRemoveClasses(e,t,i,r,s,n){s=s||ni;let[o,a,l]=r||[[],[],[]];if(o.length>0){let h=()=>{this.addOrRemoveClasses(e,a,[].concat(o).concat(l)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(e,o,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(e,l,a))})},c=()=>this.addOrRemoveClasses(e,t.concat(l),i.concat(o).concat(a));return n.transition(s,h,c)}window.requestAnimationFrame(()=>{let[h,c]=d.getSticky(e,"classes",[[],[]]),p=t.filter(b=>h.indexOf(b)<0&&!e.classList.contains(b)),f=i.filter(b=>c.indexOf(b)<0&&e.classList.contains(b)),m=h.filter(b=>i.indexOf(b)<0).concat(p),v=c.filter(b=>t.indexOf(b)<0).concat(f);d.putSticky(e,"classes",b=>(b.classList.remove(...v),b.classList.add(...m),[m,v]))})},setOrRemoveAttrs(e,t,i){let[r,s]=d.getSticky(e,"attrs",[[],[]]),n=t.map(([l,h])=>l).concat(i),o=r.filter(([l,h])=>!n.includes(l)).concat(t),a=s.filter(l=>!n.includes(l)).concat(i);d.putSticky(e,"attrs",l=>(a.forEach(h=>l.removeAttribute(h)),o.forEach(([h,c])=>l.setAttribute(h,c)),[o,a]))},hasAllClasses(e,t){return t.every(i=>e.classList.contains(i))},isToggledOut(e,t){return!this.isVisible(e)||this.hasAllClasses(e,t)},filterToEls(e,{to:t}){return t?d.all(document,t):[e]},defaultDisplay(e){return{tr:"table-row",td:"table-cell"}[e.tagName.toLowerCase()]||"block"}},L=pr,B={byId(e){return document.getElementById(e)||H(`no id found for ${e}`)},removeClass(e,t){e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class")},all(e,t,i){if(!e)return[];let r=Array.from(e.querySelectorAll(t));return i?r.forEach(i):r},childNodeLength(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childElementCount},isUploadInput(e){return e.type==="file"&&e.getAttribute(G)!==null},isAutoUpload(e){return e.hasAttribute("data-phx-auto-upload")},findUploadInputs(e){let t=e.id,i=this.all(document,`input[type="file"][${G}][form="${t}"]`);return this.all(e,`input[type="file"][${G}]`).concat(i)},findComponentNodeList(e,t){return this.filterWithinSameLiveView(this.all(e,`[${K}="${t}"]`),e)},isPhxDestroyed(e){return!!(e.id&&B.private(e,"destroyed"))},wantsNewTab(e){let t=e.ctrlKey||e.shiftKey||e.metaKey||e.button&&e.button===1,i=e.target instanceof HTMLAnchorElement&&e.target.hasAttribute("download"),r=e.target.hasAttribute("target")&&e.target.getAttribute("target").toLowerCase()==="_blank",s=e.target.hasAttribute("target")&&!e.target.getAttribute("target").startsWith("_");return t||r||i||s},isUnloadableFormSubmit(e){return e.target&&e.target.getAttribute("method")==="dialog"||e.submitter&&e.submitter.getAttribute("formmethod")==="dialog"?!1:!e.defaultPrevented&&!this.wantsNewTab(e)},isNewPageClick(e,t){let i=e.target instanceof HTMLAnchorElement?e.target.getAttribute("href"):null,r;if(e.defaultPrevented||i===null||this.wantsNewTab(e)||i.startsWith("mailto:")||i.startsWith("tel:")||e.target.isContentEditable)return!1;try{r=new URL(i)}catch(s){try{r=new URL(i,t)}catch(n){return!0}}return r.host===t.host&&r.protocol===t.protocol&&r.pathname===t.pathname&&r.search===t.search?r.hash===""&&!r.href.endsWith("#"):r.protocol.startsWith("http")},markPhxChildDestroyed(e){this.isPhxChild(e)&&e.setAttribute(Y,""),this.putPrivate(e,"destroyed",!0)},findPhxChildrenInFragment(e,t){let i=document.createElement("template");return i.innerHTML=e,this.findPhxChildren(i.content,t)},isIgnored(e,t){return(e.getAttribute(t)||e.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(e,t,i){return e.getAttribute&&i.indexOf(e.getAttribute(t))>=0},findPhxSticky(e){return this.all(e,`[${qt}]`)},findPhxChildren(e,t){return this.all(e,`${de}[${oe}="${t}"]`)},findExistingParentCIDs(e,t){let i=new Set,r=new Set;return t.forEach(s=>{this.filterWithinSameLiveView(this.all(e,`[${K}="${s}"]`),e).forEach(n=>{i.add(s),this.all(n,`[${K}]`).map(o=>parseInt(o.getAttribute(K))).forEach(o=>r.add(o))})}),r.forEach(s=>i.delete(s)),i},filterWithinSameLiveView(e,t){return t.querySelector(de)?e.filter(i=>this.withinSameLiveView(i,t)):e},withinSameLiveView(e,t){for(;e=e.parentNode;){if(e.isSameNode(t))return!0;if(e.getAttribute(Y)!==null)return!1}},private(e,t){return e[j]&&e[j][t]},deletePrivate(e,t){e[j]&&delete e[j][t]},putPrivate(e,t,i){e[j]||(e[j]={}),e[j][t]=i},updatePrivate(e,t,i,r){let s=this.private(e,t);s===void 0?this.putPrivate(e,t,r(i)):this.putPrivate(e,t,r(s))},copyPrivates(e,t){t[j]&&(e[j]=t[j])},putTitle(e){let t=document.querySelector("title");if(t){let{prefix:i,suffix:r}=t.dataset;document.title=`${i||""}${e}${r||""}`}else document.title=e},debounce(e,t,i,r,s,n,o,a){let l=e.getAttribute(i),h=e.getAttribute(s);l===""&&(l=r),h===""&&(h=n);let c=l||h;switch(c){case null:return a();case"blur":this.once(e,"debounce-blur")&&e.addEventListener("blur",()=>{o()&&a()});return;default:let p=parseInt(c),f=()=>h?this.deletePrivate(e,ke):a(),m=this.incCycle(e,Ae,f);if(isNaN(p))return H(`invalid throttle/debounce value: ${c}`);if(h){let b=!1;if(t.type==="keydown"){let x=this.private(e,Yt);this.putPrivate(e,Yt,t.key),b=x!==t.key}if(!b&&this.private(e,ke))return!1;{a();let x=setTimeout(()=>{o()&&this.triggerCycle(e,Ae)},p);this.putPrivate(e,ke,x)}}else setTimeout(()=>{o()&&this.triggerCycle(e,Ae,m)},p);let v=e.form;v&&this.once(v,"bind-debounce")&&v.addEventListener("submit",()=>{Array.from(new FormData(v).entries(),([b])=>{let x=v.querySelector(`[name="${b}"]`);this.incCycle(x,Ae),this.deletePrivate(x,ke)})}),this.once(e,"bind-debounce")&&e.addEventListener("blur",()=>{clearTimeout(this.private(e,ke)),this.triggerCycle(e,Ae)})}},triggerCycle(e,t,i){let[r,s]=this.private(e,t);i||(i=r),i===r&&(this.incCycle(e,t),s())},once(e,t){return this.private(e,t)===!0?!1:(this.putPrivate(e,t,!0),!0)},incCycle(e,t,i=function(){}){let[r]=this.private(e,t)||[0,i];return r++,this.putPrivate(e,t,[r,i]),r},maybeAddPrivateHooks(e,t,i){e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute(i))&&e.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},isFeedbackContainer(e,t){return e.hasAttribute&&e.hasAttribute(t)},maybeHideFeedback(e,t,i,r){let s={};t.forEach(n=>{if(!e.contains(n))return;let o=n.getAttribute(i);if(!o){L.addOrRemoveClasses(n,[],[Be]);return}if(s[o]===!0){this.hideFeedback(n);return}s[o]=this.shouldHideFeedback(e,o,r),s[o]===!0&&this.hideFeedback(n)})},hideFeedback(e){L.addOrRemoveClasses(e,[Be],[])},shouldHideFeedback(e,t,i){let r=`[name="${t}"],
                   [name="${t}[]"],
                   [${i}="${t}"]`,s=!1;return B.all(e,r,n=>{(this.private(n,vt)||this.private(n,Je))&&(s=!0)}),!s},feedbackSelector(e,t,i){let r=`[${t}="${e.name}"],
                 [${t}="${e.name.replace(/\[\]$/,"")}"]`;return e.getAttribute(i)&&(r+=`,[${t}="${e.getAttribute(i)}"]`),r},resetForm(e,t,i){Array.from(e.elements).forEach(r=>{let s=this.feedbackSelector(r,t,i);this.deletePrivate(r,vt),this.deletePrivate(r,Je),this.all(document,s,n=>{L.addOrRemoveClasses(n,[Be],[])})})},showError(e,t,i){if(e.name){let r=this.feedbackSelector(e,t,i);this.all(document,r,s=>{L.addOrRemoveClasses(s,[],[Be])})}},isPhxChild(e){return e.getAttribute&&e.getAttribute(oe)},isPhxSticky(e){return e.getAttribute&&e.getAttribute(qt)!==null},isChildOfAny(e,t){return!!t.find(i=>i.contains(e))},firstPhxChild(e){return this.isPhxChild(e)?e:this.all(e,`[${oe}]`)[0]},dispatchEvent(e,t,i={}){let r=!0;e.nodeName==="INPUT"&&e.type==="file"&&t==="click"&&(r=!1);let o={bubbles:i.bubbles===void 0?r:!!i.bubbles,cancelable:!0,detail:i.detail||{}},a=t==="click"?new MouseEvent("click",o):new CustomEvent(t,o);e.dispatchEvent(a)},cloneNode(e,t){if(typeof t=="undefined")return e.cloneNode(!0);{let i=e.cloneNode(!1);return i.innerHTML=t,i}},mergeAttrs(e,t,i={}){let r=new Set(i.exclude||[]),s=i.isIgnored,n=t.attributes;for(let a=n.length-1;a>=0;a--){let l=n[a].name;if(r.has(l))l==="value"&&e.value===t.value&&e.setAttribute("value",t.getAttribute(l));else{let h=t.getAttribute(l);e.getAttribute(l)!==h&&(!s||s&&l.startsWith("data-"))&&e.setAttribute(l,h)}}let o=e.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;s?l.startsWith("data-")&&!t.hasAttribute(l)&&![F,ne].includes(l)&&e.removeAttribute(l):t.hasAttribute(l)||e.removeAttribute(l)}},mergeFocusedInput(e,t){e instanceof HTMLSelectElement||B.mergeAttrs(e,t,{exclude:["value"]}),t.readOnly?e.setAttribute("readonly",!0):e.removeAttribute("readonly")},hasSelectionRange(e){return e.setSelectionRange&&(e.type==="text"||e.type==="textarea")},restoreFocus(e,t,i){if(e instanceof HTMLSelectElement&&e.focus(),!B.isTextualInput(e))return;e.matches(":focus")||e.focus(),this.hasSelectionRange(e)&&e.setSelectionRange(t,i)},isFormInput(e){return/^(?:input|select|textarea)$/i.test(e.tagName)&&e.type!=="button"},syncAttrsToProps(e){e instanceof HTMLInputElement&&Xt.indexOf(e.type.toLocaleLowerCase())>=0&&(e.checked=e.getAttribute("checked")!==null)},isTextualInput(e){return Yi.indexOf(e.type)>=0},isNowTriggerFormExternal(e,t){return e.getAttribute&&e.getAttribute(t)!==null},syncPendingRef(e,t,i){if(e.getAttribute(F)===null)return!0;let s=e.getAttribute(ne);return B.isUploadInput(e)&&B.mergeAttrs(e,t,{isIgnored:!0}),B.putPrivate(e,F,t),!1},cleanChildNodes(e,t){if(B.isPhxUpdate(e,t,["append","prepend"])){let i=[];e.childNodes.forEach(r=>{r.id||(!(r.nodeType===Node.TEXT_NODE&&r.nodeValue.trim()==="")&&r.nodeType!==Node.COMMENT_NODE&&H(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(r.outerHTML||r.nodeValue).trim()}"

`),i.push(r))}),i.forEach(r=>r.remove())}},replaceRootContainer(e,t,i){let r=new Set(["id",Y,ue,pt,ae]);if(e.tagName.toLowerCase()===t.toLowerCase())return Array.from(e.attributes).filter(s=>!r.has(s.name.toLowerCase())).forEach(s=>e.removeAttribute(s.name)),Object.keys(i).filter(s=>!r.has(s.toLowerCase())).forEach(s=>e.setAttribute(s,i[s])),e;{let s=document.createElement(t);return Object.keys(i).forEach(n=>s.setAttribute(n,i[n])),r.forEach(n=>s.setAttribute(n,e.getAttribute(n))),s.innerHTML=e.innerHTML,e.replaceWith(s),s}},getSticky(e,t,i){let r=(B.private(e,"sticky")||[]).find(([s])=>t===s);if(r){let[s,n,o]=r;return o}else return typeof i=="function"?i():i},deleteSticky(e,t){this.updatePrivate(e,"sticky",[],i=>i.filter(([r,s])=>r!==t))},putSticky(e,t,i){let r=i(e);this.updatePrivate(e,"sticky",[],s=>{let n=s.findIndex(([o])=>t===o);return n>=0?s[n]=[t,i,r]:s.push([t,i,r]),s})},applyStickyOperations(e){let t=B.private(e,"sticky");!t||t.forEach(([i,r,s])=>this.putSticky(e,i,r))}},d=B,_e=class{static isActive(e,t){let i=t._phxRef===void 0,s=e.getAttribute(ut).split(",").indexOf(I.genFileRef(t))>=0;return t.size>0&&(i||s)}static isPreflighted(e,t){return e.getAttribute(dt).split(",").indexOf(I.genFileRef(t))>=0&&this.isActive(e,t)}static isPreflightInProgress(e){return e._preflightInProgress===!0}static markPreflightInProgress(e){e._preflightInProgress=!0}constructor(e,t,i,r){this.ref=I.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(Ne,this._onElUpdated),this.autoUpload=r}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{I.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}isCancelled(){return this._isCancelled}cancel(){this.file._preflightInProgress=!1,this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(Ne,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),this.isAutoUpload()||I.clearFiles(this.fileEl)}isAutoUpload(){return this.autoUpload}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(Ne,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(ut).split(",").indexOf(this.ref)===-1&&(I.untrackFile(this.fileEl,this.file),this.cancel())}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref,meta:typeof this.file.meta=="function"?this.file.meta():void 0}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||H(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:ur}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||H(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}},mr=0,I=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(mr++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let r=this.activeFiles(e).find(s=>this.genFileRef(s)===t);i(URL.createObjectURL(r))}static hasUploadsInProgress(e){let t=0;return d.findUploadInputs(e).forEach(i=>{i.getAttribute(dt)!==i.getAttribute(Ki)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(r=>{let s={path:e.name},n=e.getAttribute(G);i[n]=i[n]||[],s.ref=this.genFileRef(r),s.last_modified=r.lastModified,s.name=r.name||s.ref,s.relative_path=r.webkitRelativePath,s.type=r.type,s.size=r.size,typeof r.meta=="function"&&(s.meta=r.meta()),i[n].push(s)}),i}static clearFiles(e){e.value=null,e.removeAttribute(G),d.putPrivate(e,"files",[])}static untrackFile(e,t){d.putPrivate(e,"files",d.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t,i){if(e.getAttribute("multiple")!==null){let r=t.filter(s=>!this.activeFiles(e).find(n=>Object.is(n,s)));d.updatePrivate(e,"files",[],s=>s.concat(r)),e.value=null}else i&&i.files.length>0&&(e.files=i.files),d.putPrivate(e,"files",t)}static activeFileInputs(e){let t=d.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(d.private(e,"files")||[]).filter(t=>_e.isActive(e,t))}static inputsAwaitingPreflight(e){let t=d.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!_e.isPreflighted(e,t)&&!_e.isPreflightInProgress(t))}static markPreflightInProgress(e){e.forEach(t=>_e.markPreflightInProgress(t.file))}constructor(e,t,i){this.autoUpload=d.isAutoUpload(e),this.view=t,this.onComplete=i,this._entries=Array.from(I.filesAwaitingPreflight(e)||[]).map(r=>new _e(e,r,t,this.autoUpload)),I.markPreflightInProgress(this._entries),this.numEntriesInProgress=this._entries.length}isAutoUpload(){return this.autoUpload}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(s=>(s.isCancelled()?(this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()):(s.zipPostFlight(e),s.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()})),s));let r=this._entries.reduce((s,n)=>{if(!n.meta)return s;let{name:o,callback:a}=n.uploader(i.uploaders);return s[o]=s[o]||{callback:a,entries:[]},s[o].entries.push(n),s},{});for(let s in r){let{callback:n,entries:o}=r[s];n(o,t,e,i)}}},oi={LiveFileUpload:{activeRefs(){return this.el.getAttribute(ut)},preflightedRefs(){return this.el.getAttribute(dt)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let e=this.preflightedRefs();this.preflightedWas!==e&&(this.preflightedWas=e,e===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(Ne))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(G)),I.getEntryDataURL(this.inputEl,this.ref,e=>{this.url=e,this.el.src=e})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>me.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>me.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&me.focusFirst(this.el)}}},ai=e=>["HTML","BODY"].indexOf(e.nodeName.toUpperCase())>=0?null:["scroll","auto"].indexOf(getComputedStyle(e).overflowY)>=0?e:ai(e.parentElement),li=e=>e?e.scrollTop:document.documentElement.scrollTop||document.body.scrollTop,kt=e=>e?e.getBoundingClientRect().bottom:window.innerHeight||document.documentElement.clientHeight,Tt=e=>e?e.getBoundingClientRect().top:0,gr=(e,t)=>{let i=e.getBoundingClientRect();return i.top>=Tt(t)&&i.left>=0&&i.top<=kt(t)},vr=(e,t)=>{let i=e.getBoundingClientRect();return i.right>=Tt(t)&&i.left>=0&&i.bottom<=kt(t)},hi=(e,t)=>{let i=e.getBoundingClientRect();return i.top>=Tt(t)&&i.left>=0&&i.top<=kt(t)};oi.InfiniteScroll={mounted(){this.scrollContainer=ai(this.el);let e=li(this.scrollContainer),t=!1,i=500,r=null,s=this.throttle(i,(a,l)=>{r=()=>!0,this.liveSocket.execJSHookPush(this.el,a,{id:l.id,_overran:!0},()=>{r=null})}),n=this.throttle(i,(a,l)=>{r=()=>l.scrollIntoView({block:"start"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{r=null,window.requestAnimationFrame(()=>{hi(l,this.scrollContainer)||l.scrollIntoView({block:"start"})})})}),o=this.throttle(i,(a,l)=>{r=()=>l.scrollIntoView({block:"end"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{r=null,window.requestAnimationFrame(()=>{hi(l,this.scrollContainer)||l.scrollIntoView({block:"end"})})})});this.onScroll=a=>{let l=li(this.scrollContainer);if(r)return e=l,r();let h=this.el.getBoundingClientRect(),c=this.el.getAttribute(this.liveSocket.binding("viewport-top")),p=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),f=this.el.lastElementChild,m=this.el.firstElementChild,v=l<e,b=l>e;v&&c&&!t&&h.top>=0?(t=!0,s(c,m)):b&&t&&h.top<=0&&(t=!1),c&&v&&gr(m,this.scrollContainer)?n(c,m):p&&b&&vr(f,this.scrollContainer)&&o(p,f),e=l},this.scrollContainer?this.scrollContainer.addEventListener("scroll",this.onScroll):window.addEventListener("scroll",this.onScroll)},destroyed(){this.scrollContainer?this.scrollContainer.removeEventListener("scroll",this.onScroll):window.removeEventListener("scroll",this.onScroll)},throttle(e,t){let i=0,r;return(...s)=>{let n=Date.now(),o=e-(n-i);o<=0||o>e?(r&&(clearTimeout(r),r=null),i=n,t(...s)):r||(r=setTimeout(()=>{i=Date.now(),r=null,t(...s)},o))}}};var wr=oi,br=class{constructor(e,t,i){let r=new Set,s=new Set([...t.children].map(o=>o.id)),n=[];Array.from(e.children).forEach(o=>{if(o.id&&(r.add(o.id),s.has(o.id))){let a=o.previousElementSibling&&o.previousElementSibling.id;n.push({elementId:o.id,previousElementId:a})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=n,this.elementIdsToAdd=[...s].filter(o=>!r.has(o))}perform(){let e=d.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?te(document.getElementById(t.previousElementId),i=>{te(document.getElementById(t.elementId),r=>{r.previousElementSibling&&r.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",r)})}):te(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{te(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}},ci=11;function yr(e,t){var i=t.attributes,r,s,n,o,a;if(!(t.nodeType===ci||e.nodeType===ci)){for(var l=i.length-1;l>=0;l--)r=i[l],s=r.name,n=r.namespaceURI,o=r.value,n?(s=r.localName||s,a=e.getAttributeNS(n,s),a!==o&&(r.prefix==="xmlns"&&(s=r.name),e.setAttributeNS(n,s,o))):(a=e.getAttribute(s),a!==o&&e.setAttribute(s,o));for(var h=e.attributes,c=h.length-1;c>=0;c--)r=h[c],s=r.name,n=r.namespaceURI,n?(s=r.localName||s,t.hasAttributeNS(n,s)||e.removeAttributeNS(n,s)):t.hasAttribute(s)||e.removeAttribute(s)}}var Ge,xr="http://www.w3.org/1999/xhtml",O=typeof document=="undefined"?void 0:document,Sr=!!O&&"content"in O.createElement("template"),Er=!!O&&O.createRange&&"createContextualFragment"in O.createRange();function Ar(e){var t=O.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function kr(e){Ge||(Ge=O.createRange(),Ge.selectNode(O.body));var t=Ge.createContextualFragment(e);return t.childNodes[0]}function Tr(e){var t=O.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Cr(e){return e=e.trim(),Sr?Ar(e):Er?kr(e):Tr(e)}function Ye(e,t){var i=e.nodeName,r=t.nodeName,s,n;return i===r?!0:(s=i.charCodeAt(0),n=r.charCodeAt(0),s<=90&&n>=97?i===r.toUpperCase():n<=90&&s>=97?r===i.toUpperCase():!1)}function _r(e,t){return!t||t===xr?O.createElement(e):O.createElementNS(t,e)}function Rr(e,t){for(var i=e.firstChild;i;){var r=i.nextSibling;t.appendChild(i),i=r}return t}function Ct(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var di={OPTION:function(e,t){var i=e.parentNode;if(i){var r=i.nodeName.toUpperCase();r==="OPTGROUP"&&(i=i.parentNode,r=i&&i.nodeName.toUpperCase()),r==="SELECT"&&!i.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}Ct(e,t,"selected")},INPUT:function(e,t){Ct(e,t,"checked"),Ct(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var r=e.firstChild;if(r){var s=r.nodeValue;if(s==i||!i&&s==e.placeholder)return;r.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i=-1,r=0,s=e.firstChild,n,o;s;)if(o=s.nodeName&&s.nodeName.toUpperCase(),o==="OPTGROUP")n=s,s=n.firstChild;else{if(o==="OPTION"){if(s.hasAttribute("selected")){i=r;break}r++}s=s.nextSibling,!s&&n&&(s=n.nextSibling,n=null)}e.selectedIndex=i}}},Re=1,ui=11,fi=3,pi=8;function ie(){}function Pr(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Ir(e){return function(i,r,s){if(s||(s={}),typeof r=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var n=r;r=O.createElement("html"),r.innerHTML=n}else r=Cr(r);else r.nodeType===ui&&(r=r.firstElementChild);var o=s.getNodeKey||Pr,a=s.onBeforeNodeAdded||ie,l=s.onNodeAdded||ie,h=s.onBeforeElUpdated||ie,c=s.onElUpdated||ie,p=s.onBeforeNodeDiscarded||ie,f=s.onNodeDiscarded||ie,m=s.onBeforeElChildrenUpdated||ie,v=s.skipFromChildren||ie,b=s.addChild||function(E,y){return E.appendChild(y)},x=s.childrenOnly===!0,g=Object.create(null),w=[];function k(E){w.push(E)}function C(E,y){if(E.nodeType===Re)for(var R=E.firstChild;R;){var A=void 0;y&&(A=o(R))?k(A):(f(R),R.firstChild&&C(R,y)),R=R.nextSibling}}function $(E,y,R){p(E)!==!1&&(y&&y.removeChild(E),f(E),C(E,R))}function P(E){if(E.nodeType===Re||E.nodeType===ui)for(var y=E.firstChild;y;){var R=o(y);R&&(g[R]=y),P(y),y=y.nextSibling}}P(i);function W(E){l(E);for(var y=E.firstChild;y;){var R=y.nextSibling,A=o(y);if(A){var _=g[A];_&&Ye(y,_)?(y.parentNode.replaceChild(_,y),u(_,y)):W(y)}else W(y);y=R}}function re(E,y,R){for(;y;){var A=y.nextSibling;(R=o(y))?k(R):$(y,E,!0),y=A}}function u(E,y,R){var A=o(y);A&&delete g[A],!(!R&&(h(E,y)===!1||(e(E,y),c(E),m(E,y)===!1)))&&(E.nodeName!=="TEXTAREA"?S(E,y):di.TEXTAREA(E,y))}function S(E,y){var R=v(E,y),A=y.firstChild,_=E.firstChild,le,X,he,Ue,Q;e:for(;A;){for(Ue=A.nextSibling,le=o(A);!R&&_;){if(he=_.nextSibling,A.isSameNode&&A.isSameNode(_)){A=Ue,_=he;continue e}X=o(_);var Oe=_.nodeType,ee=void 0;if(Oe===A.nodeType&&(Oe===Re?(le?le!==X&&((Q=g[le])?he===Q?ee=!1:(E.insertBefore(Q,_),X?k(X):$(_,E,!0),_=Q,X=o(_)):ee=!1):X&&(ee=!1),ee=ee!==!1&&Ye(_,A),ee&&u(_,A)):(Oe===fi||Oe==pi)&&(ee=!0,_.nodeValue!==A.nodeValue&&(_.nodeValue=A.nodeValue))),ee){A=Ue,_=he;continue e}X?k(X):$(_,E,!0),_=he}if(le&&(Q=g[le])&&Ye(Q,A))R||b(E,Q),u(Q,A);else{var lt=a(A);lt!==!1&&(lt&&(A=lt),A.actualize&&(A=A.actualize(E.ownerDocument||O)),b(E,A),W(A))}A=Ue,_=he}re(E,_,X);var Ut=di[E.nodeName];Ut&&Ut(E,y)}var T=i,U=T.nodeType,se=r.nodeType;if(!x){if(U===Re)se===Re?Ye(i,r)||(f(i),T=Rr(i,_r(r.nodeName,r.namespaceURI))):T=r;else if(U===fi||U===pi){if(se===U)return T.nodeValue!==r.nodeValue&&(T.nodeValue=r.nodeValue),T;T=r}}if(T===r)f(i);else{if(r.isSameNode&&r.isSameNode(T))return;if(u(T,r,x),w)for(var ot=0,Di=w.length;ot<Di;ot++){var at=g[w[ot]];at&&$(at,at.parentNode,!1)}}return!x&&T!==i&&i.parentNode&&(T.actualize&&(T=T.actualize(i.ownerDocument||O)),i.parentNode.replaceChild(T,i)),T}}var Dr=Ir(yr),mi=Dr,Ze=class{static patchEl(e,t,i){mi(e,t,{childrenOnly:!1,onBeforeElUpdated:(r,s)=>{if(i&&i.isSameNode(r)&&d.isFormInput(r))return d.mergeFocusedInput(r,s),!1}})}constructor(e,t,i,r,s,n){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=r,this.streams=s,this.streamInserts={},this.streamComponentRestore={},this.targetCID=n,this.cidPatch=Z(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){let e=this.liveSocket.binding(We);d.all(this.container,`[${e}=append] > *, [${e}=prepend] > *`,t=>{t.setAttribute(jt,"")})}perform(e){let{view:t,liveSocket:i,container:r,html:s}=this,n=this.isCIDPatch()?this.targetCIDContainer(s):r;if(this.isCIDPatch()&&!n)return;let o=i.getActiveElement(),{selectionStart:a,selectionEnd:l}=o&&d.hasSelectionRange(o)?o:{},h=i.binding(We),c=i.binding(Ve),p=i.binding(je),f=i.binding(bt),m=i.binding(mt),v=i.binding(gt),b=i.binding(Gi),x=[],g=[],w=[],k=[],C=null;function $(P,W,re=!1){mi(P,W,{childrenOnly:P.getAttribute(K)===null&&!re,getNodeKey:u=>d.isPhxDestroyed(u)?null:e?u.id:u.id||u.getAttribute&&u.getAttribute(Vt),skipFromChildren:u=>u.getAttribute(h)===yt,addChild:(u,S)=>{let{ref:T,streamAt:U}=this.getStreamInsert(S);if(T===void 0)return u.appendChild(S);if(this.setStreamRef(S,T),U===0)u.insertAdjacentElement("afterbegin",S);else if(U===-1)u.appendChild(S);else if(U>0){let se=Array.from(u.children)[U];u.insertBefore(S,se)}},onBeforeNodeAdded:u=>{d.maybeAddPrivateHooks(u,m,v),this.trackBefore("added",u);let S=u;return!e&&this.streamComponentRestore[u.id]&&(S=this.streamComponentRestore[u.id],delete this.streamComponentRestore[u.id],$.call(this,S,u,!0)),S},onNodeAdded:u=>{u.getAttribute&&this.maybeReOrderStream(u,!0),d.isFeedbackContainer(u,c)&&g.push(u),u instanceof HTMLImageElement&&u.srcset?u.srcset=u.srcset:u instanceof HTMLVideoElement&&u.autoplay&&u.play(),d.isNowTriggerFormExternal(u,b)&&(C=u),(d.isPhxChild(u)&&t.ownsElement(u)||d.isPhxSticky(u)&&t.ownsElement(u.parentNode))&&this.trackAfter("phxChildAdded",u),x.push(u)},onNodeDiscarded:u=>this.onNodeDiscarded(u),onBeforeNodeDiscarded:u=>u.getAttribute&&u.getAttribute(jt)!==null?!0:!(u.parentElement!==null&&u.id&&d.isPhxUpdate(u.parentElement,h,[yt,"append","prepend"])||this.maybePendingRemove(u)||this.skipCIDSibling(u)),onElUpdated:u=>{d.isNowTriggerFormExternal(u,b)&&(C=u),w.push(u),this.maybeReOrderStream(u,!1)},onBeforeElUpdated:(u,S)=>{if(d.maybeAddPrivateHooks(S,m,v),(d.isFeedbackContainer(u,c)||d.isFeedbackContainer(S,c))&&(g.push(u),g.push(S)),d.cleanChildNodes(S,h),this.skipCIDSibling(S))return this.maybeReOrderStream(u),!1;if(d.isPhxSticky(u))return!1;if(d.isIgnored(u,h)||u.form&&u.form.isSameNode(C))return this.trackBefore("updated",u,S),d.mergeAttrs(u,S,{isIgnored:d.isIgnored(u,h)}),w.push(u),d.applyStickyOperations(u),!1;if(u.type==="number"&&u.validity&&u.validity.badInput)return!1;if(!d.syncPendingRef(u,S,f))return d.isUploadInput(u)&&(this.trackBefore("updated",u,S),w.push(u)),d.applyStickyOperations(u),!1;if(d.isPhxChild(S)){let se=u.getAttribute(Y);return d.mergeAttrs(u,S,{exclude:[ue]}),se!==""&&u.setAttribute(Y,se),u.setAttribute(ae,this.rootID),d.applyStickyOperations(u),!1}d.copyPrivates(S,u);let T=o&&u.isSameNode(o)&&d.isFormInput(u),U=T&&this.isChangedSelect(u,S);return T&&u.type!=="hidden"&&!U?(this.trackBefore("updated",u,S),d.mergeFocusedInput(u,S),d.syncAttrsToProps(u),w.push(u),d.applyStickyOperations(u),!1):(U&&u.blur(),d.isPhxUpdate(S,h,["append","prepend"])&&k.push(new br(u,S,S.getAttribute(h))),d.syncAttrsToProps(S),d.applyStickyOperations(S),this.trackBefore("updated",u,S),!0)}})}return this.trackBefore("added",r),this.trackBefore("updated",r,r),i.time("morphdom",()=>{this.streams.forEach(([P,W,re,u])=>{W.forEach(([S,T,U])=>{this.streamInserts[S]={ref:P,streamAt:T,limit:U,reset:u}}),u!==void 0&&d.all(r,`[${xt}="${P}"]`,S=>{this.removeStreamChildElement(S)}),re.forEach(S=>{let T=r.querySelector(`[id="${S}"]`);T&&this.removeStreamChildElement(T)})}),e&&d.all(this.container,`[${h}=${yt}]`,P=>{this.liveSocket.owner(P,W=>{W===this.view&&Array.from(P.children).forEach(re=>{this.removeStreamChildElement(re)})})}),$.call(this,n,s)}),i.isDebugEnabled()&&(hr(),Array.from(document.querySelectorAll("input[name=id]")).forEach(P=>{P.form&&console.error(`Detected an input with name="id" inside a form! This will cause problems when patching the DOM.
`,P)})),k.length>0&&i.time("post-morph append/prepend restoration",()=>{k.forEach(P=>P.perform())}),d.maybeHideFeedback(n,g,c,p),i.silenceEvents(()=>d.restoreFocus(o,a,l)),d.dispatchEvent(document,"phx:update"),x.forEach(P=>this.trackAfter("added",P)),w.forEach(P=>this.trackAfter("updated",P)),this.transitionPendingRemoves(),C&&(i.unload(),Object.getPrototypeOf(C).submit.call(C)),!0}onNodeDiscarded(e){(d.isPhxChild(e)||d.isPhxSticky(e))&&this.liveSocket.destroyViewByEl(e),this.trackAfter("discarded",e)}maybePendingRemove(e){return e.getAttribute&&e.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(e),!0):!1}removeStreamChildElement(e){this.streamInserts[e.id]?(this.streamComponentRestore[e.id]=e,e.remove()):this.maybePendingRemove(e)||(e.remove(),this.onNodeDiscarded(e))}getStreamInsert(e){return(e.id?this.streamInserts[e.id]:{})||{}}setStreamRef(e,t){d.putSticky(e,xt,i=>i.setAttribute(xt,t))}maybeReOrderStream(e,t){let{ref:i,streamAt:r,reset:s}=this.getStreamInsert(e);if(r!==void 0&&(this.setStreamRef(e,i),!(!s&&!t)&&!!e.parentElement)){if(r===0)e.parentElement.insertBefore(e,e.parentElement.firstElementChild);else if(r>0){let n=Array.from(e.parentElement.children),o=n.indexOf(e);if(r>=n.length-1)e.parentElement.appendChild(e);else{let a=n[r];o>r?e.parentElement.insertBefore(e,a):e.parentElement.insertBefore(e,a.nextElementSibling)}}this.maybeLimitStream(e)}}maybeLimitStream(e){let{limit:t}=this.getStreamInsert(e),i=t!==null&&Array.from(e.parentElement.children);t&&t<0&&i.length>t*-1?i.slice(0,i.length+t).forEach(r=>this.removeStreamChildElement(r)):t&&t>=0&&i.length>t&&i.slice(t).forEach(r=>this.removeStreamChildElement(r))}transitionPendingRemoves(){let{pendingRemoves:e,liveSocket:t}=this;e.length>0&&(t.transitionRemoves(e),t.requestDOMUpdate(()=>{e.forEach(i=>{let r=d.firstPhxChild(i);r&&t.destroyViewByEl(r),i.remove()}),this.trackAfter("transitionsDiscarded",e)}))}isChangedSelect(e,t){if(!(e instanceof HTMLSelectElement)||e.multiple)return!1;if(e.options.length!==t.options.length)return!0;let i=e.selectedOptions[0],r=t.selectedOptions[0];return i&&i.hasAttribute("selected")&&r.setAttribute("selected",i.getAttribute("selected")),!e.isEqualNode(t)}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute($t)}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=d.findComponentNodeList(this.container,this.targetCID);return i.length===0&&d.childNodeLength(e)===1?t:t&&t.parentNode}indexOf(e,t){return Array.from(e.children).indexOf(t)}},Lr=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),Ur=new Set(["'",'"']),gi=(e,t,i)=>{let r=0,s=!1,n,o,a,l,h,c,p=e.match(/^(\s*(?:<!--.*?-->\s*)*)<([^\s\/>]+)/);if(p===null)throw new Error(`malformed html ${e}`);for(r=p[0].length,n=p[1],a=p[2],l=r,r;r<e.length&&e.charAt(r)!==">";r++)if(e.charAt(r)==="="){let v=e.slice(r-3,r)===" id";r++;let b=e.charAt(r);if(Ur.has(b)){let x=r;for(r++,r;r<e.length&&e.charAt(r)!==b;r++);if(v){h=e.slice(x+1,r);break}}}let f=e.length-1;for(s=!1;f>=n.length+a.length;){let v=e.charAt(f);if(s)v==="-"&&e.slice(f-3,f)==="<!-"?(s=!1,f-=4):f-=1;else if(v===">"&&e.slice(f-2,f)==="--")s=!0,f-=3;else{if(v===">")break;f-=1}}o=e.slice(f+1,e.length);let m=Object.keys(t).map(v=>t[v]===!0?v:`${v}="${t[v]}"`).join(" ");if(i){let v=h?` id="${h}"`:"";Lr.has(a)?c=`<${a}${v}${m===""?"":" "}${m}/>`:c=`<${a}${v}${m===""?"":" "}${m}></${a}>`}else{let v=e.slice(l,f+1);c=`<${a}${m===""?"":" "}${m}${v}`}return[c,n,o]},vi=class{static extract(e){let{[Qt]:t,[Zt]:i,[ei]:r}=e;return delete e[Qt],delete e[Zt],delete e[ei],{diff:e,title:r,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.magicId=0,this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){let[t,i]=this.recursiveToString(this.rendered,this.rendered[D],e,!0,{});return[t,i]}recursiveToString(e,t=e[D],i,r,s){i=i?new Set(i):null;let n={buffer:"",components:t,onlyCids:i,streams:new Set};return this.toOutputBuffer(e,null,n,r,s),[n.buffer,n.streams]}componentCIDs(e){return Object.keys(e[D]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[D]?Object.keys(e).length===1:!1}getComponent(e,t){return e[D][t]}resetRender(e){this.rendered[D][e]&&(this.rendered[D][e].reset=!0)}mergeDiff(e){let t=e[D],i={};if(delete e[D],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[D]=this.rendered[D]||{},t){let r=this.rendered[D];for(let s in t)t[s]=this.cachedFindComponent(s,t[s],r,t,i);for(let s in t)r[s]=t[s];e[D]=t}}cachedFindComponent(e,t,i,r,s){if(s[e])return s[e];{let n,o,a=t[J];if(Z(a)){let l;a>0?l=this.cachedFindComponent(a,r[a],i,r,s):l=i[-a],o=l[J],n=this.cloneMerge(l,t,!0),n[J]=o}else n=t[J]!==void 0||i[e]===void 0?t:this.cloneMerge(i[e],t,!1);return s[e]=n,n}}mutableMerge(e,t){return t[J]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let r=t[i],s=e[i];pe(r)&&r[J]===void 0&&pe(s)?this.doMutableMerge(s,r):e[i]=r}e[At]&&(e.newRender=!0)}cloneMerge(e,t,i){let r={...e,...t};for(let s in r){let n=t[s],o=e[s];pe(n)&&n[J]===void 0&&pe(o)?r[s]=this.cloneMerge(o,n,i):n===void 0&&pe(o)&&(r[s]=this.cloneMerge(o,{},i))}return i?(delete r.magicId,delete r.newRender):e[At]&&(r.newRender=!0),r}componentToString(e){let[t,i]=this.recursiveCIDToString(this.rendered[D],e,null),[r,s,n]=gi(t,{});return[r,i]}pruneCIDs(e){e.forEach(t=>delete this.rendered[D][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[J]}templateStatic(e,t){return typeof e=="number"?t[e]:e}nextMagicID(){return this.magicId++,`m${this.magicId}-${this.parentViewId()}`}toOutputBuffer(e,t,i,r,s={}){if(e[qe])return this.comprehensionToBuffer(e,t,i);let{[J]:n}=e;n=this.templateStatic(n,t);let o=e[At],a=i.buffer;o&&(i.buffer=""),r&&o&&!e.magicId&&(e.newRender=!0,e.magicId=this.nextMagicID()),i.buffer+=n[0];for(let l=1;l<n.length;l++)this.dynamicToBuffer(e[l-1],t,i,r),i.buffer+=n[l];if(o){let l=!1,h;r||e.magicId?(l=r&&!e.newRender,h={[Vt]:e.magicId,...s}):h=s,l&&(h[$t]=!0);let[c,p,f]=gi(i.buffer,h,l);e.newRender=!1,i.buffer=a+p+c+f}}comprehensionToBuffer(e,t,i){let{[qe]:r,[J]:s,[ti]:n}=e,[o,a,l,h]=n||[null,{},[],null];s=this.templateStatic(s,t);let c=t||e[ar];for(let p=0;p<r.length;p++){let f=r[p];i.buffer+=s[0];for(let m=1;m<s.length;m++){let v=!1;this.dynamicToBuffer(f[m-1],c,i,v),i.buffer+=s[m]}}n!==void 0&&(e[qe].length>0||l.length>0||h)&&(delete e[ti],e[qe]=[],i.streams.add(n))}dynamicToBuffer(e,t,i,r){if(typeof e=="number"){let[s,n]=this.recursiveCIDToString(i.components,e,i.onlyCids);i.buffer+=s,i.streams=new Set([...i.streams,...n])}else pe(e)?this.toOutputBuffer(e,t,i,r,{}):i.buffer+=e}recursiveCIDToString(e,t,i){let r=e[t]||H(`no component for CID ${t}`,e),s={[K]:t},n=i&&!i.has(t);r.newRender=!n,r.magicId=`c${t}-${this.parentViewId()}`;let o=!r.reset,[a,l]=this.recursiveToString(r,e,i,o,s);return delete r.reset,[a,l]}},Or=1,Pe=class{static makeID(){return Or++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let r in this.__callbacks)this[r]=this.__callbacks[r]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(this.el,null,e,t,i)}pushEventTo(e,t,i={},r=function(){}){return this.__view.withinTargets(e,(s,n)=>s.pushHookEvent(this.el,n,t,i,r))}handleEvent(e,t){let i=(r,s)=>s?e:t(r.detail);return window.addEventListener(`phx:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(null,e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,(r,s)=>{r.dispatchUploads(s,t,i)})}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}},Qe=(e,t,i=[])=>{let{submitter:r,...s}=t,n;if(r&&r.name){let h=document.createElement("input");h.type="hidden";let c=r.getAttribute("form");c&&h.setAttribute("form",c),h.name=r.name,h.value=r.value,r.parentElement.insertBefore(h,r),n=h}let o=new FormData(e),a=[];o.forEach((h,c,p)=>{h instanceof File&&a.push(c)}),a.forEach(h=>o.delete(h));let l=new URLSearchParams;for(let[h,c]of o.entries())(i.length===0||i.indexOf(h)>=0)&&l.append(h,c);r&&n&&r.parentElement.removeChild(n);for(let h in s)l.append(h,s[h]);return l.toString()},wi=class{constructor(e,t,i,r,s){this.isDead=!1,this.liveSocket=t,this.flash=r,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pendingForms=new Set,this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(n){n&&n()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.formsForRecovery={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>{let n=this.href&&this.expandURL(this.href);return{redirect:this.redirect?n:void 0,url:this.redirect?void 0:n||void 0,params:this.connectParams(s),session:this.getSession(),static:this.getStatic(),flash:this.flash}})}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.hasAttribute(pt)}connectParams(e){let t=this.liveSocket.params(this.el),i=d.all(document,`[${this.binding(Xi)}]`).map(r=>r.src||r.href).filter(r=>typeof r=="string");return i.length>0&&(t._track_static=i),t._mounts=this.joinCount,t._live_referer=e,t}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(Y)}getStatic(){let e=this.el.getAttribute(ue);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};d.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(zt,Se,$e,Wt,ft),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(Se)}}execAll(e){d.all(this.el,`[${e}]`,t=>this.liveSocket.execJS(t,t.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(zt),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}transition(e,t,i=function(){}){this.liveSocket.transition(e,t,i)}withinTargets(e,t,i=document,r){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,s=>t(s,e));if(Z(e))d.findComponentNodeList(r||this.el,e).length===0?H(`no component found matching phx-target of ${e}`):t(this,parseInt(e));else{let s=Array.from(i.querySelectorAll(e));s.length===0&&H(`nothing found matching the phx-target selector "${e}"`),s.forEach(n=>this.liveSocket.owner(n,o=>t(o,n)))}}applyDiff(e,t,i){this.log(e,()=>["",Ke(t)]);let{diff:r,reply:s,events:n,title:o}=vi.extract(t);i({diff:r,reply:s,events:n}),typeof o=="string"&&window.requestAnimationFrame(()=>d.putTitle(o))}onJoin(e){let{rendered:t,container:i,liveview_version:r}=e;if(i){let[s,n]=i;this.el=d.replaceRootContainer(this.el,s,n)}this.childJoins=0,this.joinPending=!0,this.flash=null,this.root===this&&(this.formsForRecovery=this.getFormsForRecovery()),r!==this.liveSocket.version()&&console.error(`LiveView asset version mismatch. JavaScript version ${this.liveSocket.version()} vs. server ${r}. To avoid issues, please ensure that your assets use the same version as the server.`),z.dropLocal(this.liveSocket.localStorage,window.location.pathname,Ft),this.applyDiff("mount",t,({diff:s,events:n})=>{this.rendered=new vi(this.id,s);let[o,a]=this.renderContainer(null,"join");this.dropPendingRefs(),this.joinCount++,this.maybeRecoverForms(o,()=>{this.onJoinComplete(e,o,a,n)})})}dropPendingRefs(){d.all(document,`[${ne}="${this.id}"][${F}]`,e=>{e.removeAttribute(F),e.removeAttribute(ne)})}onJoinComplete({live_patch:e},t,i,r){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i,r);d.findPhxChildrenInFragment(t,this.id).filter(n=>{let o=n.id&&this.el.querySelector(`[id="${n.id}"]`),a=o&&o.getAttribute(ue);return a&&n.setAttribute(ue,a),o&&o.setAttribute(ae,this.root.id),this.joinChild(n)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,r)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i,r)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,r)])}attachTrueDocEl(){this.el=d.byId(this.id),this.el.setAttribute(ae,this.root.id)}execNewMounted(){let e=this.binding(mt),t=this.binding(gt);d.all(this.el,`[${e}], [${t}]`,i=>{this.ownsElement(i)&&(d.maybeAddPrivateHooks(i,e,t),this.maybeAddNewHook(i))}),d.all(this.el,`[${this.binding(Ee)}], [data-phx-${Ee}]`,i=>{this.ownsElement(i)&&this.maybeAddNewHook(i)}),d.all(this.el,`[${this.binding(Gt)}]`,i=>{this.ownsElement(i)&&this.maybeMounted(i)})}applyJoinPatch(e,t,i,r){this.attachTrueDocEl();let s=new Ze(this,this.el,this.id,t,i,null);if(s.markPrunableContentForRemoval(),this.performPatch(s,!1,!0),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(r),this.applyPendingUpdates(),e){let{kind:n,to:o}=e;this.liveSocket.historyPatch(o,n)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),r=i&&d.isIgnored(e,this.binding(We));if(i&&!e.isEqualNode(t)&&!(r&&dr(e.dataset,t.dataset)))return i.__beforeUpdate(),i}maybeMounted(e){let t=e.getAttribute(this.binding(Gt)),i=t&&d.private(e,"mounted");t&&!i&&(this.liveSocket.execJS(e,t),d.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,t){let i=this.addHook(e);i&&i.__mounted()}performPatch(e,t,i=!1){let r=[],s=!1,n=new Set;return e.after("added",o=>{this.liveSocket.triggerDOM("onNodeAdded",[o]);let a=this.binding(mt),l=this.binding(gt);d.maybeAddPrivateHooks(o,a,l),this.maybeAddNewHook(o),o.getAttribute&&this.maybeMounted(o)}),e.after("phxChildAdded",o=>{d.isPhxSticky(o)?this.liveSocket.joinRootViews():s=!0}),e.before("updated",(o,a)=>{this.triggerBeforeUpdateHook(o,a)&&n.add(o.id)}),e.after("updated",o=>{n.has(o.id)&&this.getHook(o).__updated()}),e.after("discarded",o=>{o.nodeType===Node.ELEMENT_NODE&&r.push(o)}),e.after("transitionsDiscarded",o=>this.afterElementsRemoved(o,t)),e.perform(i),this.afterElementsRemoved(r,t),s}afterElementsRemoved(e,t){let i=[];e.forEach(r=>{let s=d.all(r,`[${K}]`),n=d.all(r,`[${this.binding(Ee)}]`);s.concat(r).forEach(o=>{let a=this.componentID(o);Z(a)&&i.indexOf(a)===-1&&i.push(a)}),n.concat(r).forEach(o=>{let a=this.getHook(o);a&&this.destroyHook(a)})}),t&&this.maybePushComponentsDestroyed(i)}joinNewChildren(){d.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}maybeRecoverForms(e,t){let i=this.binding("change"),r=this.root.formsForRecovery,s=document.createElement("template");s.innerHTML=e;let n=s.content.firstElementChild;n.id=this.id,n.setAttribute(ae,this.root.id),n.setAttribute(Y,this.getSession()),n.setAttribute(ue,this.getStatic()),n.setAttribute(oe,this.parent?this.parent.id:null);let o=d.all(s.content,"form").filter(a=>a.id&&r[a.id]).filter(a=>!this.pendingForms.has(a.id)).filter(a=>r[a.id].getAttribute(i)===a.getAttribute(i)).map(a=>[r[a.id],a]);if(o.length===0)return t();o.forEach(([a,l],h)=>{this.pendingForms.add(l.id),this.pushFormRecovery(a,l,s.content,()=>{this.pendingForms.delete(l.id),h===o.length-1&&t()})})}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(oe)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new wi(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.pendingForms.clear(),this.formsForRecovery={},this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]})}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{d.findExistingParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(s=>{this.componentPatch(this.rendered.getComponent(e,s),s)&&(i=!0)})}):ii(e)||this.liveSocket.time("full patch complete",()=>{let[r,s]=this.renderContainer(e,"update"),n=new Ze(this,this.el,this.id,r,s,null);i=this.performPatch(n,!0)}),this.liveSocket.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,r=e?this.rendered.componentCIDs(e):null,[s,n]=this.rendered.toString(r);return[`<${i}>${s}</${i}>`,n]})}componentPatch(e,t){if(ii(e))return!1;let[i,r]=this.rendered.componentToString(t),s=new Ze(this,this.el,this.id,i,r,t);return this.performPatch(s,!0)}getHook(e){return this.viewHooks[Pe.elementID(e)]}addHook(e){if(Pe.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${Ee}`)||e.getAttribute(this.binding(Ee));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||H(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let r=new Pe(this,e,i);return this.viewHooks[Pe.elementID(r.el)]=r,r}else t!==null&&H(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[Pe.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[],this.eachChild(e=>e.applyPendingUpdates())}eachChild(e){let t=this.root.children[this.id]||{};for(let i in t)e(this.getChildById(i))}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):this.liveSocket.requestDOMUpdate(()=>t(i))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))})}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){this.eachChild(e=>e.destroy())}onLiveRedirect(e){let{to:t,kind:i,flash:r}=e,s=this.expandURL(t);this.liveSocket.historyRedirect(s,i,r)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=t=>{t=t||function(){},e?e(this.joinCount,t):t()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(t))}).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="reload"){this.log("error",()=>[`failed mount with ${e.status}. Falling back to page request`,e]),this.isMain()&&this.onRedirect({to:this.href});return}else if(e.reason==="unauthorized"||e.reason==="stale"){this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.isMain()&&this.onRedirect({to:this.href});return}if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.displayError([Se,$e,ft]),this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(rr)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([Se,$e,ft]):this.displayError([Se,$e,Wt]))}displayError(e){this.isMain()&&d.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...e),this.execAll(this.binding("disconnected"))}pushWithReply(e,t,i,r=function(){}){if(!this.isConnected())return;let[s,[n],o]=e?e():[null,[],{}],a=function(){};return(o.page_loading||n&&n.getAttribute(this.binding(Jt))!==null)&&(a=this.liveSocket.withPageLoading({kind:"element",target:n})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,nr).receive("ok",l=>{let h=c=>{l.redirect&&this.onRedirect(l.redirect),l.live_patch&&this.onLivePatch(l.live_patch),l.live_redirect&&this.onLiveRedirect(l.live_redirect),a(),r(l,c)};l.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",l.diff,({diff:c,reply:p,events:f})=>{s!==null&&this.undoRefs(s),this.update(c,f),h(p)})}):(s!==null&&this.undoRefs(s),h(null))}))}undoRefs(e,t){t=t?new Set(t):null,!!this.isConnected()&&d.all(document,`[${ne}="${this.id}"][${F}="${e}"]`,i=>{if(t&&!t.has(i))return;i.dispatchEvent(new CustomEvent("phx:unlock",{bubbles:!0,cancelable:!1}));let r=i.getAttribute(fe),s=i.getAttribute(wt);i.removeAttribute(F),i.removeAttribute(ne),s!==null&&(i.readOnly=s==="true",i.removeAttribute(wt)),r!==null&&(i.disabled=r==="true",i.removeAttribute(fe)),Wi.forEach(a=>d.removeClass(i,a));let n=i.getAttribute(ze);n!==null&&(i.innerText=n,i.removeAttribute(ze));let o=d.private(i,F);if(o){let a=this.triggerBeforeUpdateHook(i,o);Ze.patchEl(i,o,this.liveSocket.getActiveElement()),a&&a.__updated(),d.deletePrivate(i,F)}})}putRef(e,t,i={}){let r=this.ref++,s=this.binding(bt);i.loading&&(e=e.concat(d.all(document,i.loading)));for(let n of e){if(n.setAttribute(F,r),n.setAttribute(ne,this.el.id),i.submitter&&!(n===i.submitter||n===i.form))continue;n.classList.add(`phx-${t}-loading`),n.dispatchEvent(new CustomEvent(`phx:${t}-loading`,{bubbles:!0,cancelable:!1}));let o=n.getAttribute(s);o!==null&&(n.getAttribute(ze)||n.setAttribute(ze,n.innerText),o!==""&&(n.innerText=o),n.setAttribute(fe,n.getAttribute(fe)||n.disabled),n.setAttribute("disabled",""))}return[r,e,i]}componentID(e){let t=e.getAttribute&&e.getAttribute(K);return t?parseInt(t):null}targetComponentID(e,t,i={}){if(Z(t))return t;let r=i.target||e.getAttribute(this.binding("target"));return Z(r)?parseInt(r):t&&(r!==null||i.target)?this.closestComponentID(t):null}closestComponentID(e){return Z(e)?e:e?te(e.closest(`[${K}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,r,s){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",i,r]),!1;let[n,o,a]=this.putRef([e],"hook");return this.pushWithReply(()=>[n,o,a],"event",{type:"hook",event:i,value:r,cid:this.closestComponentID(t)},(l,h)=>s(h,n)),n}extractMeta(e,t,i){let r=this.binding("value-");for(let s=0;s<e.attributes.length;s++){t||(t={});let n=e.attributes[s].name;n.startsWith(r)&&(t[n.replace(r,"")]=e.getAttribute(n))}if(e.value!==void 0&&!(e instanceof HTMLFormElement)&&(t||(t={}),t.value=e.value,e.tagName==="INPUT"&&Xt.indexOf(e.type)>=0&&!e.checked&&delete t.value),i){t||(t={});for(let s in i)t[s]=i[s]}return t}pushEvent(e,t,i,r,s,n={},o){this.pushWithReply(()=>this.putRef([t],e,n),"event",{type:e,event:r,value:this.extractMeta(t,s,n.value),cid:this.targetComponentID(t,i,n)},(a,l)=>o&&o(l))}pushFileProgress(e,t,i,r=function(){}){this.liveSocket.withinOwners(e.form,(s,n)=>{s.pushWithReply(null,"progress",{event:e.getAttribute(s.binding(tr)),ref:e.getAttribute(G),entry_ref:t,progress:i,cid:s.targetComponentID(e.form,n)},r)})}pushInput(e,t,i,r,s,n){let o,a=Z(i)?i:this.targetComponentID(e.form,t,s),l=()=>this.putRef([e,e.form],"change",s),h,c=this.extractMeta(e.form);e instanceof HTMLButtonElement&&(c.submitter=e),e.getAttribute(this.binding("change"))?h=Qe(e.form,{_target:s._target,...c},[e.name]):h=Qe(e.form,{_target:s._target,...c}),d.isUploadInput(e)&&e.files&&e.files.length>0&&I.trackFiles(e,Array.from(e.files)),o=I.serializeUploads(e);let p={type:"form",event:r,value:h,uploads:o,cid:a};this.pushWithReply(l,"event",p,f=>{if(d.showError(e,this.liveSocket.binding(Ve),this.liveSocket.binding(je)),d.isUploadInput(e)&&d.isAutoUpload(e)){if(I.filesAwaitingPreflight(e).length>0){let[m,v]=l();this.undoRefs(m,[e.form]),this.uploadFiles(e.form,t,m,a,b=>{n&&n(f),this.triggerAwaitingSubmit(e.form),this.undoRefs(m)})}}else n&&n(f)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,r,s,n]=t;this.cancelSubmit(e),n()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i,r,s])=>t.isSameNode(e))}scheduleSubmit(e,t,i,r){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i,r])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,r])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}disableForm(e,t={}){let i=c=>!(Ce(c,`${this.binding(We)}=ignore`,c.form)||Ce(c,"data-phx-update=ignore",c.form)),r=c=>c.hasAttribute(this.binding(bt)),s=c=>c.tagName=="BUTTON",n=c=>["INPUT","TEXTAREA","SELECT"].includes(c.tagName),o=Array.from(e.elements),a=o.filter(r),l=o.filter(s).filter(i),h=o.filter(n).filter(i);return l.forEach(c=>{c.setAttribute(fe,c.disabled),c.disabled=!0}),h.forEach(c=>{c.setAttribute(wt,c.readOnly),c.readOnly=!0,c.files&&(c.setAttribute(fe,c.disabled),c.disabled=!0)}),e.setAttribute(this.binding(Jt),""),this.putRef([e].concat(a).concat(l).concat(h),"submit",t)}pushFormSubmit(e,t,i,r,s,n){let o=()=>this.disableForm(e,{...s,form:e,submitter:r}),a=this.targetComponentID(e,t);if(I.hasUploadsInProgress(e)){let[l,h]=o(),c=()=>this.pushFormSubmit(e,t,i,r,s,n);return this.scheduleSubmit(e,l,s,c)}else if(I.inputsAwaitingPreflight(e).length>0){let[l,h]=o(),c=()=>[l,h,s];this.uploadFiles(e,t,l,a,p=>{if(I.inputsAwaitingPreflight(e).length>0)return this.undoRefs(l);let f=this.extractMeta(e),m=Qe(e,{submitter:r,...f});this.pushWithReply(c,"event",{type:"form",event:i,value:m,cid:a},n)})}else if(!(e.hasAttribute(F)&&e.classList.contains("phx-submit-loading"))){let l=this.extractMeta(e),h=Qe(e,{submitter:r,...l});this.pushWithReply(o,"event",{type:"form",event:i,value:h,cid:a},n)}}uploadFiles(e,t,i,r,s){let n=this.joinCount,o=I.activeFileInputs(e),a=o.length;o.forEach(l=>{let h=new I(l,this,()=>{a--,a===0&&s()}),c=h.entries().map(f=>f.toPreflightPayload());if(c.length===0){a--;return}let p={ref:l.getAttribute(G),entries:c,cid:this.targetComponentID(l.form,t)};this.log("upload",()=>["sending preflight request",p]),this.pushWithReply(null,"allow_upload",p,f=>{if(this.log("upload",()=>["got preflight response",f]),h.entries().forEach(m=>{f.entries&&!f.entries[m.ref]&&this.handleFailedEntryPreflight(m.ref,"failed preflight",h)}),f.error||Object.keys(f.entries).length===0)this.undoRefs(i),(f.error||[]).map(([v,b])=>{this.handleFailedEntryPreflight(v,b,h)});else{let m=v=>{this.channel.onError(()=>{this.joinCount===n&&v()})};h.initAdapterUpload(f,m,this.liveSocket)}})})}handleFailedEntryPreflight(e,t,i){if(i.isAutoUpload()){let r=i.entries().find(s=>s.ref===e.toString());r&&r.cancel()}else i.entries().map(r=>r.cancel());this.log("upload",()=>[`error for entry ${e}`,t])}dispatchUploads(e,t,i){let r=this.targetCtxElement(e)||this.el,s=d.findUploadInputs(r).filter(n=>n.name===t);s.length===0?H(`no live file inputs found matching the name "${t}"`):s.length>1?H(`duplicate live file inputs found matching the name "${t}"`):d.dispatchEvent(s[0],Nt,{detail:{files:i}})}targetCtxElement(e){if(Z(e)){let[t]=d.findComponentNodeList(this.el,e);return t}else return e||null}pushFormRecovery(e,t,i,r){let s=this.binding("change"),n=t.getAttribute(this.binding("target"))||t,o=t.getAttribute(this.binding(Kt))||t.getAttribute(this.binding("change")),a=Array.from(e.elements).filter(c=>d.isFormInput(c)&&c.name&&!c.hasAttribute(s));if(a.length===0)return;a.forEach(c=>c.hasAttribute(G)&&I.clearFiles(c));let l=a.find(c=>c.type!=="hidden")||a[0],h=0;this.withinTargets(n,(c,p)=>{let f=this.targetComponentID(t,p);h++,c.pushInput(l,p,f,o,{_target:l.name},()=>{h--,h===0&&r()})},i,i)}pushLinkPatch(e,t,i){let r=this.liveSocket.setPendingLink(e),s=t?()=>this.putRef([t],"click"):null,n=()=>this.liveSocket.redirect(window.location.href),o=e.startsWith("/")?`${location.protocol}//${location.host}${e}`:e,a=this.pushWithReply(s,"live_patch",{url:o},l=>{this.liveSocket.requestDOMUpdate(()=>{l.link_redirect?this.liveSocket.replaceMain(e,null,i,r):(this.liveSocket.commitPendingLink(r)&&(this.href=e),this.applyPendingUpdates(),i&&i(r))})});a?a.receive("timeout",n):n()}getFormsForRecovery(){if(this.joinCount===0)return{};let e=this.binding("change");return d.all(this.el,`form[${e}]`).filter(t=>t.id).filter(t=>t.elements.length>0).filter(t=>t.getAttribute(this.binding(Kt))!=="ignore").map(t=>t.cloneNode(!0)).reduce((t,i)=>(t[i.id]=i,t),{})}maybePushComponentsDestroyed(e){let t=e.filter(i=>d.findComponentNodeList(this.el,i).length===0);t.length>0&&(t.forEach(i=>this.rendered.resetRender(i)),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.liveSocket.requestDOMUpdate(()=>{let i=t.filter(r=>d.findComponentNodeList(this.el,r).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},r=>{this.rendered.pruneCIDs(r.cids)})})}))}ownsElement(e){let t=e.closest(de);return e.getAttribute(oe)===this.id||t&&t.id===this.id||!t&&this.isDead}submitForm(e,t,i,r,s={}){d.putPrivate(e,Je,!0);let n=this.liveSocket.binding(Ve),o=this.liveSocket.binding(je),a=Array.from(e.elements);a.forEach(l=>d.putPrivate(l,Je,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,r,s,()=>{a.forEach(l=>d.showError(l,n,o)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}},bi=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||sr,this.opts=i,this.params=Te(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(Ke(or),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=Ke(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||ir,this.reloadWithJitterTimer=null,this.maxReloads=i.maxReloads||Vi,this.reloadJitterMin=i.reloadJitterMin||ji,this.reloadJitterMax=i.reloadJitterMax||Ji,this.failsafeJitter=i.failsafeJitter||zi,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.serverCloseRef=null,this.domCallbacks=Object.assign({onPatchStart:Te(),onPatchEnd:Te(),onNodeAdded:Te(),onBeforeElUpdated:Te()},i.dom||{}),this.transitions=new Mr,window.addEventListener("pagehide",r=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}version(){return"0.20.15"}isProfileEnabled(){return this.sessionStorage.getItem(St)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(Xe)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(Xe)==="false"}enableDebug(){this.sessionStorage.setItem(Xe,"true")}enableProfiling(){this.sessionStorage.setItem(St,"true")}disableDebug(){this.sessionStorage.setItem(Xe,"false")}disableProfiling(){this.sessionStorage.removeItem(St)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(Et,e)}disableLatencySim(){this.sessionStorage.removeItem(Et)}getLatencySim(){let e=this.sessionStorage.getItem(Et);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug();let e=()=>{this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.bindTopLevelEvents({dead:!0}),this.joinDeadView()};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){clearTimeout(this.reloadWithJitterTimer),this.serverCloseRef&&(this.socket.off(this.serverCloseRef),this.serverCloseRef=null),this.socket.disconnect(e)}replaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,t,i=null){this.owner(e,r=>L.exec(i,t,r,e))}execJSHookPush(e,t,i,r){this.withinOwners(e,s=>{L.exec("hook",t,s,e,["push",{data:i,callback:r}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[r,s]=i();this.viewLogger(e,t,r,s)}else if(this.isDebugEnabled()){let[r,s]=i();cr(e,t,r,s)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,t,i=function(){}){this.transitions.addTransition(e,t,i)}onChannel(e,t,i){e.on(t,r=>{let s=this.getLatencySim();s?setTimeout(()=>i(r),s):i(r)})}wrapPush(e,t,i){let r=this.getLatencySim(),s=e.joinCount;if(!r)return this.isConnected()&&t.timeout?i().receive("timeout",()=>{e.joinCount===s&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();let n={receives:[],receive(o,a){this.receives.push([o,a])}};return setTimeout(()=>{e.isDestroyed()||n.receives.reduce((o,[a,l])=>o.receive(a,l),i())},r),n}reloadWithJitter(e,t){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let i=this.reloadJitterMin,r=this.reloadJitterMax,s=Math.floor(Math.random()*(r-i+1))+i,n=z.updateLocal(this.localStorage,window.location.pathname,Ft,0,o=>o+1);n>this.maxReloads&&(s=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{e.isDestroyed()||e.isConnected()||(e.destroy(),t?t():this.log(e,"join",()=>[`encountered ${n} consecutive reloads`]),n>this.maxReloads&&this.log(e,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]),this.hasPendingLink()?window.location=this.pendingLink:window.location.reload())},s)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?wr[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinDeadView(){let e=document.body;if(e&&!this.isPhxView(e)&&!this.isPhxView(document.firstElementChild)){let t=this.newRootView(e);t.setHref(this.getHref()),t.joinDead(),this.main||(this.main=t),window.requestAnimationFrame(()=>t.execNewMounted())}}joinRootViews(){let e=!1;return d.all(document,`${de}:not([${oe}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.hasAttribute(pt)&&(this.main=i)}e=!0}),e}redirect(e,t){this.unload(),z.redirect(e,t)}replaceMain(e,t,i=null,r=this.setPendingLink(e)){let s=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let n=d.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(n,t,s),this.main.setRedirect(e),this.transitionRemoves(null,!0),this.main.join((o,a)=>{o===1&&this.commitPendingLink(r)&&this.requestDOMUpdate(()=>{d.findPhxSticky(document).forEach(l=>n.appendChild(l)),this.outgoingMainEl.replaceWith(n),this.outgoingMainEl=null,i&&i(r),a()})})}transitionRemoves(e,t){let i=this.binding("remove");if(e=e||d.all(document,`[${i}]`),t){let r=d.findPhxSticky(document)||[];e=e.filter(s=>!d.isChildOfAny(s,r))}e.forEach(r=>{this.execJS(r,r.getAttribute(i),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(Y)!==null}newRootView(e,t,i){let r=new wi(e,this,null,t,i);return this.roots[r.id]=r,r}owner(e,t){let i=te(e.closest(de),r=>this.getViewByEl(r))||this.main;i&&t(i)}withinOwners(e,t){this.owner(e,i=>t(i,e))}getViewByEl(e){let t=e.getAttribute(ae);return te(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(ae));t&&t.id===e.id?(t.destroy(),delete this.roots[t.id]):t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.serverCloseRef=this.socket.onClose(t=>{if(t&&t.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",t=>{t.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),e||this.bindNav(),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(t,i,r,s,n,o)=>{let a=s.getAttribute(this.binding(er)),l=t.key&&t.key.toLowerCase();if(a&&a.toLowerCase()!==l)return;let h={key:t.key,...this.eventMeta(i,t,s)};L.exec(i,n,r,s,["push",{data:h}])}),this.bind({blur:"focusout",focus:"focusin"},(t,i,r,s,n,o)=>{if(!o){let a={key:t.key,...this.eventMeta(i,t,s)};L.exec(i,n,r,s,["push",{data:a}])}}),this.bind({blur:"blur",focus:"focus"},(t,i,r,s,n,o)=>{if(o==="window"){let a=this.eventMeta(i,t,s);L.exec(i,n,r,s,["push",{data:a}])}}),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("drop",t=>{t.preventDefault();let i=te(Ce(t.target,this.binding(Bt)),n=>n.getAttribute(this.binding(Bt))),r=i&&document.getElementById(i),s=Array.from(t.dataTransfer.files||[]);!r||r.disabled||s.length===0||!(r.files instanceof FileList)||(I.trackFiles(r,s,t.dataTransfer),r.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(Nt,t=>{let i=t.target;if(!d.isUploadInput(i))return;let r=Array.from(t.detail.files||[]).filter(s=>s instanceof File||s instanceof Blob);I.trackFiles(i,r),i.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let r=this.metadataCallbacks[e];return r?r(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let r=e[i];this.on(r,s=>{let n=this.binding(i),o=this.binding(`window-${i}`),a=s.target.getAttribute&&s.target.getAttribute(n);a?this.debounce(s.target,s,r,()=>{this.withinOwners(s.target,l=>{t(s,i,l,s.target,a,null)})}):d.all(document,`[${o}]`,l=>{let h=l.getAttribute(o);this.debounce(l,s,r,()=>{this.withinOwners(l,c=>{t(s,i,c,l,h,"window")})})})})}}bindClicks(){window.addEventListener("mousedown",e=>this.clickStartedAtTarget=e.target),this.bindClick("click","click")}bindClick(e,t){let i=this.binding(t);window.addEventListener(e,r=>{let s=null;r.detail===0&&(this.clickStartedAtTarget=r.target);let n=this.clickStartedAtTarget||r.target;s=Ce(n,i),this.dispatchClickAway(r,n),this.clickStartedAtTarget=null;let o=s&&s.getAttribute(i);if(!o){d.isNewPageClick(r,window.location)&&this.unload();return}s.getAttribute("href")==="#"&&r.preventDefault(),!s.hasAttribute(F)&&this.debounce(s,r,"click",()=>{this.withinOwners(s,a=>{L.exec("click",o,a,s,["push",{data:this.eventMeta("click",r,s)}])})})},!1)}dispatchClickAway(e,t){let i=this.binding("click-away");d.all(document,`[${i}]`,r=>{r.isSameNode(t)||r.contains(t)||this.withinOwners(r,s=>{let n=r.getAttribute(i);L.isVisible(r)&&L.isInViewport(r)&&L.exec("click",n,s,r,["push",{data:this.eventMeta("click",e,e.target)}])})})}bindNav(){if(!z.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{z.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:r,root:s,scroll:n}=t.state||{},o=window.location.href;d.dispatchEvent(window,"phx:navigate",{detail:{href:o,patch:i==="patch",pop:!0}}),this.requestDOMUpdate(()=>{this.main.isConnected()&&i==="patch"&&r===this.main.id?this.main.pushLinkPatch(o,null,()=>{this.maybeScroll(n)}):this.replaceMain(o,null,()=>{s&&this.replaceRootHistory(),this.maybeScroll(n)})})},!1),window.addEventListener("click",t=>{let i=Ce(t.target,ct),r=i&&i.getAttribute(ct);if(!r||!this.isConnected()||!this.main||d.wantsNewTab(t))return;let s=i.href instanceof SVGAnimatedString?i.href.baseVal:i.href,n=i.getAttribute(qi);t.preventDefault(),t.stopImmediatePropagation(),this.pendingLink!==s&&this.requestDOMUpdate(()=>{if(r==="patch")this.pushHistoryPatch(s,n,i);else if(r==="redirect")this.historyRedirect(s,n);else throw new Error(`expected ${ct} to be "patch" or "redirect", got: ${r}`);let o=i.getAttribute(this.binding("click"));o&&this.requestDOMUpdate(()=>this.execJS(i,o,"click"))})},!1)}maybeScroll(e){typeof e=="number"&&requestAnimationFrame(()=>{window.scrollTo(0,e)})}dispatchEvent(e,t={}){d.dispatchEvent(window,`phx:${e}`,{detail:t})}dispatchEvents(e){e.forEach(([t,i])=>this.dispatchEvent(t,i))}withPageLoading(e,t){d.dispatchEvent(window,"phx:page-loading-start",{detail:e});let i=()=>d.dispatchEvent(window,"phx:page-loading-stop",{detail:e});return t?t(i):i}pushHistoryPatch(e,t,i){if(!this.isConnected()||!this.main.isMain())return z.redirect(e);this.withPageLoading({to:e,kind:"patch"},r=>{this.main.pushLinkPatch(e,i,s=>{this.historyPatch(e,t,s),r()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(z.pushState(t,{type:"patch",id:this.main.id},e),d.dispatchEvent(window,"phx:navigate",{detail:{patch:!0,href:e,pop:!1}}),this.registerNewLocation(window.location))}historyRedirect(e,t,i){if(!this.isConnected()||!this.main.isMain())return z.redirect(e,i);if(/^\/$|^\/[^\/]+.*$/.test(e)){let{protocol:s,host:n}=window.location;e=`${s}//${n}${e}`}let r=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},s=>{this.replaceMain(e,i,n=>{n===this.linkRef&&(z.pushState(t,{type:"redirect",id:this.main.id,scroll:r},e),d.dispatchEvent(window,"phx:navigate",{detail:{href:e,patch:!1,pop:!1}}),this.registerNewLocation(window.location)),s()})})}replaceRootHistory(){z.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=Ke(e),!0)}bindForms(){let e=0,t=!1;this.on("submit",i=>{let r=i.target.getAttribute(this.binding("submit")),s=i.target.getAttribute(this.binding("change"));!t&&s&&!r&&(t=!0,i.preventDefault(),this.withinOwners(i.target,n=>{n.disableForm(i.target),window.requestAnimationFrame(()=>{d.isUnloadableFormSubmit(i)&&this.unload(),i.target.submit()})}))},!0),this.on("submit",i=>{let r=i.target.getAttribute(this.binding("submit"));if(!r){d.isUnloadableFormSubmit(i)&&this.unload();return}i.preventDefault(),i.target.disabled=!0,this.withinOwners(i.target,s=>{L.exec("submit",r,s,i.target,["push",{submitter:i.submitter}])})},!1);for(let i of["change","input"])this.on(i,r=>{let s=this.binding("change"),n=r.target,o=n.getAttribute(s),a=n.form&&n.form.getAttribute(s),l=o||a;if(!l||n.type==="number"&&n.validity&&n.validity.badInput)return;let h=o?n:n.form,c=e;e++;let{at:p,type:f}=d.private(n,"prev-iteration")||{};p===c-1&&i==="change"&&f==="input"||(d.putPrivate(n,"prev-iteration",{at:c,type:i}),this.debounce(n,r,i,()=>{this.withinOwners(h,m=>{d.putPrivate(n,vt,!0),d.isTextualInput(n)||this.setActiveElement(n),L.exec("change",l,m,n,["push",{_target:r.target.name,dispatcher:h}])})}))},!1);this.on("reset",i=>{let r=i.target;d.resetForm(r,this.binding(Ve),this.binding(je));let s=Array.from(r.elements).find(n=>n.type==="reset");s&&window.requestAnimationFrame(()=>{s.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(e,t,i,r){if(i==="blur"||i==="focusout")return r();let s=this.binding(Zi),n=this.binding(Qi),o=this.defaults.debounce.toString(),a=this.defaults.throttle.toString();this.withinOwners(e,l=>{let h=()=>!l.isDestroyed()&&document.body.contains(e);d.debounce(e,t,s,o,n,a,h,()=>{r()})})}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}},Mr=class{constructor(){this.transitions=new Set,this.pendingOps=[]}reset(){this.transitions.forEach(e=>{clearTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,t,i){t();let r=setTimeout(()=>{this.transitions.delete(r),i(),this.flushPendingOps()},e);this.transitions.add(r)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){if(this.size()>0)return;let e=this.pendingOps.shift();e&&(e(),this.flushPendingOps())}};function yi(e){for(var t=e.length,i=0,r=0;r<t;){var s=e.charCodeAt(r++);if((s&4294967168)==0){i++;continue}else if((s&4294965248)==0)i+=2;else{if(s>=55296&&s<=56319&&r<t){var n=e.charCodeAt(r);(n&64512)==56320&&(++r,s=((s&1023)<<10)+(n&1023)+65536)}(s&4294901760)==0?i+=3:i+=4}}return i}function Hr(e,t,i){for(var r=e.length,s=i,n=0;n<r;){var o=e.charCodeAt(n++);if((o&4294967168)==0){t[s++]=o;continue}else if((o&4294965248)==0)t[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&n<r){var a=e.charCodeAt(n);(a&64512)==56320&&(++n,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)==0?(t[s++]=o>>12&15|224,t[s++]=o>>6&63|128):(t[s++]=o>>18&7|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128)}t[s++]=o&63|128}}var Fr=new TextEncoder,Nr=50;function Br(e,t,i){Fr.encodeInto(e,t.subarray(i))}function xi(e,t,i){e.length>Nr?Br(e,t,i):Hr(e,t,i)}var $r=4096;function _t(e,t,i){for(var r=t,s=r+i,n=[],o="";r<s;){var a=e[r++];if((a&128)==0)n.push(a);else if((a&224)==192){var l=e[r++]&63;n.push((a&31)<<6|l)}else if((a&240)==224){var l=e[r++]&63,h=e[r++]&63;n.push((a&31)<<12|l<<6|h)}else if((a&248)==240){var l=e[r++]&63,h=e[r++]&63,c=e[r++]&63,p=(a&7)<<18|l<<12|h<<6|c;p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|p&1023),n.push(p)}else n.push(a);n.length>=$r&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return n.length>0&&(o+=String.fromCharCode.apply(String,n)),o}var Vr=new TextDecoder,jr=200;function Jr(e,t,i){var r=e.subarray(t,t+i);return Vr.decode(r)}function Si(e,t,i){return i>jr?Jr(e,t,i):_t(e,t,i)}var Ie=function(){function e(t,i){this.type=t,this.data=i}return e}();var zr=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),N=function(e){zr(t,e);function t(i){var r=e.call(this,i)||this,s=Object.create(t.prototype);return Object.setPrototypeOf(r,s),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return t}(Error);var ge=4294967295;function Ei(e,t,i){var r=i/4294967296,s=i;e.setUint32(t,r),e.setUint32(t+4,s)}function et(e,t,i){var r=Math.floor(i/4294967296),s=i;e.setUint32(t,r),e.setUint32(t+4,s)}function tt(e,t){var i=e.getInt32(t),r=e.getUint32(t+4);return i*4294967296+r}function Ai(e,t){var i=e.getUint32(t),r=e.getUint32(t+4);return i*4294967296+r}var Wr=-1,Xr=4294967296-1,qr=17179869184-1;function Kr(e){var t=e.sec,i=e.nsec;if(t>=0&&i>=0&&t<=qr)if(i===0&&t<=Xr){var r=new Uint8Array(4),s=new DataView(r.buffer);return s.setUint32(0,t),r}else{var n=t/4294967296,o=t&4294967295,r=new Uint8Array(8),s=new DataView(r.buffer);return s.setUint32(0,i<<2|n&3),s.setUint32(4,o),r}else{var r=new Uint8Array(12),s=new DataView(r.buffer);return s.setUint32(0,i),et(s,4,t),r}}function Gr(e){var t=e.getTime(),i=Math.floor(t/1e3),r=(t-i*1e3)*1e6,s=Math.floor(r/1e9);return{sec:i+s,nsec:r-s*1e9}}function Yr(e){if(e instanceof Date){var t=Gr(e);return Kr(t)}else return null}function Zr(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:{var i=t.getUint32(0),r=0;return{sec:i,nsec:r}}case 8:{var s=t.getUint32(0),n=t.getUint32(4),i=(s&3)*4294967296+n,r=s>>>2;return{sec:i,nsec:r}}case 12:{var i=tt(t,4),r=t.getUint32(0);return{sec:i,nsec:r}}default:throw new N("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}function Qr(e){var t=Zr(e);return new Date(t.sec*1e3+t.nsec/1e6)}var ki={type:Wr,encode:Yr,decode:Qr};var it=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(ki)}return e.prototype.register=function(t){var i=t.type,r=t.encode,s=t.decode;if(i>=0)this.encoders[i]=r,this.decoders[i]=s;else{var n=1+i;this.builtInEncoders[n]=r,this.builtInDecoders[n]=s}},e.prototype.tryToEncode=function(t,i){for(var r=0;r<this.builtInEncoders.length;r++){var s=this.builtInEncoders[r];if(s!=null){var n=s(t,i);if(n!=null){var o=-1-r;return new Ie(o,n)}}}for(var r=0;r<this.encoders.length;r++){var s=this.encoders[r];if(s!=null){var n=s(t,i);if(n!=null){var o=r;return new Ie(o,n)}}}return t instanceof Ie?t:null},e.prototype.decode=function(t,i,r){var s=i<0?this.builtInDecoders[-1-i]:this.decoders[i];return s?s(t,i,r):new Ie(i,t)},e.defaultCodec=new e,e}();function ve(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}function Ti(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=ve(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}var es=100,ts=2048,Rt=function(){function e(t){var i,r,s,n,o,a,l,h;this.extensionCodec=(i=t==null?void 0:t.extensionCodec)!==null&&i!==void 0?i:it.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(r=t==null?void 0:t.useBigInt64)!==null&&r!==void 0?r:!1,this.maxDepth=(s=t==null?void 0:t.maxDepth)!==null&&s!==void 0?s:es,this.initialBufferSize=(n=t==null?void 0:t.initialBufferSize)!==null&&n!==void 0?n:ts,this.sortKeys=(o=t==null?void 0:t.sortKeys)!==null&&o!==void 0?o:!1,this.forceFloat32=(a=t==null?void 0:t.forceFloat32)!==null&&a!==void 0?a:!1,this.ignoreUndefined=(l=t==null?void 0:t.ignoreUndefined)!==null&&l!==void 0?l:!1,this.forceIntegerToFloat=(h=t==null?void 0:t.forceIntegerToFloat)!==null&&h!==void 0?h:!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(t){return this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(t){return this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(t,i){if(i>this.maxDepth)throw new Error("Too deep objects in depth ".concat(i));t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,i)},e.prototype.ensureBufferSizeToWrite=function(t){var i=this.pos+t;this.view.byteLength<i&&this.resizeBuffer(i*2)},e.prototype.resizeBuffer=function(t){var i=new ArrayBuffer(t),r=new Uint8Array(i),s=new DataView(i);r.set(this.bytes),this.view=s,this.bytes=r},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(t){t===!1?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)},e.prototype.encodeNumberAsFloat=function(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))},e.prototype.encodeBigInt64=function(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))},e.prototype.writeStringHeader=function(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error("Too long string: ".concat(t," bytes in UTF-8"))},e.prototype.encodeString=function(t){var i=1+4,r=yi(t);this.ensureBufferSizeToWrite(i+r),this.writeStringHeader(r),xi(t,this.bytes,this.pos),this.pos+=r},e.prototype.encodeObject=function(t,i){var r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,i);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,i);else throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(t)))},e.prototype.encodeBinary=function(t){var i=t.byteLength;if(i<256)this.writeU8(196),this.writeU8(i);else if(i<65536)this.writeU8(197),this.writeU16(i);else if(i<4294967296)this.writeU8(198),this.writeU32(i);else throw new Error("Too large binary: ".concat(i));var r=ve(t);this.writeU8a(r)},e.prototype.encodeArray=function(t,i){var r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error("Too large array: ".concat(r));for(var s=0,n=t;s<n.length;s++){var o=n[s];this.doEncode(o,i+1)}},e.prototype.countWithoutUndefined=function(t,i){for(var r=0,s=0,n=i;s<n.length;s++){var o=n[s];t[o]!==void 0&&r++}return r},e.prototype.encodeMap=function(t,i){var r=Object.keys(t);this.sortKeys&&r.sort();var s=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error("Too large map object: ".concat(s));for(var n=0,o=r;n<o.length;n++){var a=o[n],l=t[a];this.ignoreUndefined&&l===void 0||(this.encodeString(a),this.doEncode(l,i+1))}},e.prototype.encodeExtension=function(t){var i=t.data.length;if(i===1)this.writeU8(212);else if(i===2)this.writeU8(213);else if(i===4)this.writeU8(214);else if(i===8)this.writeU8(215);else if(i===16)this.writeU8(216);else if(i<256)this.writeU8(199),this.writeU8(i);else if(i<65536)this.writeU8(200),this.writeU16(i);else if(i<4294967296)this.writeU8(201),this.writeU32(i);else throw new Error("Too large extension object: ".concat(i));this.writeI8(t.type),this.writeU8a(t.data)},e.prototype.writeU8=function(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++},e.prototype.writeU8a=function(t){var i=t.length;this.ensureBufferSizeToWrite(i),this.bytes.set(t,this.pos),this.pos+=i},e.prototype.writeI8=function(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++},e.prototype.writeU16=function(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2},e.prototype.writeI16=function(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2},e.prototype.writeU32=function(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4},e.prototype.writeI32=function(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4},e.prototype.writeF32=function(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4},e.prototype.writeF64=function(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8},e.prototype.writeU64=function(t){this.ensureBufferSizeToWrite(8),Ei(this.view,this.pos,t),this.pos+=8},e.prototype.writeI64=function(t){this.ensureBufferSizeToWrite(8),et(this.view,this.pos,t),this.pos+=8},e.prototype.writeBigUint64=function(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8},e.prototype.writeBigInt64=function(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8},e}();function rt(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var is=16,rs=16,Ci=function(){function e(t,i){t===void 0&&(t=is),i===void 0&&(i=rs),this.maxKeyLength=t,this.maxLengthPerKey=i,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return e.prototype.canBeCached=function(t){return t>0&&t<=this.maxKeyLength},e.prototype.find=function(t,i,r){var s=this.caches[r-1];e:for(var n=0,o=s;n<o.length;n++){for(var a=o[n],l=a.bytes,h=0;h<r;h++)if(l[h]!==t[i+h])continue e;return a.str}return null},e.prototype.store=function(t,i){var r=this.caches[t.length-1],s={bytes:t,str:i};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)},e.prototype.decode=function(t,i,r){var s=this.find(t,i,r);if(s!=null)return this.hit++,s;this.miss++;var n=_t(t,i,r),o=Uint8Array.prototype.slice.call(t,i,i+r);return this.store(o,n),n},e}();var ss=function(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(c){try{h(r.next(c))}catch(p){o(p)}}function l(c){try{h(r.throw(c))}catch(p){o(p)}}function h(c){c.done?n(c.value):s(c.value).then(a,l)}h((r=r.apply(e,t||[])).next())})},Pt=function(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(c){return l([h,c])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(i=0)),i;)try{if(r=1,s&&(n=h[0]&2?s.return:h[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,h[1])).done)return n;switch(s=0,n&&(h=[h[0]&2,n.value]),h[0]){case 0:case 1:n=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){i.label=h[1];break}if(h[0]===6&&i.label<n[1]){i.label=n[1],n=h;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(h);break}n[2]&&i.ops.pop(),i.trys.pop();continue}h=t.call(e,i)}catch(c){h=[6,c],s=0}finally{r=n=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},_i=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=e[n]&&function(o){return new Promise(function(a,l){o=e[n](o),s(a,l,o.done,o.value)})}}function s(n,o,a,l){Promise.resolve(l).then(function(h){n({value:h,done:a})},o)}},we=function(e){return this instanceof we?(this.v=e,this):new we(e)},ns=function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),s,n=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(m){return new Promise(function(v,b){n.push([f,m,v,b])>1||a(f,m)})})}function a(f,m){try{l(r[f](m))}catch(v){p(n[0][3],v)}}function l(f){f.value instanceof we?Promise.resolve(f.value.v).then(h,c):p(n[0][2],f)}function h(f){a("next",f)}function c(f){a("throw",f)}function p(f,m){f(m),n.shift(),n.length&&a(n[0][0],n[0][1])}},Ri="array",st="map_key",os="map_value",as=function(e){return typeof e=="string"||typeof e=="number"},De=-1,It=new DataView(new ArrayBuffer(0)),ls=new Uint8Array(It.buffer);try{It.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var nt=RangeError,Pi=new nt("Insufficient data"),hs=new Ci,Dt=function(){function e(t){var i,r,s,n,o,a,l;this.totalPos=0,this.pos=0,this.view=It,this.bytes=ls,this.headByte=De,this.stack=[],this.extensionCodec=(i=t==null?void 0:t.extensionCodec)!==null&&i!==void 0?i:it.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(r=t==null?void 0:t.useBigInt64)!==null&&r!==void 0?r:!1,this.maxStrLength=(s=t==null?void 0:t.maxStrLength)!==null&&s!==void 0?s:ge,this.maxBinLength=(n=t==null?void 0:t.maxBinLength)!==null&&n!==void 0?n:ge,this.maxArrayLength=(o=t==null?void 0:t.maxArrayLength)!==null&&o!==void 0?o:ge,this.maxMapLength=(a=t==null?void 0:t.maxMapLength)!==null&&a!==void 0?a:ge,this.maxExtLength=(l=t==null?void 0:t.maxExtLength)!==null&&l!==void 0?l:ge,this.keyDecoder=(t==null?void 0:t.keyDecoder)!==void 0?t.keyDecoder:hs}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=De,this.stack.length=0},e.prototype.setBuffer=function(t){this.bytes=ve(t),this.view=Ti(this.bytes),this.pos=0},e.prototype.appendBuffer=function(t){if(this.headByte===De&&!this.hasRemaining(1))this.setBuffer(t);else{var i=this.bytes.subarray(this.pos),r=ve(t),s=new Uint8Array(i.length+r.length);s.set(i),s.set(r,i.length),this.setBuffer(s)}},e.prototype.hasRemaining=function(t){return this.view.byteLength-this.pos>=t},e.prototype.createExtraByteError=function(t){var i=this,r=i.view,s=i.pos;return new RangeError("Extra ".concat(r.byteLength-s," of ").concat(r.byteLength," byte(s) found at buffer[").concat(t,"]"))},e.prototype.decode=function(t){this.reinitializeState(),this.setBuffer(t);var i=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return i},e.prototype.decodeMulti=function(t){return Pt(this,function(i){switch(i.label){case 0:this.reinitializeState(),this.setBuffer(t),i.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return i.sent(),[3,1];case 3:return[2]}})},e.prototype.decodeAsync=function(t){var i,r,s,n,o,a,l;return ss(this,void 0,void 0,function(){var h,c,p,f,m,v,b,x;return Pt(this,function(g){switch(g.label){case 0:h=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),i=!0,r=_i(t),g.label=2;case 2:return[4,r.next()];case 3:if(s=g.sent(),n=s.done,!!n)return[3,5];l=s.value,i=!1;try{if(p=l,h)throw this.createExtraByteError(this.totalPos);this.appendBuffer(p);try{c=this.doDecodeSync(),h=!0}catch(w){if(!(w instanceof nt))throw w}this.totalPos+=this.pos}finally{i=!0}g.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return f=g.sent(),o={error:f},[3,12];case 7:return g.trys.push([7,,10,11]),!i&&!n&&(a=r.return)?[4,a.call(r)]:[3,9];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:if(h){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,c]}throw m=this,v=m.headByte,b=m.pos,x=m.totalPos,new RangeError("Insufficient data in parsing ".concat(rt(v)," at ").concat(x," (").concat(b," in the current buffer)"))}})})},e.prototype.decodeArrayStream=function(t){return this.decodeMultiAsync(t,!0)},e.prototype.decodeStream=function(t){return this.decodeMultiAsync(t,!1)},e.prototype.decodeMultiAsync=function(t,i){return ns(this,arguments,function(){var s,n,o,a,l,h,c,p,f,m,v,b;return Pt(this,function(x){switch(x.label){case 0:s=i,n=-1,x.label=1;case 1:x.trys.push([1,15,16,21]),o=!0,a=_i(t),x.label=2;case 2:return[4,we(a.next())];case 3:if(l=x.sent(),f=l.done,!!f)return[3,14];b=l.value,o=!1,x.label=4;case 4:if(x.trys.push([4,,12,13]),h=b,i&&n===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(h),s&&(n=this.readArraySize(),s=!1,this.complete()),x.label=5;case 5:x.trys.push([5,10,,11]),x.label=6;case 6:return[4,we(this.doDecodeSync())];case 7:return[4,x.sent()];case 8:return x.sent(),--n==0?[3,9]:[3,6];case 9:return[3,11];case 10:if(c=x.sent(),!(c instanceof nt))throw c;return[3,11];case 11:return this.totalPos+=this.pos,[3,13];case 12:return o=!0,[7];case 13:return[3,2];case 14:return[3,21];case 15:return p=x.sent(),m={error:p},[3,21];case 16:return x.trys.push([16,,19,20]),!o&&!f&&(v=a.return)?[4,we(v.call(a))]:[3,18];case 17:x.sent(),x.label=18;case 18:return[3,20];case 19:if(m)throw m.error;return[7];case 20:return[7];case 21:return[2]}})})},e.prototype.doDecodeSync=function(){e:for(;;){var t=this.readHeadByte(),i=void 0;if(t>=224)i=t-256;else if(t<192)if(t<128)i=t;else if(t<144){var r=t-128;if(r!==0){this.pushMapState(r),this.complete();continue e}else i={}}else if(t<160){var r=t-144;if(r!==0){this.pushArrayState(r),this.complete();continue e}else i=[]}else{var s=t-160;i=this.decodeUtf8String(s,0)}else if(t===192)i=null;else if(t===194)i=!1;else if(t===195)i=!0;else if(t===202)i=this.readF32();else if(t===203)i=this.readF64();else if(t===204)i=this.readU8();else if(t===205)i=this.readU16();else if(t===206)i=this.readU32();else if(t===207)this.useBigInt64?i=this.readU64AsBigInt():i=this.readU64();else if(t===208)i=this.readI8();else if(t===209)i=this.readI16();else if(t===210)i=this.readI32();else if(t===211)this.useBigInt64?i=this.readI64AsBigInt():i=this.readI64();else if(t===217){var s=this.lookU8();i=this.decodeUtf8String(s,1)}else if(t===218){var s=this.lookU16();i=this.decodeUtf8String(s,2)}else if(t===219){var s=this.lookU32();i=this.decodeUtf8String(s,4)}else if(t===220){var r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue e}else i=[]}else if(t===221){var r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue e}else i=[]}else if(t===222){var r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue e}else i={}}else if(t===223){var r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue e}else i={}}else if(t===196){var r=this.lookU8();i=this.decodeBinary(r,1)}else if(t===197){var r=this.lookU16();i=this.decodeBinary(r,2)}else if(t===198){var r=this.lookU32();i=this.decodeBinary(r,4)}else if(t===212)i=this.decodeExtension(1,0);else if(t===213)i=this.decodeExtension(2,0);else if(t===214)i=this.decodeExtension(4,0);else if(t===215)i=this.decodeExtension(8,0);else if(t===216)i=this.decodeExtension(16,0);else if(t===199){var r=this.lookU8();i=this.decodeExtension(r,1)}else if(t===200){var r=this.lookU16();i=this.decodeExtension(r,2)}else if(t===201){var r=this.lookU32();i=this.decodeExtension(r,4)}else throw new N("Unrecognized type byte: ".concat(rt(t)));this.complete();for(var n=this.stack;n.length>0;){var o=n[n.length-1];if(o.type===Ri)if(o.array[o.position]=i,o.position++,o.position===o.size)n.pop(),i=o.array;else continue e;else if(o.type===st){if(!as(i))throw new N("The type of key must be string or number but "+typeof i);if(i==="__proto__")throw new N("The key __proto__ is not allowed");o.key=i,o.type=os;continue e}else if(o.map[o.key]=i,o.readCount++,o.readCount===o.size)n.pop(),i=o.map;else{o.key=null,o.type=st;continue e}}return i}},e.prototype.readHeadByte=function(){return this.headByte===De&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=De},e.prototype.readArraySize=function(){var t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new N("Unrecognized array type byte: ".concat(rt(t)))}}},e.prototype.pushMapState=function(t){if(t>this.maxMapLength)throw new N("Max length exceeded: map length (".concat(t,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:st,size:t,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(t){if(t>this.maxArrayLength)throw new N("Max length exceeded: array length (".concat(t,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:Ri,size:t,array:new Array(t),position:0})},e.prototype.decodeUtf8String=function(t,i){var r;if(t>this.maxStrLength)throw new N("Max length exceeded: UTF-8 byte length (".concat(t,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+i+t)throw Pi;var s=this.pos+i,n;return this.stateIsMapKey()&&((r=this.keyDecoder)===null||r===void 0?void 0:r.canBeCached(t))?n=this.keyDecoder.decode(this.bytes,s,t):n=Si(this.bytes,s,t),this.pos+=i+t,n},e.prototype.stateIsMapKey=function(){if(this.stack.length>0){var t=this.stack[this.stack.length-1];return t.type===st}return!1},e.prototype.decodeBinary=function(t,i){if(t>this.maxBinLength)throw new N("Max length exceeded: bin length (".concat(t,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(t+i))throw Pi;var r=this.pos+i,s=this.bytes.subarray(r,r+t);return this.pos+=i+t,s},e.prototype.decodeExtension=function(t,i){if(t>this.maxExtLength)throw new N("Max length exceeded: ext length (".concat(t,") > maxExtLength (").concat(this.maxExtLength,")"));var r=this.view.getInt8(this.pos+i),s=this.decodeBinary(t,i+1);return this.extensionCodec.decode(s,r,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var t=this.view.getUint8(this.pos);return this.pos++,t},e.prototype.readI8=function(){var t=this.view.getInt8(this.pos);return this.pos++,t},e.prototype.readU16=function(){var t=this.view.getUint16(this.pos);return this.pos+=2,t},e.prototype.readI16=function(){var t=this.view.getInt16(this.pos);return this.pos+=2,t},e.prototype.readU32=function(){var t=this.view.getUint32(this.pos);return this.pos+=4,t},e.prototype.readI32=function(){var t=this.view.getInt32(this.pos);return this.pos+=4,t},e.prototype.readU64=function(){var t=Ai(this.view,this.pos);return this.pos+=8,t},e.prototype.readI64=function(){var t=tt(this.view,this.pos);return this.pos+=8,t},e.prototype.readU64AsBigInt=function(){var t=this.view.getBigUint64(this.pos);return this.pos+=8,t},e.prototype.readI64AsBigInt=function(){var t=this.view.getBigInt64(this.pos);return this.pos+=8,t},e.prototype.readF32=function(){var t=this.view.getFloat32(this.pos);return this.pos+=4,t},e.prototype.readF64=function(){var t=this.view.getFloat64(this.pos);return this.pos+=8,t},e}();var Lt={};Ui(Lt,{default:()=>cs});var cs={mounted(){let e=document.querySelector("meta[name='csrf-token']").getAttribute("content"),t=[],i=null,r=g=>{p&&g.interactions.length!==0&&console.log("sending",g)("/test/store_interactions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":e},body:JSON.stringify(g)})},s=g=>{if(g.id&&!g.id.startsWith("phx-"))return`#${g.id}`;let w=[];for(;!g.id.startsWith("phx-");){let k=g.tagName.toLowerCase(),C=g,$=1;for(;C=C.previousElementSibling;)C.tagName.toLowerCase()===k&&$++;w.unshift(`${k}:nth-of-type(${$})`),g=g.parentNode}return w.join(" > ")},n=g=>{let w=g.parentNode;for(;w.tagName!=="FORM";)w=w.parentNode;return w.id},o=g=>{console.log(g),i&&g.selector!=="#stop-recording"&&pushEventTo(this.el,"record-interaction",g)},a=g=>{let w=g.target,k=s(w);if(k){let C={type:"click",selector:k,timestamp:Date.now()};o(C)}},l=g=>{let w=g.target,k=s(w);if(console.log(g),k){let C={type:"input",selector:k,name:w.name,form:n(w),value:w.value,timestamp:Date.now()};o(C)}},h=g=>{if(p){g.preventDefault();let w=g.target;console.log(w);let k=s(w);if(k){let C={type:"assert_text",selector:k,text:w.textContent.trim(),timestamp:Date.now()};o(C)}}},c=g=>!!g.text?.trim(),p=!1,f="input",m="button, a, input[type='checkbox']",v=g=>{g.querySelectorAll(f).forEach(w=>{w.addEventListener("input",l)}),g.querySelectorAll(m).forEach(w=>{w.addEventListener("click",a)}),g.querySelectorAll("*").forEach(w=>{c(w)&&w.addEventListener("contextmenu",h,!0)})},b=g=>{g.querySelectorAll(f).forEach(w=>{w.removeEventListener("input",l)}),g.querySelectorAll(m).forEach(w=>{w.removeEventListener("click",a)}),g.querySelectorAll("*").forEach(w=>{c(w)&&(console.log(w),console.log(w.removeEventListener("contextmenu",h,!0)))})};window.addEventListener("phx:redirect",g=>{console.log(g)}),window.addEventListener("phx:start-recording",g=>{p=!0,i=g.detail.module+Date.now().toString(),console.log(i),v(document),x.observe(document.body,{childList:!0,subtree:!0}),t=[{type:"path",path:g.detail.path,timestamp:Date.now()}]}),window.addEventListener("phx:stop-recording",()=>{r({name:i,interactions:t}),x.disconnect(),b(document),p=!1});let x=new MutationObserver(g=>{g.forEach(w=>{w.addedNodes.forEach(k=>{k.nodeType===1&&(console.log(k),v(k))})})})}};function ds(e,t){let i={};return Object.keys(e).map(function(r){i[`${t}#${r}`]=e[r]}),i}var us=Object.assign(ds(Lt,"Punkix.Web.Components.InteractionRecorder")),Le=us;var Qs=new Rt({ignoreUndefined:!0}),en=new Dt;var fs=document.querySelector("meta[name='csrf-token']").getAttribute("content"),Ii=new bi("/live",Ht,{hooks:{...Le,...Le},longPollFallbackMs:2500,params:{_csrf_token:fs}});function ps(){for(detail of document.querySelectorAll("details"))detail.addEventListener("toggle",e=>{let t=`details_${detail.id}`;detail.open?localStorage.setItem(t,!0):localStorage.removeItem(t)})}function ms(){for(detail of document.querySelectorAll("details"))detail.id&&localStorage.getItem(`details_${detail.id}`)&&detail.setAttribute("open","")}document.addEventListener("phx:update",ms);document.addEventListener("DOMContentLoaded",ps);Ii.connect();window.liveSocket=Ii;})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vZGVwcy9waG9lbml4X2h0bWwvcHJpdi9zdGF0aWMvcGhvZW5peF9odG1sLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC91dGlscy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY29uc3RhbnRzLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9wdXNoLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC90aW1lci5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY2hhbm5lbC5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvYWpheC5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvbG9uZ3BvbGwuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3ByZXNlbmNlLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zZXJpYWxpemVyLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zb2NrZXQuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvY29uc3RhbnRzLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2VudHJ5X3VwbG9hZGVyLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3V0aWxzLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2Jyb3dzZXIuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvYXJpYS5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9qcy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb20uanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdXBsb2FkX2VudHJ5LmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2xpdmVfdXBsb2FkZXIuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvaG9va3MuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXIuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvbm9kZV9tb2R1bGVzL21vcnBoZG9tL2Rpc3QvbW9ycGhkb20tZXNtLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbV9wYXRjaC5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9yZW5kZXJlZC5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy92aWV3X2hvb2suanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdmlldy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3NvY2tldC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9zcmMvdXRpbHMvdXRmOC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9zcmMvRXh0RGF0YS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9zcmMvRGVjb2RlRXJyb3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svc3JjL3V0aWxzL2ludC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9zcmMvdGltZXN0YW1wLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AbXNncGFjay9tc2dwYWNrL3NyYy9FeHRlbnNpb25Db2RlYy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9zcmMvdXRpbHMvdHlwZWRBcnJheXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svc3JjL0VuY29kZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svc3JjL3V0aWxzL3ByZXR0eUJ5dGUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svc3JjL0NhY2hlZEtleURlY29kZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svc3JjL0RlY29kZXIudHMiLCAiLi4vLi4vYXNzZXRzL2pzL19ob29rcy9QdW5raXguV2ViLkNvbXBvbmVudHMuSW50ZXJhY3Rpb25SZWNvcmRlci5ob29rcy5qcyIsICIuLi8uLi9hc3NldHMvanMvX2hvb2tzL2luZGV4LmpzIiwgIi4uLy4uL2Fzc2V0cy9qcy9wdW5raXgvaW5kZXguanMiLCAiLi4vLi4vYXNzZXRzL2pzL2FwcC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIFBvbHlmaWxsRXZlbnQgPSBldmVudENvbnN0cnVjdG9yKCk7XG5cbiAgZnVuY3Rpb24gZXZlbnRDb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gd2luZG93LkN1c3RvbUV2ZW50O1xuICAgIC8vIElFPD05IFN1cHBvcnRcbiAgICBmdW5jdGlvbiBDdXN0b21FdmVudChldmVudCwgcGFyYW1zKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge2J1YmJsZXM6IGZhbHNlLCBjYW5jZWxhYmxlOiBmYWxzZSwgZGV0YWlsOiB1bmRlZmluZWR9O1xuICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgZXZ0LmluaXRDdXN0b21FdmVudChldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgICAgIHJldHVybiBldnQ7XG4gICAgfVxuICAgIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XG4gICAgcmV0dXJuIEN1c3RvbUV2ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRIaWRkZW5JbnB1dChuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBpbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICBpbnB1dC5uYW1lID0gbmFtZTtcbiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGVsZW1lbnQsIHRhcmdldE1vZGlmaWVyS2V5KSB7XG4gICAgdmFyIHRvID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvXCIpLFxuICAgICAgICBtZXRob2QgPSBidWlsZEhpZGRlbklucHV0KFwiX21ldGhvZFwiLCBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpKSxcbiAgICAgICAgY3NyZiA9IGJ1aWxkSGlkZGVuSW5wdXQoXCJfY3NyZl90b2tlblwiLCBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtY3NyZlwiKSksXG4gICAgICAgIGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKSxcbiAgICAgICAgc3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxuICAgICAgICB0YXJnZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKTtcblxuICAgIGZvcm0ubWV0aG9kID0gKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikgPT09IFwiZ2V0XCIpID8gXCJnZXRcIiA6IFwicG9zdFwiO1xuICAgIGZvcm0uYWN0aW9uID0gdG87XG4gICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICBpZiAodGFyZ2V0KSBmb3JtLnRhcmdldCA9IHRhcmdldDtcbiAgICBlbHNlIGlmICh0YXJnZXRNb2RpZmllcktleSkgZm9ybS50YXJnZXQgPSBcIl9ibGFua1wiO1xuXG4gICAgZm9ybS5hcHBlbmRDaGlsZChjc3JmKTtcbiAgICBmb3JtLmFwcGVuZENoaWxkKG1ldGhvZCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgIC8vIEluc2VydCBhIGJ1dHRvbiBhbmQgY2xpY2sgaXQgaW5zdGVhZCBvZiB1c2luZyBgZm9ybS5zdWJtaXRgXG4gICAgLy8gYmVjYXVzZSB0aGUgYHN1Ym1pdGAgZnVuY3Rpb24gZG9lcyBub3QgZW1pdCBhIGBzdWJtaXRgIGV2ZW50LlxuICAgIHN1Ym1pdC50eXBlID0gXCJzdWJtaXRcIjtcbiAgICBmb3JtLmFwcGVuZENoaWxkKHN1Ym1pdCk7XG4gICAgc3VibWl0LmNsaWNrKCk7XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblxuICAgIHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKSB7XG4gICAgICB2YXIgcGhvZW5peExpbmtFdmVudCA9IG5ldyBQb2x5ZmlsbEV2ZW50KCdwaG9lbml4LmxpbmsuY2xpY2snLCB7XG4gICAgICAgIFwiYnViYmxlc1wiOiB0cnVlLCBcImNhbmNlbGFibGVcIjogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghZWxlbWVudC5kaXNwYXRjaEV2ZW50KHBob2VuaXhMaW5rRXZlbnQpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSkge1xuICAgICAgICBoYW5kbGVDbGljayhlbGVtZW50LCBlLm1ldGFLZXkgfHwgZS5zaGlmdEtleSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIGZhbHNlKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGhvZW5peC5saW5rLmNsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgbWVzc2FnZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtY29uZmlybVwiKTtcbiAgICBpZihtZXNzYWdlICYmICF3aW5kb3cuY29uZmlybShtZXNzYWdlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwgZmFsc2UpO1xufSkoKTtcbiIsICIvLyB3cmFwcyB2YWx1ZSBpbiBjbG9zdXJlIG9yIHJldHVybnMgY2xvc3VyZVxuZXhwb3J0IGxldCBjbG9zdXJlID0gKHZhbHVlKSA9PiB7XG4gIGlmKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKXtcbiAgICByZXR1cm4gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICBsZXQgY2xvc3VyZSA9IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsdWUgfVxuICAgIHJldHVybiBjbG9zdXJlXG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgZ2xvYmFsU2VsZiA9IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IG51bGxcbmV4cG9ydCBjb25zdCBwaHhXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogbnVsbFxuZXhwb3J0IGNvbnN0IGdsb2JhbCA9IGdsb2JhbFNlbGYgfHwgcGh4V2luZG93IHx8IGdsb2JhbFxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVlNOID0gXCIyLjAuMFwiXG5leHBvcnQgY29uc3QgU09DS0VUX1NUQVRFUyA9IHtjb25uZWN0aW5nOiAwLCBvcGVuOiAxLCBjbG9zaW5nOiAyLCBjbG9zZWQ6IDN9XG5leHBvcnQgY29uc3QgREVGQVVMVF9USU1FT1VUID0gMTAwMDBcbmV4cG9ydCBjb25zdCBXU19DTE9TRV9OT1JNQUwgPSAxMDAwXG5leHBvcnQgY29uc3QgQ0hBTk5FTF9TVEFURVMgPSB7XG4gIGNsb3NlZDogXCJjbG9zZWRcIixcbiAgZXJyb3JlZDogXCJlcnJvcmVkXCIsXG4gIGpvaW5lZDogXCJqb2luZWRcIixcbiAgam9pbmluZzogXCJqb2luaW5nXCIsXG4gIGxlYXZpbmc6IFwibGVhdmluZ1wiLFxufVxuZXhwb3J0IGNvbnN0IENIQU5ORUxfRVZFTlRTID0ge1xuICBjbG9zZTogXCJwaHhfY2xvc2VcIixcbiAgZXJyb3I6IFwicGh4X2Vycm9yXCIsXG4gIGpvaW46IFwicGh4X2pvaW5cIixcbiAgcmVwbHk6IFwicGh4X3JlcGx5XCIsXG4gIGxlYXZlOiBcInBoeF9sZWF2ZVwiXG59XG5cbmV4cG9ydCBjb25zdCBUUkFOU1BPUlRTID0ge1xuICBsb25ncG9sbDogXCJsb25ncG9sbFwiLFxuICB3ZWJzb2NrZXQ6IFwid2Vic29ja2V0XCJcbn1cbmV4cG9ydCBjb25zdCBYSFJfU1RBVEVTID0ge1xuICBjb21wbGV0ZTogNFxufVxuIiwgIi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFB1c2hcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBUaGUgZXZlbnQsIGZvciBleGFtcGxlIGBcInBoeF9qb2luXCJgXG4gKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCAtIFRoZSBwYXlsb2FkLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IDEyM31gXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCAtIFRoZSBwdXNoIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1c2gge1xuICBjb25zdHJ1Y3RvcihjaGFubmVsLCBldmVudCwgcGF5bG9hZCwgdGltZW91dCl7XG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuZXZlbnQgPSBldmVudFxuICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQgfHwgZnVuY3Rpb24gKCl7IHJldHVybiB7fSB9XG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICAgIHRoaXMucmVjSG9va3MgPSBbXVxuICAgIHRoaXMuc2VudCA9IGZhbHNlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRcbiAgICovXG4gIHJlc2VuZCh0aW1lb3V0KXtcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy5yZXNldCgpXG4gICAgdGhpcy5zZW5kKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc2VuZCgpe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoXCJ0aW1lb3V0XCIpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnN0YXJ0VGltZW91dCgpXG4gICAgdGhpcy5zZW50ID0gdHJ1ZVxuICAgIHRoaXMuY2hhbm5lbC5zb2NrZXQucHVzaCh7XG4gICAgICB0b3BpYzogdGhpcy5jaGFubmVsLnRvcGljLFxuICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQoKSxcbiAgICAgIHJlZjogdGhpcy5yZWYsXG4gICAgICBqb2luX3JlZjogdGhpcy5jaGFubmVsLmpvaW5SZWYoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBzdGF0dXNcbiAgICogQHBhcmFtIHsqfSBjYWxsYmFja1xuICAgKi9cbiAgcmVjZWl2ZShzdGF0dXMsIGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLmhhc1JlY2VpdmVkKHN0YXR1cykpe1xuICAgICAgY2FsbGJhY2sodGhpcy5yZWNlaXZlZFJlc3AucmVzcG9uc2UpXG4gICAgfVxuXG4gICAgdGhpcy5yZWNIb29rcy5wdXNoKHtzdGF0dXMsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXNldCgpe1xuICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgIHRoaXMucmVmID0gbnVsbFxuICAgIHRoaXMucmVmRXZlbnQgPSBudWxsXG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF0Y2hSZWNlaXZlKHtzdGF0dXMsIHJlc3BvbnNlLCBfcmVmfSl7XG4gICAgdGhpcy5yZWNIb29rcy5maWx0ZXIoaCA9PiBoLnN0YXR1cyA9PT0gc3RhdHVzKVxuICAgICAgLmZvckVhY2goaCA9PiBoLmNhbGxiYWNrKHJlc3BvbnNlKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuY2VsUmVmRXZlbnQoKXtcbiAgICBpZighdGhpcy5yZWZFdmVudCl7IHJldHVybiB9XG4gICAgdGhpcy5jaGFubmVsLm9mZih0aGlzLnJlZkV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFRpbWVyKVxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGFydFRpbWVvdXQoKXtcbiAgICBpZih0aGlzLnRpbWVvdXRUaW1lcil7IHRoaXMuY2FuY2VsVGltZW91dCgpIH1cbiAgICB0aGlzLnJlZiA9IHRoaXMuY2hhbm5lbC5zb2NrZXQubWFrZVJlZigpXG4gICAgdGhpcy5yZWZFdmVudCA9IHRoaXMuY2hhbm5lbC5yZXBseUV2ZW50TmFtZSh0aGlzLnJlZilcblxuICAgIHRoaXMuY2hhbm5lbC5vbih0aGlzLnJlZkV2ZW50LCBwYXlsb2FkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgICAgdGhpcy5jYW5jZWxUaW1lb3V0KClcbiAgICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gcGF5bG9hZFxuICAgICAgdGhpcy5tYXRjaFJlY2VpdmUocGF5bG9hZClcbiAgICB9KVxuXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcihcInRpbWVvdXRcIiwge30pXG4gICAgfSwgdGhpcy50aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXNSZWNlaXZlZChzdGF0dXMpe1xuICAgIHJldHVybiB0aGlzLnJlY2VpdmVkUmVzcCAmJiB0aGlzLnJlY2VpdmVkUmVzcC5zdGF0dXMgPT09IHN0YXR1c1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKHN0YXR1cywgcmVzcG9uc2Upe1xuICAgIHRoaXMuY2hhbm5lbC50cmlnZ2VyKHRoaXMucmVmRXZlbnQsIHtzdGF0dXMsIHJlc3BvbnNlfSlcbiAgfVxufVxuIiwgIi8qKlxuICpcbiAqIENyZWF0ZXMgYSB0aW1lciB0aGF0IGFjY2VwdHMgYSBgdGltZXJDYWxjYCBmdW5jdGlvbiB0byBwZXJmb3JtXG4gKiBjYWxjdWxhdGVkIHRpbWVvdXQgcmV0cmllcywgc3VjaCBhcyBleHBvbmVudGlhbCBiYWNrb2ZmLlxuICpcbiAqIEBleGFtcGxlXG4gKiBsZXQgcmVjb25uZWN0VGltZXIgPSBuZXcgVGltZXIoKCkgPT4gdGhpcy5jb25uZWN0KCksIGZ1bmN0aW9uKHRyaWVzKXtcbiAqICAgcmV0dXJuIFsxMDAwLCA1MDAwLCAxMDAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICogfSlcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDUwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZXJDYWxjXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyIHtcbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHRpbWVyQ2FsYyl7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrXG4gICAgdGhpcy50aW1lckNhbGMgPSB0aW1lckNhbGNcbiAgICB0aGlzLnRpbWVyID0gbnVsbFxuICAgIHRoaXMudHJpZXMgPSAwXG4gIH1cblxuICByZXNldCgpe1xuICAgIHRoaXMudHJpZXMgPSAwXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyBhbnkgcHJldmlvdXMgc2NoZWR1bGVUaW1lb3V0IGFuZCBzY2hlZHVsZXMgY2FsbGJhY2tcbiAgICovXG4gIHNjaGVkdWxlVGltZW91dCgpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKVxuXG4gICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmllcyA9IHRoaXMudHJpZXMgKyAxXG4gICAgICB0aGlzLmNhbGxiYWNrKClcbiAgICB9LCB0aGlzLnRpbWVyQ2FsYyh0aGlzLnRyaWVzICsgMSkpXG4gIH1cbn1cbiIsICJpbXBvcnQge2Nsb3N1cmV9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTLFxuICBDSEFOTkVMX1NUQVRFUyxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IFB1c2ggZnJvbSBcIi4vcHVzaFwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9waWNcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IHBhcmFtc1xuICogQHBhcmFtIHtTb2NrZXR9IHNvY2tldFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFubmVsIHtcbiAgY29uc3RydWN0b3IodG9waWMsIHBhcmFtcywgc29ja2V0KXtcbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgdGhpcy50b3BpYyA9IHRvcGljXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKHBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLnNvY2tldCA9IHNvY2tldFxuICAgIHRoaXMuYmluZGluZ3MgPSBbXVxuICAgIHRoaXMuYmluZGluZ1JlZiA9IDBcbiAgICB0aGlzLnRpbWVvdXQgPSB0aGlzLnNvY2tldC50aW1lb3V0XG4gICAgdGhpcy5qb2luZWRPbmNlID0gZmFsc2VcbiAgICB0aGlzLmpvaW5QdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMuam9pbiwgdGhpcy5wYXJhbXMsIHRoaXMudGltZW91dClcbiAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VSZWZzID0gW11cblxuICAgIHRoaXMucmVqb2luVGltZXIgPSBuZXcgVGltZXIoKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luKCkgfVxuICAgIH0sIHRoaXMuc29ja2V0LnJlam9pbkFmdGVyTXMpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbkVycm9yKCgpID0+IHRoaXMucmVqb2luVGltZXIucmVzZXQoKSkpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbk9wZW4oKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLmlzRXJyb3JlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSlcbiAgICApXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5lZFxuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIuZm9yRWFjaChwdXNoRXZlbnQgPT4gcHVzaEV2ZW50LnNlbmQoKSlcbiAgICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5vbkNsb3NlKCgpID0+IHtcbiAgICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGNsb3NlICR7dGhpcy50b3BpY30gJHt0aGlzLmpvaW5SZWYoKX1gKVxuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmNsb3NlZFxuICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlKHRoaXMpXG4gICAgfSlcbiAgICB0aGlzLm9uRXJyb3IocmVhc29uID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBlcnJvciAke3RoaXMudG9waWN9YCwgcmVhc29uKVxuICAgICAgaWYodGhpcy5pc0pvaW5pbmcoKSl7IHRoaXMuam9pblB1c2gucmVzZXQoKSB9XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgdGltZW91dCAke3RoaXMudG9waWN9ICgke3RoaXMuam9pblJlZigpfSlgLCB0aGlzLmpvaW5QdXNoLnRpbWVvdXQpXG4gICAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aGlzLnRpbWVvdXQpXG4gICAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgdGhpcy5qb2luUHVzaC5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uKENIQU5ORUxfRVZFTlRTLnJlcGx5LCAocGF5bG9hZCwgcmVmKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXIodGhpcy5yZXBseUV2ZW50TmFtZShyZWYpLCBwYXlsb2FkKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSm9pbiB0aGUgY2hhbm5lbFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cmllZCB0byBqb2luIG11bHRpcGxlIHRpbWVzLiAnam9pbicgY2FuIG9ubHkgYmUgY2FsbGVkIGEgc2luZ2xlIHRpbWUgcGVyIGNoYW5uZWwgaW5zdGFuY2VcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgICAgdGhpcy5qb2luZWRPbmNlID0gdHJ1ZVxuICAgICAgdGhpcy5yZWpvaW4oKVxuICAgICAgcmV0dXJuIHRoaXMuam9pblB1c2hcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgY2xvc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuY2xvc2UsIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIEhvb2sgaW50byBjaGFubmVsIGVycm9yc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgcmV0dXJuIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuZXJyb3IsIHJlYXNvbiA9PiBjYWxsYmFjayhyZWFzb24pKVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgb24gY2hhbm5lbCBldmVudHNcbiAgICpcbiAgICogU3Vic2NyaXB0aW9uIHJldHVybnMgYSByZWYgY291bnRlciwgd2hpY2ggY2FuIGJlIHVzZWQgbGF0ZXIgdG9cbiAgICogdW5zdWJzY3JpYmUgdGhlIGV4YWN0IGV2ZW50IGxpc3RlbmVyXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNvbnN0IHJlZjIgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fb3RoZXJfc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICogLy8gU2luY2UgdW5zdWJzY3JpcHRpb24sIGRvX3N0dWZmIHdvbid0IGZpcmUsXG4gICAqIC8vIHdoaWxlIGRvX290aGVyX3N0dWZmIHdpbGwga2VlcCBmaXJpbmcgb24gdGhlIFwiZXZlbnRcIlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybnMge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5iaW5kaW5nUmVmKytcbiAgICB0aGlzLmJpbmRpbmdzLnB1c2goe2V2ZW50LCByZWYsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogVW5zdWJzY3JpYmVzIG9mZiBvZiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBVc2UgdGhlIHJlZiByZXR1cm5lZCBmcm9tIGEgY2hhbm5lbC5vbigpIHRvIHVuc3Vic2NyaWJlIG9uZVxuICAgKiBoYW5kbGVyLCBvciBwYXNzIG5vdGhpbmcgZm9yIHRoZSByZWYgdG8gdW5zdWJzY3JpYmUgYWxsXG4gICAqIGhhbmRsZXJzIGZvciB0aGUgZ2l2ZW4gZXZlbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFVuc3Vic2NyaWJlIHRoZSBkb19zdHVmZiBoYW5kbGVyXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICpcbiAgICogLy8gVW5zdWJzY3JpYmUgYWxsIGhhbmRsZXJzIGZyb20gZXZlbnRcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiKVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSByZWZcbiAgICovXG4gIG9mZihldmVudCwgcmVmKXtcbiAgICB0aGlzLmJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoKGJpbmQpID0+IHtcbiAgICAgIHJldHVybiAhKGJpbmQuZXZlbnQgPT09IGV2ZW50ICYmICh0eXBlb2YgcmVmID09PSBcInVuZGVmaW5lZFwiIHx8IHJlZiA9PT0gYmluZC5yZWYpKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhblB1c2goKXsgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5pc0pvaW5lZCgpIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIGBldmVudGAgdG8gcGhvZW5peCB3aXRoIHRoZSBwYXlsb2FkIGBwYXlsb2FkYC5cbiAgICogUGhvZW5peCByZWNlaXZlcyB0aGlzIGluIHRoZSBgaGFuZGxlX2luKGV2ZW50LCBwYXlsb2FkLCBzb2NrZXQpYFxuICAgKiBmdW5jdGlvbi4gaWYgcGhvZW5peCByZXBsaWVzIG9yIGl0IHRpbWVzIG91dCAoZGVmYXVsdCAxMDAwMG1zKSxcbiAgICogdGhlbiBvcHRpb25hbGx5IHRoZSByZXBseSBjYW4gYmUgcmVjZWl2ZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwucHVzaChcImV2ZW50XCIpXG4gICAqICAgLnJlY2VpdmUoXCJva1wiLCBwYXlsb2FkID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCByZXBsaWVkOlwiLCBwYXlsb2FkKSlcbiAgICogICAucmVjZWl2ZShcImVycm9yXCIsIGVyciA9PiBjb25zb2xlLmxvZyhcInBob2VuaXggZXJyb3JlZFwiLCBlcnIpKVxuICAgKiAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiBjb25zb2xlLmxvZyhcInRpbWVkIG91dCBwdXNoaW5nXCIpKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lb3V0XVxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIHB1c2goZXZlbnQsIHBheWxvYWQsIHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IHt9XG4gICAgaWYoIXRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRyaWVkIHRvIHB1c2ggJyR7ZXZlbnR9JyB0byAnJHt0aGlzLnRvcGljfScgYmVmb3JlIGpvaW5pbmcuIFVzZSBjaGFubmVsLmpvaW4oKSBiZWZvcmUgcHVzaGluZyBldmVudHNgKVxuICAgIH1cbiAgICBsZXQgcHVzaEV2ZW50ID0gbmV3IFB1c2godGhpcywgZXZlbnQsIGZ1bmN0aW9uICgpeyByZXR1cm4gcGF5bG9hZCB9LCB0aW1lb3V0KVxuICAgIGlmKHRoaXMuY2FuUHVzaCgpKXtcbiAgICAgIHB1c2hFdmVudC5zZW5kKClcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaEV2ZW50LnN0YXJ0VGltZW91dCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIucHVzaChwdXNoRXZlbnQpXG4gICAgfVxuXG4gICAgcmV0dXJuIHB1c2hFdmVudFxuICB9XG5cbiAgLyoqIExlYXZlcyB0aGUgY2hhbm5lbFxuICAgKlxuICAgKiBVbnN1YnNjcmliZXMgZnJvbSBzZXJ2ZXIgZXZlbnRzLCBhbmRcbiAgICogaW5zdHJ1Y3RzIGNoYW5uZWwgdG8gdGVybWluYXRlIG9uIHNlcnZlclxuICAgKlxuICAgKiBUcmlnZ2VycyBvbkNsb3NlKCkgaG9va3NcbiAgICpcbiAgICogVG8gcmVjZWl2ZSBsZWF2ZSBhY2tub3dsZWRnZW1lbnRzLCB1c2UgdGhlIGByZWNlaXZlYFxuICAgKiBob29rIHRvIGJpbmQgdG8gdGhlIHNlcnZlciBhY2ssIGllOlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjaGFubmVsLmxlYXZlKCkucmVjZWl2ZShcIm9rXCIsICgpID0+IGFsZXJ0KFwibGVmdCFcIikgKVxuICAgKlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBsZWF2ZSh0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICB0aGlzLmpvaW5QdXNoLmNhbmNlbFRpbWVvdXQoKVxuXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmxlYXZpbmdcbiAgICBsZXQgb25DbG9zZSA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBsZWF2ZSAke3RoaXMudG9waWN9YClcbiAgICAgIHRoaXMudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgXCJsZWF2ZVwiKVxuICAgIH1cbiAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aW1lb3V0KVxuICAgIGxlYXZlUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IG9uQ2xvc2UoKSlcbiAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgaWYoIXRoaXMuY2FuUHVzaCgpKXsgbGVhdmVQdXNoLnRyaWdnZXIoXCJva1wiLCB7fSkgfVxuXG4gICAgcmV0dXJuIGxlYXZlUHVzaFxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRhYmxlIG1lc3NhZ2UgaG9va1xuICAgKlxuICAgKiBSZWNlaXZlcyBhbGwgZXZlbnRzIGZvciBzcGVjaWFsaXplZCBtZXNzYWdlIGhhbmRsaW5nXG4gICAqIGJlZm9yZSBkaXNwYXRjaGluZyB0byB0aGUgY2hhbm5lbCBjYWxsYmFja3MuXG4gICAqXG4gICAqIE11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgb25NZXNzYWdlKF9ldmVudCwgcGF5bG9hZCwgX3JlZil7IHJldHVybiBwYXlsb2FkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzTWVtYmVyKHRvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZil7XG4gICAgaWYodGhpcy50b3BpYyAhPT0gdG9waWMpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgaWYoam9pblJlZiAmJiBqb2luUmVmICE9PSB0aGlzLmpvaW5SZWYoKSl7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBcImRyb3BwaW5nIG91dGRhdGVkIG1lc3NhZ2VcIiwge3RvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZn0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGpvaW5SZWYoKXsgcmV0dXJuIHRoaXMuam9pblB1c2gucmVmIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlam9pbih0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICBpZih0aGlzLmlzTGVhdmluZygpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnNvY2tldC5sZWF2ZU9wZW5Ub3BpYyh0aGlzLnRvcGljKVxuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luaW5nXG4gICAgdGhpcy5qb2luUHVzaC5yZXNlbmQodGltZW91dClcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKXtcbiAgICBsZXQgaGFuZGxlZFBheWxvYWQgPSB0aGlzLm9uTWVzc2FnZShldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKVxuICAgIGlmKHBheWxvYWQgJiYgIWhhbmRsZWRQYXlsb2FkKXsgdGhyb3cgbmV3IEVycm9yKFwiY2hhbm5lbCBvbk1lc3NhZ2UgY2FsbGJhY2tzIG11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXCIpIH1cblxuICAgIGxldCBldmVudEJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoYmluZCA9PiBiaW5kLmV2ZW50ID09PSBldmVudClcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBldmVudEJpbmRpbmdzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGxldCBiaW5kID0gZXZlbnRCaW5kaW5nc1tpXVxuICAgICAgYmluZC5jYWxsYmFjayhoYW5kbGVkUGF5bG9hZCwgcmVmLCBqb2luUmVmIHx8IHRoaXMuam9pblJlZigpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVwbHlFdmVudE5hbWUocmVmKXsgcmV0dXJuIGBjaGFuX3JlcGx5XyR7cmVmfWAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNDbG9zZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmNsb3NlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Vycm9yZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmVycm9yZWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNKb2luZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5lZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5pbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5pbmcgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNMZWF2aW5nKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5sZWF2aW5nIH1cbn1cbiIsICJpbXBvcnQge1xuICBnbG9iYWwsXG4gIFhIUl9TVEFURVNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWpheCB7XG5cbiAgc3RhdGljIHJlcXVlc3QobWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICBpZihnbG9iYWwuWERvbWFpblJlcXVlc3Qpe1xuICAgICAgbGV0IHJlcSA9IG5ldyBnbG9iYWwuWERvbWFpblJlcXVlc3QoKSAvLyBJRTgsIElFOVxuICAgICAgcmV0dXJuIHRoaXMueGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpIC8vIElFNyssIEZpcmVmb3gsIENocm9tZSwgT3BlcmEsIFNhZmFyaVxuICAgICAgcmV0dXJuIHRoaXMueGhyUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGFjY2VwdCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjaylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgeGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEudGltZW91dCA9IHRpbWVvdXRcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50KVxuICAgIHJlcS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgLy8gV29yayBhcm91bmQgYnVnIGluIElFOSB0aGF0IHJlcXVpcmVzIGFuIGF0dGFjaGVkIG9ucHJvZ3Jlc3MgaGFuZGxlclxuICAgIHJlcS5vbnByb2dyZXNzID0gKCkgPT4geyB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyB4aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50LCB0cnVlKVxuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIGFjY2VwdClcbiAgICByZXEub25lcnJvciA9ICgpID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKG51bGwpXG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmKHJlcS5yZWFkeVN0YXRlID09PSBYSFJfU1RBVEVTLmNvbXBsZXRlICYmIGNhbGxiYWNrKXtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gdGhpcy5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dClcbiAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgICB9XG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgcmVxLnNlbmQoYm9keSlcbiAgICByZXR1cm4gcmVxXG4gIH1cblxuICBzdGF0aWMgcGFyc2VKU09OKHJlc3Ape1xuICAgIGlmKCFyZXNwIHx8IHJlc3AgPT09IFwiXCIpeyByZXR1cm4gbnVsbCB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcClcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJmYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZVwiLCByZXNwKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplKG9iaiwgcGFyZW50S2V5KXtcbiAgICBsZXQgcXVlcnlTdHIgPSBbXVxuICAgIGZvcih2YXIga2V5IGluIG9iail7XG4gICAgICBpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSl7IGNvbnRpbnVlIH1cbiAgICAgIGxldCBwYXJhbUtleSA9IHBhcmVudEtleSA/IGAke3BhcmVudEtleX1bJHtrZXl9XWAgOiBrZXlcbiAgICAgIGxldCBwYXJhbVZhbCA9IG9ialtrZXldXG4gICAgICBpZih0eXBlb2YgcGFyYW1WYWwgPT09IFwib2JqZWN0XCIpe1xuICAgICAgICBxdWVyeVN0ci5wdXNoKHRoaXMuc2VyaWFsaXplKHBhcmFtVmFsLCBwYXJhbUtleSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWVyeVN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwYXJhbUtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbVZhbCkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBxdWVyeVN0ci5qb2luKFwiJlwiKVxuICB9XG5cbiAgc3RhdGljIGFwcGVuZFBhcmFtcyh1cmwsIHBhcmFtcyl7XG4gICAgaWYoT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGggPT09IDApeyByZXR1cm4gdXJsIH1cblxuICAgIGxldCBwcmVmaXggPSB1cmwubWF0Y2goL1xcPy8pID8gXCImXCIgOiBcIj9cIlxuICAgIHJldHVybiBgJHt1cmx9JHtwcmVmaXh9JHt0aGlzLnNlcmlhbGl6ZShwYXJhbXMpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFNPQ0tFVF9TVEFURVMsXG4gIFRSQU5TUE9SVFNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEFqYXggZnJvbSBcIi4vYWpheFwiXG5cbmxldCBhcnJheUJ1ZmZlclRvQmFzZTY0ID0gKGJ1ZmZlcikgPT4ge1xuICBsZXQgYmluYXJ5ID0gXCJcIlxuICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShidWZmZXIpXG4gIGxldCBsZW4gPSBieXRlcy5ieXRlTGVuZ3RoXG4gIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKyl7IGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKSB9XG4gIHJldHVybiBidG9hKGJpbmFyeSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9uZ1BvbGwge1xuXG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50KXtcbiAgICB0aGlzLmVuZFBvaW50ID0gbnVsbFxuICAgIHRoaXMudG9rZW4gPSBudWxsXG4gICAgdGhpcy5za2lwSGVhcnRiZWF0ID0gdHJ1ZVxuICAgIHRoaXMucmVxcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICB0aGlzLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMucG9sbEVuZHBvaW50ID0gdGhpcy5ub3JtYWxpemVFbmRwb2ludChlbmRQb2ludClcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgICAvLyB3ZSBtdXN0IHdhaXQgZm9yIHRoZSBjYWxsZXIgdG8gZmluaXNoIHNldHRpbmcgdXAgb3VyIGNhbGxiYWNrcyBhbmQgdGltZW91dCBwcm9wZXJ0aWVzXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnBvbGwoKSwgMClcbiAgfVxuXG4gIG5vcm1hbGl6ZUVuZHBvaW50KGVuZFBvaW50KXtcbiAgICByZXR1cm4gKGVuZFBvaW50XG4gICAgICAucmVwbGFjZShcIndzOi8vXCIsIFwiaHR0cDovL1wiKVxuICAgICAgLnJlcGxhY2UoXCJ3c3M6Ly9cIiwgXCJodHRwczovL1wiKVxuICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cChcIiguKilcXC9cIiArIFRSQU5TUE9SVFMud2Vic29ja2V0KSwgXCIkMS9cIiArIFRSQU5TUE9SVFMubG9uZ3BvbGwpKVxuICB9XG5cbiAgZW5kcG9pbnRVUkwoKXtcbiAgICByZXR1cm4gQWpheC5hcHBlbmRQYXJhbXModGhpcy5wb2xsRW5kcG9pbnQsIHt0b2tlbjogdGhpcy50b2tlbn0pXG4gIH1cblxuICBjbG9zZUFuZFJldHJ5KGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIHRoaXMuY2xvc2UoY29kZSwgcmVhc29uLCB3YXNDbGVhbilcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgfVxuXG4gIG9udGltZW91dCgpe1xuICAgIHRoaXMub25lcnJvcihcInRpbWVvdXRcIilcbiAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAwNSwgXCJ0aW1lb3V0XCIsIGZhbHNlKVxuICB9XG5cbiAgaXNBY3RpdmUoKXsgcmV0dXJuIHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5vcGVuIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nIH1cblxuICBwb2xsKCl7XG4gICAgdGhpcy5hamF4KFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiLCBudWxsLCAoKSA9PiB0aGlzLm9udGltZW91dCgpLCByZXNwID0+IHtcbiAgICAgIGlmKHJlc3Ape1xuICAgICAgICB2YXIge3N0YXR1cywgdG9rZW4sIG1lc3NhZ2VzfSA9IHJlc3BcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSAwXG4gICAgICB9XG5cbiAgICAgIHN3aXRjaChzdGF0dXMpe1xuICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKG1zZyA9PiB7XG4gICAgICAgICAgICAvLyBUYXNrcyBhcmUgd2hhdCB0aGluZ3MgbGlrZSBldmVudCBoYW5kbGVycywgc2V0VGltZW91dCBjYWxsYmFja3MsXG4gICAgICAgICAgICAvLyBwcm9taXNlIHJlc29sdmVzIGFuZCBtb3JlIGFyZSBydW4gd2l0aGluLlxuICAgICAgICAgICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzLCB0aGVyZSBhcmUgdHdvIGRpZmZlcmVudCBraW5kcyBvZiB0YXNrcyxcbiAgICAgICAgICAgIC8vIG1pY3JvdGFza3MgYW5kIG1hY3JvdGFza3MuXG4gICAgICAgICAgICAvLyBNaWNyb3Rhc2tzIGFyZSBtYWlubHkgdXNlZCBmb3IgUHJvbWlzZXMsIHdoaWxlIG1hY3JvdGFza3MgYXJlXG4gICAgICAgICAgICAvLyB1c2VkIGZvciBldmVyeXRoaW5nIGVsc2UuXG4gICAgICAgICAgICAvLyBNaWNyb3Rhc2tzIGFsd2F5cyBoYXZlIHByaW9yaXR5IG92ZXIgbWFjcm90YXNrcy4gSWYgdGhlIEpTIGVuZ2luZVxuICAgICAgICAgICAgLy8gaXMgbG9va2luZyBmb3IgYSB0YXNrIHRvIHJ1biwgaXQgd2lsbCBhbHdheXMgdHJ5IHRvIGVtcHR5IHRoZVxuICAgICAgICAgICAgLy8gbWljcm90YXNrIHF1ZXVlIGJlZm9yZSBhdHRlbXB0aW5nIHRvIHJ1biBhbnl0aGluZyBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gbWFjcm90YXNrIHF1ZXVlLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCwgbWVzc2FnZXMgYWx3YXlzIGFycml2ZSBpbiB0aGVpciBvd25cbiAgICAgICAgICAgIC8vIGV2ZW50LiBUaGlzIG1lYW5zIHRoYXQgaWYgYW55IHByb21pc2VzIGFyZSByZXNvbHZlZCBmcm9tIHdpdGhpbixcbiAgICAgICAgICAgIC8vIHRoZWlyIGNhbGxiYWNrcyB3aWxsIGFsd2F5cyBmaW5pc2ggZXhlY3V0aW9uIGJ5IHRoZSB0aW1lIHRoZVxuICAgICAgICAgICAgLy8gbmV4dCBtZXNzYWdlIGV2ZW50IGhhbmRsZXIgaXMgcnVuLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIGVtdWxhdGUgdGhpcyBiZWhhdmlvdXIsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGVhY2hcbiAgICAgICAgICAgIC8vIG9ubWVzc2FnZSBoYW5kbGVyIGlzIHJ1biB3aXRoaW4gaXRzIG93biBtYWNyb3Rhc2suXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMub25tZXNzYWdlKHtkYXRhOiBtc2d9KSwgMClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyMDQ6XG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQxMDpcbiAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLm9wZW5cbiAgICAgICAgICB0aGlzLm9ub3Blbih7fSlcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDAzOlxuICAgICAgICAgIHRoaXMub25lcnJvcig0MDMpXG4gICAgICAgICAgdGhpcy5jbG9zZSgxMDA4LCBcImZvcmJpZGRlblwiLCBmYWxzZSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgNTAwOlxuICAgICAgICAgIHRoaXMub25lcnJvcig1MDApXG4gICAgICAgICAgdGhpcy5jbG9zZUFuZFJldHJ5KDEwMTEsIFwiaW50ZXJuYWwgc2VydmVyIGVycm9yXCIsIDUwMClcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYHVuaGFuZGxlZCBwb2xsIHN0YXR1cyAke3N0YXR1c31gKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyB3ZSBjb2xsZWN0IGFsbCBwdXNoZXMgd2l0aGluIHRoZSBjdXJyZW50IGV2ZW50IGxvb3AgYnlcbiAgLy8gc2V0VGltZW91dCAwLCB3aGljaCBvcHRpbWl6ZXMgYmFjay10by1iYWNrIHByb2NlZHVyYWxcbiAgLy8gcHVzaGVzIGFnYWluc3QgYW4gZW1wdHkgYnVmZmVyXG5cbiAgc2VuZChib2R5KXtcbiAgICBpZih0eXBlb2YoYm9keSkgIT09IFwic3RyaW5nXCIpeyBib2R5ID0gYXJyYXlCdWZmZXJUb0Jhc2U2NChib2R5KSB9XG4gICAgaWYodGhpcy5jdXJyZW50QmF0Y2gpe1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2gucHVzaChib2R5KVxuICAgIH0gZWxzZSBpZih0aGlzLmF3YWl0aW5nQmF0Y2hBY2spe1xuICAgICAgdGhpcy5iYXRjaEJ1ZmZlci5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gW2JvZHldXG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hTZW5kKHRoaXMuY3VycmVudEJhdGNoKVxuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaCA9IG51bGxcbiAgICAgIH0sIDApXG4gICAgfVxuICB9XG5cbiAgYmF0Y2hTZW5kKG1lc3NhZ2VzKXtcbiAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSB0cnVlXG4gICAgdGhpcy5hamF4KFwiUE9TVFwiLCBcImFwcGxpY2F0aW9uL3gtbmRqc29uXCIsIG1lc3NhZ2VzLmpvaW4oXCJcXG5cIiksICgpID0+IHRoaXMub25lcnJvcihcInRpbWVvdXRcIiksIHJlc3AgPT4ge1xuICAgICAgdGhpcy5hd2FpdGluZ0JhdGNoQWNrID0gZmFsc2VcbiAgICAgIGlmKCFyZXNwIHx8IHJlc3Auc3RhdHVzICE9PSAyMDApe1xuICAgICAgICB0aGlzLm9uZXJyb3IocmVzcCAmJiByZXNwLnN0YXR1cylcbiAgICAgICAgdGhpcy5jbG9zZUFuZFJldHJ5KDEwMTEsIFwiaW50ZXJuYWwgc2VydmVyIGVycm9yXCIsIGZhbHNlKVxuICAgICAgfSBlbHNlIGlmKHRoaXMuYmF0Y2hCdWZmZXIubGVuZ3RoID4gMCl7XG4gICAgICAgIHRoaXMuYmF0Y2hTZW5kKHRoaXMuYmF0Y2hCdWZmZXIpXG4gICAgICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKXtcbiAgICBmb3IobGV0IHJlcSBvZiB0aGlzLnJlcXMpeyByZXEuYWJvcnQoKSB9XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5jbG9zZWRcbiAgICBsZXQgb3B0cyA9IE9iamVjdC5hc3NpZ24oe2NvZGU6IDEwMDAsIHJlYXNvbjogdW5kZWZpbmVkLCB3YXNDbGVhbjogdHJ1ZX0sIHtjb2RlLCByZWFzb24sIHdhc0NsZWFufSlcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50QmF0Y2hUaW1lcilcbiAgICB0aGlzLmN1cnJlbnRCYXRjaFRpbWVyID0gbnVsbFxuICAgIGlmKHR5cGVvZihDbG9zZUV2ZW50KSAhPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICB0aGlzLm9uY2xvc2UobmV3IENsb3NlRXZlbnQoXCJjbG9zZVwiLCBvcHRzKSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbmNsb3NlKG9wdHMpXG4gICAgfVxuICB9XG5cbiAgYWpheChtZXRob2QsIGNvbnRlbnRUeXBlLCBib2R5LCBvbkNhbGxlclRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICBsZXQgcmVxXG4gICAgbGV0IG9udGltZW91dCA9ICgpID0+IHtcbiAgICAgIHRoaXMucmVxcy5kZWxldGUocmVxKVxuICAgICAgb25DYWxsZXJUaW1lb3V0KClcbiAgICB9XG4gICAgcmVxID0gQWpheC5yZXF1ZXN0KG1ldGhvZCwgdGhpcy5lbmRwb2ludFVSTCgpLCBjb250ZW50VHlwZSwgYm9keSwgdGhpcy50aW1lb3V0LCBvbnRpbWVvdXQsIHJlc3AgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBpZih0aGlzLmlzQWN0aXZlKCkpeyBjYWxsYmFjayhyZXNwKSB9XG4gICAgfSlcbiAgICB0aGlzLnJlcXMuYWRkKHJlcSlcbiAgfVxufVxuIiwgIi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFByZXNlbmNlXG4gKiBAcGFyYW0ge0NoYW5uZWx9IGNoYW5uZWwgLSBUaGUgQ2hhbm5lbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgb3B0aW9ucyxcbiAqICAgICAgICBmb3IgZXhhbXBsZSBge2V2ZW50czoge3N0YXRlOiBcInN0YXRlXCIsIGRpZmY6IFwiZGlmZlwifX1gXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXNlbmNlIHtcblxuICBjb25zdHJ1Y3RvcihjaGFubmVsLCBvcHRzID0ge30pe1xuICAgIGxldCBldmVudHMgPSBvcHRzLmV2ZW50cyB8fCB7c3RhdGU6IFwicHJlc2VuY2Vfc3RhdGVcIiwgZGlmZjogXCJwcmVzZW5jZV9kaWZmXCJ9XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWxcbiAgICB0aGlzLmpvaW5SZWYgPSBudWxsXG4gICAgdGhpcy5jYWxsZXIgPSB7XG4gICAgICBvbkpvaW46IGZ1bmN0aW9uICgpeyB9LFxuICAgICAgb25MZWF2ZTogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvblN5bmM6IGZ1bmN0aW9uICgpeyB9XG4gICAgfVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKGV2ZW50cy5zdGF0ZSwgbmV3U3RhdGUgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICB0aGlzLmpvaW5SZWYgPSB0aGlzLmNoYW5uZWwuam9pblJlZigpXG4gICAgICB0aGlzLnN0YXRlID0gUHJlc2VuY2Uuc3luY1N0YXRlKHRoaXMuc3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpXG5cbiAgICAgIHRoaXMucGVuZGluZ0RpZmZzLmZvckVhY2goZGlmZiA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jRGlmZih0aGlzLnN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpXG4gICAgICB9KVxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgICAgb25TeW5jKClcbiAgICB9KVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKGV2ZW50cy5kaWZmLCBkaWZmID0+IHtcbiAgICAgIGxldCB7b25Kb2luLCBvbkxlYXZlLCBvblN5bmN9ID0gdGhpcy5jYWxsZXJcblxuICAgICAgaWYodGhpcy5pblBlbmRpbmdTeW5jU3RhdGUoKSl7XG4gICAgICAgIHRoaXMucGVuZGluZ0RpZmZzLnB1c2goZGlmZilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jRGlmZih0aGlzLnN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpXG4gICAgICAgIG9uU3luYygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIG9uSm9pbihjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uSm9pbiA9IGNhbGxiYWNrIH1cblxuICBvbkxlYXZlKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25MZWF2ZSA9IGNhbGxiYWNrIH1cblxuICBvblN5bmMoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vblN5bmMgPSBjYWxsYmFjayB9XG5cbiAgbGlzdChieSl7IHJldHVybiBQcmVzZW5jZS5saXN0KHRoaXMuc3RhdGUsIGJ5KSB9XG5cbiAgaW5QZW5kaW5nU3luY1N0YXRlKCl7XG4gICAgcmV0dXJuICF0aGlzLmpvaW5SZWYgfHwgKHRoaXMuam9pblJlZiAhPT0gdGhpcy5jaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8vIGxvd2VyLWxldmVsIHB1YmxpYyBzdGF0aWMgQVBJXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gc3luYyB0aGUgbGlzdCBvZiBwcmVzZW5jZXMgb24gdGhlIHNlcnZlclxuICAgKiB3aXRoIHRoZSBjbGllbnQncyBzdGF0ZS4gQW4gb3B0aW9uYWwgYG9uSm9pbmAgYW5kIGBvbkxlYXZlYCBjYWxsYmFjayBjYW5cbiAgICogYmUgcHJvdmlkZWQgdG8gcmVhY3QgdG8gY2hhbmdlcyBpbiB0aGUgY2xpZW50J3MgbG9jYWwgcHJlc2VuY2VzIGFjcm9zc1xuICAgKiBkaXNjb25uZWN0cyBhbmQgcmVjb25uZWN0cyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBzeW5jU3RhdGUoY3VycmVudFN0YXRlLCBuZXdTdGF0ZSwgb25Kb2luLCBvbkxlYXZlKXtcbiAgICBsZXQgc3RhdGUgPSB0aGlzLmNsb25lKGN1cnJlbnRTdGF0ZSlcbiAgICBsZXQgam9pbnMgPSB7fVxuICAgIGxldCBsZWF2ZXMgPSB7fVxuXG4gICAgdGhpcy5tYXAoc3RhdGUsIChrZXksIHByZXNlbmNlKSA9PiB7XG4gICAgICBpZighbmV3U3RhdGVba2V5XSl7XG4gICAgICAgIGxlYXZlc1trZXldID0gcHJlc2VuY2VcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMubWFwKG5ld1N0YXRlLCAoa2V5LCBuZXdQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBuZXdSZWZzID0gbmV3UHJlc2VuY2UubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgICBsZXQgY3VyUmVmcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBqb2luZWRNZXRhcyA9IG5ld1ByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IGN1clJlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgbGV0IGxlZnRNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBuZXdSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIGlmKGpvaW5lZE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGpvaW5zW2tleV0gPSBuZXdQcmVzZW5jZVxuICAgICAgICAgIGpvaW5zW2tleV0ubWV0YXMgPSBqb2luZWRNZXRhc1xuICAgICAgICB9XG4gICAgICAgIGlmKGxlZnRNZXRhcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICBsZWF2ZXNba2V5XSA9IHRoaXMuY2xvbmUoY3VycmVudFByZXNlbmNlKVxuICAgICAgICAgIGxlYXZlc1trZXldLm1ldGFzID0gbGVmdE1ldGFzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpvaW5zW2tleV0gPSBuZXdQcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMuc3luY0RpZmYoc3RhdGUsIHtqb2luczogam9pbnMsIGxlYXZlczogbGVhdmVzfSwgb25Kb2luLCBvbkxlYXZlKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIFVzZWQgdG8gc3luYyBhIGRpZmYgb2YgcHJlc2VuY2Ugam9pbiBhbmQgbGVhdmVcbiAgICogZXZlbnRzIGZyb20gdGhlIHNlcnZlciwgYXMgdGhleSBoYXBwZW4uIExpa2UgYHN5bmNTdGF0ZWAsIGBzeW5jRGlmZmBcbiAgICogYWNjZXB0cyBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrcyB0byByZWFjdCB0byBhIHVzZXJcbiAgICogam9pbmluZyBvciBsZWF2aW5nIGZyb20gYSBkZXZpY2UuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBzeW5jRGlmZihzdGF0ZSwgZGlmZiwgb25Kb2luLCBvbkxlYXZlKXtcbiAgICBsZXQge2pvaW5zLCBsZWF2ZXN9ID0gdGhpcy5jbG9uZShkaWZmKVxuICAgIGlmKCFvbkpvaW4peyBvbkpvaW4gPSBmdW5jdGlvbiAoKXsgfSB9XG4gICAgaWYoIW9uTGVhdmUpeyBvbkxlYXZlID0gZnVuY3Rpb24gKCl7IH0gfVxuXG4gICAgdGhpcy5tYXAoam9pbnMsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgc3RhdGVba2V5XSA9IHRoaXMuY2xvbmUobmV3UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2Upe1xuICAgICAgICBsZXQgam9pbmVkUmVmcyA9IHN0YXRlW2tleV0ubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgICBsZXQgY3VyTWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gam9pbmVkUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBzdGF0ZVtrZXldLm1ldGFzLnVuc2hpZnQoLi4uY3VyTWV0YXMpXG4gICAgICB9XG4gICAgICBvbkpvaW4oa2V5LCBjdXJyZW50UHJlc2VuY2UsIG5ld1ByZXNlbmNlKVxuICAgIH0pXG4gICAgdGhpcy5tYXAobGVhdmVzLCAoa2V5LCBsZWZ0UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBpZighY3VycmVudFByZXNlbmNlKXsgcmV0dXJuIH1cbiAgICAgIGxldCByZWZzVG9SZW1vdmUgPSBsZWZ0UHJlc2VuY2UubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgY3VycmVudFByZXNlbmNlLm1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihwID0+IHtcbiAgICAgICAgcmV0dXJuIHJlZnNUb1JlbW92ZS5pbmRleE9mKHAucGh4X3JlZikgPCAwXG4gICAgICB9KVxuICAgICAgb25MZWF2ZShrZXksIGN1cnJlbnRQcmVzZW5jZSwgbGVmdFByZXNlbmNlKVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlLm1ldGFzLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGRlbGV0ZSBzdGF0ZVtrZXldXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gc3RhdGVcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcmVzZW5jZXMsIHdpdGggc2VsZWN0ZWQgbWV0YWRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcmVzZW5jZXNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2hvb3NlclxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJlc2VuY2V9XG4gICAqL1xuICBzdGF0aWMgbGlzdChwcmVzZW5jZXMsIGNob29zZXIpe1xuICAgIGlmKCFjaG9vc2VyKXsgY2hvb3NlciA9IGZ1bmN0aW9uIChrZXksIHByZXMpeyByZXR1cm4gcHJlcyB9IH1cblxuICAgIHJldHVybiB0aGlzLm1hcChwcmVzZW5jZXMsIChrZXksIHByZXNlbmNlKSA9PiB7XG4gICAgICByZXR1cm4gY2hvb3NlcihrZXksIHByZXNlbmNlKVxuICAgIH0pXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgc3RhdGljIG1hcChvYmosIGZ1bmMpe1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLm1hcChrZXkgPT4gZnVuYyhrZXksIG9ialtrZXldKSlcbiAgfVxuXG4gIHN0YXRpYyBjbG9uZShvYmopeyByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKSB9XG59XG4iLCAiLyogVGhlIGRlZmF1bHQgc2VyaWFsaXplciBmb3IgZW5jb2RpbmcgYW5kIGRlY29kaW5nIG1lc3NhZ2VzICovXG5pbXBvcnQge1xuICBDSEFOTkVMX0VWRU5UU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIEhFQURFUl9MRU5HVEg6IDEsXG4gIE1FVEFfTEVOR1RIOiA0LFxuICBLSU5EUzoge3B1c2g6IDAsIHJlcGx5OiAxLCBicm9hZGNhc3Q6IDJ9LFxuXG4gIGVuY29kZShtc2csIGNhbGxiYWNrKXtcbiAgICBpZihtc2cucGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RW5jb2RlKG1zZykpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwYXlsb2FkID0gW21zZy5qb2luX3JlZiwgbXNnLnJlZiwgbXNnLnRvcGljLCBtc2cuZXZlbnQsIG1zZy5wYXlsb2FkXVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGUocmF3UGF5bG9hZCwgY2FsbGJhY2spe1xuICAgIGlmKHJhd1BheWxvYWQuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyKXtcbiAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmJpbmFyeURlY29kZShyYXdQYXlsb2FkKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IFtqb2luX3JlZiwgcmVmLCB0b3BpYywgZXZlbnQsIHBheWxvYWRdID0gSlNPTi5wYXJzZShyYXdQYXlsb2FkKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKHtqb2luX3JlZiwgcmVmLCB0b3BpYywgZXZlbnQsIHBheWxvYWR9KVxuICAgIH1cbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgYmluYXJ5RW5jb2RlKG1lc3NhZ2Upe1xuICAgIGxldCB7am9pbl9yZWYsIHJlZiwgZXZlbnQsIHRvcGljLCBwYXlsb2FkfSA9IG1lc3NhZ2VcbiAgICBsZXQgbWV0YUxlbmd0aCA9IHRoaXMuTUVUQV9MRU5HVEggKyBqb2luX3JlZi5sZW5ndGggKyByZWYubGVuZ3RoICsgdG9waWMubGVuZ3RoICsgZXZlbnQubGVuZ3RoXG4gICAgbGV0IGhlYWRlciA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLkhFQURFUl9MRU5HVEggKyBtZXRhTGVuZ3RoKVxuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGhlYWRlcilcbiAgICBsZXQgb2Zmc2V0ID0gMFxuXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdGhpcy5LSU5EUy5wdXNoKSAvLyBraW5kXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgam9pbl9yZWYubGVuZ3RoKVxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIHJlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdG9waWMubGVuZ3RoKVxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGV2ZW50Lmxlbmd0aClcbiAgICBBcnJheS5mcm9tKGpvaW5fcmVmLCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG4gICAgQXJyYXkuZnJvbShyZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHRvcGljLCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG4gICAgQXJyYXkuZnJvbShldmVudCwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuXG4gICAgdmFyIGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyLmJ5dGVMZW5ndGggKyBwYXlsb2FkLmJ5dGVMZW5ndGgpXG4gICAgY29tYmluZWQuc2V0KG5ldyBVaW50OEFycmF5KGhlYWRlciksIDApXG4gICAgY29tYmluZWQuc2V0KG5ldyBVaW50OEFycmF5KHBheWxvYWQpLCBoZWFkZXIuYnl0ZUxlbmd0aClcblxuICAgIHJldHVybiBjb21iaW5lZC5idWZmZXJcbiAgfSxcblxuICBiaW5hcnlEZWNvZGUoYnVmZmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpXG4gICAgbGV0IGtpbmQgPSB2aWV3LmdldFVpbnQ4KDApXG4gICAgbGV0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKVxuICAgIHN3aXRjaChraW5kKXtcbiAgICAgIGNhc2UgdGhpcy5LSU5EUy5wdXNoOiByZXR1cm4gdGhpcy5kZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2RlcilcbiAgICAgIGNhc2UgdGhpcy5LSU5EUy5yZXBseTogcmV0dXJuIHRoaXMuZGVjb2RlUmVwbHkoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLmJyb2FkY2FzdDogcmV0dXJuIHRoaXMuZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2RlcilcbiAgICB9XG4gIH0sXG5cbiAgZGVjb2RlUHVzaChidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCBqb2luUmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgdG9waWNTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuSEVBREVSX0xFTkdUSCArIHRoaXMuTUVUQV9MRU5HVEggLSAxIC8vIHB1c2hlcyBoYXZlIG5vIHJlZlxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG4gICAgcmV0dXJuIHtqb2luX3JlZjogam9pblJlZiwgcmVmOiBudWxsLCB0b3BpYzogdG9waWMsIGV2ZW50OiBldmVudCwgcGF5bG9hZDogZGF0YX1cbiAgfSxcblxuICBkZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCBqb2luUmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgcmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMilcbiAgICBsZXQgdG9waWNTaXplID0gdmlldy5nZXRVaW50OCgzKVxuICAgIGxldCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDQpXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuSEVBREVSX0xFTkdUSCArIHRoaXMuTUVUQV9MRU5HVEhcbiAgICBsZXQgam9pblJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGpvaW5SZWZTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBqb2luUmVmU2l6ZVxuICAgIGxldCByZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyByZWZTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyByZWZTaXplXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG4gICAgbGV0IHBheWxvYWQgPSB7c3RhdHVzOiBldmVudCwgcmVzcG9uc2U6IGRhdGF9XG4gICAgcmV0dXJuIHtqb2luX3JlZjogam9pblJlZiwgcmVmOiByZWYsIHRvcGljOiB0b3BpYywgZXZlbnQ6IENIQU5ORUxfRVZFTlRTLnJlcGx5LCBwYXlsb2FkOiBwYXlsb2FkfVxuICB9LFxuXG4gIGRlY29kZUJyb2FkY2FzdChidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDEpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMilcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgMlxuICAgIGxldCB0b3BpYyA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHRvcGljU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdG9waWNTaXplXG4gICAgbGV0IGV2ZW50ID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgZXZlbnRTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBldmVudFNpemVcbiAgICBsZXQgZGF0YSA9IGJ1ZmZlci5zbGljZShvZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIHtqb2luX3JlZjogbnVsbCwgcmVmOiBudWxsLCB0b3BpYzogdG9waWMsIGV2ZW50OiBldmVudCwgcGF5bG9hZDogZGF0YX1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIGdsb2JhbCxcbiAgcGh4V2luZG93LFxuICBDSEFOTkVMX0VWRU5UUyxcbiAgREVGQVVMVF9USU1FT1VULFxuICBERUZBVUxUX1ZTTixcbiAgU09DS0VUX1NUQVRFUyxcbiAgVFJBTlNQT1JUUyxcbiAgV1NfQ0xPU0VfTk9STUFMXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb3N1cmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQWpheCBmcm9tIFwiLi9hamF4XCJcbmltcG9ydCBDaGFubmVsIGZyb20gXCIuL2NoYW5uZWxcIlxuaW1wb3J0IExvbmdQb2xsIGZyb20gXCIuL2xvbmdwb2xsXCJcbmltcG9ydCBTZXJpYWxpemVyIGZyb20gXCIuL3NlcmlhbGl6ZXJcIlxuaW1wb3J0IFRpbWVyIGZyb20gXCIuL3RpbWVyXCJcblxuLyoqIEluaXRpYWxpemVzIHRoZSBTb2NrZXQgKlxuICpcbiAqIEZvciBJRTggc3VwcG9ydCB1c2UgYW4gRVM1LXNoaW0gKGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIGBcIndzOi8vZXhhbXBsZS5jb20vc29ja2V0XCJgLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIndzczovL2V4YW1wbGUuY29tXCJgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiL3NvY2tldFwiYCAoaW5oZXJpdGVkIGhvc3QgJiBwcm90b2NvbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBPcHRpb25hbCBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy50cmFuc3BvcnRdIC0gVGhlIFdlYnNvY2tldCBUcmFuc3BvcnQsIGZvciBleGFtcGxlIFdlYlNvY2tldCBvciBQaG9lbml4LkxvbmdQb2xsLlxuICpcbiAqIERlZmF1bHRzIHRvIFdlYlNvY2tldCB3aXRoIGF1dG9tYXRpYyBMb25nUG9sbCBmYWxsYmFjayBpZiBXZWJTb2NrZXQgaXMgbm90IGRlZmluZWQuXG4gKiBUbyBmYWxsYmFjayB0byBMb25nUG9sbCB3aGVuIFdlYlNvY2tldCBhdHRlbXB0cyBmYWlsLCB1c2UgYGxvbmdQb2xsRmFsbGJhY2tNczogMjUwMGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMubG9uZ1BvbGxGYWxsYmFja01zXSAtIFRoZSBtaWxsaXNlY29uZCB0aW1lIHRvIGF0dGVtcHQgdGhlIHByaW1hcnkgdHJhbnNwb3J0XG4gKiBiZWZvcmUgZmFsbGluZyBiYWNrIHRvIHRoZSBMb25nUG9sbCB0cmFuc3BvcnQuIERpc2FibGVkIGJ5IGRlZmF1bHQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZGVidWddIC0gV2hlbiB0cnVlLCBlbmFibGVzIGRlYnVnIGxvZ2dpbmcuIERlZmF1bHQgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZW5jb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBlbmNvZGUgb3V0Z29pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTiBlbmNvZGVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmRlY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZGVjb2RlIGluY29taW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT046XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnBhcnNlKHBheWxvYWQpKVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXRdIC0gVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICpcbiAqIERlZmF1bHRzIGBERUZBVUxUX1RJTUVPVVRgXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNc10gLSBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVjb25uZWN0QWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogc29ja2V0IHJlY29ubmVjdCBpbnRlcnZhbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBzdGVwcGVkIGJhY2tvZmYgb2Y6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWpvaW5BZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiByZWpvaW4gaW50ZXJ2YWwgZm9yIGluZGl2aWR1YWwgY2hhbm5lbHMuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5sb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbihraW5kLCBtc2csIGRhdGEpIHtcbiAqICAgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubG9uZ3BvbGxlclRpbWVvdXRdIC0gVGhlIG1heGltdW0gdGltZW91dCBvZiBhIGxvbmcgcG9sbCBBSkFYIHJlcXVlc3QuXG4gKlxuICogRGVmYXVsdHMgdG8gMjBzIChkb3VibGUgdGhlIHNlcnZlciBsb25nIHBvbGwgdGltZXIpLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluYXJ5VHlwZV0gLSBUaGUgYmluYXJ5IHR5cGUgdG8gdXNlIGZvciBiaW5hcnkgV2ViU29ja2V0IGZyYW1lcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBcImFycmF5YnVmZmVyXCJcbiAqXG4gKiBAcGFyYW0ge3Zzbn0gW29wdHMudnNuXSAtIFRoZSBzZXJpYWxpemVyJ3MgcHJvdG9jb2wgdmVyc2lvbiB0byBzZW5kIG9uIGNvbm5lY3QuXG4gKlxuICogRGVmYXVsdHMgdG8gREVGQVVMVF9WU04uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnNlc3Npb25TdG9yYWdlXSAtIEFuIG9wdGlvbmFsIFN0b3JhZ2UgY29tcGF0aWJsZSBvYmplY3RcbiAqIFBob2VuaXggdXNlcyBzZXNzaW9uU3RvcmFnZSBmb3IgbG9uZ3BvbGwgZmFsbGJhY2sgaGlzdG9yeS4gT3ZlcnJpZGluZyB0aGUgc3RvcmUgaXNcbiAqIHVzZWZ1bCB3aGVuIFBob2VuaXggd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYHNlc3Npb25TdG9yYWdlYC4gRm9yIGV4YW1wbGUsIFRoaXMgY291bGRcbiAqIGhhcHBlbiBpZiBhIHNpdGUgbG9hZHMgYSBjcm9zcy1kb21haW4gY2hhbm5lbCBpbiBhbiBpZnJhbWUuIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICAgIGNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gKiAgICAgICBjb25zdHJ1Y3RvcigpIHsgdGhpcy5zdG9yYWdlID0ge30gfVxuICogICAgICAgZ2V0SXRlbShrZXlOYW1lKSB7IHJldHVybiB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gfHwgbnVsbCB9XG4gKiAgICAgICByZW1vdmVJdGVtKGtleU5hbWUpIHsgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB9XG4gKiAgICAgICBzZXRJdGVtKGtleU5hbWUsIGtleVZhbHVlKSB7IHRoaXMuc3RvcmFnZVtrZXlOYW1lXSA9IGtleVZhbHVlIH1cbiAqICAgICB9XG4gKlxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50LCBvcHRzID0ge30pe1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MgPSB7b3BlbjogW10sIGNsb3NlOiBbXSwgZXJyb3I6IFtdLCBtZXNzYWdlOiBbXX1cbiAgICB0aGlzLmNoYW5uZWxzID0gW11cbiAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXVxuICAgIHRoaXMucmVmID0gMFxuICAgIHRoaXMudGltZW91dCA9IG9wdHMudGltZW91dCB8fCBERUZBVUxUX1RJTUVPVVRcbiAgICB0aGlzLnRyYW5zcG9ydCA9IG9wdHMudHJhbnNwb3J0IHx8IGdsb2JhbC5XZWJTb2NrZXQgfHwgTG9uZ1BvbGxcbiAgICB0aGlzLmxvbmdQb2xsRmFsbGJhY2tNcyA9IG9wdHMubG9uZ1BvbGxGYWxsYmFja01zXG4gICAgdGhpcy5mYWxsYmFja1RpbWVyID0gbnVsbFxuICAgIHRoaXMuc2Vzc2lvblN0b3JlID0gb3B0cy5zZXNzaW9uU3RvcmFnZSB8fCBnbG9iYWwuc2Vzc2lvblN0b3JhZ2VcbiAgICB0aGlzLmVzdGFibGlzaGVkQ29ubmVjdGlvbnMgPSAwXG4gICAgdGhpcy5kZWZhdWx0RW5jb2RlciA9IFNlcmlhbGl6ZXIuZW5jb2RlLmJpbmQoU2VyaWFsaXplcilcbiAgICB0aGlzLmRlZmF1bHREZWNvZGVyID0gU2VyaWFsaXplci5kZWNvZGUuYmluZChTZXJpYWxpemVyKVxuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5iaW5hcnlUeXBlID0gb3B0cy5iaW5hcnlUeXBlIHx8IFwiYXJyYXlidWZmZXJcIlxuICAgIHRoaXMuY29ubmVjdENsb2NrID0gMVxuICAgIGlmKHRoaXMudHJhbnNwb3J0ICE9PSBMb25nUG9sbCl7XG4gICAgICB0aGlzLmVuY29kZSA9IG9wdHMuZW5jb2RlIHx8IHRoaXMuZGVmYXVsdEVuY29kZXJcbiAgICAgIHRoaXMuZGVjb2RlID0gb3B0cy5kZWNvZGUgfHwgdGhpcy5kZWZhdWx0RGVjb2RlclxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuY29kZSA9IHRoaXMuZGVmYXVsdEVuY29kZXJcbiAgICAgIHRoaXMuZGVjb2RlID0gdGhpcy5kZWZhdWx0RGVjb2RlclxuICAgIH1cbiAgICBsZXQgYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9IG51bGxcbiAgICBpZihwaHhXaW5kb3cgJiYgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe1xuICAgICAgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCBfZSA9PiB7XG4gICAgICAgIGlmKHRoaXMuY29ubil7XG4gICAgICAgICAgdGhpcy5kaXNjb25uZWN0KClcbiAgICAgICAgICBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gdGhpcy5jb25uZWN0Q2xvY2tcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHBoeFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIiwgX2UgPT4ge1xuICAgICAgICBpZihhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID09PSB0aGlzLmNvbm5lY3RDbG9jayl7XG4gICAgICAgICAgYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9IG51bGxcbiAgICAgICAgICB0aGlzLmNvbm5lY3QoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMgPSBvcHRzLmhlYXJ0YmVhdEludGVydmFsTXMgfHwgMzAwMDBcbiAgICB0aGlzLnJlam9pbkFmdGVyTXMgPSAodHJpZXMpID0+IHtcbiAgICAgIGlmKG9wdHMucmVqb2luQWZ0ZXJNcyl7XG4gICAgICAgIHJldHVybiBvcHRzLnJlam9pbkFmdGVyTXModHJpZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZWNvbm5lY3RBZnRlck1zID0gKHRyaWVzKSA9PiB7XG4gICAgICBpZihvcHRzLnJlY29ubmVjdEFmdGVyTXMpe1xuICAgICAgICByZXR1cm4gb3B0cy5yZWNvbm5lY3RBZnRlck1zKHRyaWVzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsxMCwgNTAsIDEwMCwgMTUwLCAyMDAsIDI1MCwgNTAwLCAxMDAwLCAyMDAwXVt0cmllcyAtIDFdIHx8IDUwMDBcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5sb2dnZXIgPSBvcHRzLmxvZ2dlciB8fCBudWxsXG4gICAgaWYoIXRoaXMubG9nZ2VyICYmIG9wdHMuZGVidWcpe1xuICAgICAgdGhpcy5sb2dnZXIgPSAoa2luZCwgbXNnLCBkYXRhKSA9PiB7IGNvbnNvbGUubG9nKGAke2tpbmR9OiAke21zZ31gLCBkYXRhKSB9XG4gICAgfVxuICAgIHRoaXMubG9uZ3BvbGxlclRpbWVvdXQgPSBvcHRzLmxvbmdwb2xsZXJUaW1lb3V0IHx8IDIwMDAwXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKG9wdHMucGFyYW1zIHx8IHt9KVxuICAgIHRoaXMuZW5kUG9pbnQgPSBgJHtlbmRQb2ludH0vJHtUUkFOU1BPUlRTLndlYnNvY2tldH1gXG4gICAgdGhpcy52c24gPSBvcHRzLnZzbiB8fCBERUZBVUxUX1ZTTlxuICAgIHRoaXMuaGVhcnRiZWF0VGltZW91dFRpbWVyID0gbnVsbFxuICAgIHRoaXMuaGVhcnRiZWF0VGltZXIgPSBudWxsXG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgIHRoaXMucmVjb25uZWN0VGltZXIgPSBuZXcgVGltZXIoKCkgPT4ge1xuICAgICAgdGhpcy50ZWFyZG93bigoKSA9PiB0aGlzLmNvbm5lY3QoKSlcbiAgICB9LCB0aGlzLnJlY29ubmVjdEFmdGVyTXMpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgTG9uZ1BvbGwgdHJhbnNwb3J0IHJlZmVyZW5jZVxuICAgKi9cbiAgZ2V0TG9uZ1BvbGxUcmFuc3BvcnQoKXsgcmV0dXJuIExvbmdQb2xsIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdHMgYW5kIHJlcGxhY2VzIHRoZSBhY3RpdmUgdHJhbnNwb3J0XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5ld1RyYW5zcG9ydCAtIFRoZSBuZXcgdHJhbnNwb3J0IGNsYXNzIHRvIGluc3RhbnRpYXRlXG4gICAqXG4gICAqL1xuICByZXBsYWNlVHJhbnNwb3J0KG5ld1RyYW5zcG9ydCl7XG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IHRydWVcbiAgICBjbGVhclRpbWVvdXQodGhpcy5mYWxsYmFja1RpbWVyKVxuICAgIHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKVxuICAgIGlmKHRoaXMuY29ubil7XG4gICAgICB0aGlzLmNvbm4uY2xvc2UoKVxuICAgICAgdGhpcy5jb25uID0gbnVsbFxuICAgIH1cbiAgICB0aGlzLnRyYW5zcG9ydCA9IG5ld1RyYW5zcG9ydFxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNvY2tldCBwcm90b2NvbFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgcHJvdG9jb2woKXsgcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sLm1hdGNoKC9eaHR0cHMvKSA/IFwid3NzXCIgOiBcIndzXCIgfVxuXG4gIC8qKlxuICAgKiBUaGUgZnVsbHkgcXVhbGlmaWVkIHNvY2tldCB1cmxcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGVuZFBvaW50VVJMKCl7XG4gICAgbGV0IHVyaSA9IEFqYXguYXBwZW5kUGFyYW1zKFxuICAgICAgQWpheC5hcHBlbmRQYXJhbXModGhpcy5lbmRQb2ludCwgdGhpcy5wYXJhbXMoKSksIHt2c246IHRoaXMudnNufSlcbiAgICBpZih1cmkuY2hhckF0KDApICE9PSBcIi9cIil7IHJldHVybiB1cmkgfVxuICAgIGlmKHVyaS5jaGFyQXQoMSkgPT09IFwiL1wiKXsgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06JHt1cml9YCB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy5wcm90b2NvbCgpfTovLyR7bG9jYXRpb24uaG9zdH0ke3VyaX1gXG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdHMgdGhlIHNvY2tldFxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Nsb3NlRXZlbnQjU3RhdHVzX2NvZGVzIGZvciB2YWxpZCBzdGF0dXMgY29kZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gT3B0aW9uYWwgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHNvY2tldCBpcyBkaXNjb25uZWN0ZWQuXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gY29kZSAtIEEgc3RhdHVzIGNvZGUgZm9yIGRpc2Nvbm5lY3Rpb24gKE9wdGlvbmFsKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIEEgdGV4dHVhbCBkZXNjcmlwdGlvbiBvZiB0aGUgcmVhc29uIHRvIGRpc2Nvbm5lY3QuIChPcHRpb25hbClcbiAgICovXG4gIGRpc2Nvbm5lY3QoY2FsbGJhY2ssIGNvZGUsIHJlYXNvbil7XG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IHRydWVcbiAgICBjbGVhclRpbWVvdXQodGhpcy5mYWxsYmFja1RpbWVyKVxuICAgIHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKVxuICAgIHRoaXMudGVhcmRvd24oY2FsbGJhY2ssIGNvZGUsIHJlYXNvbilcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIHBhcmFtcyB0byBzZW5kIHdoZW4gY29ubmVjdGluZywgZm9yIGV4YW1wbGUgYHt1c2VyX2lkOiB1c2VyVG9rZW59YFxuICAgKlxuICAgKiBQYXNzaW5nIHBhcmFtcyB0byBjb25uZWN0IGlzIGRlcHJlY2F0ZWQ7IHBhc3MgdGhlbSBpbiB0aGUgU29ja2V0IGNvbnN0cnVjdG9yIGluc3RlYWQ6XG4gICAqIGBuZXcgU29ja2V0KFwiL3NvY2tldFwiLCB7cGFyYW1zOiB7dXNlcl9pZDogdXNlclRva2VufX0pYC5cbiAgICovXG4gIGNvbm5lY3QocGFyYW1zKXtcbiAgICBpZihwYXJhbXMpe1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhcInBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCBwYXNzIDpwYXJhbXMgdG8gdGhlIFNvY2tldCBjb25zdHJ1Y3RvclwiKVxuICAgICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKHBhcmFtcylcbiAgICB9XG4gICAgaWYodGhpcy5jb25uKXsgcmV0dXJuIH1cbiAgICBpZih0aGlzLmxvbmdQb2xsRmFsbGJhY2tNcyAmJiB0aGlzLnRyYW5zcG9ydCAhPT0gTG9uZ1BvbGwpe1xuICAgICAgdGhpcy5jb25uZWN0V2l0aEZhbGxiYWNrKExvbmdQb2xsLCB0aGlzLmxvbmdQb2xsRmFsbGJhY2tNcylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50cmFuc3BvcnRDb25uZWN0KClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9ncyB0aGUgbWVzc2FnZS4gT3ZlcnJpZGUgYHRoaXMubG9nZ2VyYCBmb3Igc3BlY2lhbGl6ZWQgbG9nZ2luZy4gbm9vcHMgYnkgZGVmYXVsdFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2luZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gbXNnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqL1xuICBsb2coa2luZCwgbXNnLCBkYXRhKXsgdGhpcy5sb2dnZXIgJiYgdGhpcy5sb2dnZXIoa2luZCwgbXNnLCBkYXRhKSB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBhIGxvZ2dlciBoYXMgYmVlbiBzZXQgb24gdGhpcyBzb2NrZXQuXG4gICAqL1xuICBoYXNMb2dnZXIoKXsgcmV0dXJuIHRoaXMubG9nZ2VyICE9PSBudWxsIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBvcGVuIGV2ZW50c1xuICAgKlxuICAgKiBAZXhhbXBsZSBzb2NrZXQub25PcGVuKGZ1bmN0aW9uKCl7IGNvbnNvbGUuaW5mbyhcInRoZSBzb2NrZXQgd2FzIG9wZW5lZFwiKSB9KVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25PcGVuKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm9wZW4ucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gY2xvc2UgZXZlbnRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkNsb3NlKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmNsb3NlLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIGVycm9yIGV2ZW50c1xuICAgKlxuICAgKiBAZXhhbXBsZSBzb2NrZXQub25FcnJvcihmdW5jdGlvbihlcnJvcil7IGFsZXJ0KFwiQW4gZXJyb3Igb2NjdXJyZWRcIikgfSlcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uRXJyb3IoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gbWVzc2FnZSBldmVudHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uTWVzc2FnZShjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBQaW5ncyB0aGUgc2VydmVyIGFuZCBpbnZva2VzIHRoZSBjYWxsYmFjayB3aXRoIHRoZSBSVFQgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGluZyB3YXMgcHVzaGVkIG9yIGZhbHNlIGlmIHVuYWJsZSB0byBiZSBwdXNoZWQuXG4gICAqL1xuICBwaW5nKGNhbGxiYWNrKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICBsZXQgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIHRoaXMucHVzaCh7dG9waWM6IFwicGhvZW5peFwiLCBldmVudDogXCJoZWFydGJlYXRcIiwgcGF5bG9hZDoge30sIHJlZjogcmVmfSlcbiAgICBsZXQgb25Nc2dSZWYgPSB0aGlzLm9uTWVzc2FnZShtc2cgPT4ge1xuICAgICAgaWYobXNnLnJlZiA9PT0gcmVmKXtcbiAgICAgICAgdGhpcy5vZmYoW29uTXNnUmVmXSlcbiAgICAgICAgY2FsbGJhY2soRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgdHJhbnNwb3J0Q29ubmVjdCgpe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgIHRoaXMuY29ubiA9IG5ldyB0aGlzLnRyYW5zcG9ydCh0aGlzLmVuZFBvaW50VVJMKCkpXG4gICAgdGhpcy5jb25uLmJpbmFyeVR5cGUgPSB0aGlzLmJpbmFyeVR5cGVcbiAgICB0aGlzLmNvbm4udGltZW91dCA9IHRoaXMubG9uZ3BvbGxlclRpbWVvdXRcbiAgICB0aGlzLmNvbm4ub25vcGVuID0gKCkgPT4gdGhpcy5vbkNvbm5PcGVuKClcbiAgICB0aGlzLmNvbm4ub25lcnJvciA9IGVycm9yID0+IHRoaXMub25Db25uRXJyb3IoZXJyb3IpXG4gICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGV2ZW50ID0+IHRoaXMub25Db25uTWVzc2FnZShldmVudClcbiAgICB0aGlzLmNvbm4ub25jbG9zZSA9IGV2ZW50ID0+IHRoaXMub25Db25uQ2xvc2UoZXZlbnQpXG4gIH1cblxuICBnZXRTZXNzaW9uKGtleSl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yZSAmJiB0aGlzLnNlc3Npb25TdG9yZS5nZXRJdGVtKGtleSkgfVxuXG4gIHN0b3JlU2Vzc2lvbihrZXksIHZhbCl7IHRoaXMuc2Vzc2lvblN0b3JlICYmIHRoaXMuc2Vzc2lvblN0b3JlLnNldEl0ZW0oa2V5LCB2YWwpIH1cblxuICBjb25uZWN0V2l0aEZhbGxiYWNrKGZhbGxiYWNrVHJhbnNwb3J0LCBmYWxsYmFja1RocmVzaG9sZCA9IDI1MDApe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmZhbGxiYWNrVGltZXIpXG4gICAgbGV0IGVzdGFibGlzaGVkID0gZmFsc2VcbiAgICBsZXQgcHJpbWFyeVRyYW5zcG9ydCA9IHRydWVcbiAgICBsZXQgb3BlblJlZiwgZXJyb3JSZWZcbiAgICBsZXQgZmFsbGJhY2sgPSAocmVhc29uKSA9PiB7XG4gICAgICB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBgZmFsbGluZyBiYWNrIHRvICR7ZmFsbGJhY2tUcmFuc3BvcnQubmFtZX0uLi5gLCByZWFzb24pXG4gICAgICB0aGlzLm9mZihbb3BlblJlZiwgZXJyb3JSZWZdKVxuICAgICAgcHJpbWFyeVRyYW5zcG9ydCA9IGZhbHNlXG4gICAgICB0aGlzLnN0b3JlU2Vzc2lvbihcInBoeDpsb25ncG9sbFwiLCBcInRydWVcIilcbiAgICAgIHRoaXMucmVwbGFjZVRyYW5zcG9ydChmYWxsYmFja1RyYW5zcG9ydClcbiAgICAgIHRoaXMudHJhbnNwb3J0Q29ubmVjdCgpXG4gICAgfVxuICAgIGlmKHRoaXMuZ2V0U2Vzc2lvbihcInBoeDpsb25ncG9sbFwiKSl7IHJldHVybiBmYWxsYmFjayhcIm1lbW9yaXplZFwiKSB9XG5cbiAgICB0aGlzLmZhbGxiYWNrVGltZXIgPSBzZXRUaW1lb3V0KGZhbGxiYWNrLCBmYWxsYmFja1RocmVzaG9sZClcblxuICAgIGVycm9yUmVmID0gdGhpcy5vbkVycm9yKHJlYXNvbiA9PiB7XG4gICAgICB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImVycm9yXCIsIHJlYXNvbilcbiAgICAgIGlmKHByaW1hcnlUcmFuc3BvcnQgJiYgIWVzdGFibGlzaGVkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZhbGxiYWNrVGltZXIpXG4gICAgICAgIGZhbGxiYWNrKHJlYXNvbilcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMub25PcGVuKCgpID0+IHtcbiAgICAgIGVzdGFibGlzaGVkID0gdHJ1ZVxuICAgICAgaWYoIXByaW1hcnlUcmFuc3BvcnQpe1xuICAgICAgICByZXR1cm4gY29uc29sZS5sb2coXCJ0cmFuc3BvcnRcIiwgYGVzdGFibGlzaGVkICR7ZmFsbGJhY2tUcmFuc3BvcnQubmFtZX0gZmFsbGJhY2tgKVxuICAgICAgfVxuICAgICAgLy8gaWYgd2UndmUgZXN0YWJsaXNoZWQgcHJpbWFyeSwgZ2l2ZSB0aGUgZmFsbGJhY2sgYSBuZXcgcGVyaW9kIHRvIGF0dGVtcHQgcGluZ1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmFsbGJhY2tUaW1lcilcbiAgICAgIHRoaXMuZmFsbGJhY2tUaW1lciA9IHNldFRpbWVvdXQoZmFsbGJhY2ssIGZhbGxiYWNrVGhyZXNob2xkKVxuICAgICAgdGhpcy5waW5nKHJ0dCA9PiB7XG4gICAgICAgIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIFwiY29ubmVjdGVkIHRvIHByaW1hcnkgYWZ0ZXJcIiwgcnR0KVxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mYWxsYmFja1RpbWVyKVxuICAgICAgfSlcbiAgICB9KVxuICAgIHRoaXMudHJhbnNwb3J0Q29ubmVjdCgpXG4gIH1cblxuICBjbGVhckhlYXJ0YmVhdHMoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lcilcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIpXG4gIH1cblxuICBvbkNvbm5PcGVuKCl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYCR7dGhpcy50cmFuc3BvcnQubmFtZX0gY29ubmVjdGVkIHRvICR7dGhpcy5lbmRQb2ludFVSTCgpfWApXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmVzdGFibGlzaGVkQ29ubmVjdGlvbnMrK1xuICAgIHRoaXMuZmx1c2hTZW5kQnVmZmVyKClcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAgICB0aGlzLnJlc2V0SGVhcnRiZWF0KClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm9wZW4uZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiBjYWxsYmFjaygpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGhlYXJ0YmVhdFRpbWVvdXQoKXtcbiAgICBpZih0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYpe1xuICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSl7IHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIFwiaGVhcnRiZWF0IHRpbWVvdXQuIEF0dGVtcHRpbmcgdG8gcmUtZXN0YWJsaXNoIGNvbm5lY3Rpb25cIikgfVxuICAgICAgdGhpcy50cmlnZ2VyQ2hhbkVycm9yKClcbiAgICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgICB0aGlzLnRlYXJkb3duKCgpID0+IHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCksIFdTX0NMT1NFX05PUk1BTCwgXCJoZWFydGJlYXQgdGltZW91dFwiKVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0SGVhcnRiZWF0KCl7XG4gICAgaWYodGhpcy5jb25uICYmIHRoaXMuY29ubi5za2lwSGVhcnRiZWF0KXsgcmV0dXJuIH1cbiAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgIHRoaXMuaGVhcnRiZWF0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZEhlYXJ0YmVhdCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gIH1cblxuICB0ZWFyZG93bihjYWxsYmFjaywgY29kZSwgcmVhc29uKXtcbiAgICBpZighdGhpcy5jb25uKXtcbiAgICAgIHJldHVybiBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgfVxuXG4gICAgdGhpcy53YWl0Rm9yQnVmZmVyRG9uZSgoKSA9PiB7XG4gICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICBpZihjb2RlKXsgdGhpcy5jb25uLmNsb3NlKGNvZGUsIHJlYXNvbiB8fCBcIlwiKSB9IGVsc2UgeyB0aGlzLmNvbm4uY2xvc2UoKSB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMud2FpdEZvclNvY2tldENsb3NlZCgoKSA9PiB7XG4gICAgICAgIGlmKHRoaXMuY29ubil7XG4gICAgICAgICAgdGhpcy5jb25uLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25lcnJvciA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25tZXNzYWdlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHdhaXRGb3JCdWZmZXJEb25lKGNhbGxiYWNrLCB0cmllcyA9IDEpe1xuICAgIGlmKHRyaWVzID09PSA1IHx8ICF0aGlzLmNvbm4gfHwgIXRoaXMuY29ubi5idWZmZXJlZEFtb3VudCl7XG4gICAgICBjYWxsYmFjaygpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMud2FpdEZvckJ1ZmZlckRvbmUoY2FsbGJhY2ssIHRyaWVzICsgMSlcbiAgICB9LCAxNTAgKiB0cmllcylcbiAgfVxuXG4gIHdhaXRGb3JTb2NrZXRDbG9zZWQoY2FsbGJhY2ssIHRyaWVzID0gMSl7XG4gICAgaWYodHJpZXMgPT09IDUgfHwgIXRoaXMuY29ubiB8fCB0aGlzLmNvbm4ucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5jbG9zZWQpe1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndhaXRGb3JTb2NrZXRDbG9zZWQoY2FsbGJhY2ssIHRyaWVzICsgMSlcbiAgICB9LCAxNTAgKiB0cmllcylcbiAgfVxuXG4gIG9uQ29ubkNsb3NlKGV2ZW50KXtcbiAgICBsZXQgY2xvc2VDb2RlID0gZXZlbnQgJiYgZXZlbnQuY29kZVxuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIFwiY2xvc2VcIiwgZXZlbnQpXG4gICAgdGhpcy50cmlnZ2VyQ2hhbkVycm9yKClcbiAgICB0aGlzLmNsZWFySGVhcnRiZWF0cygpXG4gICAgaWYoIXRoaXMuY2xvc2VXYXNDbGVhbiAmJiBjbG9zZUNvZGUgIT09IDEwMDApe1xuICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKVxuICAgIH1cbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmNsb3NlLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4gY2FsbGJhY2soZXZlbnQpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvbkNvbm5FcnJvcihlcnJvcil7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgZXJyb3IpXG4gICAgbGV0IHRyYW5zcG9ydEJlZm9yZSA9IHRoaXMudHJhbnNwb3J0XG4gICAgbGV0IGVzdGFibGlzaGVkQmVmb3JlID0gdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IHtcbiAgICAgIGNhbGxiYWNrKGVycm9yLCB0cmFuc3BvcnRCZWZvcmUsIGVzdGFibGlzaGVkQmVmb3JlKVxuICAgIH0pXG4gICAgaWYodHJhbnNwb3J0QmVmb3JlID09PSB0aGlzLnRyYW5zcG9ydCB8fCBlc3RhYmxpc2hlZEJlZm9yZSA+IDApe1xuICAgICAgdGhpcy50cmlnZ2VyQ2hhbkVycm9yKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXJDaGFuRXJyb3IoKXtcbiAgICB0aGlzLmNoYW5uZWxzLmZvckVhY2goY2hhbm5lbCA9PiB7XG4gICAgICBpZighKGNoYW5uZWwuaXNFcnJvcmVkKCkgfHwgY2hhbm5lbC5pc0xlYXZpbmcoKSB8fCBjaGFubmVsLmlzQ2xvc2VkKCkpKXtcbiAgICAgICAgY2hhbm5lbC50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmVycm9yKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGNvbm5lY3Rpb25TdGF0ZSgpe1xuICAgIHN3aXRjaCh0aGlzLmNvbm4gJiYgdGhpcy5jb25uLnJlYWR5U3RhdGUpe1xuICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLmNvbm5lY3Rpbmc6IHJldHVybiBcImNvbm5lY3RpbmdcIlxuICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLm9wZW46IHJldHVybiBcIm9wZW5cIlxuICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLmNsb3Npbmc6IHJldHVybiBcImNsb3NpbmdcIlxuICAgICAgZGVmYXVsdDogcmV0dXJuIFwiY2xvc2VkXCJcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5jb25uZWN0aW9uU3RhdGUoKSA9PT0gXCJvcGVuXCIgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAcGFyYW0ge0NoYW5uZWx9XG4gICAqL1xuICByZW1vdmUoY2hhbm5lbCl7XG4gICAgdGhpcy5vZmYoY2hhbm5lbC5zdGF0ZUNoYW5nZVJlZnMpXG4gICAgdGhpcy5jaGFubmVscyA9IHRoaXMuY2hhbm5lbHMuZmlsdGVyKGMgPT4gYy5qb2luUmVmKCkgIT09IGNoYW5uZWwuam9pblJlZigpKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYG9uT3BlbmAsIGBvbkNsb3NlYCwgYG9uRXJyb3IsYCBhbmQgYG9uTWVzc2FnZWAgcmVnaXN0cmF0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtyZWZzfSAtIGxpc3Qgb2YgcmVmcyByZXR1cm5lZCBieSBjYWxscyB0b1xuICAgKiAgICAgICAgICAgICAgICAgYG9uT3BlbmAsIGBvbkNsb3NlYCwgYG9uRXJyb3IsYCBhbmQgYG9uTWVzc2FnZWBcbiAgICovXG4gIG9mZihyZWZzKXtcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzKXtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Nba2V5XSA9IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Nba2V5XS5maWx0ZXIoKFtyZWZdKSA9PiB7XG4gICAgICAgIHJldHVybiByZWZzLmluZGV4T2YocmVmKSA9PT0gLTFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyBhIG5ldyBjaGFubmVsIGZvciB0aGUgZ2l2ZW4gdG9waWNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGFuUGFyYW1zIC0gUGFyYW1ldGVycyBmb3IgdGhlIGNoYW5uZWxcbiAgICogQHJldHVybnMge0NoYW5uZWx9XG4gICAqL1xuICBjaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zID0ge30pe1xuICAgIGxldCBjaGFuID0gbmV3IENoYW5uZWwodG9waWMsIGNoYW5QYXJhbXMsIHRoaXMpXG4gICAgdGhpcy5jaGFubmVscy5wdXNoKGNoYW4pXG4gICAgcmV0dXJuIGNoYW5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKi9cbiAgcHVzaChkYXRhKXtcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKXtcbiAgICAgIGxldCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmfSA9IGRhdGFcbiAgICAgIHRoaXMubG9nKFwicHVzaFwiLCBgJHt0b3BpY30gJHtldmVudH0gKCR7am9pbl9yZWZ9LCAke3JlZn0pYCwgcGF5bG9hZClcbiAgICB9XG5cbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkpe1xuICAgICAgdGhpcy5lbmNvZGUoZGF0YSwgcmVzdWx0ID0+IHRoaXMuY29ubi5zZW5kKHJlc3VsdCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKCgpID0+IHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBuZXh0IG1lc3NhZ2UgcmVmLCBhY2NvdW50aW5nIGZvciBvdmVyZmxvd3NcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIG1ha2VSZWYoKXtcbiAgICBsZXQgbmV3UmVmID0gdGhpcy5yZWYgKyAxXG4gICAgaWYobmV3UmVmID09PSB0aGlzLnJlZil7IHRoaXMucmVmID0gMCB9IGVsc2UgeyB0aGlzLnJlZiA9IG5ld1JlZiB9XG5cbiAgICByZXR1cm4gdGhpcy5yZWYudG9TdHJpbmcoKVxuICB9XG5cbiAgc2VuZEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiAmJiAhdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMucHVzaCh7dG9waWM6IFwicGhvZW5peFwiLCBldmVudDogXCJoZWFydGJlYXRcIiwgcGF5bG9hZDoge30sIHJlZjogdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmfSlcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oZWFydGJlYXRUaW1lb3V0KCksIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcylcbiAgfVxuXG4gIGZsdXNoU2VuZEJ1ZmZlcigpe1xuICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLnNlbmRCdWZmZXIubGVuZ3RoID4gMCl7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjaygpKVxuICAgICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICB9XG4gIH1cblxuICBvbkNvbm5NZXNzYWdlKHJhd01lc3NhZ2Upe1xuICAgIHRoaXMuZGVjb2RlKHJhd01lc3NhZ2UuZGF0YSwgbXNnID0+IHtcbiAgICAgIGxldCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmfSA9IG1zZ1xuICAgICAgaWYocmVmICYmIHJlZiA9PT0gdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgICAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgICAgIHRoaXMuaGVhcnRiZWF0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VuZEhlYXJ0YmVhdCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwicmVjZWl2ZVwiLCBgJHtwYXlsb2FkLnN0YXR1cyB8fCBcIlwifSAke3RvcGljfSAke2V2ZW50fSAke3JlZiAmJiBcIihcIiArIHJlZiArIFwiKVwiIHx8IFwiXCJ9YCwgcGF5bG9hZClcblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY2hhbm5lbHMubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5jaGFubmVsc1tpXVxuICAgICAgICBpZighY2hhbm5lbC5pc01lbWJlcih0b3BpYywgZXZlbnQsIHBheWxvYWQsIGpvaW5fcmVmKSl7IGNvbnRpbnVlIH1cbiAgICAgICAgY2hhbm5lbC50cmlnZ2VyKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5fcmVmKVxuICAgICAgfVxuXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgbGV0IFssIGNhbGxiYWNrXSA9IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZVtpXVxuICAgICAgICBjYWxsYmFjayhtc2cpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGxlYXZlT3BlblRvcGljKHRvcGljKXtcbiAgICBsZXQgZHVwQ2hhbm5lbCA9IHRoaXMuY2hhbm5lbHMuZmluZChjID0+IGMudG9waWMgPT09IHRvcGljICYmIChjLmlzSm9pbmVkKCkgfHwgYy5pc0pvaW5pbmcoKSkpXG4gICAgaWYoZHVwQ2hhbm5lbCl7XG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBgbGVhdmluZyBkdXBsaWNhdGUgdG9waWMgXCIke3RvcGljfVwiYClcbiAgICAgIGR1cENoYW5uZWwubGVhdmUoKVxuICAgIH1cbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBDT05TRUNVVElWRV9SRUxPQURTID0gXCJjb25zZWN1dGl2ZS1yZWxvYWRzXCJcbmV4cG9ydCBjb25zdCBNQVhfUkVMT0FEUyA9IDEwXG5leHBvcnQgY29uc3QgUkVMT0FEX0pJVFRFUl9NSU4gPSA1MDAwXG5leHBvcnQgY29uc3QgUkVMT0FEX0pJVFRFUl9NQVggPSAxMDAwMFxuZXhwb3J0IGNvbnN0IEZBSUxTQUZFX0pJVFRFUiA9IDMwMDAwXG5leHBvcnQgY29uc3QgUEhYX0VWRU5UX0NMQVNTRVMgPSBbXG4gIFwicGh4LWNsaWNrLWxvYWRpbmdcIiwgXCJwaHgtY2hhbmdlLWxvYWRpbmdcIiwgXCJwaHgtc3VibWl0LWxvYWRpbmdcIixcbiAgXCJwaHgta2V5ZG93bi1sb2FkaW5nXCIsIFwicGh4LWtleXVwLWxvYWRpbmdcIiwgXCJwaHgtYmx1ci1sb2FkaW5nXCIsIFwicGh4LWZvY3VzLWxvYWRpbmdcIixcbiAgXCJwaHgtaG9vay1sb2FkaW5nXCJcbl1cbmV4cG9ydCBjb25zdCBQSFhfQ09NUE9ORU5UID0gXCJkYXRhLXBoeC1jb21wb25lbnRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0xJTksgPSBcImRhdGEtcGh4LWxpbmtcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19TVEFUSUMgPSBcInRyYWNrLXN0YXRpY1wiXG5leHBvcnQgY29uc3QgUEhYX0xJTktfU1RBVEUgPSBcImRhdGEtcGh4LWxpbmstc3RhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUYgPSBcImRhdGEtcGh4LXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1JFRl9TUkMgPSBcImRhdGEtcGh4LXJlZi1zcmNcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19VUExPQURTID0gXCJ0cmFjay11cGxvYWRzXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBMT0FEX1JFRiA9IFwiZGF0YS1waHgtdXBsb2FkLXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1BSRUZMSUdIVEVEX1JFRlMgPSBcImRhdGEtcGh4LXByZWZsaWdodGVkLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9ET05FX1JFRlMgPSBcImRhdGEtcGh4LWRvbmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RST1BfVEFSR0VUID0gXCJkcm9wLXRhcmdldFwiXG5leHBvcnQgY29uc3QgUEhYX0FDVElWRV9FTlRSWV9SRUZTID0gXCJkYXRhLXBoeC1hY3RpdmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfRklMRV9VUERBVEVEID0gXCJwaHg6bGl2ZS1maWxlOnVwZGF0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TS0lQID0gXCJkYXRhLXBoeC1za2lwXCJcbmV4cG9ydCBjb25zdCBQSFhfTUFHSUNfSUQgPSBcImRhdGEtcGh4LWlkXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJVTkUgPSBcImRhdGEtcGh4LXBydW5lXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFHRV9MT0FESU5HID0gXCJwYWdlLWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9DT05ORUNURURfQ0xBU1MgPSBcInBoeC1jb25uZWN0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MT0FESU5HX0NMQVNTID0gXCJwaHgtbG9hZGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX05PX0ZFRURCQUNLX0NMQVNTID0gXCJwaHgtbm8tZmVlZGJhY2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9FUlJPUl9DTEFTUyA9IFwicGh4LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTID0gXCJwaHgtY2xpZW50LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTID0gXCJwaHgtc2VydmVyLWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFSRU5UX0lEID0gXCJkYXRhLXBoeC1wYXJlbnQtaWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9NQUlOID0gXCJkYXRhLXBoeC1tYWluXCJcbmV4cG9ydCBjb25zdCBQSFhfUk9PVF9JRCA9IFwiZGF0YS1waHgtcm9vdC1pZFwiXG5leHBvcnQgY29uc3QgUEhYX1ZJRVdQT1JUX1RPUCA9IFwidmlld3BvcnQtdG9wXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV1BPUlRfQk9UVE9NID0gXCJ2aWV3cG9ydC1ib3R0b21cIlxuZXhwb3J0IGNvbnN0IFBIWF9UUklHR0VSX0FDVElPTiA9IFwidHJpZ2dlci1hY3Rpb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9GRUVEQkFDS19GT1IgPSBcImZlZWRiYWNrLWZvclwiXG5leHBvcnQgY29uc3QgUEhYX0ZFRURCQUNLX0dST1VQID0gXCJmZWVkYmFjay1ncm91cFwiXG5leHBvcnQgY29uc3QgUEhYX0hBU19GT0NVU0VEID0gXCJwaHgtaGFzLWZvY3VzZWRcIlxuZXhwb3J0IGNvbnN0IEZPQ1VTQUJMRV9JTlBVVFMgPSBbXCJ0ZXh0XCIsIFwidGV4dGFyZWFcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInBhc3N3b3JkXCIsIFwic2VhcmNoXCIsIFwidGVsXCIsIFwidXJsXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcImNvbG9yXCIsIFwicmFuZ2VcIl1cbmV4cG9ydCBjb25zdCBDSEVDS0FCTEVfSU5QVVRTID0gW1wiY2hlY2tib3hcIiwgXCJyYWRpb1wiXVxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfU1VCTUlUVEVEID0gXCJwaHgtaGFzLXN1Ym1pdHRlZFwiXG5leHBvcnQgY29uc3QgUEhYX1NFU1NJT04gPSBcImRhdGEtcGh4LXNlc3Npb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9WSUVXX1NFTEVDVE9SID0gYFske1BIWF9TRVNTSU9OfV1gXG5leHBvcnQgY29uc3QgUEhYX1NUSUNLWSA9IFwiZGF0YS1waHgtc3RpY2t5XCJcbmV4cG9ydCBjb25zdCBQSFhfU1RBVElDID0gXCJkYXRhLXBoeC1zdGF0aWNcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUFET05MWSA9IFwiZGF0YS1waHgtcmVhZG9ubHlcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFRCA9IFwiZGF0YS1waHgtZGlzYWJsZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEggPSBcImRpc2FibGUtd2l0aFwiXG5leHBvcnQgY29uc3QgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFID0gXCJkYXRhLXBoeC1kaXNhYmxlLXdpdGgtcmVzdG9yZVwiXG5leHBvcnQgY29uc3QgUEhYX0hPT0sgPSBcImhvb2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9ERUJPVU5DRSA9IFwiZGVib3VuY2VcIlxuZXhwb3J0IGNvbnN0IFBIWF9USFJPVFRMRSA9IFwidGhyb3R0bGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9VUERBVEUgPSBcInVwZGF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX1NUUkVBTSA9IFwic3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfU1RSRUFNX1JFRiA9IFwiZGF0YS1waHgtc3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfS0VZID0gXCJrZXlcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUklWQVRFID0gXCJwaHhQcml2YXRlXCJcbmV4cG9ydCBjb25zdCBQSFhfQVVUT19SRUNPVkVSID0gXCJhdXRvLXJlY292ZXJcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9ERUJVRyA9IFwicGh4OmxpdmUtc29ja2V0OmRlYnVnXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfUFJPRklMRSA9IFwicGh4OmxpdmUtc29ja2V0OnByb2ZpbGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX0xBVEVOQ1lfU0lNID0gXCJwaHg6bGl2ZS1zb2NrZXQ6bGF0ZW5jeS1zaW1cIlxuZXhwb3J0IGNvbnN0IFBIWF9QUk9HUkVTUyA9IFwicHJvZ3Jlc3NcIlxuZXhwb3J0IGNvbnN0IFBIWF9NT1VOVEVEID0gXCJtb3VudGVkXCJcbmV4cG9ydCBjb25zdCBMT0FERVJfVElNRU9VVCA9IDFcbmV4cG9ydCBjb25zdCBCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUID0gMjAwXG5leHBvcnQgY29uc3QgQklORElOR19QUkVGSVggPSBcInBoeC1cIlxuZXhwb3J0IGNvbnN0IFBVU0hfVElNRU9VVCA9IDMwMDAwXG5leHBvcnQgY29uc3QgTElOS19IRUFERVIgPSBcIngtcmVxdWVzdGVkLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFJFU1BPTlNFX1VSTF9IRUFERVIgPSBcIngtcmVzcG9uc2UtdXJsXCJcbmV4cG9ydCBjb25zdCBERUJPVU5DRV9UUklHR0VSID0gXCJkZWJvdW5jZS10cmlnZ2VyXCJcbmV4cG9ydCBjb25zdCBUSFJPVFRMRUQgPSBcInRocm90dGxlZFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfUFJFVl9LRVkgPSBcImRlYm91bmNlLXByZXYta2V5XCJcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgZGVib3VuY2U6IDMwMCxcbiAgdGhyb3R0bGU6IDMwMFxufVxuXG4vLyBSZW5kZXJlZFxuZXhwb3J0IGNvbnN0IERZTkFNSUNTID0gXCJkXCJcbmV4cG9ydCBjb25zdCBTVEFUSUMgPSBcInNcIlxuZXhwb3J0IGNvbnN0IFJPT1QgPSBcInJcIlxuZXhwb3J0IGNvbnN0IENPTVBPTkVOVFMgPSBcImNcIlxuZXhwb3J0IGNvbnN0IEVWRU5UUyA9IFwiZVwiXG5leHBvcnQgY29uc3QgUkVQTFkgPSBcInJcIlxuZXhwb3J0IGNvbnN0IFRJVExFID0gXCJ0XCJcbmV4cG9ydCBjb25zdCBURU1QTEFURVMgPSBcInBcIlxuZXhwb3J0IGNvbnN0IFNUUkVBTSA9IFwic3RyZWFtXCIiLCAiaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRyeVVwbG9hZGVyIHtcbiAgY29uc3RydWN0b3IoZW50cnksIGNodW5rU2l6ZSwgbGl2ZVNvY2tldCl7XG4gICAgdGhpcy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuICAgIHRoaXMuZW50cnkgPSBlbnRyeVxuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHRoaXMuY2h1bmtTaXplID0gY2h1bmtTaXplXG4gICAgdGhpcy5jaHVua1RpbWVyID0gbnVsbFxuICAgIHRoaXMuZXJyb3JlZCA9IGZhbHNlXG4gICAgdGhpcy51cGxvYWRDaGFubmVsID0gbGl2ZVNvY2tldC5jaGFubmVsKGBsdnU6JHtlbnRyeS5yZWZ9YCwge3Rva2VuOiBlbnRyeS5tZXRhZGF0YSgpfSlcbiAgfVxuXG4gIGVycm9yKHJlYXNvbil7XG4gICAgaWYodGhpcy5lcnJvcmVkKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwubGVhdmUoKVxuICAgIHRoaXMuZXJyb3JlZCA9IHRydWVcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jaHVua1RpbWVyKVxuICAgIHRoaXMuZW50cnkuZXJyb3IocmVhc29uKVxuICB9XG5cbiAgdXBsb2FkKCl7XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwuam9pbigpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIF9kYXRhID0+IHRoaXMucmVhZE5leHRDaHVuaygpKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZWFzb24gPT4gdGhpcy5lcnJvcihyZWFzb24pKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLm9mZnNldCA+PSB0aGlzLmVudHJ5LmZpbGUuc2l6ZSB9XG5cbiAgcmVhZE5leHRDaHVuaygpe1xuICAgIGxldCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKVxuICAgIGxldCBibG9iID0gdGhpcy5lbnRyeS5maWxlLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmNodW5rU2l6ZSArIHRoaXMub2Zmc2V0KVxuICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgaWYoZS50YXJnZXQuZXJyb3IgPT09IG51bGwpe1xuICAgICAgICB0aGlzLm9mZnNldCArPSBlLnRhcmdldC5yZXN1bHQuYnl0ZUxlbmd0aFxuICAgICAgICB0aGlzLnB1c2hDaHVuayhlLnRhcmdldC5yZXN1bHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9nRXJyb3IoXCJSZWFkIGVycm9yOiBcIiArIGUudGFyZ2V0LmVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgfVxuXG4gIHB1c2hDaHVuayhjaHVuayl7XG4gICAgaWYoIXRoaXMudXBsb2FkQ2hhbm5lbC5pc0pvaW5lZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwucHVzaChcImNodW5rXCIsIGNodW5rKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZW50cnkucHJvZ3Jlc3MoKHRoaXMub2Zmc2V0IC8gdGhpcy5lbnRyeS5maWxlLnNpemUpICogMTAwKVxuICAgICAgICBpZighdGhpcy5pc0RvbmUoKSl7XG4gICAgICAgICAgdGhpcy5jaHVua1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSwgdGhpcy5saXZlU29ja2V0LmdldExhdGVuY3lTaW0oKSB8fCAwKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCAoe3JlYXNvbn0pID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9WSUVXX1NFTEVDVE9SXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBFbnRyeVVwbG9hZGVyIGZyb20gXCIuL2VudHJ5X3VwbG9hZGVyXCJcblxuZXhwb3J0IGxldCBsb2dFcnJvciA9IChtc2csIG9iaikgPT4gY29uc29sZS5lcnJvciAmJiBjb25zb2xlLmVycm9yKG1zZywgb2JqKVxuXG5leHBvcnQgbGV0IGlzQ2lkID0gKGNpZCkgPT4ge1xuICBsZXQgdHlwZSA9IHR5cGVvZihjaWQpXG4gIHJldHVybiB0eXBlID09PSBcIm51bWJlclwiIHx8ICh0eXBlID09PSBcInN0cmluZ1wiICYmIC9eKDB8WzEtOV1cXGQqKSQvLnRlc3QoY2lkKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdER1cGxpY2F0ZUlkcygpe1xuICBsZXQgaWRzID0gbmV3IFNldCgpXG4gIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2lkXVwiKVxuICBmb3IobGV0IGkgPSAwLCBsZW4gPSBlbGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgaWYoaWRzLmhhcyhlbGVtc1tpXS5pZCkpe1xuICAgICAgY29uc29sZS5lcnJvcihgTXVsdGlwbGUgSURzIGRldGVjdGVkOiAke2VsZW1zW2ldLmlkfS4gRW5zdXJlIHVuaXF1ZSBlbGVtZW50IGlkcy5gKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZHMuYWRkKGVsZW1zW2ldLmlkKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgbGV0IGRlYnVnID0gKHZpZXcsIGtpbmQsIG1zZywgb2JqKSA9PiB7XG4gIGlmKHZpZXcubGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICBjb25zb2xlLmxvZyhgJHt2aWV3LmlkfSAke2tpbmR9OiAke21zZ30gLSBgLCBvYmopXG4gIH1cbn1cblxuLy8gd3JhcHMgdmFsdWUgaW4gY2xvc3VyZSBvciByZXR1cm5zIGNsb3N1cmVcbmV4cG9ydCBsZXQgY2xvc3VyZSA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbCA6IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsIH1cblxuZXhwb3J0IGxldCBjbG9uZSA9IChvYmopID0+IHsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSkgfVxuXG5leHBvcnQgbGV0IGNsb3Nlc3RQaHhCaW5kaW5nID0gKGVsLCBiaW5kaW5nLCBib3JkZXJFbCkgPT4ge1xuICBkbyB7XG4gICAgaWYoZWwubWF0Y2hlcyhgWyR7YmluZGluZ31dYCkgJiYgIWVsLmRpc2FibGVkKXsgcmV0dXJuIGVsIH1cbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZVxuICB9IHdoaWxlKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxICYmICEoKGJvcmRlckVsICYmIGJvcmRlckVsLmlzU2FtZU5vZGUoZWwpKSB8fCBlbC5tYXRjaGVzKFBIWF9WSUVXX1NFTEVDVE9SKSkpXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBsZXQgaXNPYmplY3QgPSAob2JqKSA9PiB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiAhKG9iaiBpbnN0YW5jZW9mIEFycmF5KVxufVxuXG5leHBvcnQgbGV0IGlzRXF1YWxPYmogPSAob2JqMSwgb2JqMikgPT4gSlNPTi5zdHJpbmdpZnkob2JqMSkgPT09IEpTT04uc3RyaW5naWZ5KG9iajIpXG5cbmV4cG9ydCBsZXQgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgZm9yKGxldCB4IGluIG9iail7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBsZXQgbWF5YmUgPSAoZWwsIGNhbGxiYWNrKSA9PiBlbCAmJiBjYWxsYmFjayhlbClcblxuZXhwb3J0IGxldCBjaGFubmVsVXBsb2FkZXIgPSBmdW5jdGlvbiAoZW50cmllcywgb25FcnJvciwgcmVzcCwgbGl2ZVNvY2tldCl7XG4gIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgbGV0IGVudHJ5VXBsb2FkZXIgPSBuZXcgRW50cnlVcGxvYWRlcihlbnRyeSwgcmVzcC5jb25maWcuY2h1bmtfc2l6ZSwgbGl2ZVNvY2tldClcbiAgICBlbnRyeVVwbG9hZGVyLnVwbG9hZCgpXG4gIH0pXG59XG4iLCAibGV0IEJyb3dzZXIgPSB7XG4gIGNhblB1c2hTdGF0ZSgpeyByZXR1cm4gKHR5cGVvZiAoaGlzdG9yeS5wdXNoU3RhdGUpICE9PSBcInVuZGVmaW5lZFwiKSB9LFxuXG4gIGRyb3BMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpXG4gIH0sXG5cbiAgdXBkYXRlTG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSwgaW5pdGlhbCwgZnVuYyl7XG4gICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IGtleSA9IHRoaXMubG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IG5ld1ZhbCA9IGN1cnJlbnQgPT09IG51bGwgPyBpbml0aWFsIDogZnVuYyhjdXJyZW50KVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsKSlcbiAgICByZXR1cm4gbmV3VmFsXG4gIH0sXG5cbiAgZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSl7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpKVxuICB9LFxuXG4gIHVwZGF0ZUN1cnJlbnRTdGF0ZShjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGNhbGxiYWNrKGhpc3Rvcnkuc3RhdGUgfHwge30pLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgfSxcblxuICBwdXNoU3RhdGUoa2luZCwgbWV0YSwgdG8pe1xuICAgIGlmKHRoaXMuY2FuUHVzaFN0YXRlKCkpe1xuICAgICAgaWYodG8gIT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKXtcbiAgICAgICAgaWYobWV0YS50eXBlID09IFwicmVkaXJlY3RcIiAmJiBtZXRhLnNjcm9sbCl7XG4gICAgICAgICAgLy8gSWYgd2UncmUgcmVkaXJlY3Rpbmcgc3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsWSBmb3IgdGhlIGN1cnJlbnQgaGlzdG9yeSBzdGF0ZS5cbiAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gaGlzdG9yeS5zdGF0ZSB8fCB7fVxuICAgICAgICAgIGN1cnJlbnRTdGF0ZS5zY3JvbGwgPSBtZXRhLnNjcm9sbFxuICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGN1cnJlbnRTdGF0ZSwgXCJcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgbWV0YS5zY3JvbGwgLy8gT25seSBzdG9yZSB0aGUgc2Nyb2xsIGluIHRoZSByZWRpcmVjdCBjYXNlLlxuICAgICAgICBoaXN0b3J5W2tpbmQgKyBcIlN0YXRlXCJdKG1ldGEsIFwiXCIsIHRvIHx8IG51bGwpIC8vIElFIHdpbGwgY29lcmNlIHVuZGVmaW5lZCB0byBzdHJpbmdcbiAgICAgICAgbGV0IGhhc2hFbCA9IHRoaXMuZ2V0SGFzaFRhcmdldEVsKHdpbmRvdy5sb2NhdGlvbi5oYXNoKVxuXG4gICAgICAgIGlmKGhhc2hFbCl7XG4gICAgICAgICAgaGFzaEVsLnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgfSBlbHNlIGlmKG1ldGEudHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsKDAsIDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWRpcmVjdCh0bylcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q29va2llKG5hbWUsIHZhbHVlKXtcbiAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT0ke3ZhbHVlfWBcbiAgfSxcblxuICBnZXRDb29raWUobmFtZSl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKG5ldyBSZWdFeHAoYCg/Oig/Ol58Lio7XFxzKikke25hbWV9XFxzKlxcPVxccyooW147XSopLiokKXxeLiokYCksIFwiJDFcIilcbiAgfSxcblxuICByZWRpcmVjdCh0b1VSTCwgZmxhc2gpe1xuICAgIGlmKGZsYXNoKXsgQnJvd3Nlci5zZXRDb29raWUoXCJfX3Bob2VuaXhfZmxhc2hfX1wiLCBmbGFzaCArIFwiOyBtYXgtYWdlPTYwMDAwOyBwYXRoPS9cIikgfVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRvVVJMXG4gIH0sXG5cbiAgbG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpeyByZXR1cm4gYCR7bmFtZXNwYWNlfS0ke3N1YmtleX1gIH0sXG5cbiAgZ2V0SGFzaFRhcmdldEVsKG1heWJlSGFzaCl7XG4gICAgbGV0IGhhc2ggPSBtYXliZUhhc2gudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSlcbiAgICBpZihoYXNoID09PSBcIlwiKXsgcmV0dXJuIH1cbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtuYW1lPVwiJHtoYXNofVwiXWApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJvd3NlclxuIiwgImxldCBBUklBID0ge1xuICBmb2N1c01haW4oKXtcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDEsIG1haW4sIGgxXCIpXG4gICAgaWYodGFyZ2V0KXtcbiAgICAgIGxldCBvcmlnVGFiSW5kZXggPSB0YXJnZXQudGFiSW5kZXhcbiAgICAgIHRhcmdldC50YWJJbmRleCA9IC0xXG4gICAgICB0YXJnZXQuZm9jdXMoKVxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gb3JpZ1RhYkluZGV4XG4gICAgfVxuICB9LFxuXG4gIGFueU9mKGluc3RhbmNlLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZmluZChuYW1lID0+IGluc3RhbmNlIGluc3RhbmNlb2YgbmFtZSkgfSxcblxuICBpc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICByZXR1cm4oXG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlbC5yZWwgIT09IFwiaWdub3JlXCIpIHx8XG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQXJlYUVsZW1lbnQgJiYgZWwuaHJlZiAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKCFlbC5kaXNhYmxlZCAmJiAodGhpcy5hbnlPZihlbCwgW0hUTUxJbnB1dEVsZW1lbnQsIEhUTUxTZWxlY3RFbGVtZW50LCBIVE1MVGV4dEFyZWFFbGVtZW50LCBIVE1MQnV0dG9uRWxlbWVudF0pKSkgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSB8fFxuICAgICAgKGVsLnRhYkluZGV4ID4gMCB8fCAoIWludGVyYWN0aXZlT25seSAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSAhPT0gbnVsbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSAhPT0gXCJ0cnVlXCIpKVxuICAgIClcbiAgfSxcblxuICBhdHRlbXB0Rm9jdXMoZWwsIGludGVyYWN0aXZlT25seSl7XG4gICAgaWYodGhpcy5pc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KSl7IHRyeXsgZWwuZm9jdXMoKSB9IGNhdGNoKGUpe30gfVxuICAgIHJldHVybiAhIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKVxuICB9LFxuXG4gIGZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCwgdHJ1ZSkgfHwgdGhpcy5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoY2hpbGQsIHRydWUpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgfVxuICB9LFxuXG4gIGZvY3VzRmlyc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNGaXJzdChjaGlsZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNMYXN0KGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5sYXN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNMYXN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFSSUEiLCAiaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBmb2N1c1N0YWNrID0gW11cbmxldCBkZWZhdWx0X3RyYW5zaXRpb25fdGltZSA9IDIwMFxuXG5sZXQgSlMgPSB7XG4gIGV4ZWMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGRlZmF1bHRzKXtcbiAgICBsZXQgW2RlZmF1bHRLaW5kLCBkZWZhdWx0QXJnc10gPSBkZWZhdWx0cyB8fCBbbnVsbCwge2NhbGxiYWNrOiBkZWZhdWx0cyAmJiBkZWZhdWx0cy5jYWxsYmFja31dXG4gICAgbGV0IGNvbW1hbmRzID0gcGh4RXZlbnQuY2hhckF0KDApID09PSBcIltcIiA/XG4gICAgICBKU09OLnBhcnNlKHBoeEV2ZW50KSA6IFtbZGVmYXVsdEtpbmQsIGRlZmF1bHRBcmdzXV1cblxuICAgIGNvbW1hbmRzLmZvckVhY2goKFtraW5kLCBhcmdzXSkgPT4ge1xuICAgICAgaWYoa2luZCA9PT0gZGVmYXVsdEtpbmQgJiYgZGVmYXVsdEFyZ3MuZGF0YSl7XG4gICAgICAgIGFyZ3MuZGF0YSA9IE9iamVjdC5hc3NpZ24oYXJncy5kYXRhIHx8IHt9LCBkZWZhdWx0QXJncy5kYXRhKVxuICAgICAgICBhcmdzLmNhbGxiYWNrID0gYXJncy5jYWxsYmFjayB8fCBkZWZhdWx0QXJncy5jYWxsYmFja1xuICAgICAgfVxuICAgICAgdGhpcy5maWx0ZXJUb0Vscyhzb3VyY2VFbCwgYXJncykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIHRoaXNbYGV4ZWNfJHtraW5kfWBdKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgYXJncylcbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBpc1Zpc2libGUoZWwpe1xuICAgIHJldHVybiAhIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggPiAwKVxuICB9LFxuXG4gIC8vIHJldHVybnMgdHJ1ZSBpZiBhbnkgcGFydCBvZiB0aGUgZWxlbWVudCBpcyBpbnNpZGUgdGhlIHZpZXdwb3J0XG4gIGlzSW5WaWV3cG9ydChlbCl7XG4gICAgY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3Qgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICBjb25zdCB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aFxuXG4gICAgcmV0dXJuIChcbiAgICAgIHJlY3QucmlnaHQgPiAwICYmXG4gICAgICByZWN0LmJvdHRvbSA+IDAgJiZcbiAgICAgIHJlY3QubGVmdCA8IHdpbmRvd1dpZHRoICYmXG4gICAgICByZWN0LnRvcCA8IHdpbmRvd0hlaWdodFxuICAgIClcbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgLy8gY29tbWFuZHNcblxuICBleGVjX2V4ZWMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7YXR0ciwgdG99KXtcbiAgICBsZXQgbm9kZXMgPSB0byA/IERPTS5hbGwoZG9jdW1lbnQsIHRvKSA6IFtzb3VyY2VFbF1cbiAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IGVuY29kZWRKUyA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHIpXG4gICAgICBpZighZW5jb2RlZEpTKXsgdGhyb3cgbmV3IEVycm9yKGBleHBlY3RlZCAke2F0dHJ9IHRvIGNvbnRhaW4gSlMgY29tbWFuZCBvbiBcIiR7dG99XCJgKSB9XG4gICAgICB2aWV3LmxpdmVTb2NrZXQuZXhlY0pTKG5vZGUsIGVuY29kZWRKUywgZXZlbnRUeXBlKVxuICAgIH0pXG4gIH0sXG5cbiAgZXhlY19kaXNwYXRjaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHt0bywgZXZlbnQsIGRldGFpbCwgYnViYmxlc30pe1xuICAgIGRldGFpbCA9IGRldGFpbCB8fCB7fVxuICAgIGRldGFpbC5kaXNwYXRjaGVyID0gc291cmNlRWxcbiAgICBET00uZGlzcGF0Y2hFdmVudChlbCwgZXZlbnQsIHtkZXRhaWwsIGJ1YmJsZXN9KVxuICB9LFxuXG4gIGV4ZWNfcHVzaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIGFyZ3Mpe1xuICAgIGxldCB7ZXZlbnQsIGRhdGEsIHRhcmdldCwgcGFnZV9sb2FkaW5nLCBsb2FkaW5nLCB2YWx1ZSwgZGlzcGF0Y2hlciwgY2FsbGJhY2t9ID0gYXJnc1xuICAgIGxldCBwdXNoT3B0cyA9IHtsb2FkaW5nLCB2YWx1ZSwgdGFyZ2V0LCBwYWdlX2xvYWRpbmc6ICEhcGFnZV9sb2FkaW5nfVxuICAgIGxldCB0YXJnZXRTcmMgPSBldmVudFR5cGUgPT09IFwiY2hhbmdlXCIgJiYgZGlzcGF0Y2hlciA/IGRpc3BhdGNoZXIgOiBzb3VyY2VFbFxuICAgIGxldCBwaHhUYXJnZXQgPSB0YXJnZXQgfHwgdGFyZ2V0U3JjLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoXCJ0YXJnZXRcIikpIHx8IHRhcmdldFNyY1xuICAgIHZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh0YXJnZXRWaWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIGlmKCF0YXJnZXRWaWV3LmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuICAgICAgaWYoZXZlbnRUeXBlID09PSBcImNoYW5nZVwiKXtcbiAgICAgICAgbGV0IHtuZXdDaWQsIF90YXJnZXR9ID0gYXJnc1xuICAgICAgICBfdGFyZ2V0ID0gX3RhcmdldCB8fCAoRE9NLmlzRm9ybUlucHV0KHNvdXJjZUVsKSA/IHNvdXJjZUVsLm5hbWUgOiB1bmRlZmluZWQpXG4gICAgICAgIGlmKF90YXJnZXQpeyBwdXNoT3B0cy5fdGFyZ2V0ID0gX3RhcmdldCB9XG4gICAgICAgIHRhcmdldFZpZXcucHVzaElucHV0KHNvdXJjZUVsLCB0YXJnZXRDdHgsIG5ld0NpZCwgZXZlbnQgfHwgcGh4RXZlbnQsIHB1c2hPcHRzLCBjYWxsYmFjaylcbiAgICAgIH0gZWxzZSBpZihldmVudFR5cGUgPT09IFwic3VibWl0XCIpe1xuICAgICAgICBsZXQge3N1Ym1pdHRlcn0gPSBhcmdzXG4gICAgICAgIHRhcmdldFZpZXcuc3VibWl0Rm9ybShzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBldmVudCB8fCBwaHhFdmVudCwgc3VibWl0dGVyLCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRWaWV3LnB1c2hFdmVudChldmVudFR5cGUsIHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBkYXRhLCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBleGVjX25hdmlnYXRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2hyZWYsIHJlcGxhY2V9KXtcbiAgICB2aWV3LmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiKVxuICB9LFxuXG4gIGV4ZWNfcGF0Y2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5wdXNoSGlzdG9yeVBhdGNoKGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiLCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmF0dGVtcHRGb2N1cyhlbCkpXG4gIH0sXG5cbiAgZXhlY19mb2N1c19maXJzdChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gQVJJQS5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoZWwpIHx8IEFSSUEuZm9jdXNGaXJzdChlbCkpXG4gIH0sXG5cbiAgZXhlY19wdXNoX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBmb2N1c1N0YWNrLnB1c2goZWwgfHwgc291cmNlRWwpKVxuICB9LFxuXG4gIGV4ZWNfcG9wX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBjb25zdCBlbCA9IGZvY3VzU3RhY2sucG9wKClcbiAgICAgIGlmKGVsKXsgZWwuZm9jdXMoKSB9XG4gICAgfSlcbiAgfSxcblxuICBleGVjX2FkZF9jbGFzcyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtuYW1lcywgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBuYW1lcywgW10sIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY19yZW1vdmVfY2xhc3MoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7bmFtZXMsIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIG5hbWVzLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdG9nZ2xlX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RvLCBuYW1lcywgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMudG9nZ2xlQ2xhc3NlcyhlbCwgbmFtZXMsIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190b2dnbGVfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyOiBbYXR0ciwgdmFsMSwgdmFsMl19KXtcbiAgICBpZihlbC5oYXNBdHRyaWJ1dGUoYXR0cikpe1xuICAgICAgaWYodmFsMiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgLy8gdG9nZ2xlIGJldHdlZW4gdmFsMSBhbmQgdmFsMlxuICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUoYXR0cikgPT09IHZhbDEpe1xuICAgICAgICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWwyXV0sIFtdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWwxXV0sIFtdKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZW1vdmUgYXR0clxuICAgICAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtdLCBbYXR0cl0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWwxXV0sIFtdKVxuICAgIH1cbiAgfSxcblxuICBleGVjX3RyYW5zaXRpb24oZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7dGltZSwgdHJhbnNpdGlvbn0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgW10sIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190b2dnbGUoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lfSl7XG4gICAgdGhpcy50b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfc2hvdyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5zaG93KGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19oaWRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmhpZGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSlcbiAgfSxcblxuICBleGVjX3NldF9hdHRyKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2F0dHI6IFthdHRyLCB2YWxdfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbW2F0dHIsIHZhbF1dLCBbXSlcbiAgfSxcblxuICBleGVjX3JlbW92ZV9hdHRyKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2F0dHJ9KXtcbiAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtdLCBbYXR0cl0pXG4gIH0sXG5cbiAgLy8gdXRpbHMgZm9yIGNvbW1hbmRzXG5cbiAgc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKXtcbiAgICBpZighdGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIG51bGwsIHRpbWUpXG4gICAgfVxuICB9LFxuXG4gIGhpZGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIG51bGwsIHRyYW5zaXRpb24sIHRpbWUpXG4gICAgfVxuICB9LFxuXG4gIHRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBpbnMsIG91dHMsIHRpbWUpe1xuICAgIHRpbWUgPSB0aW1lIHx8IGRlZmF1bHRfdHJhbnNpdGlvbl90aW1lXG4gICAgbGV0IFtpbkNsYXNzZXMsIGluU3RhcnRDbGFzc2VzLCBpbkVuZENsYXNzZXNdID0gaW5zIHx8IFtbXSwgW10sIFtdXVxuICAgIGxldCBbb3V0Q2xhc3Nlcywgb3V0U3RhcnRDbGFzc2VzLCBvdXRFbmRDbGFzc2VzXSA9IG91dHMgfHwgW1tdLCBbXSwgW11dXG4gICAgaWYoaW5DbGFzc2VzLmxlbmd0aCA+IDAgfHwgb3V0Q2xhc3Nlcy5sZW5ndGggPiAwKXtcbiAgICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRTdGFydENsYXNzZXMsIGluQ2xhc3Nlcy5jb25jYXQoaW5TdGFydENsYXNzZXMpLmNvbmNhdChpbkVuZENsYXNzZXMpKVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dENsYXNzZXMsIFtdKVxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0RW5kQ2xhc3Nlcywgb3V0U3RhcnRDbGFzc2VzKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtc3RhcnRcIikpXG4gICAgICAgIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBvdXRDbGFzc2VzLmNvbmNhdChvdXRFbmRDbGFzc2VzKSlcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIilcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJyZW1vdmVcIil7IHJldHVybiB9XG4gICAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpblN0YXJ0Q2xhc3Nlcywgb3V0Q2xhc3Nlcy5jb25jYXQob3V0U3RhcnRDbGFzc2VzKS5jb25jYXQob3V0RW5kQ2xhc3NlcykpXG4gICAgICAgICAgbGV0IHN0aWNreURpc3BsYXkgPSBkaXNwbGF5IHx8IHRoaXMuZGVmYXVsdERpc3BsYXkoZWwpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gc3RpY2t5RGlzcGxheSlcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpbkNsYXNzZXMsIFtdKVxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5FbmRDbGFzc2VzLCBpblN0YXJ0Q2xhc3NlcykpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LXN0YXJ0XCIpKVxuICAgICAgICB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgaW5DbGFzc2VzLmNvbmNhdChpbkVuZENsYXNzZXMpKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZih0aGlzLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLXN0YXJ0XCIpKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1zdGFydFwiKSlcbiAgICAgICAgICBsZXQgc3RpY2t5RGlzcGxheSA9IGRpc3BsYXkgfHwgdGhpcy5kZWZhdWx0RGlzcGxheShlbClcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBzdGlja3lEaXNwbGF5KVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB0b2dnbGVDbGFzc2VzKGVsLCBjbGFzc2VzLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGxldCBbcHJldkFkZHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiY2xhc3Nlc1wiLCBbW10sIFtdXSlcbiAgICAgIGxldCBuZXdBZGRzID0gY2xhc3Nlcy5maWx0ZXIobmFtZSA9PiBwcmV2QWRkcy5pbmRleE9mKG5hbWUpIDwgMCAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IG5ld1JlbW92ZXMgPSBjbGFzc2VzLmZpbHRlcihuYW1lID0+IHByZXZSZW1vdmVzLmluZGV4T2YobmFtZSkgPCAwICYmIGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBuZXdBZGRzLCBuZXdSZW1vdmVzLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICAgIH0pXG4gIH0sXG5cbiAgYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBhZGRzLCByZW1vdmVzLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KXtcbiAgICB0aW1lID0gdGltZSB8fCBkZWZhdWx0X3RyYW5zaXRpb25fdGltZVxuICAgIGxldCBbdHJhbnNpdGlvblJ1biwgdHJhbnNpdGlvblN0YXJ0LCB0cmFuc2l0aW9uRW5kXSA9IHRyYW5zaXRpb24gfHwgW1tdLCBbXSwgW11dXG4gICAgaWYodHJhbnNpdGlvblJ1bi5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgdHJhbnNpdGlvblN0YXJ0LCBbXS5jb25jYXQodHJhbnNpdGlvblJ1bikuY29uY2F0KHRyYW5zaXRpb25FbmQpKVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgdHJhbnNpdGlvblJ1biwgW10pXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgdHJhbnNpdGlvbkVuZCwgdHJhbnNpdGlvblN0YXJ0KSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGxldCBvbkRvbmUgPSAoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgYWRkcy5jb25jYXQodHJhbnNpdGlvbkVuZCksIHJlbW92ZXMuY29uY2F0KHRyYW5zaXRpb25SdW4pLmNvbmNhdCh0cmFuc2l0aW9uU3RhcnQpKVxuICAgICAgcmV0dXJuIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpXG4gICAgfVxuXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBsZXQgW3ByZXZBZGRzLCBwcmV2UmVtb3Zlc10gPSBET00uZ2V0U3RpY2t5KGVsLCBcImNsYXNzZXNcIiwgW1tdLCBbXV0pXG4gICAgICBsZXQga2VlcEFkZHMgPSBhZGRzLmZpbHRlcihuYW1lID0+IHByZXZBZGRzLmluZGV4T2YobmFtZSkgPCAwICYmICFlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpXG4gICAgICBsZXQga2VlcFJlbW92ZXMgPSByZW1vdmVzLmZpbHRlcihuYW1lID0+IHByZXZSZW1vdmVzLmluZGV4T2YobmFtZSkgPCAwICYmIGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIGxldCBuZXdBZGRzID0gcHJldkFkZHMuZmlsdGVyKG5hbWUgPT4gcmVtb3Zlcy5pbmRleE9mKG5hbWUpIDwgMCkuY29uY2F0KGtlZXBBZGRzKVxuICAgICAgbGV0IG5ld1JlbW92ZXMgPSBwcmV2UmVtb3Zlcy5maWx0ZXIobmFtZSA9PiBhZGRzLmluZGV4T2YobmFtZSkgPCAwKS5jb25jYXQoa2VlcFJlbW92ZXMpXG5cbiAgICAgIERPTS5wdXRTdGlja3koZWwsIFwiY2xhc3Nlc1wiLCBjdXJyZW50RWwgPT4ge1xuICAgICAgICBjdXJyZW50RWwuY2xhc3NMaXN0LnJlbW92ZSguLi5uZXdSZW1vdmVzKVxuICAgICAgICBjdXJyZW50RWwuY2xhc3NMaXN0LmFkZCguLi5uZXdBZGRzKVxuICAgICAgICByZXR1cm4gW25ld0FkZHMsIG5ld1JlbW92ZXNdXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2V0T3JSZW1vdmVBdHRycyhlbCwgc2V0cywgcmVtb3Zlcyl7XG4gICAgbGV0IFtwcmV2U2V0cywgcHJldlJlbW92ZXNdID0gRE9NLmdldFN0aWNreShlbCwgXCJhdHRyc1wiLCBbW10sIFtdXSlcblxuICAgIGxldCBhbHRlcmVkQXR0cnMgPSBzZXRzLm1hcCgoW2F0dHIsIF92YWxdKSA9PiBhdHRyKS5jb25jYXQocmVtb3ZlcylcbiAgICBsZXQgbmV3U2V0cyA9IHByZXZTZXRzLmZpbHRlcigoW2F0dHIsIF92YWxdKSA9PiAhYWx0ZXJlZEF0dHJzLmluY2x1ZGVzKGF0dHIpKS5jb25jYXQoc2V0cylcbiAgICBsZXQgbmV3UmVtb3ZlcyA9IHByZXZSZW1vdmVzLmZpbHRlcigoYXR0cikgPT4gIWFsdGVyZWRBdHRycy5pbmNsdWRlcyhhdHRyKSkuY29uY2F0KHJlbW92ZXMpXG5cbiAgICBET00ucHV0U3RpY2t5KGVsLCBcImF0dHJzXCIsIGN1cnJlbnRFbCA9PiB7XG4gICAgICBuZXdSZW1vdmVzLmZvckVhY2goYXR0ciA9PiBjdXJyZW50RWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpKVxuICAgICAgbmV3U2V0cy5mb3JFYWNoKChbYXR0ciwgdmFsXSkgPT4gY3VycmVudEVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWwpKVxuICAgICAgcmV0dXJuIFtuZXdTZXRzLCBuZXdSZW1vdmVzXVxuICAgIH0pXG4gIH0sXG5cbiAgaGFzQWxsQ2xhc3NlcyhlbCwgY2xhc3Nlcyl7IHJldHVybiBjbGFzc2VzLmV2ZXJ5KG5hbWUgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKSB9LFxuXG4gIGlzVG9nZ2xlZE91dChlbCwgb3V0Q2xhc3Nlcyl7XG4gICAgcmV0dXJuICF0aGlzLmlzVmlzaWJsZShlbCkgfHwgdGhpcy5oYXNBbGxDbGFzc2VzKGVsLCBvdXRDbGFzc2VzKVxuICB9LFxuXG4gIGZpbHRlclRvRWxzKHNvdXJjZUVsLCB7dG99KXtcbiAgICByZXR1cm4gdG8gPyBET00uYWxsKGRvY3VtZW50LCB0bykgOiBbc291cmNlRWxdXG4gIH0sXG5cbiAgZGVmYXVsdERpc3BsYXkoZWwpe1xuICAgIHJldHVybiB7dHI6IFwidGFibGUtcm93XCIsIHRkOiBcInRhYmxlLWNlbGxcIn1bZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBcImJsb2NrXCJcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBKUyIsICJpbXBvcnQge1xuICBDSEVDS0FCTEVfSU5QVVRTLFxuICBERUJPVU5DRV9QUkVWX0tFWSxcbiAgREVCT1VOQ0VfVFJJR0dFUixcbiAgRk9DVVNBQkxFX0lOUFVUUyxcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0VWRU5UX0NMQVNTRVMsXG4gIFBIWF9IQVNfRk9DVVNFRCxcbiAgUEhYX0hBU19TVUJNSVRURUQsXG4gIFBIWF9NQUlOLFxuICBQSFhfTk9fRkVFREJBQ0tfQ0xBU1MsXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9QUklWQVRFLFxuICBQSFhfUkVGLFxuICBQSFhfUkVGX1NSQyxcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfU1RBVElDLFxuICBQSFhfVVBMT0FEX1JFRixcbiAgUEhYX1ZJRVdfU0VMRUNUT1IsXG4gIFBIWF9TVElDS1ksXG4gIFRIUk9UVExFRFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgSlMgZnJvbSBcIi4vanNcIlxuXG5pbXBvcnQge1xuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmxldCBET00gPSB7XG4gIGJ5SWQoaWQpeyByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpIHx8IGxvZ0Vycm9yKGBubyBpZCBmb3VuZCBmb3IgJHtpZH1gKSB9LFxuXG4gIHJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpe1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKVxuICAgIGlmKGVsLmNsYXNzTGlzdC5sZW5ndGggPT09IDApeyBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKSB9XG4gIH0sXG5cbiAgYWxsKG5vZGUsIHF1ZXJ5LCBjYWxsYmFjayl7XG4gICAgaWYoIW5vZGUpeyByZXR1cm4gW10gfVxuICAgIGxldCBhcnJheSA9IEFycmF5LmZyb20obm9kZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSlcbiAgICByZXR1cm4gY2FsbGJhY2sgPyBhcnJheS5mb3JFYWNoKGNhbGxiYWNrKSA6IGFycmF5XG4gIH0sXG5cbiAgY2hpbGROb2RlTGVuZ3RoKGh0bWwpe1xuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcbiAgICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5jaGlsZEVsZW1lbnRDb3VudFxuICB9LFxuXG4gIGlzVXBsb2FkSW5wdXQoZWwpeyByZXR1cm4gZWwudHlwZSA9PT0gXCJmaWxlXCIgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9VUExPQURfUkVGKSAhPT0gbnVsbCB9LFxuXG4gIGlzQXV0b1VwbG9hZChpbnB1dEVsKXsgcmV0dXJuIGlucHV0RWwuaGFzQXR0cmlidXRlKFwiZGF0YS1waHgtYXV0by11cGxvYWRcIikgfSxcblxuICBmaW5kVXBsb2FkSW5wdXRzKG5vZGUpe1xuICAgIGNvbnN0IGZvcm1JZCA9IG5vZGUuaWRcbiAgICBjb25zdCBpbnB1dHNPdXRzaWRlRm9ybSA9IHRoaXMuYWxsKGRvY3VtZW50LCBgaW5wdXRbdHlwZT1cImZpbGVcIl1bJHtQSFhfVVBMT0FEX1JFRn1dW2Zvcm09XCIke2Zvcm1JZH1cIl1gKVxuICAgIHJldHVybiB0aGlzLmFsbChub2RlLCBgaW5wdXRbdHlwZT1cImZpbGVcIl1bJHtQSFhfVVBMT0FEX1JFRn1dYCkuY29uY2F0KGlucHV0c091dHNpZGVGb3JtKVxuICB9LFxuXG4gIGZpbmRDb21wb25lbnROb2RlTGlzdChub2RlLCBjaWQpe1xuICAgIHJldHVybiB0aGlzLmZpbHRlcldpdGhpblNhbWVMaXZlVmlldyh0aGlzLmFsbChub2RlLCBgWyR7UEhYX0NPTVBPTkVOVH09XCIke2NpZH1cIl1gKSwgbm9kZSlcbiAgfSxcblxuICBpc1BoeERlc3Ryb3llZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5pZCAmJiBET00ucHJpdmF0ZShub2RlLCBcImRlc3Ryb3llZFwiKSA/IHRydWUgOiBmYWxzZVxuICB9LFxuXG4gIHdhbnRzTmV3VGFiKGUpe1xuICAgIGxldCB3YW50c05ld1RhYiA9IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5IHx8IGUubWV0YUtleSB8fCAoZS5idXR0b24gJiYgZS5idXR0b24gPT09IDEpXG4gICAgbGV0IGlzRG93bmxvYWQgPSAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlLnRhcmdldC5oYXNBdHRyaWJ1dGUoXCJkb3dubG9hZFwiKSlcbiAgICBsZXQgaXNUYXJnZXRCbGFuayA9IGUudGFyZ2V0Lmhhc0F0dHJpYnV0ZShcInRhcmdldFwiKSAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIikudG9Mb3dlckNhc2UoKSA9PT0gXCJfYmxhbmtcIlxuICAgIGxldCBpc1RhcmdldE5hbWVkVGFiID0gZS50YXJnZXQuaGFzQXR0cmlidXRlKFwidGFyZ2V0XCIpICYmICFlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIikuc3RhcnRzV2l0aChcIl9cIilcbiAgICByZXR1cm4gd2FudHNOZXdUYWIgfHwgaXNUYXJnZXRCbGFuayB8fCBpc0Rvd25sb2FkIHx8IGlzVGFyZ2V0TmFtZWRUYWJcbiAgfSxcblxuICBpc1VubG9hZGFibGVGb3JtU3VibWl0KGUpe1xuICAgIC8vIElnbm9yZSBmb3JtIHN1Ym1pc3Npb25zIGludGVuZGVkIHRvIGNsb3NlIGEgbmF0aXZlIDxkaWFsb2c+IGVsZW1lbnRcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvZGlhbG9nI3VzYWdlX25vdGVzXG4gICAgbGV0IGlzRGlhbG9nU3VibWl0ID0gKGUudGFyZ2V0ICYmIGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKSA9PT0gXCJkaWFsb2dcIikgfHxcbiAgICAgIChlLnN1Ym1pdHRlciAmJiBlLnN1Ym1pdHRlci5nZXRBdHRyaWJ1dGUoXCJmb3JtbWV0aG9kXCIpID09PSBcImRpYWxvZ1wiKVxuXG4gICAgaWYoaXNEaWFsb2dTdWJtaXQpe1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAhZS5kZWZhdWx0UHJldmVudGVkICYmICF0aGlzLndhbnRzTmV3VGFiKGUpXG4gICAgfVxuICB9LFxuXG4gIGlzTmV3UGFnZUNsaWNrKGUsIGN1cnJlbnRMb2NhdGlvbil7XG4gICAgbGV0IGhyZWYgPSBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50ID8gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA6IG51bGxcbiAgICBsZXQgdXJsXG5cbiAgICBpZihlLmRlZmF1bHRQcmV2ZW50ZWQgfHwgaHJlZiA9PT0gbnVsbCB8fCB0aGlzLndhbnRzTmV3VGFiKGUpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICBpZihocmVmLnN0YXJ0c1dpdGgoXCJtYWlsdG86XCIpIHx8IGhyZWYuc3RhcnRzV2l0aChcInRlbDpcIikpeyByZXR1cm4gZmFsc2UgfVxuICAgIGlmKGUudGFyZ2V0LmlzQ29udGVudEVkaXRhYmxlKXsgcmV0dXJuIGZhbHNlIH1cblxuICAgIHRyeSB7XG4gICAgICB1cmwgPSBuZXcgVVJMKGhyZWYpXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmwgPSBuZXcgVVJMKGhyZWYsIGN1cnJlbnRMb2NhdGlvbilcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAvLyBiYWQgVVJMLCBmYWxsYmFjayB0byBsZXQgYnJvd3NlciB0cnkgaXQgYXMgZXh0ZXJuYWxcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih1cmwuaG9zdCA9PT0gY3VycmVudExvY2F0aW9uLmhvc3QgJiYgdXJsLnByb3RvY29sID09PSBjdXJyZW50TG9jYXRpb24ucHJvdG9jb2wpe1xuICAgICAgaWYodXJsLnBhdGhuYW1lID09PSBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUgJiYgdXJsLnNlYXJjaCA9PT0gY3VycmVudExvY2F0aW9uLnNlYXJjaCl7XG4gICAgICAgIHJldHVybiB1cmwuaGFzaCA9PT0gXCJcIiAmJiAhdXJsLmhyZWYuZW5kc1dpdGgoXCIjXCIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cmwucHJvdG9jb2wuc3RhcnRzV2l0aChcImh0dHBcIilcbiAgfSxcblxuICBtYXJrUGh4Q2hpbGREZXN0cm95ZWQoZWwpe1xuICAgIGlmKHRoaXMuaXNQaHhDaGlsZChlbCkpeyBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIFwiXCIpIH1cbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIFwiZGVzdHJveWVkXCIsIHRydWUpXG4gIH0sXG5cbiAgZmluZFBoeENoaWxkcmVuSW5GcmFnbWVudChodG1sLCBwYXJlbnRJZCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0aGlzLmZpbmRQaHhDaGlsZHJlbih0ZW1wbGF0ZS5jb250ZW50LCBwYXJlbnRJZClcbiAgfSxcblxuICBpc0lnbm9yZWQoZWwsIHBoeFVwZGF0ZSl7XG4gICAgcmV0dXJuIChlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSB8fCBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC11cGRhdGVcIikpID09PSBcImlnbm9yZVwiXG4gIH0sXG5cbiAgaXNQaHhVcGRhdGUoZWwsIHBoeFVwZGF0ZSwgdXBkYXRlVHlwZXMpe1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgdXBkYXRlVHlwZXMuaW5kZXhPZihlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSkgPj0gMFxuICB9LFxuXG4gIGZpbmRQaHhTdGlja3koZWwpeyByZXR1cm4gdGhpcy5hbGwoZWwsIGBbJHtQSFhfU1RJQ0tZfV1gKSB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbihlbCwgcGFyZW50SWQpe1xuICAgIHJldHVybiB0aGlzLmFsbChlbCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9WyR7UEhYX1BBUkVOVF9JRH09XCIke3BhcmVudElkfVwiXWApXG4gIH0sXG5cbiAgZmluZEV4aXN0aW5nUGFyZW50Q0lEcyhub2RlLCBjaWRzKXtcbiAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gZmluZCBwYXJlbnRzIHRoYXQgZXhpc3Qgb24gdGhlIHBhZ2VcbiAgICAvLyBpZiBhIGNpZCBpcyBub3Qgb24gdGhlIHBhZ2UsIHRoZSBvbmx5IHdheSBpdCBjYW4gYmUgYWRkZWQgYmFjayB0byB0aGUgcGFnZVxuICAgIC8vIGlzIGlmIGEgcGFyZW50IGFkZHMgaXQgYmFjaywgdGhlcmVmb3JlIGlmIGEgY2lkIGRvZXMgbm90IGV4aXN0IG9uIHRoZSBwYWdlLFxuICAgIC8vIHdlIHNob3VsZCBub3QgdHJ5IHRvIHJlbmRlciBpdCBieSBpdHNlbGYgKGJlY2F1c2UgaXQgd291bGQgYmUgcmVuZGVyZWQgdHdpY2UsXG4gICAgLy8gb25lIGJ5IHRoZSBwYXJlbnQsIGFuZCBhIHNlY29uZCB0aW1lIGJ5IGl0c2VsZilcbiAgICBsZXQgcGFyZW50Q2lkcyA9IG5ldyBTZXQoKVxuICAgIGxldCBjaGlsZHJlbkNpZHMgPSBuZXcgU2V0KClcblxuICAgIGNpZHMuZm9yRWFjaChjaWQgPT4ge1xuICAgICAgdGhpcy5maWx0ZXJXaXRoaW5TYW1lTGl2ZVZpZXcodGhpcy5hbGwobm9kZSwgYFske1BIWF9DT01QT05FTlR9PVwiJHtjaWR9XCJdYCksIG5vZGUpLmZvckVhY2gocGFyZW50ID0+IHtcbiAgICAgICAgcGFyZW50Q2lkcy5hZGQoY2lkKVxuICAgICAgICB0aGlzLmFsbChwYXJlbnQsIGBbJHtQSFhfQ09NUE9ORU5UfV1gKVxuICAgICAgICAgIC5tYXAoZWwgPT4gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKSlcbiAgICAgICAgICAuZm9yRWFjaChjaGlsZENJRCA9PiBjaGlsZHJlbkNpZHMuYWRkKGNoaWxkQ0lEKSlcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGNoaWxkcmVuQ2lkcy5mb3JFYWNoKGNoaWxkQ2lkID0+IHBhcmVudENpZHMuZGVsZXRlKGNoaWxkQ2lkKSlcblxuICAgIHJldHVybiBwYXJlbnRDaWRzXG4gIH0sXG5cbiAgZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KG5vZGVzLCBwYXJlbnQpe1xuICAgIGlmKHBhcmVudC5xdWVyeVNlbGVjdG9yKFBIWF9WSUVXX1NFTEVDVE9SKSl7XG4gICAgICByZXR1cm4gbm9kZXMuZmlsdGVyKGVsID0+IHRoaXMud2l0aGluU2FtZUxpdmVWaWV3KGVsLCBwYXJlbnQpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZXNcbiAgICB9XG4gIH0sXG5cbiAgd2l0aGluU2FtZUxpdmVWaWV3KG5vZGUsIHBhcmVudCl7XG4gICAgd2hpbGUobm9kZSA9IG5vZGUucGFyZW50Tm9kZSl7XG4gICAgICBpZihub2RlLmlzU2FtZU5vZGUocGFyZW50KSl7IHJldHVybiB0cnVlIH1cbiAgICAgIGlmKG5vZGUuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKSAhPT0gbnVsbCl7IHJldHVybiBmYWxzZSB9XG4gICAgfVxuICB9LFxuXG4gIHByaXZhdGUoZWwsIGtleSl7IHJldHVybiBlbFtQSFhfUFJJVkFURV0gJiYgZWxbUEhYX1BSSVZBVEVdW2tleV0gfSxcblxuICBkZWxldGVQcml2YXRlKGVsLCBrZXkpeyBlbFtQSFhfUFJJVkFURV0gJiYgZGVsZXRlIChlbFtQSFhfUFJJVkFURV1ba2V5XSkgfSxcblxuICBwdXRQcml2YXRlKGVsLCBrZXksIHZhbHVlKXtcbiAgICBpZighZWxbUEhYX1BSSVZBVEVdKXsgZWxbUEhYX1BSSVZBVEVdID0ge30gfVxuICAgIGVsW1BIWF9QUklWQVRFXVtrZXldID0gdmFsdWVcbiAgfSxcblxuICB1cGRhdGVQcml2YXRlKGVsLCBrZXksIGRlZmF1bHRWYWwsIHVwZGF0ZUZ1bmMpe1xuICAgIGxldCBleGlzdGluZyA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKGV4aXN0aW5nID09PSB1bmRlZmluZWQpe1xuICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIHVwZGF0ZUZ1bmMoZGVmYXVsdFZhbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGV4aXN0aW5nKSlcbiAgICB9XG4gIH0sXG5cbiAgY29weVByaXZhdGVzKHRhcmdldCwgc291cmNlKXtcbiAgICBpZihzb3VyY2VbUEhYX1BSSVZBVEVdKXtcbiAgICAgIHRhcmdldFtQSFhfUFJJVkFURV0gPSBzb3VyY2VbUEhYX1BSSVZBVEVdXG4gICAgfVxuICB9LFxuXG4gIHB1dFRpdGxlKHN0cil7XG4gICAgbGV0IHRpdGxlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGl0bGVcIilcbiAgICBpZih0aXRsZUVsKXtcbiAgICAgIGxldCB7cHJlZml4LCBzdWZmaXh9ID0gdGl0bGVFbC5kYXRhc2V0XG4gICAgICBkb2N1bWVudC50aXRsZSA9IGAke3ByZWZpeCB8fCBcIlwifSR7c3RyfSR7c3VmZml4IHx8IFwiXCJ9YFxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IHN0clxuICAgIH1cbiAgfSxcblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCBjYWxsYmFjayl7XG4gICAgbGV0IGRlYm91bmNlID0gZWwuZ2V0QXR0cmlidXRlKHBoeERlYm91bmNlKVxuICAgIGxldCB0aHJvdHRsZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhUaHJvdHRsZSlcblxuICAgIGlmKGRlYm91bmNlID09PSBcIlwiKXsgZGVib3VuY2UgPSBkZWZhdWx0RGVib3VuY2UgfVxuICAgIGlmKHRocm90dGxlID09PSBcIlwiKXsgdGhyb3R0bGUgPSBkZWZhdWx0VGhyb3R0bGUgfVxuICAgIGxldCB2YWx1ZSA9IGRlYm91bmNlIHx8IHRocm90dGxlXG4gICAgc3dpdGNoKHZhbHVlKXtcbiAgICAgIGNhc2UgbnVsbDogcmV0dXJuIGNhbGxiYWNrKClcblxuICAgICAgY2FzZSBcImJsdXJcIjpcbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImRlYm91bmNlLWJsdXJcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHtcbiAgICAgICAgICAgIGlmKGFzeW5jRmlsdGVyKCkpeyBjYWxsYmFjaygpIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBsZXQgdGltZW91dCA9IHBhcnNlSW50KHZhbHVlKVxuICAgICAgICBsZXQgdHJpZ2dlciA9ICgpID0+IHRocm90dGxlID8gdGhpcy5kZWxldGVQcml2YXRlKGVsLCBUSFJPVFRMRUQpIDogY2FsbGJhY2soKVxuICAgICAgICBsZXQgY3VycmVudEN5Y2xlID0gdGhpcy5pbmNDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUiwgdHJpZ2dlcilcbiAgICAgICAgaWYoaXNOYU4odGltZW91dCkpeyByZXR1cm4gbG9nRXJyb3IoYGludmFsaWQgdGhyb3R0bGUvZGVib3VuY2UgdmFsdWU6ICR7dmFsdWV9YCkgfVxuICAgICAgICBpZih0aHJvdHRsZSl7XG4gICAgICAgICAgbGV0IG5ld0tleURvd24gPSBmYWxzZVxuICAgICAgICAgIGlmKGV2ZW50LnR5cGUgPT09IFwia2V5ZG93blwiKXtcbiAgICAgICAgICAgIGxldCBwcmV2S2V5ID0gdGhpcy5wcml2YXRlKGVsLCBERUJPVU5DRV9QUkVWX0tFWSlcbiAgICAgICAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwgREVCT1VOQ0VfUFJFVl9LRVksIGV2ZW50LmtleSlcbiAgICAgICAgICAgIG5ld0tleURvd24gPSBwcmV2S2V5ICE9PSBldmVudC5rZXlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZighbmV3S2V5RG93biAmJiB0aGlzLnByaXZhdGUoZWwsIFRIUk9UVExFRCkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSKSB9XG4gICAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBUSFJPVFRMRUQsIHQpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSLCBjdXJyZW50Q3ljbGUpIH1cbiAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZvcm0gPSBlbC5mb3JtXG4gICAgICAgIGlmKGZvcm0gJiYgdGhpcy5vbmNlKGZvcm0sIFwiYmluZC1kZWJvdW5jZVwiKSl7XG4gICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oKG5ldyBGb3JtRGF0YShmb3JtKSkuZW50cmllcygpLCAoW25hbWVdKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBpbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgW25hbWU9XCIke25hbWV9XCJdYClcbiAgICAgICAgICAgICAgdGhpcy5pbmNDeWNsZShpbnB1dCwgREVCT1VOQ0VfVFJJR0dFUilcbiAgICAgICAgICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBUSFJPVFRMRUQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImJpbmQtZGVib3VuY2VcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHtcbiAgICAgICAgICAgIC8vIGJlY2F1c2Ugd2UgdHJpZ2dlciB0aGUgY2FsbGJhY2sgaGVyZSxcbiAgICAgICAgICAgIC8vIHdlIGFsc28gY2xlYXIgdGhlIHRocm90dGxlIHRpbWVvdXQgdG8gcHJldmVudCB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIC8vIGZyb20gYmVpbmcgY2FsbGVkIGFnYWluIGFmdGVyIHRoZSB0aW1lb3V0IGZpcmVzXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wcml2YXRlKGVsLCBUSFJPVFRMRUQpKVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB0cmlnZ2VyQ3ljbGUoZWwsIGtleSwgY3VycmVudEN5Y2xlKXtcbiAgICBsZXQgW2N5Y2xlLCB0cmlnZ2VyXSA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKCFjdXJyZW50Q3ljbGUpeyBjdXJyZW50Q3ljbGUgPSBjeWNsZSB9XG4gICAgaWYoY3VycmVudEN5Y2xlID09PSBjeWNsZSl7XG4gICAgICB0aGlzLmluY0N5Y2xlKGVsLCBrZXkpXG4gICAgICB0cmlnZ2VyKClcbiAgICB9XG4gIH0sXG5cbiAgb25jZShlbCwga2V5KXtcbiAgICBpZih0aGlzLnByaXZhdGUoZWwsIGtleSkgPT09IHRydWUpeyByZXR1cm4gZmFsc2UgfVxuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB0cnVlKVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgaW5jQ3ljbGUoZWwsIGtleSwgdHJpZ2dlciA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBsZXQgW2N1cnJlbnRDeWNsZV0gPSB0aGlzLnByaXZhdGUoZWwsIGtleSkgfHwgWzAsIHRyaWdnZXJdXG4gICAgY3VycmVudEN5Y2xlKytcbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgW2N1cnJlbnRDeWNsZSwgdHJpZ2dlcl0pXG4gICAgcmV0dXJuIGN1cnJlbnRDeWNsZVxuICB9LFxuXG4gIG1heWJlQWRkUHJpdmF0ZUhvb2tzKGVsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pe1xuICAgIGlmKGVsLmhhc0F0dHJpYnV0ZSAmJiAoZWwuaGFzQXR0cmlidXRlKHBoeFZpZXdwb3J0VG9wKSB8fCBlbC5oYXNBdHRyaWJ1dGUocGh4Vmlld3BvcnRCb3R0b20pKSl7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1ob29rXCIsIFwiUGhvZW5peC5JbmZpbml0ZVNjcm9sbFwiKVxuICAgIH1cbiAgfSxcblxuICBpc0ZlZWRiYWNrQ29udGFpbmVyKGVsLCBwaHhGZWVkYmFja0Zvcil7XG4gICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZSAmJiBlbC5oYXNBdHRyaWJ1dGUocGh4RmVlZGJhY2tGb3IpXG4gIH0sXG5cbiAgbWF5YmVIaWRlRmVlZGJhY2soY29udGFpbmVyLCBmZWVkYmFja0NvbnRhaW5lcnMsIHBoeEZlZWRiYWNrRm9yLCBwaHhGZWVkYmFja0dyb3VwKXtcbiAgICAvLyBiZWNhdXNlIHdlIGNhbiBoYXZlIG11bHRpcGxlIGNvbnRhaW5lcnMgd2l0aCB0aGUgc2FtZSBwaHhGZWVkYmFja0ZvciB2YWx1ZVxuICAgIC8vIHdlIHBlcmZvcm0gdGhlIGNoZWNrIG9ubHkgb25jZSBhbmQgc3RvcmUgdGhlIHJlc3VsdDtcbiAgICAvLyB3ZSBvZnRlbiBoYXZlIG11bHRpcGxlIGNvbnRhaW5lcnMsIGJlY2F1c2Ugd2UgcHVzaCBib3RoIGZyb21FbCBhbmQgdG9FbCBpbiBkb21wYXRjaFxuICAgIC8vIHdoZW4gYSBjb250YWluZXIgaXMgdXBkYXRlZFxuICAgIGNvbnN0IGZlZWRiYWNrUmVzdWx0cyA9IHt9XG4gICAgZmVlZGJhY2tDb250YWluZXJzLmZvckVhY2goZWwgPT4ge1xuICAgICAgLy8gc2tpcCBlbGVtZW50cyB0aGF0IGFyZSBub3QgaW4gdGhlIERPTVxuICAgICAgaWYoIWNvbnRhaW5lci5jb250YWlucyhlbCkpIHJldHVyblxuICAgICAgY29uc3QgZmVlZGJhY2sgPSBlbC5nZXRBdHRyaWJ1dGUocGh4RmVlZGJhY2tGb3IpXG4gICAgICBpZighZmVlZGJhY2spe1xuICAgICAgICAvLyB0aGUgY29udGFpbmVyIHByZXZpb3VzbHkgaGFkIHBoeC1mZWVkYmFjay1mb3IsIGJ1dCBub3cgaXQgZG9lc24ndFxuICAgICAgICAvLyByZW1vdmUgdGhlIGNsYXNzIGZyb20gdGhlIGNvbnRhaW5lciAoaWYgaXQgZXhpc3RzKVxuICAgICAgICBKUy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBbUEhYX05PX0ZFRURCQUNLX0NMQVNTXSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZihmZWVkYmFja1Jlc3VsdHNbZmVlZGJhY2tdID09PSB0cnVlKXtcbiAgICAgICAgdGhpcy5oaWRlRmVlZGJhY2soZWwpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZmVlZGJhY2tSZXN1bHRzW2ZlZWRiYWNrXSA9IHRoaXMuc2hvdWxkSGlkZUZlZWRiYWNrKGNvbnRhaW5lciwgZmVlZGJhY2ssIHBoeEZlZWRiYWNrR3JvdXApXG4gICAgICBpZihmZWVkYmFja1Jlc3VsdHNbZmVlZGJhY2tdID09PSB0cnVlKXtcbiAgICAgICAgdGhpcy5oaWRlRmVlZGJhY2soZWwpXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBoaWRlRmVlZGJhY2soY29udGFpbmVyKXtcbiAgICBKUy5hZGRPclJlbW92ZUNsYXNzZXMoY29udGFpbmVyLCBbUEhYX05PX0ZFRURCQUNLX0NMQVNTXSwgW10pXG4gIH0sXG5cbiAgc2hvdWxkSGlkZUZlZWRiYWNrKGNvbnRhaW5lciwgbmFtZU9yR3JvdXAsIHBoeEZlZWRiYWNrR3JvdXApe1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFtuYW1lPVwiJHtuYW1lT3JHcm91cH1cIl0sXG4gICAgICAgICAgICAgICAgICAgW25hbWU9XCIke25hbWVPckdyb3VwfVtdXCJdLFxuICAgICAgICAgICAgICAgICAgIFske3BoeEZlZWRiYWNrR3JvdXB9PVwiJHtuYW1lT3JHcm91cH1cIl1gXG4gICAgbGV0IGZvY3VzZWQgPSBmYWxzZVxuICAgIERPTS5hbGwoY29udGFpbmVyLCBxdWVyeSwgKGlucHV0KSA9PiB7XG4gICAgICBpZih0aGlzLnByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRCkgfHwgdGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCkpe1xuICAgICAgICBmb2N1c2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuICFmb2N1c2VkXG4gIH0sXG5cbiAgZmVlZGJhY2tTZWxlY3RvcihpbnB1dCwgcGh4RmVlZGJhY2tGb3IsIHBoeEZlZWRiYWNrR3JvdXApe1xuICAgIGxldCBxdWVyeSA9IGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0Lm5hbWV9XCJdLFxuICAgICAgICAgICAgICAgICBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0Lm5hbWUucmVwbGFjZSgvXFxbXFxdJC8sIFwiXCIpfVwiXWBcbiAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUocGh4RmVlZGJhY2tHcm91cCkpe1xuICAgICAgcXVlcnkgKz0gYCxbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0LmdldEF0dHJpYnV0ZShwaHhGZWVkYmFja0dyb3VwKX1cIl1gXG4gICAgfVxuICAgIHJldHVybiBxdWVyeVxuICB9LFxuXG4gIHJlc2V0Rm9ybShmb3JtLCBwaHhGZWVkYmFja0ZvciwgcGh4RmVlZGJhY2tHcm91cCl7XG4gICAgQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKS5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGxldCBxdWVyeSA9IHRoaXMuZmVlZGJhY2tTZWxlY3RvcihpbnB1dCwgcGh4RmVlZGJhY2tGb3IsIHBoeEZlZWRiYWNrR3JvdXApXG4gICAgICB0aGlzLmRlbGV0ZVByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRClcbiAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQpXG4gICAgICB0aGlzLmFsbChkb2N1bWVudCwgcXVlcnksIGZlZWRiYWNrRWwgPT4ge1xuICAgICAgICBKUy5hZGRPclJlbW92ZUNsYXNzZXMoZmVlZGJhY2tFbCwgW1BIWF9OT19GRUVEQkFDS19DTEFTU10sIFtdKVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIHNob3dFcnJvcihpbnB1dEVsLCBwaHhGZWVkYmFja0ZvciwgcGh4RmVlZGJhY2tHcm91cCl7XG4gICAgaWYoaW5wdXRFbC5uYW1lKXtcbiAgICAgIGxldCBxdWVyeSA9IHRoaXMuZmVlZGJhY2tTZWxlY3RvcihpbnB1dEVsLCBwaHhGZWVkYmFja0ZvciwgcGh4RmVlZGJhY2tHcm91cClcbiAgICAgIHRoaXMuYWxsKGRvY3VtZW50LCBxdWVyeSwgKGVsKSA9PiB7XG4gICAgICAgIEpTLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIFtQSFhfTk9fRkVFREJBQ0tfQ0xBU1NdKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgaXNQaHhDaGlsZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRClcbiAgfSxcblxuICBpc1BoeFN0aWNreShub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1NUSUNLWSkgIT09IG51bGxcbiAgfSxcblxuICBpc0NoaWxkT2ZBbnkoZWwsIHBhcmVudHMpe1xuICAgIHJldHVybiAhIXBhcmVudHMuZmluZChwYXJlbnQgPT4gcGFyZW50LmNvbnRhaW5zKGVsKSlcbiAgfSxcblxuICBmaXJzdFBoeENoaWxkKGVsKXtcbiAgICByZXR1cm4gdGhpcy5pc1BoeENoaWxkKGVsKSA/IGVsIDogdGhpcy5hbGwoZWwsIGBbJHtQSFhfUEFSRU5UX0lEfV1gKVswXVxuICB9LFxuXG4gIGRpc3BhdGNoRXZlbnQodGFyZ2V0LCBuYW1lLCBvcHRzID0ge30pe1xuICAgIGxldCBkZWZhdWx0QnViYmxlID0gdHJ1ZVxuICAgIGxldCBpc1VwbG9hZFRhcmdldCA9IHRhcmdldC5ub2RlTmFtZSA9PT0gXCJJTlBVVFwiICYmIHRhcmdldC50eXBlID09PSBcImZpbGVcIlxuICAgIGlmKGlzVXBsb2FkVGFyZ2V0ICYmIG5hbWUgPT09IFwiY2xpY2tcIil7XG4gICAgICBkZWZhdWx0QnViYmxlID0gZmFsc2VcbiAgICB9XG4gICAgbGV0IGJ1YmJsZXMgPSBvcHRzLmJ1YmJsZXMgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRCdWJibGUgOiAhIW9wdHMuYnViYmxlc1xuICAgIGxldCBldmVudE9wdHMgPSB7YnViYmxlczogYnViYmxlcywgY2FuY2VsYWJsZTogdHJ1ZSwgZGV0YWlsOiBvcHRzLmRldGFpbCB8fCB7fX1cbiAgICBsZXQgZXZlbnQgPSBuYW1lID09PSBcImNsaWNrXCIgPyBuZXcgTW91c2VFdmVudChcImNsaWNrXCIsIGV2ZW50T3B0cykgOiBuZXcgQ3VzdG9tRXZlbnQobmFtZSwgZXZlbnRPcHRzKVxuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9LFxuXG4gIGNsb25lTm9kZShub2RlLCBodG1sKXtcbiAgICBpZih0eXBlb2YgKGh0bWwpID09PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZSh0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY2xvbmVkID0gbm9kZS5jbG9uZU5vZGUoZmFsc2UpXG4gICAgICBjbG9uZWQuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgcmV0dXJuIGNsb25lZFxuICAgIH1cbiAgfSxcblxuICAvLyBtZXJnZSBhdHRyaWJ1dGVzIGZyb20gc291cmNlIHRvIHRhcmdldFxuICAvLyBpZiBhbiBlbGVtZW50IGlzIGlnbm9yZWQsIHdlIG9ubHkgbWVyZ2UgZGF0YSBhdHRyaWJ1dGVzXG4gIC8vIGluY2x1ZGluZyByZW1vdmluZyBkYXRhIGF0dHJpYnV0ZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBzb3VyY2VcbiAgbWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZXhjbHVkZSA9IG5ldyBTZXQob3B0cy5leGNsdWRlIHx8IFtdKVxuICAgIGxldCBpc0lnbm9yZWQgPSBvcHRzLmlzSWdub3JlZFxuICAgIGxldCBzb3VyY2VBdHRycyA9IHNvdXJjZS5hdHRyaWJ1dGVzXG4gICAgZm9yKGxldCBpID0gc291cmNlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgbGV0IG5hbWUgPSBzb3VyY2VBdHRyc1tpXS5uYW1lXG4gICAgICBpZighZXhjbHVkZS5oYXMobmFtZSkpe1xuICAgICAgICBjb25zdCBzb3VyY2VWYWx1ZSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUobmFtZSlcbiAgICAgICAgaWYodGFyZ2V0LmdldEF0dHJpYnV0ZShuYW1lKSAhPT0gc291cmNlVmFsdWUgJiYgKCFpc0lnbm9yZWQgfHwgKGlzSWdub3JlZCAmJiBuYW1lLnN0YXJ0c1dpdGgoXCJkYXRhLVwiKSkpKXtcbiAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKG5hbWUsIHNvdXJjZVZhbHVlKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXZSBleGNsdWRlIHRoZSB2YWx1ZSBmcm9tIGJlaW5nIG1lcmdlZCBvbiBmb2N1c2VkIGlucHV0cywgYmVjYXVzZSB0aGVcbiAgICAgICAgLy8gdXNlcidzIGlucHV0IHNob3VsZCBhbHdheXMgd2luLlxuICAgICAgICAvLyBXZSBjYW4gc3RpbGwgYXNzaWduIGl0IGFzIGxvbmcgYXMgdGhlIHZhbHVlIHByb3BlcnR5IGlzIHRoZSBzYW1lLCB0aG91Z2guXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgYSBzaXR1YXRpb24gd2hlcmUgdGhlIHVwZGF0ZWQgaG9vayBpcyBub3QgYmVpbmcgdHJpZ2dlcmVkXG4gICAgICAgIC8vIHdoZW4gYW4gaW5wdXQgaXMgYmFjayBpbiBpdHMgXCJvcmlnaW5hbCBzdGF0ZVwiLCBiZWNhdXNlIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgLy8gd2FzIG5ldmVyIGNoYW5nZWQsIHNlZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Bob2VuaXhmcmFtZXdvcmsvcGhvZW5peF9saXZlX3ZpZXcvaXNzdWVzLzIxNjNcbiAgICAgICAgaWYobmFtZSA9PT0gXCJ2YWx1ZVwiICYmIHRhcmdldC52YWx1ZSA9PT0gc291cmNlLnZhbHVlKXtcbiAgICAgICAgICAvLyBhY3R1YWxseSBzZXQgdGhlIHZhbHVlIGF0dHJpYnV0ZSB0byBzeW5jIGl0IHdpdGggdGhlIHZhbHVlIHByb3BlcnR5XG4gICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHNvdXJjZS5nZXRBdHRyaWJ1dGUobmFtZSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0QXR0cnMgPSB0YXJnZXQuYXR0cmlidXRlc1xuICAgIGZvcihsZXQgaSA9IHRhcmdldEF0dHJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgIGxldCBuYW1lID0gdGFyZ2V0QXR0cnNbaV0ubmFtZVxuICAgICAgaWYoaXNJZ25vcmVkKXtcbiAgICAgICAgaWYobmFtZS5zdGFydHNXaXRoKFwiZGF0YS1cIikgJiYgIXNvdXJjZS5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIVtQSFhfUkVGLCBQSFhfUkVGX1NSQ10uaW5jbHVkZXMobmFtZSkpeyB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKG5hbWUpIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKCFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG1lcmdlRm9jdXNlZElucHV0KHRhcmdldCwgc291cmNlKXtcbiAgICAvLyBza2lwIHNlbGVjdHMgYmVjYXVzZSBGRiB3aWxsIHJlc2V0IGhpZ2hsaWdodGVkIGluZGV4IGZvciBhbnkgc2V0QXR0cmlidXRlXG4gICAgaWYoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCkpeyBET00ubWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwge2V4Y2x1ZGU6IFtcInZhbHVlXCJdfSkgfVxuXG4gICAgaWYoc291cmNlLnJlYWRPbmx5KXtcbiAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCB0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIilcbiAgICB9XG4gIH0sXG5cbiAgaGFzU2VsZWN0aW9uUmFuZ2UoZWwpe1xuICAgIHJldHVybiBlbC5zZXRTZWxlY3Rpb25SYW5nZSAmJiAoZWwudHlwZSA9PT0gXCJ0ZXh0XCIgfHwgZWwudHlwZSA9PT0gXCJ0ZXh0YXJlYVwiKVxuICB9LFxuXG4gIHJlc3RvcmVGb2N1cyhmb2N1c2VkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKXtcbiAgICBpZihmb2N1c2VkIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpeyBmb2N1c2VkLmZvY3VzKCkgfVxuICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoZm9jdXNlZCkpeyByZXR1cm4gfVxuXG4gICAgbGV0IHdhc0ZvY3VzZWQgPSBmb2N1c2VkLm1hdGNoZXMoXCI6Zm9jdXNcIilcbiAgICBpZighd2FzRm9jdXNlZCl7IGZvY3VzZWQuZm9jdXMoKSB9XG4gICAgaWYodGhpcy5oYXNTZWxlY3Rpb25SYW5nZShmb2N1c2VkKSl7XG4gICAgICBmb2N1c2VkLnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpXG4gICAgfVxuICB9LFxuXG4gIGlzRm9ybUlucHV0KGVsKXsgcmV0dXJuIC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KGVsLnRhZ05hbWUpICYmIGVsLnR5cGUgIT09IFwiYnV0dG9uXCIgfSxcblxuICBzeW5jQXR0cnNUb1Byb3BzKGVsKXtcbiAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSkgPj0gMCl7XG4gICAgICBlbC5jaGVja2VkID0gZWwuZ2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiKSAhPT0gbnVsbFxuICAgIH1cbiAgfSxcblxuICBpc1RleHR1YWxJbnB1dChlbCl7IHJldHVybiBGT0NVU0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCB9LFxuXG4gIGlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShwaHhUcmlnZ2VyRXh0ZXJuYWwpICE9PSBudWxsXG4gIH0sXG5cbiAgc3luY1BlbmRpbmdSZWYoZnJvbUVsLCB0b0VsLCBkaXNhYmxlV2l0aCl7XG4gICAgbGV0IHJlZiA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICBpZihyZWYgPT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgbGV0IHJlZlNyYyA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG5cbiAgICBpZihET00uaXNVcGxvYWRJbnB1dChmcm9tRWwpKXsgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7aXNJZ25vcmVkOiB0cnVlfSkgfVxuICAgIERPTS5wdXRQcml2YXRlKGZyb21FbCwgUEhYX1JFRiwgdG9FbClcbiAgICByZXR1cm4gZmFsc2VcbiAgfSxcblxuICBjbGVhbkNoaWxkTm9kZXMoY29udGFpbmVyLCBwaHhVcGRhdGUpe1xuICAgIGlmKERPTS5pc1BoeFVwZGF0ZShjb250YWluZXIsIHBoeFVwZGF0ZSwgW1wiYXBwZW5kXCIsIFwicHJlcGVuZFwiXSkpe1xuICAgICAgbGV0IHRvUmVtb3ZlID0gW11cbiAgICAgIGNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2goY2hpbGROb2RlID0+IHtcbiAgICAgICAgaWYoIWNoaWxkTm9kZS5pZCl7XG4gICAgICAgICAgLy8gU2tpcCB3YXJuaW5nIGlmIGl0J3MgYW4gZW1wdHkgdGV4dCBub2RlIChlLmcuIGEgbmV3LWxpbmUpXG4gICAgICAgICAgbGV0IGlzRW1wdHlUZXh0Tm9kZSA9IGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgY2hpbGROb2RlLm5vZGVWYWx1ZS50cmltKCkgPT09IFwiXCJcbiAgICAgICAgICBpZighaXNFbXB0eVRleHROb2RlICYmIGNoaWxkTm9kZS5ub2RlVHlwZSAhPT0gTm9kZS5DT01NRU5UX05PREUpe1xuICAgICAgICAgICAgbG9nRXJyb3IoXCJvbmx5IEhUTUwgZWxlbWVudCB0YWdzIHdpdGggYW4gaWQgYXJlIGFsbG93ZWQgaW5zaWRlIGNvbnRhaW5lcnMgd2l0aCBwaHgtdXBkYXRlLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYHJlbW92aW5nIGlsbGVnYWwgbm9kZTogXCIkeyhjaGlsZE5vZGUub3V0ZXJIVE1MIHx8IGNoaWxkTm9kZS5ub2RlVmFsdWUpLnRyaW0oKX1cIlxcblxcbmApXG4gICAgICAgICAgfVxuICAgICAgICAgIHRvUmVtb3ZlLnB1c2goY2hpbGROb2RlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdG9SZW1vdmUuZm9yRWFjaChjaGlsZE5vZGUgPT4gY2hpbGROb2RlLnJlbW92ZSgpKVxuICAgIH1cbiAgfSxcblxuICByZXBsYWNlUm9vdENvbnRhaW5lcihjb250YWluZXIsIHRhZ05hbWUsIGF0dHJzKXtcbiAgICBsZXQgcmV0YWluZWRBdHRycyA9IG5ldyBTZXQoW1wiaWRcIiwgUEhYX1NFU1NJT04sIFBIWF9TVEFUSUMsIFBIWF9NQUlOLCBQSFhfUk9PVF9JRF0pXG4gICAgaWYoY29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtcbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmF0dHJpYnV0ZXMpXG4gICAgICAgIC5maWx0ZXIoYXR0ciA9PiAhcmV0YWluZWRBdHRycy5oYXMoYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKSlcblxuICAgICAgT2JqZWN0LmtleXMoYXR0cnMpXG4gICAgICAgIC5maWx0ZXIobmFtZSA9PiAhcmV0YWluZWRBdHRycy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgLmZvckVhY2goYXR0ciA9PiBjb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKSlcblxuICAgICAgcmV0dXJuIGNvbnRhaW5lclxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpXG4gICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChhdHRyID0+IG5ld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuICAgICAgcmV0YWluZWRBdHRycy5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBjb250YWluZXIuZ2V0QXR0cmlidXRlKGF0dHIpKSlcbiAgICAgIG5ld0NvbnRhaW5lci5pbm5lckhUTUwgPSBjb250YWluZXIuaW5uZXJIVE1MXG4gICAgICBjb250YWluZXIucmVwbGFjZVdpdGgobmV3Q29udGFpbmVyKVxuICAgICAgcmV0dXJuIG5ld0NvbnRhaW5lclxuICAgIH1cbiAgfSxcblxuICBnZXRTdGlja3koZWwsIG5hbWUsIGRlZmF1bHRWYWwpe1xuICAgIGxldCBvcCA9IChET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIikgfHwgW10pLmZpbmQoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICBpZihvcCl7XG4gICAgICBsZXQgW19uYW1lLCBfb3AsIHN0YXNoZWRSZXN1bHRdID0gb3BcbiAgICAgIHJldHVybiBzdGFzaGVkUmVzdWx0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0eXBlb2YoZGVmYXVsdFZhbCkgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWwoKSA6IGRlZmF1bHRWYWxcbiAgICB9XG4gIH0sXG5cbiAgZGVsZXRlU3RpY2t5KGVsLCBuYW1lKXtcbiAgICB0aGlzLnVwZGF0ZVByaXZhdGUoZWwsIFwic3RpY2t5XCIsIFtdLCBvcHMgPT4ge1xuICAgICAgcmV0dXJuIG9wcy5maWx0ZXIoKFtleGlzdGluZ05hbWUsIF9dKSA9PiBleGlzdGluZ05hbWUgIT09IG5hbWUpXG4gICAgfSlcbiAgfSxcblxuICBwdXRTdGlja3koZWwsIG5hbWUsIG9wKXtcbiAgICBsZXQgc3Rhc2hlZFJlc3VsdCA9IG9wKGVsKVxuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICBsZXQgZXhpc3RpbmdJbmRleCA9IG9wcy5maW5kSW5kZXgoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICAgIGlmKGV4aXN0aW5nSW5kZXggPj0gMCl7XG4gICAgICAgIG9wc1tleGlzdGluZ0luZGV4XSA9IFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wcy5wdXNoKFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF0pXG4gICAgICB9XG4gICAgICByZXR1cm4gb3BzXG4gICAgfSlcbiAgfSxcblxuICBhcHBseVN0aWNreU9wZXJhdGlvbnMoZWwpe1xuICAgIGxldCBvcHMgPSBET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIilcbiAgICBpZighb3BzKXsgcmV0dXJuIH1cblxuICAgIG9wcy5mb3JFYWNoKChbbmFtZSwgb3AsIF9zdGFzaGVkXSkgPT4gdGhpcy5wdXRTdGlja3koZWwsIG5hbWUsIG9wKSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBET01cbiIsICJpbXBvcnQge1xuICBQSFhfQUNUSVZFX0VOVFJZX1JFRlMsXG4gIFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2hhbm5lbFVwbG9hZGVyLFxuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVwbG9hZEVudHJ5IHtcbiAgc3RhdGljIGlzQWN0aXZlKGZpbGVFbCwgZmlsZSl7XG4gICAgbGV0IGlzTmV3ID0gZmlsZS5fcGh4UmVmID09PSB1bmRlZmluZWRcbiAgICBsZXQgYWN0aXZlUmVmcyA9IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBsZXQgaXNBY3RpdmUgPSBhY3RpdmVSZWZzLmluZGV4T2YoTGl2ZVVwbG9hZGVyLmdlbkZpbGVSZWYoZmlsZSkpID49IDBcbiAgICByZXR1cm4gZmlsZS5zaXplID4gMCAmJiAoaXNOZXcgfHwgaXNBY3RpdmUpXG4gIH1cblxuICBzdGF0aWMgaXNQcmVmbGlnaHRlZChmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBwcmVmbGlnaHRlZFJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKS5zcGxpdChcIixcIilcbiAgICBsZXQgaXNQcmVmbGlnaHRlZCA9IHByZWZsaWdodGVkUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGlzUHJlZmxpZ2h0ZWQgJiYgdGhpcy5pc0FjdGl2ZShmaWxlRWwsIGZpbGUpXG4gIH1cblxuICBzdGF0aWMgaXNQcmVmbGlnaHRJblByb2dyZXNzKGZpbGUpe1xuICAgIHJldHVybiBmaWxlLl9wcmVmbGlnaHRJblByb2dyZXNzID09PSB0cnVlXG4gIH1cblxuICBzdGF0aWMgbWFya1ByZWZsaWdodEluUHJvZ3Jlc3MoZmlsZSl7XG4gICAgZmlsZS5fcHJlZmxpZ2h0SW5Qcm9ncmVzcyA9IHRydWVcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGZpbGVFbCwgZmlsZSwgdmlldywgYXV0b1VwbG9hZCl7XG4gICAgdGhpcy5yZWYgPSBMaXZlVXBsb2FkZXIuZ2VuRmlsZVJlZihmaWxlKVxuICAgIHRoaXMuZmlsZUVsID0gZmlsZUVsXG4gICAgdGhpcy5maWxlID0gZmlsZVxuICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICB0aGlzLm1ldGEgPSBudWxsXG4gICAgdGhpcy5faXNDYW5jZWxsZWQgPSBmYWxzZVxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlXG4gICAgdGhpcy5fcHJvZ3Jlc3MgPSAwXG4gICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IC0xXG4gICAgdGhpcy5fb25Eb25lID0gZnVuY3Rpb24oKXsgfVxuICAgIHRoaXMuX29uRWxVcGRhdGVkID0gdGhpcy5vbkVsVXBkYXRlZC5iaW5kKHRoaXMpXG4gICAgdGhpcy5maWxlRWwuYWRkRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgIHRoaXMuYXV0b1VwbG9hZCA9IGF1dG9VcGxvYWRcbiAgfVxuXG4gIG1ldGFkYXRhKCl7IHJldHVybiB0aGlzLm1ldGEgfVxuXG4gIHByb2dyZXNzKHByb2dyZXNzKXtcbiAgICB0aGlzLl9wcm9ncmVzcyA9IE1hdGguZmxvb3IocHJvZ3Jlc3MpXG4gICAgaWYodGhpcy5fcHJvZ3Jlc3MgPiB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50KXtcbiAgICAgIGlmKHRoaXMuX3Byb2dyZXNzID49IDEwMCl7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzID0gMTAwXG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSAxMDBcbiAgICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZVxuICAgICAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIDEwMCwgKCkgPT4ge1xuICAgICAgICAgIExpdmVVcGxvYWRlci51bnRyYWNrRmlsZSh0aGlzLmZpbGVFbCwgdGhpcy5maWxlKVxuICAgICAgICAgIHRoaXMuX29uRG9uZSgpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gdGhpcy5fcHJvZ3Jlc3NcbiAgICAgICAgdGhpcy52aWV3LnB1c2hGaWxlUHJvZ3Jlc3ModGhpcy5maWxlRWwsIHRoaXMucmVmLCB0aGlzLl9wcm9ncmVzcylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpc0NhbmNlbGxlZCgpeyByZXR1cm4gdGhpcy5faXNDYW5jZWxsZWQgfVxuXG4gIGNhbmNlbCgpe1xuICAgIHRoaXMuZmlsZS5fcHJlZmxpZ2h0SW5Qcm9ncmVzcyA9IGZhbHNlXG4gICAgdGhpcy5faXNDYW5jZWxsZWQgPSB0cnVlXG4gICAgdGhpcy5faXNEb25lID0gdHJ1ZVxuICAgIHRoaXMuX29uRG9uZSgpXG4gIH1cblxuICBpc0RvbmUoKXsgcmV0dXJuIHRoaXMuX2lzRG9uZSB9XG5cbiAgZXJyb3IocmVhc29uID0gXCJmYWlsZWRcIil7XG4gICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwge2Vycm9yOiByZWFzb259KVxuICAgIGlmKCF0aGlzLmlzQXV0b1VwbG9hZCgpKXsgTGl2ZVVwbG9hZGVyLmNsZWFyRmlsZXModGhpcy5maWxlRWwpIH1cbiAgfVxuXG4gIGlzQXV0b1VwbG9hZCgpeyByZXR1cm4gdGhpcy5hdXRvVXBsb2FkIH1cblxuICAvL3ByaXZhdGVcblxuICBvbkRvbmUoY2FsbGJhY2spe1xuICAgIHRoaXMuX29uRG9uZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuZmlsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoUEhYX0xJVkVfRklMRV9VUERBVEVELCB0aGlzLl9vbkVsVXBkYXRlZClcbiAgICAgIGNhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBvbkVsVXBkYXRlZCgpe1xuICAgIGxldCBhY3RpdmVSZWZzID0gdGhpcy5maWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgaWYoYWN0aXZlUmVmcy5pbmRleE9mKHRoaXMucmVmKSA9PT0gLTEpe1xuICAgICAgTGl2ZVVwbG9hZGVyLnVudHJhY2tGaWxlKHRoaXMuZmlsZUVsLCB0aGlzLmZpbGUpXG4gICAgICB0aGlzLmNhbmNlbCgpXG4gICAgfVxuICB9XG5cbiAgdG9QcmVmbGlnaHRQYXlsb2FkKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhc3RfbW9kaWZpZWQ6IHRoaXMuZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICBuYW1lOiB0aGlzLmZpbGUubmFtZSxcbiAgICAgIHJlbGF0aXZlX3BhdGg6IHRoaXMuZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGgsXG4gICAgICBzaXplOiB0aGlzLmZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IHRoaXMuZmlsZS50eXBlLFxuICAgICAgcmVmOiB0aGlzLnJlZixcbiAgICAgIG1ldGE6IHR5cGVvZih0aGlzLmZpbGUubWV0YSkgPT09IFwiZnVuY3Rpb25cIiA/IHRoaXMuZmlsZS5tZXRhKCkgOiB1bmRlZmluZWRcbiAgICB9XG4gIH1cblxuICB1cGxvYWRlcih1cGxvYWRlcnMpe1xuICAgIGlmKHRoaXMubWV0YS51cGxvYWRlcil7XG4gICAgICBsZXQgY2FsbGJhY2sgPSB1cGxvYWRlcnNbdGhpcy5tZXRhLnVwbG9hZGVyXSB8fCBsb2dFcnJvcihgbm8gdXBsb2FkZXIgY29uZmlndXJlZCBmb3IgJHt0aGlzLm1ldGEudXBsb2FkZXJ9YClcbiAgICAgIHJldHVybiB7bmFtZTogdGhpcy5tZXRhLnVwbG9hZGVyLCBjYWxsYmFjazogY2FsbGJhY2t9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7bmFtZTogXCJjaGFubmVsXCIsIGNhbGxiYWNrOiBjaGFubmVsVXBsb2FkZXJ9XG4gICAgfVxuICB9XG5cbiAgemlwUG9zdEZsaWdodChyZXNwKXtcbiAgICB0aGlzLm1ldGEgPSByZXNwLmVudHJpZXNbdGhpcy5yZWZdXG4gICAgaWYoIXRoaXMubWV0YSl7IGxvZ0Vycm9yKGBubyBwcmVmbGlnaHQgdXBsb2FkIHJlc3BvbnNlIHJldHVybmVkIHdpdGggcmVmICR7dGhpcy5yZWZ9YCwge2lucHV0OiB0aGlzLmZpbGVFbCwgcmVzcG9uc2U6IHJlc3B9KSB9XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBQSFhfRE9ORV9SRUZTLFxuICBQSFhfUFJFRkxJR0hURURfUkVGUyxcbiAgUEhYX1VQTE9BRF9SRUZcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgVXBsb2FkRW50cnkgZnJvbSBcIi4vdXBsb2FkX2VudHJ5XCJcblxubGV0IGxpdmVVcGxvYWRlckZpbGVSZWYgPSAwXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpdmVVcGxvYWRlciB7XG4gIHN0YXRpYyBnZW5GaWxlUmVmKGZpbGUpe1xuICAgIGxldCByZWYgPSBmaWxlLl9waHhSZWZcbiAgICBpZihyZWYgIT09IHVuZGVmaW5lZCl7XG4gICAgICByZXR1cm4gcmVmXG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbGUuX3BoeFJlZiA9IChsaXZlVXBsb2FkZXJGaWxlUmVmKyspLnRvU3RyaW5nKClcbiAgICAgIHJldHVybiBmaWxlLl9waHhSZWZcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0RW50cnlEYXRhVVJMKGlucHV0RWwsIHJlZiwgY2FsbGJhY2spe1xuICAgIGxldCBmaWxlID0gdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5maW5kKGZpbGUgPT4gdGhpcy5nZW5GaWxlUmVmKGZpbGUpID09PSByZWYpXG4gICAgY2FsbGJhY2soVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSlcbiAgfVxuXG4gIHN0YXRpYyBoYXNVcGxvYWRzSW5Qcm9ncmVzcyhmb3JtRWwpe1xuICAgIGxldCBhY3RpdmUgPSAwXG4gICAgRE9NLmZpbmRVcGxvYWRJbnB1dHMoZm9ybUVsKS5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlmKGlucHV0LmdldEF0dHJpYnV0ZShQSFhfUFJFRkxJR0hURURfUkVGUykgIT09IGlucHV0LmdldEF0dHJpYnV0ZShQSFhfRE9ORV9SRUZTKSl7XG4gICAgICAgIGFjdGl2ZSsrXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gYWN0aXZlID4gMFxuICB9XG5cbiAgc3RhdGljIHNlcmlhbGl6ZVVwbG9hZHMoaW5wdXRFbCl7XG4gICAgbGV0IGZpbGVzID0gdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKVxuICAgIGxldCBmaWxlRGF0YSA9IHt9XG4gICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGxldCBlbnRyeSA9IHtwYXRoOiBpbnB1dEVsLm5hbWV9XG4gICAgICBsZXQgdXBsb2FkUmVmID0gaW5wdXRFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpXG4gICAgICBmaWxlRGF0YVt1cGxvYWRSZWZdID0gZmlsZURhdGFbdXBsb2FkUmVmXSB8fCBbXVxuICAgICAgZW50cnkucmVmID0gdGhpcy5nZW5GaWxlUmVmKGZpbGUpXG4gICAgICBlbnRyeS5sYXN0X21vZGlmaWVkID0gZmlsZS5sYXN0TW9kaWZpZWRcbiAgICAgIGVudHJ5Lm5hbWUgPSBmaWxlLm5hbWUgfHwgZW50cnkucmVmXG4gICAgICBlbnRyeS5yZWxhdGl2ZV9wYXRoID0gZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGhcbiAgICAgIGVudHJ5LnR5cGUgPSBmaWxlLnR5cGVcbiAgICAgIGVudHJ5LnNpemUgPSBmaWxlLnNpemVcbiAgICAgIGlmKHR5cGVvZihmaWxlLm1ldGEpID09PSBcImZ1bmN0aW9uXCIpeyBlbnRyeS5tZXRhID0gZmlsZS5tZXRhKCkgfVxuICAgICAgZmlsZURhdGFbdXBsb2FkUmVmXS5wdXNoKGVudHJ5KVxuICAgIH0pXG4gICAgcmV0dXJuIGZpbGVEYXRhXG4gIH1cblxuICBzdGF0aWMgY2xlYXJGaWxlcyhpbnB1dEVsKXtcbiAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIGlucHV0RWwucmVtb3ZlQXR0cmlidXRlKFBIWF9VUExPQURfUkVGKVxuICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgW10pXG4gIH1cblxuICBzdGF0aWMgdW50cmFja0ZpbGUoaW5wdXRFbCwgZmlsZSl7XG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBET00ucHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIpLmZpbHRlcihmID0+ICFPYmplY3QuaXMoZiwgZmlsZSkpKVxuICB9XG5cbiAgc3RhdGljIHRyYWNrRmlsZXMoaW5wdXRFbCwgZmlsZXMsIGRhdGFUcmFuc2Zlcil7XG4gICAgaWYoaW5wdXRFbC5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKSAhPT0gbnVsbCl7XG4gICAgICBsZXQgbmV3RmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiAhdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5maW5kKGYgPT4gT2JqZWN0LmlzKGYsIGZpbGUpKSlcbiAgICAgIERPTS51cGRhdGVQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgW10sIChleGlzdGluZykgPT4gZXhpc3RpbmcuY29uY2F0KG5ld0ZpbGVzKSlcbiAgICAgIGlucHV0RWwudmFsdWUgPSBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlc2V0IGlucHV0RWwgZmlsZXMgdG8gYWxpZ24gb3V0cHV0IHdpdGggcHJvZ3JhbW1hdGljIGNoYW5nZXMgKGkuZS4gZHJhZyBhbmQgZHJvcClcbiAgICAgIGlmKGRhdGFUcmFuc2ZlciAmJiBkYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoID4gMCl7IGlucHV0RWwuZmlsZXMgPSBkYXRhVHJhbnNmZXIuZmlsZXMgfVxuICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBmaWxlcylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYWN0aXZlRmlsZUlucHV0cyhmb3JtRWwpe1xuICAgIGxldCBmaWxlSW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHMoZm9ybUVsKVxuICAgIHJldHVybiBBcnJheS5mcm9tKGZpbGVJbnB1dHMpLmZpbHRlcihlbCA9PiBlbC5maWxlcyAmJiB0aGlzLmFjdGl2ZUZpbGVzKGVsKS5sZW5ndGggPiAwKVxuICB9XG5cbiAgc3RhdGljIGFjdGl2ZUZpbGVzKGlucHV0KXtcbiAgICByZXR1cm4gKERPTS5wcml2YXRlKGlucHV0LCBcImZpbGVzXCIpIHx8IFtdKS5maWx0ZXIoZiA9PiBVcGxvYWRFbnRyeS5pc0FjdGl2ZShpbnB1dCwgZikpXG4gIH1cblxuICBzdGF0aWMgaW5wdXRzQXdhaXRpbmdQcmVmbGlnaHQoZm9ybUVsKXtcbiAgICBsZXQgZmlsZUlucHV0cyA9IERPTS5maW5kVXBsb2FkSW5wdXRzKGZvcm1FbClcbiAgICByZXR1cm4gQXJyYXkuZnJvbShmaWxlSW5wdXRzKS5maWx0ZXIoaW5wdXQgPT4gdGhpcy5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0KS5sZW5ndGggPiAwKVxuICB9XG5cbiAgc3RhdGljIGZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXQpe1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0KS5maWx0ZXIoZiA9PiAhVXBsb2FkRW50cnkuaXNQcmVmbGlnaHRlZChpbnB1dCwgZikgJiYgIVVwbG9hZEVudHJ5LmlzUHJlZmxpZ2h0SW5Qcm9ncmVzcyhmKSlcbiAgfVxuXG4gIHN0YXRpYyBtYXJrUHJlZmxpZ2h0SW5Qcm9ncmVzcyhlbnRyaWVzKXtcbiAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4gVXBsb2FkRW50cnkubWFya1ByZWZsaWdodEluUHJvZ3Jlc3MoZW50cnkuZmlsZSkpXG4gIH1cblxuICBjb25zdHJ1Y3RvcihpbnB1dEVsLCB2aWV3LCBvbkNvbXBsZXRlKXtcbiAgICB0aGlzLmF1dG9VcGxvYWQgPSBET00uaXNBdXRvVXBsb2FkKGlucHV0RWwpXG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGVcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIEFycmF5LmZyb20oTGl2ZVVwbG9hZGVyLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXRFbCkgfHwgW10pXG4gICAgICAgIC5tYXAoZmlsZSA9PiBuZXcgVXBsb2FkRW50cnkoaW5wdXRFbCwgZmlsZSwgdmlldywgdGhpcy5hdXRvVXBsb2FkKSlcblxuICAgIC8vIHByZXZlbnQgc2VuZGluZyBkdXBsaWNhdGUgcHJlZmxpZ2h0IHJlcXVlc3RzXG4gICAgTGl2ZVVwbG9hZGVyLm1hcmtQcmVmbGlnaHRJblByb2dyZXNzKHRoaXMuX2VudHJpZXMpXG5cbiAgICB0aGlzLm51bUVudHJpZXNJblByb2dyZXNzID0gdGhpcy5fZW50cmllcy5sZW5ndGhcbiAgfVxuXG4gIGlzQXV0b1VwbG9hZCgpeyByZXR1cm4gdGhpcy5hdXRvVXBsb2FkIH1cblxuICBlbnRyaWVzKCl7IHJldHVybiB0aGlzLl9lbnRyaWVzIH1cblxuICBpbml0QWRhcHRlclVwbG9hZChyZXNwLCBvbkVycm9yLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIHRoaXMuX2VudHJpZXMubWFwKGVudHJ5ID0+IHtcbiAgICAgICAgaWYoZW50cnkuaXNDYW5jZWxsZWQoKSl7XG4gICAgICAgICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcy0tXG4gICAgICAgICAgaWYodGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9PT0gMCl7IHRoaXMub25Db21wbGV0ZSgpIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnRyeS56aXBQb3N0RmxpZ2h0KHJlc3ApXG4gICAgICAgICAgZW50cnkub25Eb25lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MtLVxuICAgICAgICAgICAgaWYodGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9PT0gMCl7IHRoaXMub25Db21wbGV0ZSgpIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnRyeVxuICAgICAgfSlcblxuICAgIGxldCBncm91cGVkRW50cmllcyA9IHRoaXMuX2VudHJpZXMucmVkdWNlKChhY2MsIGVudHJ5KSA9PiB7XG4gICAgICBpZighZW50cnkubWV0YSl7IHJldHVybiBhY2MgfVxuICAgICAgbGV0IHtuYW1lLCBjYWxsYmFja30gPSBlbnRyeS51cGxvYWRlcihsaXZlU29ja2V0LnVwbG9hZGVycylcbiAgICAgIGFjY1tuYW1lXSA9IGFjY1tuYW1lXSB8fCB7Y2FsbGJhY2s6IGNhbGxiYWNrLCBlbnRyaWVzOiBbXX1cbiAgICAgIGFjY1tuYW1lXS5lbnRyaWVzLnB1c2goZW50cnkpXG4gICAgICByZXR1cm4gYWNjXG4gICAgfSwge30pXG5cbiAgICBmb3IobGV0IG5hbWUgaW4gZ3JvdXBlZEVudHJpZXMpe1xuICAgICAgbGV0IHtjYWxsYmFjaywgZW50cmllc30gPSBncm91cGVkRW50cmllc1tuYW1lXVxuICAgICAgY2FsbGJhY2soZW50cmllcywgb25FcnJvciwgcmVzcCwgbGl2ZVNvY2tldClcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBQSFhfQUNUSVZFX0VOVFJZX1JFRlMsXG4gIFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlMsXG4gIFBIWF9VUExPQURfUkVGXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgQVJJQSBmcm9tIFwiLi9hcmlhXCJcblxubGV0IEhvb2tzID0ge1xuICBMaXZlRmlsZVVwbG9hZDoge1xuICAgIGFjdGl2ZVJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykgfSxcblxuICAgIHByZWZsaWdodGVkUmVmcygpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1BSRUZMSUdIVEVEX1JFRlMpIH0sXG5cbiAgICBtb3VudGVkKCl7IHRoaXMucHJlZmxpZ2h0ZWRXYXMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpIH0sXG5cbiAgICB1cGRhdGVkKCl7XG4gICAgICBsZXQgbmV3UHJlZmxpZ2h0cyA9IHRoaXMucHJlZmxpZ2h0ZWRSZWZzKClcbiAgICAgIGlmKHRoaXMucHJlZmxpZ2h0ZWRXYXMgIT09IG5ld1ByZWZsaWdodHMpe1xuICAgICAgICB0aGlzLnByZWZsaWdodGVkV2FzID0gbmV3UHJlZmxpZ2h0c1xuICAgICAgICBpZihuZXdQcmVmbGlnaHRzID09PSBcIlwiKXtcbiAgICAgICAgICB0aGlzLl9fdmlldy5jYW5jZWxTdWJtaXQodGhpcy5lbC5mb3JtKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMuYWN0aXZlUmVmcygpID09PSBcIlwiKXsgdGhpcy5lbC52YWx1ZSA9IG51bGwgfVxuICAgICAgdGhpcy5lbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChQSFhfTElWRV9GSUxFX1VQREFURUQpKVxuICAgIH1cbiAgfSxcblxuICBMaXZlSW1nUHJldmlldzoge1xuICAgIG1vdW50ZWQoKXtcbiAgICAgIHRoaXMucmVmID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1lbnRyeS1yZWZcIilcbiAgICAgIHRoaXMuaW5wdXRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9VUExPQURfUkVGKSlcbiAgICAgIExpdmVVcGxvYWRlci5nZXRFbnRyeURhdGFVUkwodGhpcy5pbnB1dEVsLCB0aGlzLnJlZiwgdXJsID0+IHtcbiAgICAgICAgdGhpcy51cmwgPSB1cmxcbiAgICAgICAgdGhpcy5lbC5zcmMgPSB1cmxcbiAgICAgIH0pXG4gICAgfSxcbiAgICBkZXN0cm95ZWQoKXtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy51cmwpXG4gICAgfVxuICB9LFxuICBGb2N1c1dyYXA6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLmZvY3VzU3RhcnQgPSB0aGlzLmVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgICB0aGlzLmZvY3VzRW5kID0gdGhpcy5lbC5sYXN0RWxlbWVudENoaWxkXG4gICAgICB0aGlzLmZvY3VzU3RhcnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNMYXN0KHRoaXMuZWwpKVxuICAgICAgdGhpcy5mb2N1c0VuZC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4gQVJJQS5mb2N1c0ZpcnN0KHRoaXMuZWwpKVxuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwicGh4OnNob3ctZW5kXCIsICgpID0+IHRoaXMuZWwuZm9jdXMoKSlcbiAgICAgIGlmKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpLmRpc3BsYXkgIT09IFwibm9uZVwiKXtcbiAgICAgICAgQVJJQS5mb2N1c0ZpcnN0KHRoaXMuZWwpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmxldCBmaW5kU2Nyb2xsQ29udGFpbmVyID0gKGVsKSA9PiB7XG4gIC8vIHRoZSBzY3JvbGwgZXZlbnQgd29uJ3QgYmUgZmlyZWQgb24gdGhlIGh0bWwvYm9keSBlbGVtZW50IGV2ZW4gaWYgb3ZlcmZsb3cgaXMgc2V0XG4gIC8vIHRoZXJlZm9yZSB3ZSByZXR1cm4gbnVsbCB0byBpbnN0ZWFkIGxpc3RlbiBmb3Igc2Nyb2xsIGV2ZW50cyBvbiBkb2N1bWVudFxuICBpZiAoW1wiSFRNTFwiLCBcIkJPRFlcIl0uaW5kZXhPZihlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKSA+PSAwKSByZXR1cm4gbnVsbFxuICBpZihbXCJzY3JvbGxcIiwgXCJhdXRvXCJdLmluZGV4T2YoZ2V0Q29tcHV0ZWRTdHlsZShlbCkub3ZlcmZsb3dZKSA+PSAwKSByZXR1cm4gZWxcbiAgcmV0dXJuIGZpbmRTY3JvbGxDb250YWluZXIoZWwucGFyZW50RWxlbWVudClcbn1cblxubGV0IHNjcm9sbFRvcCA9IChzY3JvbGxDb250YWluZXIpID0+IHtcbiAgaWYoc2Nyb2xsQ29udGFpbmVyKXtcbiAgICByZXR1cm4gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXG4gIH1cbn1cblxubGV0IGJvdHRvbSA9IChzY3JvbGxDb250YWluZXIpID0+IHtcbiAgaWYoc2Nyb2xsQ29udGFpbmVyKXtcbiAgICByZXR1cm4gc2Nyb2xsQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbVxuICB9IGVsc2Uge1xuICAgIC8vIHdoZW4gd2UgaGF2ZSBubyBjb250YWluZXIsIHRoZSB3aG9sZSBwYWdlIHNjcm9sbHMsXG4gICAgLy8gdGhlcmVmb3JlIHRoZSBib3R0b20gY29vcmRpbmF0ZSBpcyB0aGUgdmlld3BvcnQgaGVpZ2h0XG4gICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gIH1cbn1cblxubGV0IHRvcCA9IChzY3JvbGxDb250YWluZXIpID0+IHtcbiAgaWYoc2Nyb2xsQ29udGFpbmVyKXtcbiAgICByZXR1cm4gc2Nyb2xsQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcFxuICB9IGVsc2Uge1xuICAgIC8vIHdoZW4gd2UgaGF2ZSBubyBjb250YWluZXIgdGhlIHdob2xlIHBhZ2Ugc2Nyb2xscyxcbiAgICAvLyB0aGVyZWZvcmUgdGhlIHRvcCBjb29yZGluYXRlIGlzIDBcbiAgICByZXR1cm4gMFxuICB9XG59XG5cbmxldCBpc0F0Vmlld3BvcnRUb3AgPSAoZWwsIHNjcm9sbENvbnRhaW5lcikgPT4ge1xuICBsZXQgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIHJldHVybiByZWN0LnRvcCA+PSB0b3Aoc2Nyb2xsQ29udGFpbmVyKSAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LnRvcCA8PSBib3R0b20oc2Nyb2xsQ29udGFpbmVyKVxufVxuXG5sZXQgaXNBdFZpZXdwb3J0Qm90dG9tID0gKGVsLCBzY3JvbGxDb250YWluZXIpID0+IHtcbiAgbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4gcmVjdC5yaWdodCA+PSB0b3Aoc2Nyb2xsQ29udGFpbmVyKSAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LmJvdHRvbSA8PSBib3R0b20oc2Nyb2xsQ29udGFpbmVyKVxufVxuXG5sZXQgaXNXaXRoaW5WaWV3cG9ydCA9IChlbCwgc2Nyb2xsQ29udGFpbmVyKSA9PiB7XG4gIGxldCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHJlY3QudG9wID49IHRvcChzY3JvbGxDb250YWluZXIpICYmIHJlY3QubGVmdCA+PSAwICYmIHJlY3QudG9wIDw9IGJvdHRvbShzY3JvbGxDb250YWluZXIpXG59XG5cbkhvb2tzLkluZmluaXRlU2Nyb2xsID0ge1xuICBtb3VudGVkKCl7XG4gICAgdGhpcy5zY3JvbGxDb250YWluZXIgPSBmaW5kU2Nyb2xsQ29udGFpbmVyKHRoaXMuZWwpXG4gICAgbGV0IHNjcm9sbEJlZm9yZSA9IHNjcm9sbFRvcCh0aGlzLnNjcm9sbENvbnRhaW5lcilcbiAgICBsZXQgdG9wT3ZlcnJhbiA9IGZhbHNlXG4gICAgbGV0IHRocm90dGxlSW50ZXJ2YWwgPSA1MDBcbiAgICBsZXQgcGVuZGluZ09wID0gbnVsbFxuXG4gICAgbGV0IG9uVG9wT3ZlcnJ1biA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKHRvcEV2ZW50LCBmaXJzdENoaWxkKSA9PiB7XG4gICAgICBwZW5kaW5nT3AgPSAoKSA9PiB0cnVlXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTSG9va1B1c2godGhpcy5lbCwgdG9wRXZlbnQsIHtpZDogZmlyc3RDaGlsZC5pZCwgX292ZXJyYW46IHRydWV9LCAoKSA9PiB7XG4gICAgICAgIHBlbmRpbmdPcCA9IG51bGxcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGxldCBvbkZpcnN0Q2hpbGRBdFRvcCA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKHRvcEV2ZW50LCBmaXJzdENoaWxkKSA9PiB7XG4gICAgICBwZW5kaW5nT3AgPSAoKSA9PiBmaXJzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJzdGFydFwifSlcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5leGVjSlNIb29rUHVzaCh0aGlzLmVsLCB0b3BFdmVudCwge2lkOiBmaXJzdENoaWxkLmlkfSwgKCkgPT4ge1xuICAgICAgICBwZW5kaW5nT3AgPSBudWxsXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBET00gaXMgcGF0Y2hlZCBieSB3YWl0aW5nIGZvciB0aGUgbmV4dCB0aWNrXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGlmKCFpc1dpdGhpblZpZXdwb3J0KGZpcnN0Q2hpbGQsIHRoaXMuc2Nyb2xsQ29udGFpbmVyKSl7XG4gICAgICAgICAgICBmaXJzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJzdGFydFwifSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25MYXN0Q2hpbGRBdEJvdHRvbSA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKGJvdHRvbUV2ZW50LCBsYXN0Q2hpbGQpID0+IHtcbiAgICAgIHBlbmRpbmdPcCA9ICgpID0+IGxhc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwiZW5kXCJ9KVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIGJvdHRvbUV2ZW50LCB7aWQ6IGxhc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgRE9NIGlzIHBhdGNoZWQgYnkgd2FpdGluZyBmb3IgdGhlIG5leHQgdGlja1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChsYXN0Q2hpbGQsIHRoaXMuc2Nyb2xsQ29udGFpbmVyKSl7XG4gICAgICAgICAgICBsYXN0Q2hpbGQuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiBcImVuZFwifSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0aGlzLm9uU2Nyb2xsID0gKF9lKSA9PiB7XG4gICAgICBsZXQgc2Nyb2xsTm93ID0gc2Nyb2xsVG9wKHRoaXMuc2Nyb2xsQ29udGFpbmVyKVxuXG4gICAgICBpZihwZW5kaW5nT3Ape1xuICAgICAgICBzY3JvbGxCZWZvcmUgPSBzY3JvbGxOb3dcbiAgICAgICAgcmV0dXJuIHBlbmRpbmdPcCgpXG4gICAgICB9XG4gICAgICBsZXQgcmVjdCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGxldCB0b3BFdmVudCA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFwidmlld3BvcnQtdG9wXCIpKVxuICAgICAgbGV0IGJvdHRvbUV2ZW50ID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUodGhpcy5saXZlU29ja2V0LmJpbmRpbmcoXCJ2aWV3cG9ydC1ib3R0b21cIikpXG4gICAgICBsZXQgbGFzdENoaWxkID0gdGhpcy5lbC5sYXN0RWxlbWVudENoaWxkXG4gICAgICBsZXQgZmlyc3RDaGlsZCA9IHRoaXMuZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICAgIGxldCBpc1Njcm9sbGluZ1VwID0gc2Nyb2xsTm93IDwgc2Nyb2xsQmVmb3JlXG4gICAgICBsZXQgaXNTY3JvbGxpbmdEb3duID0gc2Nyb2xsTm93ID4gc2Nyb2xsQmVmb3JlXG5cbiAgICAgIC8vIGVsIG92ZXJyYW4gd2hpbGUgc2Nyb2xsaW5nIHVwXG4gICAgICBpZihpc1Njcm9sbGluZ1VwICYmIHRvcEV2ZW50ICYmICF0b3BPdmVycmFuICYmIHJlY3QudG9wID49IDApe1xuICAgICAgICB0b3BPdmVycmFuID0gdHJ1ZVxuICAgICAgICBvblRvcE92ZXJydW4odG9wRXZlbnQsIGZpcnN0Q2hpbGQpXG4gICAgICB9IGVsc2UgaWYoaXNTY3JvbGxpbmdEb3duICYmIHRvcE92ZXJyYW4gJiYgcmVjdC50b3AgPD0gMCl7XG4gICAgICAgIHRvcE92ZXJyYW4gPSBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZih0b3BFdmVudCAmJiBpc1Njcm9sbGluZ1VwICYmIGlzQXRWaWV3cG9ydFRvcChmaXJzdENoaWxkLCB0aGlzLnNjcm9sbENvbnRhaW5lcikpe1xuICAgICAgICBvbkZpcnN0Q2hpbGRBdFRvcCh0b3BFdmVudCwgZmlyc3RDaGlsZClcbiAgICAgIH0gZWxzZSBpZihib3R0b21FdmVudCAmJiBpc1Njcm9sbGluZ0Rvd24gJiYgaXNBdFZpZXdwb3J0Qm90dG9tKGxhc3RDaGlsZCwgdGhpcy5zY3JvbGxDb250YWluZXIpKXtcbiAgICAgICAgb25MYXN0Q2hpbGRBdEJvdHRvbShib3R0b21FdmVudCwgbGFzdENoaWxkKVxuICAgICAgfVxuICAgICAgc2Nyb2xsQmVmb3JlID0gc2Nyb2xsTm93XG4gICAgfVxuXG4gICAgaWYodGhpcy5zY3JvbGxDb250YWluZXIpe1xuICAgICAgdGhpcy5zY3JvbGxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKVxuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKVxuICAgIH1cbiAgfSxcbiAgXG4gIGRlc3Ryb3llZCgpe1xuICAgIGlmKHRoaXMuc2Nyb2xsQ29udGFpbmVyKXtcbiAgICAgIHRoaXMuc2Nyb2xsQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbClcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbClcbiAgICB9XG4gIH0sXG5cbiAgdGhyb3R0bGUoaW50ZXJ2YWwsIGNhbGxiYWNrKXtcbiAgICBsZXQgbGFzdENhbGxBdCA9IDBcbiAgICBsZXQgdGltZXJcblxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgbGV0IG5vdyA9IERhdGUubm93KClcbiAgICAgIGxldCByZW1haW5pbmdUaW1lID0gaW50ZXJ2YWwgLSAobm93IC0gbGFzdENhbGxBdClcblxuICAgICAgaWYocmVtYWluaW5nVGltZSA8PSAwIHx8IHJlbWFpbmluZ1RpbWUgPiBpbnRlcnZhbCl7XG4gICAgICAgIGlmKHRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgICAgICAgIHRpbWVyID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGxhc3RDYWxsQXQgPSBub3dcbiAgICAgICAgY2FsbGJhY2soLi4uYXJncylcbiAgICAgIH0gZWxzZSBpZighdGltZXIpe1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGxhc3RDYWxsQXQgPSBEYXRlLm5vdygpXG4gICAgICAgICAgdGltZXIgPSBudWxsXG4gICAgICAgICAgY2FsbGJhY2soLi4uYXJncylcbiAgICAgICAgfSwgcmVtYWluaW5nVGltZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEhvb2tzXG4iLCAiaW1wb3J0IHtcbiAgbWF5YmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERPTVBvc3RNb3JwaFJlc3RvcmVyIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyQmVmb3JlLCBjb250YWluZXJBZnRlciwgdXBkYXRlVHlwZSl7XG4gICAgbGV0IGlkc0JlZm9yZSA9IG5ldyBTZXQoKVxuICAgIGxldCBpZHNBZnRlciA9IG5ldyBTZXQoWy4uLmNvbnRhaW5lckFmdGVyLmNoaWxkcmVuXS5tYXAoY2hpbGQgPT4gY2hpbGQuaWQpKVxuXG4gICAgbGV0IGVsZW1lbnRzVG9Nb2RpZnkgPSBbXVxuXG4gICAgQXJyYXkuZnJvbShjb250YWluZXJCZWZvcmUuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgaWYoY2hpbGQuaWQpeyAvLyBhbGwgb2Ygb3VyIGNoaWxkcmVuIHNob3VsZCBiZSBlbGVtZW50cyB3aXRoIGlkc1xuICAgICAgICBpZHNCZWZvcmUuYWRkKGNoaWxkLmlkKVxuICAgICAgICBpZihpZHNBZnRlci5oYXMoY2hpbGQuaWQpKXtcbiAgICAgICAgICBsZXQgcHJldmlvdXNFbGVtZW50SWQgPSBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWRcbiAgICAgICAgICBlbGVtZW50c1RvTW9kaWZ5LnB1c2goe2VsZW1lbnRJZDogY2hpbGQuaWQsIHByZXZpb3VzRWxlbWVudElkOiBwcmV2aW91c0VsZW1lbnRJZH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5jb250YWluZXJJZCA9IGNvbnRhaW5lckFmdGVyLmlkXG4gICAgdGhpcy51cGRhdGVUeXBlID0gdXBkYXRlVHlwZVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeSA9IGVsZW1lbnRzVG9Nb2RpZnlcbiAgICB0aGlzLmVsZW1lbnRJZHNUb0FkZCA9IFsuLi5pZHNBZnRlcl0uZmlsdGVyKGlkID0+ICFpZHNCZWZvcmUuaGFzKGlkKSlcbiAgfVxuXG4gIC8vIFdlIGRvIHRoZSBmb2xsb3dpbmcgdG8gb3B0aW1pemUgYXBwZW5kL3ByZXBlbmQgb3BlcmF0aW9uczpcbiAgLy8gICAxKSBUcmFjayBpZHMgb2YgbW9kaWZpZWQgZWxlbWVudHMgJiBvZiBuZXcgZWxlbWVudHNcbiAgLy8gICAyKSBBbGwgdGhlIG1vZGlmaWVkIGVsZW1lbnRzIGFyZSBwdXQgYmFjayBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBpbiB0aGUgRE9NIHRyZWVcbiAgLy8gICAgICBieSBzdG9yaW5nIHRoZSBpZCBvZiB0aGVpciBwcmV2aW91cyBzaWJsaW5nXG4gIC8vICAgMykgTmV3IGVsZW1lbnRzIGFyZSBnb2luZyB0byBiZSBwdXQgaW4gdGhlIHJpZ2h0IHBsYWNlIGJ5IG1vcnBoZG9tIGR1cmluZyBhcHBlbmQuXG4gIC8vICAgICAgRm9yIHByZXBlbmQsIHdlIG1vdmUgdGhlbSB0byB0aGUgZmlyc3QgcG9zaXRpb24gaW4gdGhlIGNvbnRhaW5lclxuICBwZXJmb3JtKCl7XG4gICAgbGV0IGNvbnRhaW5lciA9IERPTS5ieUlkKHRoaXMuY29udGFpbmVySWQpXG4gICAgdGhpcy5lbGVtZW50c1RvTW9kaWZ5LmZvckVhY2goZWxlbWVudFRvTW9kaWZ5ID0+IHtcbiAgICAgIGlmKGVsZW1lbnRUb01vZGlmeS5wcmV2aW91c0VsZW1lbnRJZCl7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5wcmV2aW91c0VsZW1lbnRJZCksIHByZXZpb3VzRWxlbSA9PiB7XG4gICAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudFRvTW9kaWZ5LmVsZW1lbnRJZCksIGVsZW0gPT4ge1xuICAgICAgICAgICAgbGV0IGlzSW5SaWdodFBsYWNlID0gZWxlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5pZCA9PSBwcmV2aW91c0VsZW0uaWRcbiAgICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBlbGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBjb250YWluZXJcbiAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudFRvTW9kaWZ5LmVsZW1lbnRJZCksIGVsZW0gPT4ge1xuICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyA9PSBudWxsXG4gICAgICAgICAgaWYoIWlzSW5SaWdodFBsYWNlKXtcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGVsZW0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZih0aGlzLnVwZGF0ZVR5cGUgPT0gXCJwcmVwZW5kXCIpe1xuICAgICAgdGhpcy5lbGVtZW50SWRzVG9BZGQucmV2ZXJzZSgpLmZvckVhY2goZWxlbUlkID0+IHtcbiAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbUlkKSwgZWxlbSA9PiBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCAidmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgPSAxMTtcblxuZnVuY3Rpb24gbW9ycGhBdHRycyhmcm9tTm9kZSwgdG9Ob2RlKSB7XG4gICAgdmFyIHRvTm9kZUF0dHJzID0gdG9Ob2RlLmF0dHJpYnV0ZXM7XG4gICAgdmFyIGF0dHI7XG4gICAgdmFyIGF0dHJOYW1lO1xuICAgIHZhciBhdHRyTmFtZXNwYWNlVVJJO1xuICAgIHZhciBhdHRyVmFsdWU7XG4gICAgdmFyIGZyb21WYWx1ZTtcblxuICAgIC8vIGRvY3VtZW50LWZyYWdtZW50cyBkb250IGhhdmUgYXR0cmlidXRlcyBzbyBsZXRzIG5vdCBkbyBhbnl0aGluZ1xuICAgIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgfHwgZnJvbU5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudFxuICAgIGZvciAodmFyIGkgPSB0b05vZGVBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBhdHRyID0gdG9Ob2RlQXR0cnNbaV07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG4gICAgICAgIGF0dHJWYWx1ZSA9IGF0dHIudmFsdWU7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG4gICAgICAgICAgICBmcm9tVmFsdWUgPSBmcm9tTm9kZS5nZXRBdHRyaWJ1dGVOUyhhdHRyTmFtZXNwYWNlVVJJLCBhdHRyTmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChmcm9tVmFsdWUgIT09IGF0dHJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyLnByZWZpeCA9PT0gJ3htbG5zJyl7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lOyAvLyBJdCdzIG5vdCBhbGxvd2VkIHRvIHNldCBhbiBhdHRyaWJ1dGUgd2l0aCB0aGUgWE1MTlMgbmFtZXNwYWNlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgYHhtbG5zYCBwcmVmaXhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcm9tVmFsdWUgPSBmcm9tTm9kZS5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYW55IGV4dHJhIGF0dHJpYnV0ZXMgZm91bmQgb24gdGhlIG9yaWdpbmFsIERPTSBlbGVtZW50IHRoYXRcbiAgICAvLyB3ZXJlbid0IGZvdW5kIG9uIHRoZSB0YXJnZXQgZWxlbWVudC5cbiAgICB2YXIgZnJvbU5vZGVBdHRycyA9IGZyb21Ob2RlLmF0dHJpYnV0ZXM7XG5cbiAgICBmb3IgKHZhciBkID0gZnJvbU5vZGVBdHRycy5sZW5ndGggLSAxOyBkID49IDA7IGQtLSkge1xuICAgICAgICBhdHRyID0gZnJvbU5vZGVBdHRyc1tkXTtcbiAgICAgICAgYXR0ck5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgIGF0dHJOYW1lc3BhY2VVUkkgPSBhdHRyLm5hbWVzcGFjZVVSSTtcblxuICAgICAgICBpZiAoYXR0ck5hbWVzcGFjZVVSSSkge1xuICAgICAgICAgICAgYXR0ck5hbWUgPSBhdHRyLmxvY2FsTmFtZSB8fCBhdHRyTmFtZTtcblxuICAgICAgICAgICAgaWYgKCF0b05vZGUuaGFzQXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUucmVtb3ZlQXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0b05vZGUuaGFzQXR0cmlidXRlKGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciByYW5nZTsgLy8gQ3JlYXRlIGEgcmFuZ2Ugb2JqZWN0IGZvciBlZmZpY2VudGx5IHJlbmRlcmluZyBzdHJpbmdzIHRvIGVsZW1lbnRzLlxudmFyIE5TX1hIVE1MID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnO1xuXG52YXIgZG9jID0gdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IGRvY3VtZW50O1xudmFyIEhBU19URU1QTEFURV9TVVBQT1JUID0gISFkb2MgJiYgJ2NvbnRlbnQnIGluIGRvYy5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xudmFyIEhBU19SQU5HRV9TVVBQT1JUID0gISFkb2MgJiYgZG9jLmNyZWF0ZVJhbmdlICYmICdjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQnIGluIGRvYy5jcmVhdGVSYW5nZSgpO1xuXG5mdW5jdGlvbiBjcmVhdGVGcmFnbWVudEZyb21UZW1wbGF0ZShzdHIpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKSB7XG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgICByYW5nZSA9IGRvYy5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByYW5nZS5zZWxlY3ROb2RlKGRvYy5ib2R5KTtcbiAgICB9XG5cbiAgICB2YXIgZnJhZ21lbnQgPSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoc3RyKTtcbiAgICByZXR1cm4gZnJhZ21lbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCgnYm9keScpO1xuICAgIGZyYWdtZW50LmlubmVySFRNTCA9IHN0cjtcbiAgICByZXR1cm4gZnJhZ21lbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGFib3V0IHRoZSBzYW1lXG4gKiB2YXIgaHRtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoc3RyLCAndGV4dC9odG1sJyk7XG4gKiByZXR1cm4gaHRtbC5ib2R5LmZpcnN0Q2hpbGQ7XG4gKlxuICogQG1ldGhvZCB0b0VsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqL1xuZnVuY3Rpb24gdG9FbGVtZW50KHN0cikge1xuICAgIHN0ciA9IHN0ci50cmltKCk7XG4gICAgaWYgKEhBU19URU1QTEFURV9TVVBQT1JUKSB7XG4gICAgICAvLyBhdm9pZCByZXN0cmljdGlvbnMgb24gY29udGVudCBmb3IgdGhpbmdzIGxpa2UgYDx0cj48dGg+SGk8L3RoPjwvdHI+YCB3aGljaFxuICAgICAgLy8gY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IGRvZXNuJ3Qgc3VwcG9ydFxuICAgICAgLy8gPHRlbXBsYXRlPiBzdXBwb3J0IG5vdCBhdmFpbGFibGUgaW4gSUVcbiAgICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21UZW1wbGF0ZShzdHIpO1xuICAgIH0gZWxzZSBpZiAoSEFTX1JBTkdFX1NVUFBPUlQpIHtcbiAgICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21SYW5nZShzdHIpO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21XcmFwKHN0cik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHR3byBub2RlJ3MgbmFtZXMgYXJlIHRoZSBzYW1lLlxuICpcbiAqIE5PVEU6IFdlIGRvbid0IGJvdGhlciBjaGVja2luZyBgbmFtZXNwYWNlVVJJYCBiZWNhdXNlIHlvdSB3aWxsIG5ldmVyIGZpbmQgdHdvIEhUTUwgZWxlbWVudHMgd2l0aCB0aGUgc2FtZVxuICogICAgICAgbm9kZU5hbWUgYW5kIGRpZmZlcmVudCBuYW1lc3BhY2UgVVJJcy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYiBUaGUgdGFyZ2V0IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVOb2RlTmFtZXMoZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGZyb21Ob2RlTmFtZSA9IGZyb21FbC5ub2RlTmFtZTtcbiAgICB2YXIgdG9Ob2RlTmFtZSA9IHRvRWwubm9kZU5hbWU7XG4gICAgdmFyIGZyb21Db2RlU3RhcnQsIHRvQ29kZVN0YXJ0O1xuXG4gICAgaWYgKGZyb21Ob2RlTmFtZSA9PT0gdG9Ob2RlTmFtZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmcm9tQ29kZVN0YXJ0ID0gZnJvbU5vZGVOYW1lLmNoYXJDb2RlQXQoMCk7XG4gICAgdG9Db2RlU3RhcnQgPSB0b05vZGVOYW1lLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAvLyBJZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgYSB2aXJ0dWFsIERPTSBub2RlIG9yIFNWRyBub2RlIHRoZW4gd2UgbWF5XG4gICAgLy8gbmVlZCB0byBub3JtYWxpemUgdGhlIHRhZyBuYW1lIGJlZm9yZSBjb21wYXJpbmcuIE5vcm1hbCBIVE1MIGVsZW1lbnRzIHRoYXQgYXJlXG4gICAgLy8gaW4gdGhlIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiXG4gICAgLy8gYXJlIGNvbnZlcnRlZCB0byB1cHBlciBjYXNlXG4gICAgaWYgKGZyb21Db2RlU3RhcnQgPD0gOTAgJiYgdG9Db2RlU3RhcnQgPj0gOTcpIHsgLy8gZnJvbSBpcyB1cHBlciBhbmQgdG8gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIGZyb21Ob2RlTmFtZSA9PT0gdG9Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSBpZiAodG9Db2RlU3RhcnQgPD0gOTAgJiYgZnJvbUNvZGVTdGFydCA+PSA5NykgeyAvLyB0byBpcyB1cHBlciBhbmQgZnJvbSBpcyBsb3dlclxuICAgICAgICByZXR1cm4gdG9Ob2RlTmFtZSA9PT0gZnJvbU5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gZWxlbWVudCwgb3B0aW9uYWxseSB3aXRoIGEga25vd24gbmFtZXNwYWNlIFVSSS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgZWxlbWVudCBuYW1lLCBlLmcuICdkaXYnIG9yICdzdmcnXG4gKiBAcGFyYW0ge3N0cmluZ30gW25hbWVzcGFjZVVSSV0gdGhlIGVsZW1lbnQncyBuYW1lc3BhY2UgVVJJLCBpLmUuIHRoZSB2YWx1ZSBvZlxuICogaXRzIGB4bWxuc2AgYXR0cmlidXRlIG9yIGl0cyBpbmZlcnJlZCBuYW1lc3BhY2UuXG4gKlxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRWxlbWVudE5TKG5hbWUsIG5hbWVzcGFjZVVSSSkge1xuICAgIHJldHVybiAhbmFtZXNwYWNlVVJJIHx8IG5hbWVzcGFjZVVSSSA9PT0gTlNfWEhUTUwgP1xuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudChuYW1lKSA6XG4gICAgICAgIGRvYy5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlVVJJLCBuYW1lKTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgdGhlIGNoaWxkcmVuIG9mIG9uZSBET00gZWxlbWVudCB0byBhbm90aGVyIERPTSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIG1vdmVDaGlsZHJlbihmcm9tRWwsIHRvRWwpIHtcbiAgICB2YXIgY3VyQ2hpbGQgPSBmcm9tRWwuZmlyc3RDaGlsZDtcbiAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcbiAgICAgICAgdmFyIG5leHRDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB0b0VsLmFwcGVuZENoaWxkKGN1ckNoaWxkKTtcbiAgICAgICAgY3VyQ2hpbGQgPSBuZXh0Q2hpbGQ7XG4gICAgfVxuICAgIHJldHVybiB0b0VsO1xufVxuXG5mdW5jdGlvbiBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgbmFtZSkge1xuICAgIGlmIChmcm9tRWxbbmFtZV0gIT09IHRvRWxbbmFtZV0pIHtcbiAgICAgICAgZnJvbUVsW25hbWVdID0gdG9FbFtuYW1lXTtcbiAgICAgICAgaWYgKGZyb21FbFtuYW1lXSkge1xuICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZShuYW1lLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcm9tRWwucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgc3BlY2lhbEVsSGFuZGxlcnMgPSB7XG4gICAgT1BUSU9OOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBmcm9tRWwucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnROYW1lID0gcGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHBhcmVudE5hbWUgPT09ICdPUFRHUk9VUCcpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBwYXJlbnROb2RlICYmIHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnU0VMRUNUJyAmJiAhcGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbUVsLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSAmJiAhdG9FbC5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBNUyBFZGdlIGJ1ZyB3aGVyZSB0aGUgJ3NlbGVjdGVkJyBhdHRyaWJ1dGUgY2FuIG9ubHkgYmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCBpZiBzZXQgdG8gYSBub24tZW1wdHkgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzEyMDg3Njc5L1xuICAgICAgICAgICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICBmcm9tRWwucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHJlc2V0IHNlbGVjdCBlbGVtZW50J3Mgc2VsZWN0ZWRJbmRleCB0byAtMSwgb3RoZXJ3aXNlIHNldHRpbmdcbiAgICAgICAgICAgICAgICAvLyBmcm9tRWwuc2VsZWN0ZWQgdXNpbmcgdGhlIHN5bmNCb29sZWFuQXR0clByb3AgYmVsb3cgaGFzIG5vIGVmZmVjdC5cbiAgICAgICAgICAgICAgICAvLyBUaGUgY29ycmVjdCBzZWxlY3RlZEluZGV4IHdpbGwgYmUgc2V0IGluIHRoZSBTRUxFQ1Qgc3BlY2lhbCBoYW5kbGVyIGJlbG93LlxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnc2VsZWN0ZWQnKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoZSBcInZhbHVlXCIgYXR0cmlidXRlIGlzIHNwZWNpYWwgZm9yIHRoZSA8aW5wdXQ+IGVsZW1lbnQgc2luY2UgaXQgc2V0c1xuICAgICAqIHRoZSBpbml0aWFsIHZhbHVlLiBDaGFuZ2luZyB0aGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAqIFwidmFsdWVcIiBwcm9wZXJ0eSB3aWxsIGhhdmUgbm8gZWZmZWN0IHNpbmNlIGl0IGlzIG9ubHkgdXNlZCB0byB0aGUgc2V0IHRoZVxuICAgICAqIGluaXRpYWwgdmFsdWUuICBTaW1pbGFyIGZvciB0aGUgXCJjaGVja2VkXCIgYXR0cmlidXRlLCBhbmQgXCJkaXNhYmxlZFwiLlxuICAgICAqL1xuICAgIElOUFVUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsICdjaGVja2VkJyk7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnZGlzYWJsZWQnKTtcblxuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSB0b0VsLnZhbHVlKSB7XG4gICAgICAgICAgICBmcm9tRWwudmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBURVhUQVJFQTogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHRvRWwudmFsdWU7XG4gICAgICAgIGlmIChmcm9tRWwudmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBmcm9tRWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaXJzdENoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChmaXJzdENoaWxkKSB7XG4gICAgICAgICAgICAvLyBOZWVkZWQgZm9yIElFLiBBcHBhcmVudGx5IElFIHNldHMgdGhlIHBsYWNlaG9sZGVyIGFzIHRoZVxuICAgICAgICAgICAgLy8gbm9kZSB2YWx1ZSBhbmQgdmlzZSB2ZXJzYS4gVGhpcyBpZ25vcmVzIGFuIGVtcHR5IHVwZGF0ZS5cbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IGZpcnN0Q2hpbGQubm9kZVZhbHVlO1xuXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgPT0gbmV3VmFsdWUgfHwgKCFuZXdWYWx1ZSAmJiBvbGRWYWx1ZSA9PSBmcm9tRWwucGxhY2Vob2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaXJzdENoaWxkLm5vZGVWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBTRUxFQ1Q6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICBpZiAoIXRvRWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBsb29wIHRocm91Z2ggY2hpbGRyZW4gb2YgZnJvbUVsLCBub3QgdG9FbCBzaW5jZSBub2RlcyBjYW4gYmUgbW92ZWRcbiAgICAgICAgICAgIC8vIGZyb20gdG9FbCB0byBmcm9tRWwgZGlyZWN0bHkgd2hlbiBtb3JwaGluZy5cbiAgICAgICAgICAgIC8vIEF0IHRoZSB0aW1lIHRoaXMgc3BlY2lhbCBoYW5kbGVyIGlzIGludm9rZWQsIGFsbCBjaGlsZHJlbiBoYXZlIGFscmVhZHkgYmVlbiBtb3JwaGVkXG4gICAgICAgICAgICAvLyBhbmQgYXBwZW5kZWQgdG8gLyByZW1vdmVkIGZyb20gZnJvbUVsLCBzbyB1c2luZyBmcm9tRWwgaGVyZSBpcyBzYWZlIGFuZCBjb3JyZWN0LlxuICAgICAgICAgICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgb3B0Z3JvdXA7XG4gICAgICAgICAgICB2YXIgbm9kZU5hbWU7XG4gICAgICAgICAgICB3aGlsZShjdXJDaGlsZCkge1xuICAgICAgICAgICAgICAgIG5vZGVOYW1lID0gY3VyQ2hpbGQubm9kZU5hbWUgJiYgY3VyQ2hpbGQubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRHUk9VUCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0Z3JvdXAgPSBjdXJDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlTmFtZSA9PT0gJ09QVElPTicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJDaGlsZC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1ckNoaWxkICYmIG9wdGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDaGlsZCA9IG9wdGdyb3VwLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0Z3JvdXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmcm9tRWwuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG52YXIgRUxFTUVOVF9OT0RFID0gMTtcbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFJDEgPSAxMTtcbnZhciBURVhUX05PREUgPSAzO1xudmFyIENPTU1FTlRfTk9ERSA9IDg7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5mdW5jdGlvbiBkZWZhdWx0R2V0Tm9kZUtleShub2RlKSB7XG4gIGlmIChub2RlKSB7XG4gICAgcmV0dXJuIChub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSgnaWQnKSkgfHwgbm9kZS5pZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtb3JwaGRvbUZhY3RvcnkobW9ycGhBdHRycykge1xuXG4gIHJldHVybiBmdW5jdGlvbiBtb3JwaGRvbShmcm9tTm9kZSwgdG9Ob2RlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0b05vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoZnJvbU5vZGUubm9kZU5hbWUgPT09ICcjZG9jdW1lbnQnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnSFRNTCcgfHwgZnJvbU5vZGUubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICB2YXIgdG9Ob2RlSHRtbCA9IHRvTm9kZTtcbiAgICAgICAgdG9Ob2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2h0bWwnKTtcbiAgICAgICAgdG9Ob2RlLmlubmVySFRNTCA9IHRvTm9kZUh0bWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b05vZGUgPSB0b0VsZW1lbnQodG9Ob2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRvTm9kZS5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxKSB7XG4gICAgICB0b05vZGUgPSB0b05vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgfVxuXG4gICAgdmFyIGdldE5vZGVLZXkgPSBvcHRpb25zLmdldE5vZGVLZXkgfHwgZGVmYXVsdEdldE5vZGVLZXk7XG4gICAgdmFyIG9uQmVmb3JlTm9kZUFkZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVBZGRlZCB8fCBub29wO1xuICAgIHZhciBvbk5vZGVBZGRlZCA9IG9wdGlvbnMub25Ob2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbFVwZGF0ZWQgPSBvcHRpb25zLm9uQmVmb3JlRWxVcGRhdGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uRWxVcGRhdGVkID0gb3B0aW9ucy5vbkVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkJlZm9yZU5vZGVEaXNjYXJkZWQgPSBvcHRpb25zLm9uQmVmb3JlTm9kZURpc2NhcmRlZCB8fCBub29wO1xuICAgIHZhciBvbk5vZGVEaXNjYXJkZWQgPSBvcHRpb25zLm9uTm9kZURpc2NhcmRlZCB8fCBub29wO1xuICAgIHZhciBvbkJlZm9yZUVsQ2hpbGRyZW5VcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsQ2hpbGRyZW5VcGRhdGVkIHx8IG5vb3A7XG4gICAgdmFyIHNraXBGcm9tQ2hpbGRyZW4gPSBvcHRpb25zLnNraXBGcm9tQ2hpbGRyZW4gfHwgbm9vcDtcbiAgICB2YXIgYWRkQ2hpbGQgPSBvcHRpb25zLmFkZENoaWxkIHx8IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpeyByZXR1cm4gcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTsgfTtcbiAgICB2YXIgY2hpbGRyZW5Pbmx5ID0gb3B0aW9ucy5jaGlsZHJlbk9ubHkgPT09IHRydWU7XG5cbiAgICAvLyBUaGlzIG9iamVjdCBpcyB1c2VkIGFzIGEgbG9va3VwIHRvIHF1aWNrbHkgZmluZCBhbGwga2V5ZWQgZWxlbWVudHMgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlLlxuICAgIHZhciBmcm9tTm9kZXNMb29rdXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBrZXllZFJlbW92YWxMaXN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBhZGRLZXllZFJlbW92YWwoa2V5KSB7XG4gICAgICBrZXllZFJlbW92YWxMaXN0LnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YWxrRGlzY2FyZGVkQ2hpbGROb2Rlcyhub2RlLCBza2lwS2V5ZWROb2Rlcykge1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuXG4gICAgICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChza2lwS2V5ZWROb2RlcyAmJiAoa2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCkpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgc2tpcHBpbmcga2V5ZWQgbm9kZXMgdGhlbiB3ZSBhZGQgdGhlIGtleVxuICAgICAgICAgICAgLy8gdG8gYSBsaXN0IHNvIHRoYXQgaXQgY2FuIGJlIGhhbmRsZWQgYXQgdGhlIHZlcnkgZW5kLlxuICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9ubHkgcmVwb3J0IHRoZSBub2RlIGFzIGRpc2NhcmRlZCBpZiBpdCBpcyBub3Qga2V5ZWQuIFdlIGRvIHRoaXMgYmVjYXVzZVxuICAgICAgICAgICAgLy8gYXQgdGhlIGVuZCB3ZSBsb29wIHRocm91Z2ggYWxsIGtleWVkIGVsZW1lbnRzIHRoYXQgd2VyZSB1bm1hdGNoZWRcbiAgICAgICAgICAgIC8vIGFuZCB0aGVuIGRpc2NhcmQgdGhlbSBpbiBvbmUgZmluYWwgcGFzcy5cbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgICBpZiAoY3VyQ2hpbGQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICB3YWxrRGlzY2FyZGVkQ2hpbGROb2RlcyhjdXJDaGlsZCwgc2tpcEtleWVkTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckNoaWxkID0gY3VyQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAqIFJlbW92ZXMgYSBET00gbm9kZSBvdXQgb2YgdGhlIG9yaWdpbmFsIERPTVxuICAgICpcbiAgICAqIEBwYXJhbSAge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBwYXJlbnROb2RlIFRoZSBub2RlcyBwYXJlbnRcbiAgICAqIEBwYXJhbSAge0Jvb2xlYW59IHNraXBLZXllZE5vZGVzIElmIHRydWUgdGhlbiBlbGVtZW50cyB3aXRoIGtleXMgd2lsbCBiZSBza2lwcGVkIGFuZCBub3QgZGlzY2FyZGVkLlxuICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxuICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlLCBwYXJlbnROb2RlLCBza2lwS2V5ZWROb2Rlcykge1xuICAgICAgaWYgKG9uQmVmb3JlTm9kZURpc2NhcmRlZChub2RlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgfVxuXG4gICAgICBvbk5vZGVEaXNjYXJkZWQobm9kZSk7XG4gICAgICB3YWxrRGlzY2FyZGVkQ2hpbGROb2Rlcyhub2RlLCBza2lwS2V5ZWROb2Rlcyk7XG4gICAgfVxuXG4gICAgLy8gLy8gVHJlZVdhbGtlciBpbXBsZW1lbnRhdGlvbiBpcyBubyBmYXN0ZXIsIGJ1dCBrZWVwaW5nIHRoaXMgYXJvdW5kIGluIGNhc2UgdGhpcyBjaGFuZ2VzIGluIHRoZSBmdXR1cmVcbiAgICAvLyBmdW5jdGlvbiBpbmRleFRyZWUocm9vdCkge1xuICAgIC8vICAgICB2YXIgdHJlZVdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoXG4gICAgLy8gICAgICAgICByb290LFxuICAgIC8vICAgICAgICAgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQpO1xuICAgIC8vXG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gdHJlZVdhbGtlci5uZXh0Tm9kZSgpKSkge1xuICAgIC8vICAgICAgICAgdmFyIGtleSA9IGdldE5vZGVLZXkoZWwpO1xuICAgIC8vICAgICAgICAgaWYgKGtleSkge1xuICAgIC8vICAgICAgICAgICAgIGZyb21Ob2Rlc0xvb2t1cFtrZXldID0gZWw7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICAvLyAvLyBOb2RlSXRlcmF0b3IgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy9cbiAgICAvLyBmdW5jdGlvbiBpbmRleFRyZWUobm9kZSkge1xuICAgIC8vICAgICB2YXIgbm9kZUl0ZXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlTm9kZUl0ZXJhdG9yKG5vZGUsIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvLyAgICAgdmFyIGVsO1xuICAgIC8vICAgICB3aGlsZSgoZWwgPSBub2RlSXRlcmF0b3IubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUgfHwgbm9kZS5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxKSB7XG4gICAgICAgIHZhciBjdXJDaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpO1xuICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIGZyb21Ob2Rlc0xvb2t1cFtrZXldID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV2FsayByZWN1cnNpdmVseVxuICAgICAgICAgIGluZGV4VHJlZShjdXJDaGlsZCk7XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5kZXhUcmVlKGZyb21Ob2RlKTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZU5vZGVBZGRlZChlbCkge1xuICAgICAgb25Ob2RlQWRkZWQoZWwpO1xuXG4gICAgICB2YXIgY3VyQ2hpbGQgPSBlbC5maXJzdENoaWxkO1xuICAgICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0U2libGluZyA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHZhciB1bm1hdGNoZWRGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBba2V5XTtcbiAgICAgICAgICAvLyBpZiB3ZSBmaW5kIGEgZHVwbGljYXRlICNpZCBub2RlIGluIGNhY2hlLCByZXBsYWNlIGBlbGAgd2l0aCBjYWNoZSB2YWx1ZVxuICAgICAgICAgIC8vIGFuZCBtb3JwaCBpdCB0byB0aGUgY2hpbGQgbm9kZS5cbiAgICAgICAgICBpZiAodW5tYXRjaGVkRnJvbUVsICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyQ2hpbGQsIHVubWF0Y2hlZEZyb21FbCkpIHtcbiAgICAgICAgICAgIGN1ckNoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHVubWF0Y2hlZEZyb21FbCwgY3VyQ2hpbGQpO1xuICAgICAgICAgICAgbW9ycGhFbCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1ckNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgY2FsbCBmb3IgY3VyQ2hpbGQgYW5kIGl0J3MgY2hpbGRyZW4gdG8gc2VlIGlmIHdlIGZpbmQgc29tZXRoaW5nIGluXG4gICAgICAgICAgLy8gZnJvbU5vZGVzTG9va3VwXG4gICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1ckNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ckNoaWxkID0gbmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW51cEZyb21FbChmcm9tRWwsIGN1ckZyb21Ob2RlQ2hpbGQsIGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAvLyBXZSBoYXZlIHByb2Nlc3NlZCBhbGwgb2YgdGhlIFwidG8gbm9kZXNcIi4gSWYgY3VyRnJvbU5vZGVDaGlsZCBpc1xuICAgICAgLy8gbm9uLW51bGwgdGhlbiB3ZSBzdGlsbCBoYXZlIHNvbWUgZnJvbSBub2RlcyBsZWZ0IG92ZXIgdGhhdCBuZWVkXG4gICAgICAvLyB0byBiZSByZW1vdmVkXG4gICAgICB3aGlsZSAoY3VyRnJvbU5vZGVDaGlsZCkge1xuICAgICAgICB2YXIgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgaWYgKChjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCkpKSB7XG4gICAgICAgICAgLy8gU2luY2UgdGhlIG5vZGUgaXMga2V5ZWQgaXQgbWlnaHQgYmUgbWF0Y2hlZCB1cCBsYXRlciBzbyB3ZSBkZWZlclxuICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICByZW1vdmVOb2RlKGN1ckZyb21Ob2RlQ2hpbGQsIGZyb21FbCwgdHJ1ZSAvKiBza2lwIGtleWVkIG5vZGVzICovKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbU5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoRWwoZnJvbUVsLCB0b0VsLCBjaGlsZHJlbk9ubHkpIHtcbiAgICAgIHZhciB0b0VsS2V5ID0gZ2V0Tm9kZUtleSh0b0VsKTtcblxuICAgICAgaWYgKHRvRWxLZXkpIHtcbiAgICAgICAgLy8gSWYgYW4gZWxlbWVudCB3aXRoIGFuIElEIGlzIGJlaW5nIG1vcnBoZWQgdGhlbiBpdCB3aWxsIGJlIGluIHRoZSBmaW5hbFxuICAgICAgICAvLyBET00gc28gY2xlYXIgaXQgb3V0IG9mIHRoZSBzYXZlZCBlbGVtZW50cyBjb2xsZWN0aW9uXG4gICAgICAgIGRlbGV0ZSBmcm9tTm9kZXNMb29rdXBbdG9FbEtleV07XG4gICAgICB9XG5cbiAgICAgIGlmICghY2hpbGRyZW5Pbmx5KSB7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIGlmIChvbkJlZm9yZUVsVXBkYXRlZChmcm9tRWwsIHRvRWwpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVzIG9uIG9yaWdpbmFsIERPTSBlbGVtZW50IGZpcnN0XG4gICAgICAgIG1vcnBoQXR0cnMoZnJvbUVsLCB0b0VsKTtcbiAgICAgICAgLy8gb3B0aW9uYWxcbiAgICAgICAgb25FbFVwZGF0ZWQoZnJvbUVsKTtcblxuICAgICAgICBpZiAob25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZChmcm9tRWwsIHRvRWwpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZnJvbUVsLm5vZGVOYW1lICE9PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXJzLlRFWFRBUkVBKGZyb21FbCwgdG9FbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9ycGhDaGlsZHJlbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgIHZhciBza2lwRnJvbSA9IHNraXBGcm9tQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKTtcbiAgICAgIHZhciBjdXJUb05vZGVDaGlsZCA9IHRvRWwuZmlyc3RDaGlsZDtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyVG9Ob2RlS2V5O1xuICAgICAgdmFyIGN1ckZyb21Ob2RlS2V5O1xuXG4gICAgICB2YXIgZnJvbU5leHRTaWJsaW5nO1xuICAgICAgdmFyIHRvTmV4dFNpYmxpbmc7XG4gICAgICB2YXIgbWF0Y2hpbmdGcm9tRWw7XG5cbiAgICAgIC8vIHdhbGsgdGhlIGNoaWxkcmVuXG4gICAgICBvdXRlcjogd2hpbGUgKGN1clRvTm9kZUNoaWxkKSB7XG4gICAgICAgIHRvTmV4dFNpYmxpbmcgPSBjdXJUb05vZGVDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgY3VyVG9Ob2RlS2V5ID0gZ2V0Tm9kZUtleShjdXJUb05vZGVDaGlsZCk7XG5cbiAgICAgICAgLy8gd2FsayB0aGUgZnJvbU5vZGUgY2hpbGRyZW4gYWxsIHRoZSB3YXkgdGhyb3VnaFxuICAgICAgICB3aGlsZSAoIXNraXBGcm9tICYmIGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgICBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgaWYgKGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUgJiYgY3VyVG9Ob2RlQ2hpbGQuaXNTYW1lTm9kZShjdXJGcm9tTm9kZUNoaWxkKSkge1xuICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSB0b05leHRTaWJsaW5nO1xuICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlS2V5ID0gZ2V0Tm9kZUtleShjdXJGcm9tTm9kZUNoaWxkKTtcblxuICAgICAgICAgIHZhciBjdXJGcm9tTm9kZVR5cGUgPSBjdXJGcm9tTm9kZUNoaWxkLm5vZGVUeXBlO1xuXG4gICAgICAgICAgLy8gdGhpcyBtZWFucyBpZiB0aGUgY3VyRnJvbU5vZGVDaGlsZCBkb2VzbnQgaGF2ZSBhIG1hdGNoIHdpdGggdGhlIGN1clRvTm9kZUNoaWxkXG4gICAgICAgICAgdmFyIGlzQ29tcGF0aWJsZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChjdXJGcm9tTm9kZVR5cGUgPT09IGN1clRvTm9kZUNoaWxkLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgLy8gQm90aCBub2RlcyBiZWluZyBjb21wYXJlZCBhcmUgRWxlbWVudCBub2Rlc1xuXG4gICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgdGFyZ2V0IG5vZGUgaGFzIGEga2V5IHNvIHdlIHdhbnQgdG8gbWF0Y2ggaXQgdXAgd2l0aCB0aGUgY29ycmVjdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlXG4gICAgICAgICAgICAgICAgaWYgKGN1clRvTm9kZUtleSAhPT0gY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlIGRvZXMgbm90IGhhdmUgYSBtYXRjaGluZyBrZXkgc29cbiAgICAgICAgICAgICAgICAgIC8vIGxldCdzIGNoZWNrIG91ciBsb29rdXAgdG8gc2VlIGlmIHRoZXJlIGlzIGEgbWF0Y2hpbmcgZWxlbWVudCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgICAgICAgIC8vIERPTSB0cmVlXG4gICAgICAgICAgICAgICAgICBpZiAoKG1hdGNoaW5nRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2N1clRvTm9kZUtleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9tTmV4dFNpYmxpbmcgPT09IG1hdGNoaW5nRnJvbUVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIGZvciBzaW5nbGUgZWxlbWVudCByZW1vdmFscy4gVG8gYXZvaWQgcmVtb3ZpbmcgdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRE9NIG5vZGUgb3V0IG9mIHRoZSB0cmVlIChzaW5jZSB0aGF0IGNhbiBicmVhayBDU1MgdHJhbnNpdGlvbnMsIGV0Yy4pLFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHdpbGwgaW5zdGVhZCBkaXNjYXJkIHRoZSBjdXJyZW50IG5vZGUgYW5kIHdhaXQgdW50aWwgdGhlIG5leHRcbiAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRpb24gdG8gcHJvcGVybHkgbWF0Y2ggdXAgdGhlIGtleWVkIHRhcmdldCBlbGVtZW50IHdpdGggaXRzIG1hdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCBpbiB0aGUgb3JpZ2luYWwgdHJlZVxuICAgICAgICAgICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGZvdW5kIGEgbWF0Y2hpbmcga2V5ZWQgZWxlbWVudCBzb21ld2hlcmUgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlLlxuICAgICAgICAgICAgICAgICAgICAgIC8vIExldCdzIG1vdmUgdGhlIG9yaWdpbmFsIERPTSBub2RlIGludG8gdGhlIGN1cnJlbnQgcG9zaXRpb24gYW5kIG1vcnBoXG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXQuXG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBXZSB1c2UgaW5zZXJ0QmVmb3JlIGluc3RlYWQgb2YgcmVwbGFjZUNoaWxkIGJlY2F1c2Ugd2Ugd2FudCB0byBnbyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGByZW1vdmVOb2RlKClgIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSB0aGF0IGlzIGJlaW5nIGRpc2NhcmRlZCBzbyB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gYWxsIGxpZmVjeWNsZSBob29rcyBhcmUgY29ycmVjdGx5IGludm9rZWRcbiAgICAgICAgICAgICAgICAgICAgICBmcm9tRWwuaW5zZXJ0QmVmb3JlKG1hdGNoaW5nRnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkKTtcblxuICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGN1ckZyb21Ob2RlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBzdGlsbCBhIGNoYW5jZSB0aGV5IHdpbGwgYmUgbWF0Y2hlZCB1cCBsYXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IG1hdGNoaW5nRnJvbUVsO1xuICAgICAgICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlS2V5ID0gZ2V0Tm9kZUtleShjdXJGcm9tTm9kZUNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5vZGVzIGFyZSBub3QgY29tcGF0aWJsZSBzaW5jZSB0aGUgXCJ0b1wiIG5vZGUgaGFzIGEga2V5IGFuZCB0aGVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBubyBtYXRjaGluZyBrZXllZCBub2RlIGluIHRoZSBzb3VyY2UgdHJlZVxuICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgaGFzIGEga2V5XG4gICAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBpc0NvbXBhdGlibGUgIT09IGZhbHNlICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICBpZiAoaXNDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgY29tcGF0aWJsZSBET00gZWxlbWVudHMgc28gdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgXCJmcm9tXCIgbm9kZSB0byBtYXRjaCB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHRhcmdldCBET00gbm9kZS5cbiAgICAgICAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgICAgICAgIG1vcnBoRWwoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBURVhUX05PREUgfHwgY3VyRnJvbU5vZGVUeXBlID09IENPTU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAvLyBCb3RoIG5vZGVzIGJlaW5nIGNvbXBhcmVkIGFyZSBUZXh0IG9yIENvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgLy8gU2ltcGx5IHVwZGF0ZSBub2RlVmFsdWUgb24gdGhlIG9yaWdpbmFsIG5vZGUgdG9cbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSB0ZXh0IHZhbHVlXG4gICAgICAgICAgICAgIGlmIChjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSAhPT0gY3VyVG9Ob2RlQ2hpbGQubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZC5ub2RlVmFsdWUgPSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgYm90aCB0aGUgXCJ0b1wiIGNoaWxkIGFuZCB0aGUgXCJmcm9tXCIgY2hpbGQgc2luY2Ugd2UgZm91bmQgYSBtYXRjaFxuICAgICAgICAgICAgLy8gTm90aGluZyBlbHNlIHRvIGRvIGFzIHdlIGFscmVhZHkgcmVjdXJzaXZlbHkgY2FsbGVkIG1vcnBoQ2hpbGRyZW4gYWJvdmVcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBjb21wYXRpYmxlIG1hdGNoIHNvIHJlbW92ZSB0aGUgb2xkIG5vZGUgZnJvbSB0aGUgRE9NIGFuZCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhXG4gICAgICAgICAgLy8gbWF0Y2ggaW4gdGhlIG9yaWdpbmFsIERPTS4gSG93ZXZlciwgd2Ugb25seSBkbyB0aGlzIGlmIHRoZSBmcm9tIG5vZGUgaXMgbm90IGtleWVkXG4gICAgICAgICAgLy8gc2luY2UgaXQgaXMgcG9zc2libGUgdGhhdCBhIGtleWVkIG5vZGUgbWlnaHQgbWF0Y2ggdXAgd2l0aCBhIG5vZGUgc29tZXdoZXJlIGVsc2UgaW4gdGhlXG4gICAgICAgICAgLy8gdGFyZ2V0IHRyZWUgYW5kIHdlIGRvbid0IHdhbnQgdG8gZGlzY2FyZCBpdCBqdXN0IHlldCBzaW5jZSBpdCBzdGlsbCBtaWdodCBmaW5kIGFcbiAgICAgICAgICAvLyBob21lIGluIHRoZSBmaW5hbCBET00gdHJlZS4gQWZ0ZXIgZXZlcnl0aGluZyBpcyBkb25lIHdlIHdpbGwgcmVtb3ZlIGFueSBrZXllZCBub2Rlc1xuICAgICAgICAgIC8vIHRoYXQgZGlkbid0IGZpbmQgYSBob21lXG4gICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgIH0gLy8gRU5EOiB3aGlsZShjdXJGcm9tTm9kZUNoaWxkKSB7fVxuXG4gICAgICAgIC8vIElmIHdlIGdvdCB0aGlzIGZhciB0aGVuIHdlIGRpZCBub3QgZmluZCBhIGNhbmRpZGF0ZSBtYXRjaCBmb3JcbiAgICAgICAgLy8gb3VyIFwidG8gbm9kZVwiIGFuZCB3ZSBleGhhdXN0ZWQgYWxsIG9mIHRoZSBjaGlsZHJlbiBcImZyb21cIlxuICAgICAgICAvLyBub2Rlcy4gVGhlcmVmb3JlLCB3ZSB3aWxsIGp1c3QgYXBwZW5kIHRoZSBjdXJyZW50IFwidG9cIiBub2RlXG4gICAgICAgIC8vIHRvIHRoZSBlbmRcbiAgICAgICAgaWYgKGN1clRvTm9kZUtleSAmJiAobWF0Y2hpbmdGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBbY3VyVG9Ob2RlS2V5XSkgJiYgY29tcGFyZU5vZGVOYW1lcyhtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gTU9SUEhcbiAgICAgICAgICBpZighc2tpcEZyb20peyBhZGRDaGlsZChmcm9tRWwsIG1hdGNoaW5nRnJvbUVsKTsgfVxuICAgICAgICAgIG1vcnBoRWwobWF0Y2hpbmdGcm9tRWwsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgPSBvbkJlZm9yZU5vZGVBZGRlZChjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUoZnJvbUVsLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENoaWxkKGZyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJUb05vZGVDaGlsZCA9IHRvTmV4dFNpYmxpbmc7XG4gICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSk7XG5cbiAgICAgIHZhciBzcGVjaWFsRWxIYW5kbGVyID0gc3BlY2lhbEVsSGFuZGxlcnNbZnJvbUVsLm5vZGVOYW1lXTtcbiAgICAgIGlmIChzcGVjaWFsRWxIYW5kbGVyKSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXIoZnJvbUVsLCB0b0VsKTtcbiAgICAgIH1cbiAgICB9IC8vIEVORDogbW9ycGhDaGlsZHJlbiguLi4pXG5cbiAgICB2YXIgbW9ycGhlZE5vZGUgPSBmcm9tTm9kZTtcbiAgICB2YXIgbW9ycGhlZE5vZGVUeXBlID0gbW9ycGhlZE5vZGUubm9kZVR5cGU7XG4gICAgdmFyIHRvTm9kZVR5cGUgPSB0b05vZGUubm9kZVR5cGU7XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHdlIGFyZSBnaXZlbiB0d28gRE9NIG5vZGVzIHRoYXQgYXJlIG5vdFxuICAgICAgLy8gY29tcGF0aWJsZSAoZS5nLiA8ZGl2PiAtLT4gPHNwYW4+IG9yIDxkaXY+IC0tPiBURVhUKVxuICAgICAgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICBpZiAoIWNvbXBhcmVOb2RlTmFtZXMoZnJvbU5vZGUsIHRvTm9kZSkpIHtcbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChmcm9tTm9kZSk7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZSA9IG1vdmVDaGlsZHJlbihmcm9tTm9kZSwgY3JlYXRlRWxlbWVudE5TKHRvTm9kZS5ub2RlTmFtZSwgdG9Ob2RlLm5hbWVzcGFjZVVSSSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHb2luZyBmcm9tIGFuIGVsZW1lbnQgbm9kZSB0byBhIHRleHQgbm9kZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gVEVYVF9OT0RFIHx8IG1vcnBoZWROb2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFKSB7IC8vIFRleHQgb3IgY29tbWVudCBub2RlXG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBtb3JwaGVkTm9kZVR5cGUpIHtcbiAgICAgICAgICBpZiAobW9ycGhlZE5vZGUubm9kZVZhbHVlICE9PSB0b05vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZS5ub2RlVmFsdWUgPSB0b05vZGUubm9kZVZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUZXh0IG5vZGUgdG8gc29tZXRoaW5nIGVsc2VcbiAgICAgICAgICBtb3JwaGVkTm9kZSA9IHRvTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb3JwaGVkTm9kZSA9PT0gdG9Ob2RlKSB7XG4gICAgICAvLyBUaGUgXCJ0byBub2RlXCIgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIFwiZnJvbSBub2RlXCIgc28gd2UgaGFkIHRvXG4gICAgICAvLyB0b3NzIG91dCB0aGUgXCJmcm9tIG5vZGVcIiBhbmQgdXNlIHRoZSBcInRvIG5vZGVcIlxuICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRvTm9kZS5pc1NhbWVOb2RlICYmIHRvTm9kZS5pc1NhbWVOb2RlKG1vcnBoZWROb2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1vcnBoRWwobW9ycGhlZE5vZGUsIHRvTm9kZSwgY2hpbGRyZW5Pbmx5KTtcblxuICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gbG9vcCBvdmVyIGFueSBrZXllZCBub2RlcyB0aGF0IG1pZ2h0IG5lZWQgdG8gYmVcbiAgICAgIC8vIHJlbW92ZWQuIFdlIG9ubHkgZG8gdGhlIHJlbW92YWwgaWYgd2Uga25vdyB0aGF0IHRoZSBrZXllZCBub2RlXG4gICAgICAvLyBuZXZlciBmb3VuZCBhIG1hdGNoLiBXaGVuIGEga2V5ZWQgbm9kZSBpcyBtYXRjaGVkIHVwIHdlIHJlbW92ZVxuICAgICAgLy8gaXQgb3V0IG9mIGZyb21Ob2Rlc0xvb2t1cCBhbmQgd2UgdXNlIGZyb21Ob2Rlc0xvb2t1cCB0byBkZXRlcm1pbmVcbiAgICAgIC8vIGlmIGEga2V5ZWQgbm9kZSBoYXMgYmVlbiBtYXRjaGVkIHVwIG9yIG5vdFxuICAgICAgaWYgKGtleWVkUmVtb3ZhbExpc3QpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49a2V5ZWRSZW1vdmFsTGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZWxUb1JlbW92ZSA9IGZyb21Ob2Rlc0xvb2t1cFtrZXllZFJlbW92YWxMaXN0W2ldXTtcbiAgICAgICAgICBpZiAoZWxUb1JlbW92ZSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShlbFRvUmVtb3ZlLCBlbFRvUmVtb3ZlLnBhcmVudE5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSAmJiBtb3JwaGVkTm9kZSAhPT0gZnJvbU5vZGUgJiYgZnJvbU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKG1vcnBoZWROb2RlLmFjdHVhbGl6ZSkge1xuICAgICAgICBtb3JwaGVkTm9kZSA9IG1vcnBoZWROb2RlLmFjdHVhbGl6ZShmcm9tTm9kZS5vd25lckRvY3VtZW50IHx8IGRvYyk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBoYWQgdG8gc3dhcCBvdXQgdGhlIGZyb20gbm9kZSB3aXRoIGEgbmV3IG5vZGUgYmVjYXVzZSB0aGUgb2xkXG4gICAgICAvLyBub2RlIHdhcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB0YXJnZXQgbm9kZSB0aGVuIHdlIG5lZWQgdG9cbiAgICAgIC8vIHJlcGxhY2UgdGhlIG9sZCBET00gbm9kZSBpbiB0aGUgb3JpZ2luYWwgRE9NIHRyZWUuIFRoaXMgaXMgb25seVxuICAgICAgLy8gcG9zc2libGUgaWYgdGhlIG9yaWdpbmFsIERPTSBub2RlIHdhcyBwYXJ0IG9mIGEgRE9NIHRyZWUgd2hpY2hcbiAgICAgIC8vIHdlIGtub3cgaXMgdGhlIGNhc2UgaWYgaXQgaGFzIGEgcGFyZW50IG5vZGUuXG4gICAgICBmcm9tTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChtb3JwaGVkTm9kZSwgZnJvbU5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgfTtcbn1cblxudmFyIG1vcnBoZG9tID0gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3JwaGRvbTtcbiIsICJpbXBvcnQge1xuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRElTQUJMRV9XSVRILFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfRkVFREJBQ0tfR1JPVVAsXG4gIFBIWF9QUlVORSxcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfU0tJUCxcbiAgUEhYX01BR0lDX0lELFxuICBQSFhfU1RBVElDLFxuICBQSFhfVFJJR0dFUl9BQ1RJT04sXG4gIFBIWF9VUERBVEUsXG4gIFBIWF9TVFJFQU0sXG4gIFBIWF9TVFJFQU1fUkVGLFxuICBQSFhfVklFV1BPUlRfVE9QLFxuICBQSFhfVklFV1BPUlRfQk9UVE9NLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xuICBkZXRlY3REdXBsaWNhdGVJZHMsXG4gIGlzQ2lkXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IERPTVBvc3RNb3JwaFJlc3RvcmVyIGZyb20gXCIuL2RvbV9wb3N0X21vcnBoX3Jlc3RvcmVyXCJcbmltcG9ydCBtb3JwaGRvbSBmcm9tIFwibW9ycGhkb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01QYXRjaCB7XG4gIHN0YXRpYyBwYXRjaEVsKGZyb21FbCwgdG9FbCwgYWN0aXZlRWxlbWVudCl7XG4gICAgbW9ycGhkb20oZnJvbUVsLCB0b0VsLCB7XG4gICAgICBjaGlsZHJlbk9ubHk6IGZhbHNlLFxuICAgICAgb25CZWZvcmVFbFVwZGF0ZWQ6IChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgICAgaWYoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LmlzU2FtZU5vZGUoZnJvbUVsKSAmJiBET00uaXNGb3JtSW5wdXQoZnJvbUVsKSl7XG4gICAgICAgICAgRE9NLm1lcmdlRm9jdXNlZElucHV0KGZyb21FbCwgdG9FbClcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3LCBjb250YWluZXIsIGlkLCBodG1sLCBzdHJlYW1zLCB0YXJnZXRDSUQpe1xuICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSB2aWV3LmxpdmVTb2NrZXRcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lclxuICAgIHRoaXMuaWQgPSBpZFxuICAgIHRoaXMucm9vdElEID0gdmlldy5yb290LmlkXG4gICAgdGhpcy5odG1sID0gaHRtbFxuICAgIHRoaXMuc3RyZWFtcyA9IHN0cmVhbXNcbiAgICB0aGlzLnN0cmVhbUluc2VydHMgPSB7fVxuICAgIHRoaXMuc3RyZWFtQ29tcG9uZW50UmVzdG9yZSA9IHt9XG4gICAgdGhpcy50YXJnZXRDSUQgPSB0YXJnZXRDSURcbiAgICB0aGlzLmNpZFBhdGNoID0gaXNDaWQodGhpcy50YXJnZXRDSUQpXG4gICAgdGhpcy5wZW5kaW5nUmVtb3ZlcyA9IFtdXG4gICAgdGhpcy5waHhSZW1vdmUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInJlbW92ZVwiKVxuICAgIHRoaXMuY2FsbGJhY2tzID0ge1xuICAgICAgYmVmb3JlYWRkZWQ6IFtdLCBiZWZvcmV1cGRhdGVkOiBbXSwgYmVmb3JlcGh4Q2hpbGRBZGRlZDogW10sXG4gICAgICBhZnRlcmFkZGVkOiBbXSwgYWZ0ZXJ1cGRhdGVkOiBbXSwgYWZ0ZXJkaXNjYXJkZWQ6IFtdLCBhZnRlcnBoeENoaWxkQWRkZWQ6IFtdLFxuICAgICAgYWZ0ZXJ0cmFuc2l0aW9uc0Rpc2NhcmRlZDogW11cbiAgICB9XG4gIH1cblxuICBiZWZvcmUoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYmVmb3JlJHtraW5kfWBdLnB1c2goY2FsbGJhY2spIH1cbiAgYWZ0ZXIoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYWZ0ZXIke2tpbmR9YF0ucHVzaChjYWxsYmFjaykgfVxuXG4gIHRyYWNrQmVmb3JlKGtpbmQsIC4uLmFyZ3Mpe1xuICAgIHRoaXMuY2FsbGJhY2tzW2BiZWZvcmUke2tpbmR9YF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayguLi5hcmdzKSlcbiAgfVxuXG4gIHRyYWNrQWZ0ZXIoa2luZCwgLi4uYXJncyl7XG4gICAgdGhpcy5jYWxsYmFja3NbYGFmdGVyJHtraW5kfWBdLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soLi4uYXJncykpXG4gIH1cblxuICBtYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpe1xuICAgIGxldCBwaHhVcGRhdGUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfVVBEQVRFKVxuICAgIERPTS5hbGwodGhpcy5jb250YWluZXIsIGBbJHtwaHhVcGRhdGV9PWFwcGVuZF0gPiAqLCBbJHtwaHhVcGRhdGV9PXByZXBlbmRdID4gKmAsIGVsID0+IHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUFJVTkUsIFwiXCIpXG4gICAgfSlcbiAgfVxuXG4gIHBlcmZvcm0oaXNKb2luUGF0Y2gpe1xuICAgIGxldCB7dmlldywgbGl2ZVNvY2tldCwgY29udGFpbmVyLCBodG1sfSA9IHRoaXNcbiAgICBsZXQgdGFyZ2V0Q29udGFpbmVyID0gdGhpcy5pc0NJRFBhdGNoKCkgPyB0aGlzLnRhcmdldENJRENvbnRhaW5lcihodG1sKSA6IGNvbnRhaW5lclxuICAgIGlmKHRoaXMuaXNDSURQYXRjaCgpICYmICF0YXJnZXRDb250YWluZXIpeyByZXR1cm4gfVxuXG4gICAgbGV0IGZvY3VzZWQgPSBsaXZlU29ja2V0LmdldEFjdGl2ZUVsZW1lbnQoKVxuICAgIGxldCB7c2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZH0gPSBmb2N1c2VkICYmIERPTS5oYXNTZWxlY3Rpb25SYW5nZShmb2N1c2VkKSA/IGZvY3VzZWQgOiB7fVxuICAgIGxldCBwaHhVcGRhdGUgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX1VQREFURSlcbiAgICBsZXQgcGh4RmVlZGJhY2tGb3IgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUilcbiAgICBsZXQgcGh4RmVlZGJhY2tHcm91cCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfR1JPVVApXG4gICAgbGV0IGRpc2FibGVXaXRoID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpXG4gICAgbGV0IHBoeFZpZXdwb3J0VG9wID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9WSUVXUE9SVF9UT1ApXG4gICAgbGV0IHBoeFZpZXdwb3J0Qm90dG9tID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9WSUVXUE9SVF9CT1RUT00pXG4gICAgbGV0IHBoeFRyaWdnZXJFeHRlcm5hbCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVFJJR0dFUl9BQ1RJT04pXG4gICAgbGV0IGFkZGVkID0gW11cbiAgICBsZXQgZmVlZGJhY2tDb250YWluZXJzID0gW11cbiAgICBsZXQgdXBkYXRlcyA9IFtdXG4gICAgbGV0IGFwcGVuZFByZXBlbmRVcGRhdGVzID0gW11cblxuICAgIGxldCBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBudWxsXG5cbiAgICBmdW5jdGlvbiBtb3JwaCh0YXJnZXRDb250YWluZXIsIHNvdXJjZSwgd2l0aENoaWxkcmVuPWZhbHNlKXtcbiAgICAgIG1vcnBoZG9tKHRhcmdldENvbnRhaW5lciwgc291cmNlLCB7XG4gICAgICAgIC8vIG5vcm1hbGx5LCB3ZSBhcmUgcnVubmluZyB3aXRoIGNoaWxkcmVuT25seSwgYXMgdGhlIHBhdGNoIEhUTUwgZm9yIGEgTFZcbiAgICAgICAgLy8gZG9lcyBub3QgaW5jbHVkZSB0aGUgTFYgYXR0cnMgKGRhdGEtcGh4LXNlc3Npb24sIGV0Yy4pXG4gICAgICAgIC8vIHdoZW4gd2UgYXJlIHBhdGNoaW5nIGEgbGl2ZSBjb21wb25lbnQsIHdlIGRvIHdhbnQgdG8gcGF0Y2ggdGhlIHJvb3QgZWxlbWVudCBhcyB3ZWxsO1xuICAgICAgICAvLyBhbm90aGVyIGNhc2UgaXMgdGhlIHJlY3Vyc2l2ZSBwYXRjaCBvZiBhIHN0cmVhbSBpdGVtIHRoYXQgd2FzIGtlcHQgb24gcmVzZXQgKC0+IG9uQmVmb3JlTm9kZUFkZGVkKVxuICAgICAgICBjaGlsZHJlbk9ubHk6IHRhcmdldENvbnRhaW5lci5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkgPT09IG51bGwgJiYgIXdpdGhDaGlsZHJlbixcbiAgICAgICAgZ2V0Tm9kZUtleTogKG5vZGUpID0+IHtcbiAgICAgICAgICBpZihET00uaXNQaHhEZXN0cm95ZWQobm9kZSkpeyByZXR1cm4gbnVsbCB9XG4gICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIGpvaW4gcGF0Y2gsIHRoZW4gYnkgZGVmaW5pdGlvbiB0aGVyZSB3YXMgbm8gUEhYX01BR0lDX0lELlxuICAgICAgICAgIC8vIFRoaXMgaXMgaW1wb3J0YW50IHRvIHJlZHVjZSB0aGUgYW1vdW50IG9mIGVsZW1lbnRzIG1vcnBoZG9tIGRpc2NhcmRzLlxuICAgICAgICAgIGlmKGlzSm9pblBhdGNoKXsgcmV0dXJuIG5vZGUuaWQgfVxuICAgICAgICAgIHJldHVybiBub2RlLmlkIHx8IChub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShQSFhfTUFHSUNfSUQpKVxuICAgICAgICB9LFxuICAgICAgICAvLyBza2lwIGluZGV4aW5nIGZyb20gY2hpbGRyZW4gd2hlbiBjb250YWluZXIgaXMgc3RyZWFtXG4gICAgICAgIHNraXBGcm9tQ2hpbGRyZW46IChmcm9tKSA9PiB7IHJldHVybiBmcm9tLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpID09PSBQSFhfU1RSRUFNIH0sXG4gICAgICAgIC8vIHRlbGwgbW9ycGhkb20gaG93IHRvIGFkZCBhIGNoaWxkXG4gICAgICAgIGFkZENoaWxkOiAocGFyZW50LCBjaGlsZCkgPT4ge1xuICAgICAgICAgIGxldCB7cmVmLCBzdHJlYW1BdH0gPSB0aGlzLmdldFN0cmVhbUluc2VydChjaGlsZClcbiAgICAgICAgICBpZihyZWYgPT09IHVuZGVmaW5lZCl7IHJldHVybiBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpIH1cblxuICAgICAgICAgIHRoaXMuc2V0U3RyZWFtUmVmKGNoaWxkLCByZWYpXG5cbiAgICAgICAgICAvLyBzdHJlYW1pbmdcbiAgICAgICAgICBpZihzdHJlYW1BdCA9PT0gMCl7XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBjaGlsZClcbiAgICAgICAgICB9IGVsc2UgaWYoc3RyZWFtQXQgPT09IC0xKXtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZClcbiAgICAgICAgICB9IGVsc2UgaWYoc3RyZWFtQXQgPiAwKXtcbiAgICAgICAgICAgIGxldCBzaWJsaW5nID0gQXJyYXkuZnJvbShwYXJlbnQuY2hpbGRyZW4pW3N0cmVhbUF0XVxuICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgc2libGluZylcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlTm9kZUFkZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBET00ubWF5YmVBZGRQcml2YXRlSG9va3MoZWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwiYWRkZWRcIiwgZWwpXG5cbiAgICAgICAgICBsZXQgbW9ycGhlZEVsID0gZWxcbiAgICAgICAgICAvLyB0aGlzIGlzIGEgc3RyZWFtIGl0ZW0gdGhhdCB3YXMga2VwdCBvbiByZXNldCwgcmVjdXJzaXZlbHkgbW9ycGggaXRcbiAgICAgICAgICBpZighaXNKb2luUGF0Y2ggJiYgdGhpcy5zdHJlYW1Db21wb25lbnRSZXN0b3JlW2VsLmlkXSl7XG4gICAgICAgICAgICBtb3JwaGVkRWwgPSB0aGlzLnN0cmVhbUNvbXBvbmVudFJlc3RvcmVbZWwuaWRdXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zdHJlYW1Db21wb25lbnRSZXN0b3JlW2VsLmlkXVxuICAgICAgICAgICAgbW9ycGguY2FsbCh0aGlzLCBtb3JwaGVkRWwsIGVsLCB0cnVlKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtb3JwaGVkRWxcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSl7IHRoaXMubWF5YmVSZU9yZGVyU3RyZWFtKGVsLCB0cnVlKSB9XG4gICAgICAgICAgaWYoRE9NLmlzRmVlZGJhY2tDb250YWluZXIoZWwsIHBoeEZlZWRiYWNrRm9yKSkgZmVlZGJhY2tDb250YWluZXJzLnB1c2goZWwpXG5cbiAgICAgICAgICAvLyBoYWNrIHRvIGZpeCBTYWZhcmkgaGFuZGxpbmcgb2YgaW1nIHNyY3NldCBhbmQgdmlkZW8gdGFnc1xuICAgICAgICAgIGlmKGVsIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCAmJiBlbC5zcmNzZXQpe1xuICAgICAgICAgICAgZWwuc3Jjc2V0ID0gZWwuc3Jjc2V0XG4gICAgICAgICAgfSBlbHNlIGlmKGVsIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCAmJiBlbC5hdXRvcGxheSl7XG4gICAgICAgICAgICBlbC5wbGF5KClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoRE9NLmlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKSl7XG4gICAgICAgICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBlbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoKERPTS5pc1BoeENoaWxkKGVsKSAmJiB2aWV3Lm93bnNFbGVtZW50KGVsKSkgfHwgRE9NLmlzUGh4U3RpY2t5KGVsKSAmJiB2aWV3Lm93bnNFbGVtZW50KGVsLnBhcmVudE5vZGUpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tBZnRlcihcInBoeENoaWxkQWRkZWRcIiwgZWwpXG4gICAgICAgICAgfVxuICAgICAgICAgIGFkZGVkLnB1c2goZWwpXG4gICAgICAgIH0sXG4gICAgICAgIG9uTm9kZURpc2NhcmRlZDogKGVsKSA9PiB0aGlzLm9uTm9kZURpc2NhcmRlZChlbCksXG4gICAgICAgIG9uQmVmb3JlTm9kZURpc2NhcmRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfUFJVTkUpICE9PSBudWxsKXsgcmV0dXJuIHRydWUgfVxuICAgICAgICAgIGlmKGVsLnBhcmVudEVsZW1lbnQgIT09IG51bGwgJiYgZWwuaWQgJiZcbiAgICAgICAgICAgIERPTS5pc1BoeFVwZGF0ZShlbC5wYXJlbnRFbGVtZW50LCBwaHhVcGRhdGUsIFtQSFhfU1RSRUFNLCBcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZih0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShlbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKHRoaXMuc2tpcENJRFNpYmxpbmcoZWwpKXsgcmV0dXJuIGZhbHNlIH1cblxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG9uRWxVcGRhdGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihET00uaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpKXtcbiAgICAgICAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IGVsXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZXMucHVzaChlbClcbiAgICAgICAgICB0aGlzLm1heWJlUmVPcmRlclN0cmVhbShlbCwgZmFsc2UpXG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgICAgRE9NLm1heWJlQWRkUHJpdmF0ZUhvb2tzKHRvRWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgICAgICAvLyBtYXJrIGJvdGggZnJvbSBhbmQgdG8gZWxzIGFzIGZlZWRiYWNrIGNvbnRhaW5lcnMsIGFzIHdlIGRvbid0IGtub3cgeWV0IHdoaWNoIG9uZSB3aWxsIGJlIHVzZWRcbiAgICAgICAgICAvLyBhbmQgd2UgYWxzbyBuZWVkIHRvIHJlbW92ZSB0aGUgcGh4LW5vLWZlZWRiYWNrIGNsYXNzIHdoZW4gdGhlIHBoeC1mZWVkYmFjay1mb3IgYXR0cmlidXRlIGlzIHJlbW92ZWRcbiAgICAgICAgICBpZihET00uaXNGZWVkYmFja0NvbnRhaW5lcihmcm9tRWwsIHBoeEZlZWRiYWNrRm9yKSB8fCBET00uaXNGZWVkYmFja0NvbnRhaW5lcih0b0VsLCBwaHhGZWVkYmFja0Zvcikpe1xuICAgICAgICAgICAgZmVlZGJhY2tDb250YWluZXJzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgZmVlZGJhY2tDb250YWluZXJzLnB1c2godG9FbClcbiAgICAgICAgICB9XG4gICAgICAgICAgRE9NLmNsZWFuQ2hpbGROb2Rlcyh0b0VsLCBwaHhVcGRhdGUpXG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyh0b0VsKSl7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgbGl2ZSBjb21wb25lbnQgdXNlZCBpbiBhIHN0cmVhbSwgd2UgbWF5IG5lZWQgdG8gcmVvcmRlciBpdFxuICAgICAgICAgICAgdGhpcy5tYXliZVJlT3JkZXJTdHJlYW0oZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKERPTS5pc1BoeFN0aWNreShmcm9tRWwpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZihET00uaXNJZ25vcmVkKGZyb21FbCwgcGh4VXBkYXRlKSB8fCAoZnJvbUVsLmZvcm0gJiYgZnJvbUVsLmZvcm0uaXNTYW1lTm9kZShleHRlcm5hbEZvcm1UcmlnZ2VyZWQpKSl7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00ubWVyZ2VBdHRycyhmcm9tRWwsIHRvRWwsIHtpc0lnbm9yZWQ6IERPTS5pc0lnbm9yZWQoZnJvbUVsLCBwaHhVcGRhdGUpfSlcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihmcm9tRWwudHlwZSA9PT0gXCJudW1iZXJcIiAmJiAoZnJvbUVsLnZhbGlkaXR5ICYmIGZyb21FbC52YWxpZGl0eS5iYWRJbnB1dCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKCFET00uc3luY1BlbmRpbmdSZWYoZnJvbUVsLCB0b0VsLCBkaXNhYmxlV2l0aCkpe1xuICAgICAgICAgICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoZnJvbUVsKSl7XG4gICAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgICAgdXBkYXRlcy5wdXNoKGZyb21FbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICAgICAgICBpZihET00uaXNQaHhDaGlsZCh0b0VsKSl7XG4gICAgICAgICAgICBsZXQgcHJldlNlc3Npb24gPSBmcm9tRWwuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKVxuICAgICAgICAgICAgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7ZXhjbHVkZTogW1BIWF9TVEFUSUNdfSlcbiAgICAgICAgICAgIGlmKHByZXZTZXNzaW9uICE9PSBcIlwiKXsgZnJvbUVsLnNldEF0dHJpYnV0ZShQSFhfU0VTU0lPTiwgcHJldlNlc3Npb24pIH1cbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQsIHRoaXMucm9vdElEKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBpbnB1dCBoYW5kbGluZ1xuICAgICAgICAgIERPTS5jb3B5UHJpdmF0ZXModG9FbCwgZnJvbUVsKVxuXG4gICAgICAgICAgbGV0IGlzRm9jdXNlZEZvcm1FbCA9IGZvY3VzZWQgJiYgZnJvbUVsLmlzU2FtZU5vZGUoZm9jdXNlZCkgJiYgRE9NLmlzRm9ybUlucHV0KGZyb21FbClcbiAgICAgICAgICAvLyBza2lwIHBhdGNoaW5nIGZvY3VzZWQgaW5wdXRzIHVubGVzcyBmb2N1cyBpcyBhIHNlbGVjdCB0aGF0IGhhcyBjaGFuZ2VkIG9wdGlvbnNcbiAgICAgICAgICBsZXQgZm9jdXNlZFNlbGVjdENoYW5nZWQgPSBpc0ZvY3VzZWRGb3JtRWwgJiYgdGhpcy5pc0NoYW5nZWRTZWxlY3QoZnJvbUVsLCB0b0VsKVxuICAgICAgICAgIGlmKGlzRm9jdXNlZEZvcm1FbCAmJiBmcm9tRWwudHlwZSAhPT0gXCJoaWRkZW5cIiAmJiAhZm9jdXNlZFNlbGVjdENoYW5nZWQpe1xuICAgICAgICAgICAgdGhpcy50cmFja0JlZm9yZShcInVwZGF0ZWRcIiwgZnJvbUVsLCB0b0VsKVxuICAgICAgICAgICAgRE9NLm1lcmdlRm9jdXNlZElucHV0KGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5zeW5jQXR0cnNUb1Byb3BzKGZyb21FbClcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBibHVyIGZvY3VzZWQgc2VsZWN0IGlmIGl0IGNoYW5nZWQgc28gbmF0aXZlIFVJIGlzIHVwZGF0ZWQgKGllIHNhZmFyaSB3b24ndCB1cGRhdGUgdmlzaWJsZSBvcHRpb25zKVxuICAgICAgICAgICAgaWYoZm9jdXNlZFNlbGVjdENoYW5nZWQpeyBmcm9tRWwuYmx1cigpIH1cbiAgICAgICAgICAgIGlmKERPTS5pc1BoeFVwZGF0ZSh0b0VsLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMucHVzaChuZXcgRE9NUG9zdE1vcnBoUmVzdG9yZXIoZnJvbUVsLCB0b0VsLCB0b0VsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgRE9NLnN5bmNBdHRyc1RvUHJvcHModG9FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnModG9FbClcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMudHJhY2tCZWZvcmUoXCJhZGRlZFwiLCBjb250YWluZXIpXG4gICAgdGhpcy50cmFja0JlZm9yZShcInVwZGF0ZWRcIiwgY29udGFpbmVyLCBjb250YWluZXIpXG5cbiAgICBsaXZlU29ja2V0LnRpbWUoXCJtb3JwaGRvbVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0cmVhbXMuZm9yRWFjaCgoW3JlZiwgaW5zZXJ0cywgZGVsZXRlSWRzLCByZXNldF0pID0+IHtcbiAgICAgICAgaW5zZXJ0cy5mb3JFYWNoKChba2V5LCBzdHJlYW1BdCwgbGltaXRdKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdHJlYW1JbnNlcnRzW2tleV0gPSB7cmVmLCBzdHJlYW1BdCwgbGltaXQsIHJlc2V0fVxuICAgICAgICB9KVxuICAgICAgICBpZihyZXNldCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICBET00uYWxsKGNvbnRhaW5lciwgYFske1BIWF9TVFJFQU1fUkVGfT1cIiR7cmVmfVwiXWAsIGNoaWxkID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KGNoaWxkKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbaWQ9XCIke2lkfVwiXWApXG4gICAgICAgICAgaWYoY2hpbGQpeyB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZCkgfVxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgICAgLy8gY2xlYXIgc3RyZWFtIGl0ZW1zIGZyb20gdGhlIGRlYWQgcmVuZGVyIGlmIHRoZXkgYXJlIG5vdCBpbnNlcnRlZCBhZ2FpblxuICAgICAgaWYoaXNKb2luUGF0Y2gpe1xuICAgICAgICBET00uYWxsKHRoaXMuY29udGFpbmVyLCBgWyR7cGh4VXBkYXRlfT0ke1BIWF9TVFJFQU19XWAsIGVsID0+IHtcbiAgICAgICAgICAvLyBtYWtlIHN1cmUgdG8gb25seSByZW1vdmUgZWxlbWVudHMgb3duZWQgYnkgdGhlIGN1cnJlbnQgdmlld1xuICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhvZW5peGZyYW1ld29yay9waG9lbml4X2xpdmVfdmlldy9pc3N1ZXMvMzA0N1xuICAgICAgICAgIHRoaXMubGl2ZVNvY2tldC5vd25lcihlbCwgKHZpZXcpID0+IHtcbiAgICAgICAgICAgIGlmKHZpZXcgPT09IHRoaXMudmlldyl7XG4gICAgICAgICAgICAgIEFycmF5LmZyb20oZWwuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KGNoaWxkKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIG1vcnBoLmNhbGwodGhpcywgdGFyZ2V0Q29udGFpbmVyLCBodG1sKVxuICAgIH0pXG5cbiAgICBpZihsaXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpe1xuICAgICAgZGV0ZWN0RHVwbGljYXRlSWRzKClcbiAgICAgIC8vIHdhcm4gaWYgdGhlcmUgYXJlIGFueSBpbnB1dHMgbmFtZWQgXCJpZFwiXG4gICAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFtuYW1lPWlkXVwiKSkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgaWYobm9kZS5mb3JtKXtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGV0ZWN0ZWQgYW4gaW5wdXQgd2l0aCBuYW1lPVxcXCJpZFxcXCIgaW5zaWRlIGEgZm9ybSEgVGhpcyB3aWxsIGNhdXNlIHByb2JsZW1zIHdoZW4gcGF0Y2hpbmcgdGhlIERPTS5cXG5cIiwgbm9kZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZihhcHBlbmRQcmVwZW5kVXBkYXRlcy5sZW5ndGggPiAwKXtcbiAgICAgIGxpdmVTb2NrZXQudGltZShcInBvc3QtbW9ycGggYXBwZW5kL3ByZXBlbmQgcmVzdG9yYXRpb25cIiwgKCkgPT4ge1xuICAgICAgICBhcHBlbmRQcmVwZW5kVXBkYXRlcy5mb3JFYWNoKHVwZGF0ZSA9PiB1cGRhdGUucGVyZm9ybSgpKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBET00ubWF5YmVIaWRlRmVlZGJhY2sodGFyZ2V0Q29udGFpbmVyLCBmZWVkYmFja0NvbnRhaW5lcnMsIHBoeEZlZWRiYWNrRm9yLCBwaHhGZWVkYmFja0dyb3VwKVxuXG4gICAgbGl2ZVNvY2tldC5zaWxlbmNlRXZlbnRzKCgpID0+IERPTS5yZXN0b3JlRm9jdXMoZm9jdXNlZCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCkpXG4gICAgRE9NLmRpc3BhdGNoRXZlbnQoZG9jdW1lbnQsIFwicGh4OnVwZGF0ZVwiKVxuICAgIGFkZGVkLmZvckVhY2goZWwgPT4gdGhpcy50cmFja0FmdGVyKFwiYWRkZWRcIiwgZWwpKVxuICAgIHVwZGF0ZXMuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsKSlcblxuICAgIHRoaXMudHJhbnNpdGlvblBlbmRpbmdSZW1vdmVzKClcblxuICAgIGlmKGV4dGVybmFsRm9ybVRyaWdnZXJlZCl7XG4gICAgICBsaXZlU29ja2V0LnVubG9hZCgpXG4gICAgICAvLyB1c2UgcHJvdG90eXBlJ3Mgc3VibWl0IGluIGNhc2UgdGhlcmUncyBhIGZvcm0gY29udHJvbCB3aXRoIG5hbWUgb3IgaWQgb2YgXCJzdWJtaXRcIlxuICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxGb3JtRWxlbWVudC9zdWJtaXRcbiAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihleHRlcm5hbEZvcm1UcmlnZ2VyZWQpLnN1Ym1pdC5jYWxsKGV4dGVybmFsRm9ybVRyaWdnZXJlZClcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIG9uTm9kZURpc2NhcmRlZChlbCl7XG4gICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICBpZihET00uaXNQaHhDaGlsZChlbCkgfHwgRE9NLmlzUGh4U3RpY2t5KGVsKSl7IHRoaXMubGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoZWwpIH1cbiAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJkaXNjYXJkZWRcIiwgZWwpXG4gIH1cblxuICBtYXliZVBlbmRpbmdSZW1vdmUobm9kZSl7XG4gICAgaWYobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUodGhpcy5waHhSZW1vdmUpICE9PSBudWxsKXtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92ZXMucHVzaChub2RlKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KGNoaWxkKXtcbiAgICAvLyB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBub2RlIGlmIGl0IGlzIGFjdHVhbGx5IHJlLWFkZGVkIGluIHRoZSBzYW1lIHBhdGNoXG4gICAgLy8gd2UgZG8gTk9UIHdhbnQgdG8gZXhlY3V0ZSBwaHgtcmVtb3ZlLCB3ZSBkbyBOT1Qgd2FudCB0byBjYWxsIG9uTm9kZURpc2NhcmRlZFxuICAgIGlmKHRoaXMuc3RyZWFtSW5zZXJ0c1tjaGlsZC5pZF0pe1xuICAgICAgdGhpcy5zdHJlYW1Db21wb25lbnRSZXN0b3JlW2NoaWxkLmlkXSA9IGNoaWxkXG4gICAgICBjaGlsZC5yZW1vdmUoKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvbmx5IHJlbW92ZSB0aGUgZWxlbWVudCBub3cgaWYgaXQgaGFzIG5vIHBoeC1yZW1vdmUgYmluZGluZ1xuICAgICAgaWYoIXRoaXMubWF5YmVQZW5kaW5nUmVtb3ZlKGNoaWxkKSl7XG4gICAgICAgIGNoaWxkLnJlbW92ZSgpXG4gICAgICAgIHRoaXMub25Ob2RlRGlzY2FyZGVkKGNoaWxkKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFN0cmVhbUluc2VydChlbCl7XG4gICAgbGV0IGluc2VydCA9IGVsLmlkID8gdGhpcy5zdHJlYW1JbnNlcnRzW2VsLmlkXSA6IHt9XG4gICAgcmV0dXJuIGluc2VydCB8fCB7fVxuICB9XG5cbiAgc2V0U3RyZWFtUmVmKGVsLCByZWYpe1xuICAgIERPTS5wdXRTdGlja3koZWwsIFBIWF9TVFJFQU1fUkVGLCBlbCA9PiBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NUUkVBTV9SRUYsIHJlZikpXG4gIH1cblxuICBtYXliZVJlT3JkZXJTdHJlYW0oZWwsIGlzTmV3KXtcbiAgICBsZXQge3JlZiwgc3RyZWFtQXQsIHJlc2V0fSA9IHRoaXMuZ2V0U3RyZWFtSW5zZXJ0KGVsKVxuICAgIGlmKHN0cmVhbUF0ID09PSB1bmRlZmluZWQpeyByZXR1cm4gfVxuXG4gICAgLy8gd2UgbmVlZCB0byBzZXQgdGhlIFBIWF9TVFJFQU1fUkVGIGhlcmUgYXMgd2VsbCBhcyBhZGRDaGlsZCBpcyBpbnZva2VkIG9ubHkgZm9yIHBhcmVudHNcbiAgICB0aGlzLnNldFN0cmVhbVJlZihlbCwgcmVmKVxuXG4gICAgaWYoIXJlc2V0ICYmICFpc05ldyl7XG4gICAgICAvLyB3ZSBvbmx5IHJlb3JkZXIgaWYgdGhlIGVsZW1lbnQgaXMgbmV3IG9yIGl0J3MgYSBzdHJlYW0gcmVzZXRcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIHRoZSBlbGVtZW50IGhhcyBhIHBhcmVudCBlbGVtZW50O1xuICAgIC8vIGl0IGRvZXNuJ3QgaWYgd2UgYXJlIGN1cnJlbnRseSByZWN1cnNpdmVseSBtb3JwaGluZyAocmVzdG9yaW5nIGEgc2F2ZWQgc3RyZWFtIGNoaWxkKVxuICAgIC8vIGJlY2F1c2UgdGhlIGVsZW1lbnQgaXMgbm90IHlldCBhZGRlZCB0byB0aGUgcmVhbCBkb207XG4gICAgLy8gcmVvcmRlcmluZyBkb2VzIG5vdCBtYWtlIHNlbnNlIGluIHRoYXQgY2FzZSBhbnl3YXlcbiAgICBpZighZWwucGFyZW50RWxlbWVudCl7IHJldHVybiB9XG5cbiAgICBpZihzdHJlYW1BdCA9PT0gMCl7XG4gICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgZWwucGFyZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZClcbiAgICB9IGVsc2UgaWYoc3RyZWFtQXQgPiAwKXtcbiAgICAgIGxldCBjaGlsZHJlbiA9IEFycmF5LmZyb20oZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbilcbiAgICAgIGxldCBvbGRJbmRleCA9IGNoaWxkcmVuLmluZGV4T2YoZWwpXG4gICAgICBpZihzdHJlYW1BdCA+PSBjaGlsZHJlbi5sZW5ndGggLSAxKXtcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBzaWJsaW5nID0gY2hpbGRyZW5bc3RyZWFtQXRdXG4gICAgICAgIGlmKG9sZEluZGV4ID4gc3RyZWFtQXQpe1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nLm5leHRFbGVtZW50U2libGluZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWF5YmVMaW1pdFN0cmVhbShlbClcbiAgfVxuXG4gIG1heWJlTGltaXRTdHJlYW0oZWwpe1xuICAgIGxldCB7bGltaXR9ID0gdGhpcy5nZXRTdHJlYW1JbnNlcnQoZWwpXG4gICAgbGV0IGNoaWxkcmVuID0gbGltaXQgIT09IG51bGwgJiYgQXJyYXkuZnJvbShlbC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKVxuICAgIGlmKGxpbWl0ICYmIGxpbWl0IDwgMCAmJiBjaGlsZHJlbi5sZW5ndGggPiBsaW1pdCAqIC0xKXtcbiAgICAgIGNoaWxkcmVuLnNsaWNlKDAsIGNoaWxkcmVuLmxlbmd0aCArIGxpbWl0KS5mb3JFYWNoKGNoaWxkID0+IHRoaXMucmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KGNoaWxkKSlcbiAgICB9IGVsc2UgaWYobGltaXQgJiYgbGltaXQgPj0gMCAmJiBjaGlsZHJlbi5sZW5ndGggPiBsaW1pdCl7XG4gICAgICBjaGlsZHJlbi5zbGljZShsaW1pdCkuZm9yRWFjaChjaGlsZCA9PiB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZCkpXG4gICAgfVxuICB9XG5cbiAgdHJhbnNpdGlvblBlbmRpbmdSZW1vdmVzKCl7XG4gICAgbGV0IHtwZW5kaW5nUmVtb3ZlcywgbGl2ZVNvY2tldH0gPSB0aGlzXG4gICAgaWYocGVuZGluZ1JlbW92ZXMubGVuZ3RoID4gMCl7XG4gICAgICBsaXZlU29ja2V0LnRyYW5zaXRpb25SZW1vdmVzKHBlbmRpbmdSZW1vdmVzKVxuICAgICAgbGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgcGVuZGluZ1JlbW92ZXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgbGV0IGNoaWxkID0gRE9NLmZpcnN0UGh4Q2hpbGQoZWwpXG4gICAgICAgICAgaWYoY2hpbGQpeyBsaXZlU29ja2V0LmRlc3Ryb3lWaWV3QnlFbChjaGlsZCkgfVxuICAgICAgICAgIGVsLnJlbW92ZSgpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMudHJhY2tBZnRlcihcInRyYW5zaXRpb25zRGlzY2FyZGVkXCIsIHBlbmRpbmdSZW1vdmVzKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBpc0NoYW5nZWRTZWxlY3QoZnJvbUVsLCB0b0VsKXtcbiAgICBpZighKGZyb21FbCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50KSB8fCBmcm9tRWwubXVsdGlwbGUpeyByZXR1cm4gZmFsc2UgfVxuICAgIGlmKGZyb21FbC5vcHRpb25zLmxlbmd0aCAhPT0gdG9FbC5vcHRpb25zLmxlbmd0aCl7IHJldHVybiB0cnVlIH1cblxuICAgIGxldCBmcm9tU2VsZWN0ZWQgPSBmcm9tRWwuc2VsZWN0ZWRPcHRpb25zWzBdXG4gICAgbGV0IHRvU2VsZWN0ZWQgPSB0b0VsLnNlbGVjdGVkT3B0aW9uc1swXVxuICAgIGlmKGZyb21TZWxlY3RlZCAmJiBmcm9tU2VsZWN0ZWQuaGFzQXR0cmlidXRlKFwic2VsZWN0ZWRcIikpe1xuICAgICAgdG9TZWxlY3RlZC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLCBmcm9tU2VsZWN0ZWQuZ2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIikpXG4gICAgfVxuXG4gICAgLy8gaW4gZ2VuZXJhbCB3ZSBoYXZlIHRvIGJlIHZlcnkgY2FyZWZ1bCB3aXRoIHVzaW5nIGlzRXF1YWxOb2RlIGFzIGl0IGRvZXMgbm90IGEgcmVsaWFibGVcbiAgICAvLyBET00gdHJlZSBlcXVhbGl0eSBjaGVjaywgYnV0IGZvciBzZWxlY3Rpb24gYXR0cmlidXRlcyBhbmQgb3B0aW9ucyBpdCB3b3JrcyBmaW5lXG4gICAgcmV0dXJuICFmcm9tRWwuaXNFcXVhbE5vZGUodG9FbClcbiAgfVxuXG4gIGlzQ0lEUGF0Y2goKXsgcmV0dXJuIHRoaXMuY2lkUGF0Y2ggfVxuXG4gIHNraXBDSURTaWJsaW5nKGVsKXtcbiAgICByZXR1cm4gZWwubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIGVsLmhhc0F0dHJpYnV0ZShQSFhfU0tJUClcbiAgfVxuXG4gIHRhcmdldENJRENvbnRhaW5lcihodG1sKXtcbiAgICBpZighdGhpcy5pc0NJRFBhdGNoKCkpeyByZXR1cm4gfVxuICAgIGxldCBbZmlyc3QsIC4uLnJlc3RdID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmNvbnRhaW5lciwgdGhpcy50YXJnZXRDSUQpXG4gICAgaWYocmVzdC5sZW5ndGggPT09IDAgJiYgRE9NLmNoaWxkTm9kZUxlbmd0aChodG1sKSA9PT0gMSl7XG4gICAgICByZXR1cm4gZmlyc3RcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpcnN0ICYmIGZpcnN0LnBhcmVudE5vZGVcbiAgICB9XG4gIH1cblxuICBpbmRleE9mKHBhcmVudCwgY2hpbGQpeyByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQuY2hpbGRyZW4pLmluZGV4T2YoY2hpbGQpIH1cbn1cbiIsICJpbXBvcnQge1xuICBDT01QT05FTlRTLFxuICBEWU5BTUlDUyxcbiAgVEVNUExBVEVTLFxuICBFVkVOVFMsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9TS0lQLFxuICBQSFhfTUFHSUNfSUQsXG4gIFJFUExZLFxuICBTVEFUSUMsXG4gIFRJVExFLFxuICBTVFJFQU0sXG4gIFJPT1QsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGlzT2JqZWN0LFxuICBsb2dFcnJvcixcbiAgaXNDaWQsXG59IGZyb20gXCIuL3V0aWxzXCJcblxuY29uc3QgVk9JRF9UQUdTID0gbmV3IFNldChbXG4gIFwiYXJlYVwiLFxuICBcImJhc2VcIixcbiAgXCJiclwiLFxuICBcImNvbFwiLFxuICBcImNvbW1hbmRcIixcbiAgXCJlbWJlZFwiLFxuICBcImhyXCIsXG4gIFwiaW1nXCIsXG4gIFwiaW5wdXRcIixcbiAgXCJrZXlnZW5cIixcbiAgXCJsaW5rXCIsXG4gIFwibWV0YVwiLFxuICBcInBhcmFtXCIsXG4gIFwic291cmNlXCIsXG4gIFwidHJhY2tcIixcbiAgXCJ3YnJcIlxuXSlcbmNvbnN0IHF1b3RlQ2hhcnMgPSBuZXcgU2V0KFtcIidcIiwgJ1wiJ10pXG5cbmV4cG9ydCBsZXQgbW9kaWZ5Um9vdCA9IChodG1sLCBhdHRycywgY2xlYXJJbm5lckhUTUwpID0+IHtcbiAgbGV0IGkgPSAwXG4gIGxldCBpbnNpZGVDb21tZW50ID0gZmFsc2VcbiAgbGV0IGJlZm9yZVRhZywgYWZ0ZXJUYWcsIHRhZywgdGFnTmFtZUVuZHNBdCwgaWQsIG5ld0hUTUxcblxuICBsZXQgbG9va2FoZWFkID0gaHRtbC5tYXRjaCgvXihcXHMqKD86PCEtLS4qPy0tPlxccyopKik8KFteXFxzXFwvPl0rKS8pXG4gIGlmKGxvb2thaGVhZCA9PT0gbnVsbCkgeyB0aHJvdyBuZXcgRXJyb3IoYG1hbGZvcm1lZCBodG1sICR7aHRtbH1gKSB9XG5cbiAgaSA9IGxvb2thaGVhZFswXS5sZW5ndGhcbiAgYmVmb3JlVGFnID0gbG9va2FoZWFkWzFdXG4gIHRhZyA9IGxvb2thaGVhZFsyXVxuICB0YWdOYW1lRW5kc0F0ID0gaVxuXG4gIC8vIFNjYW4gdGhlIG9wZW5pbmcgdGFnIGZvciBpZCwgaWYgdGhlcmUgaXMgYW55XG4gIGZvcihpOyBpIDwgaHRtbC5sZW5ndGg7IGkrKyl7XG4gICAgaWYoaHRtbC5jaGFyQXQoaSkgPT09IFwiPlwiICl7IGJyZWFrIH1cbiAgICBpZihodG1sLmNoYXJBdChpKSA9PT0gXCI9XCIpe1xuICAgICAgbGV0IGlzSWQgPSBodG1sLnNsaWNlKGkgLSAzLCBpKSA9PT0gXCIgaWRcIlxuICAgICAgaSsrO1xuICAgICAgbGV0IGNoYXIgPSBodG1sLmNoYXJBdChpKVxuICAgICAgaWYgKHF1b3RlQ2hhcnMuaGFzKGNoYXIpKSB7XG4gICAgICAgIGxldCBhdHRyU3RhcnRzQXQgPSBpXG4gICAgICAgIGkrK1xuICAgICAgICBmb3IoaTsgaSA8IGh0bWwubGVuZ3RoOyBpKyspe1xuICAgICAgICAgIGlmKGh0bWwuY2hhckF0KGkpID09PSBjaGFyKXsgYnJlYWsgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0lkKSB7XG4gICAgICAgICAgaWQgPSBodG1sLnNsaWNlKGF0dHJTdGFydHNBdCArIDEsIGkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGxldCBjbG9zZUF0ID0gaHRtbC5sZW5ndGggLSAxXG4gIGluc2lkZUNvbW1lbnQgPSBmYWxzZVxuICB3aGlsZShjbG9zZUF0ID49IGJlZm9yZVRhZy5sZW5ndGggKyB0YWcubGVuZ3RoKXtcbiAgICBsZXQgY2hhciA9IGh0bWwuY2hhckF0KGNsb3NlQXQpXG4gICAgaWYoaW5zaWRlQ29tbWVudCl7XG4gICAgICBpZihjaGFyID09PSBcIi1cIiAmJiBodG1sLnNsaWNlKGNsb3NlQXQgLSAzLCBjbG9zZUF0KSA9PT0gXCI8IS1cIil7XG4gICAgICAgIGluc2lkZUNvbW1lbnQgPSBmYWxzZVxuICAgICAgICBjbG9zZUF0IC09IDRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb3NlQXQgLT0gMVxuICAgICAgfVxuICAgIH0gZWxzZSBpZihjaGFyID09PSBcIj5cIiAmJiBodG1sLnNsaWNlKGNsb3NlQXQgLSAyLCBjbG9zZUF0KSA9PT0gXCItLVwiKXtcbiAgICAgIGluc2lkZUNvbW1lbnQgPSB0cnVlXG4gICAgICBjbG9zZUF0IC09IDNcbiAgICB9IGVsc2UgaWYoY2hhciA9PT0gXCI+XCIpe1xuICAgICAgYnJlYWtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xvc2VBdCAtPSAxXG4gICAgfVxuICB9XG4gIGFmdGVyVGFnID0gaHRtbC5zbGljZShjbG9zZUF0ICsgMSwgaHRtbC5sZW5ndGgpXG5cbiAgbGV0IGF0dHJzU3RyID1cbiAgICBPYmplY3Qua2V5cyhhdHRycylcbiAgICAubWFwKGF0dHIgPT4gYXR0cnNbYXR0cl0gPT09IHRydWUgPyBhdHRyIDogYCR7YXR0cn09XCIke2F0dHJzW2F0dHJdfVwiYClcbiAgICAuam9pbihcIiBcIilcblxuICBpZihjbGVhcklubmVySFRNTCl7XG4gICAgLy8gS2VlcCB0aGUgaWQgaWYgYW55XG4gICAgbGV0IGlkQXR0clN0ciA9IGlkID8gYCBpZD1cIiR7aWR9XCJgIDogXCJcIjtcbiAgICBpZihWT0lEX1RBR1MuaGFzKHRhZykpe1xuICAgICAgbmV3SFRNTCA9IGA8JHt0YWd9JHtpZEF0dHJTdHJ9JHthdHRyc1N0ciA9PT0gXCJcIiA/IFwiXCIgOiBcIiBcIn0ke2F0dHJzU3RyfS8+YFxuICAgIH0gZWxzZSB7XG4gICAgICBuZXdIVE1MID0gYDwke3RhZ30ke2lkQXR0clN0cn0ke2F0dHJzU3RyID09PSBcIlwiID8gXCJcIiA6IFwiIFwifSR7YXR0cnNTdHJ9PjwvJHt0YWd9PmBcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IHJlc3QgPSBodG1sLnNsaWNlKHRhZ05hbWVFbmRzQXQsIGNsb3NlQXQgKyAxKVxuICAgIG5ld0hUTUwgPSBgPCR7dGFnfSR7YXR0cnNTdHIgPT09IFwiXCIgPyBcIlwiIDogXCIgXCJ9JHthdHRyc1N0cn0ke3Jlc3R9YFxuICB9XG5cbiAgcmV0dXJuIFtuZXdIVE1MLCBiZWZvcmVUYWcsIGFmdGVyVGFnXVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlZCB7XG4gIHN0YXRpYyBleHRyYWN0KGRpZmYpe1xuICAgIGxldCB7W1JFUExZXTogcmVwbHksIFtFVkVOVFNdOiBldmVudHMsIFtUSVRMRV06IHRpdGxlfSA9IGRpZmZcbiAgICBkZWxldGUgZGlmZltSRVBMWV1cbiAgICBkZWxldGUgZGlmZltFVkVOVFNdXG4gICAgZGVsZXRlIGRpZmZbVElUTEVdXG4gICAgcmV0dXJuIHtkaWZmLCB0aXRsZSwgcmVwbHk6IHJlcGx5IHx8IG51bGwsIGV2ZW50czogZXZlbnRzIHx8IFtdfVxuICB9XG5cbiAgY29uc3RydWN0b3Iodmlld0lkLCByZW5kZXJlZCl7XG4gICAgdGhpcy52aWV3SWQgPSB2aWV3SWRcbiAgICB0aGlzLnJlbmRlcmVkID0ge31cbiAgICB0aGlzLm1hZ2ljSWQgPSAwXG4gICAgdGhpcy5tZXJnZURpZmYocmVuZGVyZWQpXG4gIH1cblxuICBwYXJlbnRWaWV3SWQoKXsgcmV0dXJuIHRoaXMudmlld0lkIH1cblxuICB0b1N0cmluZyhvbmx5Q2lkcyl7XG4gICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVUb1N0cmluZyh0aGlzLnJlbmRlcmVkLCB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdLCBvbmx5Q2lkcywgdHJ1ZSwge30pXG4gICAgcmV0dXJuIFtzdHIsIHN0cmVhbXNdXG4gIH1cblxuICByZWN1cnNpdmVUb1N0cmluZyhyZW5kZXJlZCwgY29tcG9uZW50cyA9IHJlbmRlcmVkW0NPTVBPTkVOVFNdLCBvbmx5Q2lkcywgY2hhbmdlVHJhY2tpbmcsIHJvb3RBdHRycyl7XG4gICAgb25seUNpZHMgPSBvbmx5Q2lkcyA/IG5ldyBTZXQob25seUNpZHMpIDogbnVsbFxuICAgIGxldCBvdXRwdXQgPSB7YnVmZmVyOiBcIlwiLCBjb21wb25lbnRzOiBjb21wb25lbnRzLCBvbmx5Q2lkczogb25seUNpZHMsIHN0cmVhbXM6IG5ldyBTZXQoKX1cbiAgICB0aGlzLnRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCBudWxsLCBvdXRwdXQsIGNoYW5nZVRyYWNraW5nLCByb290QXR0cnMpXG4gICAgcmV0dXJuIFtvdXRwdXQuYnVmZmVyLCBvdXRwdXQuc3RyZWFtc11cbiAgfVxuXG4gIGNvbXBvbmVudENJRHMoZGlmZil7IHJldHVybiBPYmplY3Qua2V5cyhkaWZmW0NPTVBPTkVOVFNdIHx8IHt9KS5tYXAoaSA9PiBwYXJzZUludChpKSkgfVxuXG4gIGlzQ29tcG9uZW50T25seURpZmYoZGlmZil7XG4gICAgaWYoIWRpZmZbQ09NUE9ORU5UU10peyByZXR1cm4gZmFsc2UgfVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhkaWZmKS5sZW5ndGggPT09IDFcbiAgfVxuXG4gIGdldENvbXBvbmVudChkaWZmLCBjaWQpeyByZXR1cm4gZGlmZltDT01QT05FTlRTXVtjaWRdIH1cblxuICByZXNldFJlbmRlcihjaWQpe1xuICAgIC8vIHdlIGFyZSByYWNpbmcgYSBjb21wb25lbnQgZGVzdHJveSwgaXQgY291bGQgbm90IGV4aXN0LCBzb1xuICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBzZXQgcmVzZXQgb24gdW5kZWZpbmVkXG4gICAgaWYodGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXVtjaWRdKXtcbiAgICAgIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11bY2lkXS5yZXNldCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBtZXJnZURpZmYoZGlmZil7XG4gICAgbGV0IG5ld2MgPSBkaWZmW0NPTVBPTkVOVFNdXG4gICAgbGV0IGNhY2hlID0ge31cbiAgICBkZWxldGUgZGlmZltDT01QT05FTlRTXVxuICAgIHRoaXMucmVuZGVyZWQgPSB0aGlzLm11dGFibGVNZXJnZSh0aGlzLnJlbmRlcmVkLCBkaWZmKVxuICAgIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10gPSB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdIHx8IHt9XG5cbiAgICBpZihuZXdjKXtcbiAgICAgIGxldCBvbGRjID0gdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXVxuXG4gICAgICBmb3IobGV0IGNpZCBpbiBuZXdjKXtcbiAgICAgICAgbmV3Y1tjaWRdID0gdGhpcy5jYWNoZWRGaW5kQ29tcG9uZW50KGNpZCwgbmV3Y1tjaWRdLCBvbGRjLCBuZXdjLCBjYWNoZSlcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBjaWQgaW4gbmV3Yyl7IG9sZGNbY2lkXSA9IG5ld2NbY2lkXSB9XG4gICAgICBkaWZmW0NPTVBPTkVOVFNdID0gbmV3Y1xuICAgIH1cbiAgfVxuXG4gIGNhY2hlZEZpbmRDb21wb25lbnQoY2lkLCBjZGlmZiwgb2xkYywgbmV3YywgY2FjaGUpe1xuICAgIGlmKGNhY2hlW2NpZF0pe1xuICAgICAgcmV0dXJuIGNhY2hlW2NpZF1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5kaWZmLCBzdGF0LCBzY2lkID0gY2RpZmZbU1RBVElDXVxuXG4gICAgICBpZihpc0NpZChzY2lkKSl7XG4gICAgICAgIGxldCB0ZGlmZlxuXG4gICAgICAgIGlmKHNjaWQgPiAwKXtcbiAgICAgICAgICB0ZGlmZiA9IHRoaXMuY2FjaGVkRmluZENvbXBvbmVudChzY2lkLCBuZXdjW3NjaWRdLCBvbGRjLCBuZXdjLCBjYWNoZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZGlmZiA9IG9sZGNbLXNjaWRdXG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ID0gdGRpZmZbU1RBVElDXVxuICAgICAgICBuZGlmZiA9IHRoaXMuY2xvbmVNZXJnZSh0ZGlmZiwgY2RpZmYsIHRydWUpXG4gICAgICAgIG5kaWZmW1NUQVRJQ10gPSBzdGF0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZGlmZiA9IGNkaWZmW1NUQVRJQ10gIT09IHVuZGVmaW5lZCB8fCBvbGRjW2NpZF0gPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgY2RpZmYgOiB0aGlzLmNsb25lTWVyZ2Uob2xkY1tjaWRdLCBjZGlmZiwgZmFsc2UpXG4gICAgICB9XG5cbiAgICAgIGNhY2hlW2NpZF0gPSBuZGlmZlxuICAgICAgcmV0dXJuIG5kaWZmXG4gICAgfVxuICB9XG5cbiAgbXV0YWJsZU1lcmdlKHRhcmdldCwgc291cmNlKXtcbiAgICBpZihzb3VyY2VbU1RBVElDXSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiBzb3VyY2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb011dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSlcbiAgICAgIHJldHVybiB0YXJnZXRcbiAgICB9XG4gIH1cblxuICBkb011dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgZm9yKGxldCBrZXkgaW4gc291cmNlKXtcbiAgICAgIGxldCB2YWwgPSBzb3VyY2Vba2V5XVxuICAgICAgbGV0IHRhcmdldFZhbCA9IHRhcmdldFtrZXldXG4gICAgICBsZXQgaXNPYmpWYWwgPSBpc09iamVjdCh2YWwpXG4gICAgICBpZihpc09ialZhbCAmJiB2YWxbU1RBVElDXSA9PT0gdW5kZWZpbmVkICYmIGlzT2JqZWN0KHRhcmdldFZhbCkpe1xuICAgICAgICB0aGlzLmRvTXV0YWJsZU1lcmdlKHRhcmdldFZhbCwgdmFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWxcbiAgICAgIH1cbiAgICB9XG4gICAgaWYodGFyZ2V0W1JPT1RdKXtcbiAgICAgIHRhcmdldC5uZXdSZW5kZXIgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgLy8gTWVyZ2VzIGNpZCB0cmVlcyB0b2dldGhlciwgY29weWluZyBzdGF0aWNzIGZyb20gc291cmNlIHRyZWUuXG4gIC8vXG4gIC8vIFRoZSBgcHJ1bmVNYWdpY0lkYCBpcyBwYXNzZWQgdG8gY29udHJvbCBwcnVuaW5nIHRoZSBtYWdpY0lkIG9mIHRoZVxuICAvLyB0YXJnZXQuIFdlIG11c3QgYWx3YXlzIHBydW5lIHRoZSBtYWdpY0lkIHdoZW4gd2UgYXJlIHNoYXJpbmcgc3RhdGljc1xuICAvLyBmcm9tIGFub3RoZXIgY29tcG9uZW50LiBJZiBub3QgcHJ1bmluZywgd2UgcmVwbGljYXRlIHRoZSBsb2dpYyBmcm9tXG4gIC8vIG11dGFibGVNZXJnZSwgd2hlcmUgd2Ugc2V0IG5ld1JlbmRlciB0byB0cnVlIGlmIHRoZXJlIGlzIGEgcm9vdFxuICAvLyAoZWZmZWN0aXZlbHkgZm9yY2luZyB0aGUgbmV3IHZlcnNpb24gdG8gYmUgcmVuZGVyZWQgaW5zdGVhZCBvZiBza2lwcGVkKVxuICAvL1xuICBjbG9uZU1lcmdlKHRhcmdldCwgc291cmNlLCBwcnVuZU1hZ2ljSWQpe1xuICAgIGxldCBtZXJnZWQgPSB7Li4udGFyZ2V0LCAuLi5zb3VyY2V9XG4gICAgZm9yKGxldCBrZXkgaW4gbWVyZ2VkKXtcbiAgICAgIGxldCB2YWwgPSBzb3VyY2Vba2V5XVxuICAgICAgbGV0IHRhcmdldFZhbCA9IHRhcmdldFtrZXldXG4gICAgICBpZihpc09iamVjdCh2YWwpICYmIHZhbFtTVEFUSUNdID09PSB1bmRlZmluZWQgJiYgaXNPYmplY3QodGFyZ2V0VmFsKSl7XG4gICAgICAgIG1lcmdlZFtrZXldID0gdGhpcy5jbG9uZU1lcmdlKHRhcmdldFZhbCwgdmFsLCBwcnVuZU1hZ2ljSWQpXG4gICAgICB9IGVsc2UgaWYodmFsID09PSB1bmRlZmluZWQgJiYgaXNPYmplY3QodGFyZ2V0VmFsKSl7XG4gICAgICAgIG1lcmdlZFtrZXldID0gdGhpcy5jbG9uZU1lcmdlKHRhcmdldFZhbCwge30sIHBydW5lTWFnaWNJZClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYocHJ1bmVNYWdpY0lkKXtcbiAgICAgIGRlbGV0ZSBtZXJnZWQubWFnaWNJZFxuICAgICAgZGVsZXRlIG1lcmdlZC5uZXdSZW5kZXJcbiAgICB9IGVsc2UgaWYodGFyZ2V0W1JPT1RdKXtcbiAgICAgIG1lcmdlZC5uZXdSZW5kZXIgPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiBtZXJnZWRcbiAgfVxuXG4gIGNvbXBvbmVudFRvU3RyaW5nKGNpZCl7XG4gICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVDSURUb1N0cmluZyh0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdLCBjaWQsIG51bGwpXG4gICAgbGV0IFtzdHJpcHBlZEhUTUwsIF9iZWZvcmUsIF9hZnRlcl0gPSBtb2RpZnlSb290KHN0ciwge30pXG4gICAgcmV0dXJuIFtzdHJpcHBlZEhUTUwsIHN0cmVhbXNdXG4gIH1cblxuICBwcnVuZUNJRHMoY2lkcyl7XG4gICAgY2lkcy5mb3JFYWNoKGNpZCA9PiBkZWxldGUgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXVtjaWRdKVxuICB9XG5cbiAgLy8gcHJpdmF0ZVxuXG4gIGdldCgpeyByZXR1cm4gdGhpcy5yZW5kZXJlZCB9XG5cbiAgaXNOZXdGaW5nZXJwcmludChkaWZmID0ge30peyByZXR1cm4gISFkaWZmW1NUQVRJQ10gfVxuXG4gIHRlbXBsYXRlU3RhdGljKHBhcnQsIHRlbXBsYXRlcyl7XG4gICAgaWYodHlwZW9mIChwYXJ0KSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIHRlbXBsYXRlc1twYXJ0XVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFydFxuICAgIH1cbiAgfVxuXG4gIG5leHRNYWdpY0lEKCl7XG4gICAgdGhpcy5tYWdpY0lkKytcbiAgICByZXR1cm4gYG0ke3RoaXMubWFnaWNJZH0tJHt0aGlzLnBhcmVudFZpZXdJZCgpfWBcbiAgfVxuXG4gIC8vIENvbnZlcnRzIHJlbmRlcmVkIHRyZWUgdG8gb3V0cHV0IGJ1ZmZlci5cbiAgLy9cbiAgLy8gY2hhbmdlVHJhY2tpbmcgY29udHJvbHMgaWYgd2UgY2FuIGFwcGx5IHRoZSBQSFhfU0tJUCBvcHRpbWl6YXRpb24uXG4gIC8vIEl0IGlzIGRpc2FibGVkIGZvciBjb21wcmVoZW5zaW9ucyBzaW5jZSB3ZSBtdXN0IHJlLXJlbmRlciB0aGUgZW50aXJlIGNvbGxlY3Rpb25cbiAgLy8gYW5kIG5vIGluZGl2aWR1YWwgZWxlbWVudCBpcyB0cmFja2VkIGluc2lkZSB0aGUgY29tcHJlaGVuc2lvbi5cbiAgdG9PdXRwdXRCdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0LCBjaGFuZ2VUcmFja2luZywgcm9vdEF0dHJzID0ge30pe1xuICAgIGlmKHJlbmRlcmVkW0RZTkFNSUNTXSl7IHJldHVybiB0aGlzLmNvbXByZWhlbnNpb25Ub0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpIH1cbiAgICBsZXQge1tTVEFUSUNdOiBzdGF0aWNzfSA9IHJlbmRlcmVkXG4gICAgc3RhdGljcyA9IHRoaXMudGVtcGxhdGVTdGF0aWMoc3RhdGljcywgdGVtcGxhdGVzKVxuICAgIGxldCBpc1Jvb3QgPSByZW5kZXJlZFtST09UXVxuICAgIGxldCBwcmV2QnVmZmVyID0gb3V0cHV0LmJ1ZmZlclxuICAgIGlmKGlzUm9vdCl7IG91dHB1dC5idWZmZXIgPSBcIlwiIH1cblxuICAgIC8vIHRoaXMgY29uZGl0aW9uIGlzIGNhbGxlZCB3aGVuIGZpcnN0IHJlbmRlcmluZyBhbiBvcHRpbWl6YWJsZSBmdW5jdGlvbiBjb21wb25lbnQuXG4gICAgLy8gTEMgaGF2ZSB0aGVpciBtYWdpY0lkIHByZXZpb3VzbHkgc2V0XG4gICAgaWYoY2hhbmdlVHJhY2tpbmcgJiYgaXNSb290ICYmICFyZW5kZXJlZC5tYWdpY0lkKXtcbiAgICAgIHJlbmRlcmVkLm5ld1JlbmRlciA9IHRydWVcbiAgICAgIHJlbmRlcmVkLm1hZ2ljSWQgPSB0aGlzLm5leHRNYWdpY0lEKClcbiAgICB9XG5cbiAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbMF1cbiAgICBmb3IobGV0IGkgPSAxOyBpIDwgc3RhdGljcy5sZW5ndGg7IGkrKyl7XG4gICAgICB0aGlzLmR5bmFtaWNUb0J1ZmZlcihyZW5kZXJlZFtpIC0gMV0sIHRlbXBsYXRlcywgb3V0cHV0LCBjaGFuZ2VUcmFja2luZylcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1tpXVxuICAgIH1cblxuICAgIC8vIEFwcGxpZXMgdGhlIHJvb3QgdGFnIFwic2tpcFwiIG9wdGltaXphdGlvbiBpZiBzdXBwb3J0ZWQsIHdoaWNoIGNsZWFyc1xuICAgIC8vIHRoZSByb290IHRhZyBhdHRyaWJ1dGVzIGFuZCBpbm5lckhUTUwsIGFuZCBvbmx5IG1haW50YWlucyB0aGUgbWFnaWNJZC5cbiAgICAvLyBXZSBjYW4gb25seSBza2lwIHdoZW4gY2hhbmdlVHJhY2tpbmcgaXMgc3VwcG9ydGVkIChvdXRzaWRlIG9mIGEgY29tcHJlaGVuc2lvbiksXG4gICAgLy8gYW5kIHdoZW4gdGhlIHJvb3QgZWxlbWVudCBoYXNuJ3QgZXhwZXJpZW5jZWQgYW4gdW5yZW5kZXJlZCBtZXJnZSAobmV3UmVuZGVyIHRydWUpLlxuICAgIGlmKGlzUm9vdCl7XG4gICAgICBsZXQgc2tpcCA9IGZhbHNlXG4gICAgICBsZXQgYXR0cnNcbiAgICAgIC8vIFdoZW4gYSBMQyBpcyByZS1hZGRlZCB0byB0aGUgcGFnZSwgd2UgbmVlZCB0byByZS1yZW5kZXIgdGhlIGVudGlyZSBMQyB0cmVlLFxuICAgICAgLy8gdGhlcmVmb3JlIGNoYW5nZVRyYWNraW5nIGlzIGZhbHNlOyBob3dldmVyLCB3ZSBuZWVkIHRvIGtlZXAgYWxsIHRoZSBtYWdpY0lkc1xuICAgICAgLy8gZnJvbSBhbnkgZnVuY3Rpb24gY29tcG9uZW50IHNvIHRoZSBuZXh0IHRpbWUgdGhlIExDIGlzIHVwZGF0ZWQsIHdlIGNhbiBhcHBseVxuICAgICAgLy8gdGhlIHNraXAgb3B0aW1pemF0aW9uXG4gICAgICBpZihjaGFuZ2VUcmFja2luZyB8fCByZW5kZXJlZC5tYWdpY0lkKXtcbiAgICAgICAgc2tpcCA9IGNoYW5nZVRyYWNraW5nICYmICFyZW5kZXJlZC5uZXdSZW5kZXJcbiAgICAgICAgYXR0cnMgPSB7W1BIWF9NQUdJQ19JRF06IHJlbmRlcmVkLm1hZ2ljSWQsIC4uLnJvb3RBdHRyc31cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF0dHJzID0gcm9vdEF0dHJzXG4gICAgICB9XG4gICAgICBpZihza2lwKXsgYXR0cnNbUEhYX1NLSVBdID0gdHJ1ZSB9XG4gICAgICBsZXQgW25ld1Jvb3QsIGNvbW1lbnRCZWZvcmUsIGNvbW1lbnRBZnRlcl0gPSBtb2RpZnlSb290KG91dHB1dC5idWZmZXIsIGF0dHJzLCBza2lwKVxuICAgICAgcmVuZGVyZWQubmV3UmVuZGVyID0gZmFsc2VcbiAgICAgIG91dHB1dC5idWZmZXIgPSBwcmV2QnVmZmVyICsgY29tbWVudEJlZm9yZSArIG5ld1Jvb3QgKyBjb21tZW50QWZ0ZXJcbiAgICB9XG4gIH1cblxuICBjb21wcmVoZW5zaW9uVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBsZXQge1tEWU5BTUlDU106IGR5bmFtaWNzLCBbU1RBVElDXTogc3RhdGljcywgW1NUUkVBTV06IHN0cmVhbX0gPSByZW5kZXJlZFxuICAgIGxldCBbX3JlZiwgX2luc2VydHMsIGRlbGV0ZUlkcywgcmVzZXRdID0gc3RyZWFtIHx8IFtudWxsLCB7fSwgW10sIG51bGxdXG4gICAgc3RhdGljcyA9IHRoaXMudGVtcGxhdGVTdGF0aWMoc3RhdGljcywgdGVtcGxhdGVzKVxuICAgIGxldCBjb21wVGVtcGxhdGVzID0gdGVtcGxhdGVzIHx8IHJlbmRlcmVkW1RFTVBMQVRFU11cbiAgICBmb3IobGV0IGQgPSAwOyBkIDwgZHluYW1pY3MubGVuZ3RoOyBkKyspe1xuICAgICAgbGV0IGR5bmFtaWMgPSBkeW5hbWljc1tkXVxuICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzWzBdXG4gICAgICBmb3IobGV0IGkgPSAxOyBpIDwgc3RhdGljcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIC8vIEluc2lkZSBhIGNvbXByZWhlbnNpb24sIHdlIGRvbid0IHRyYWNrIGhvdyBkeW5hbWljcyBjaGFuZ2VcbiAgICAgICAgLy8gb3ZlciB0aW1lIChhbmQgZmVhdHVyZXMgbGlrZSBzdHJlYW1zIHdvdWxkIG1ha2UgdGhhdCBpbXBvc3NpYmxlXG4gICAgICAgIC8vIHVubGVzcyB3ZSBtb3ZlIHRoZSBzdHJlYW0gZGlmZmluZyBhd2F5IGZyb20gbW9ycGhkb20pLFxuICAgICAgICAvLyBzbyB3ZSBjYW4ndCBwZXJmb3JtIHJvb3QgY2hhbmdlIHRyYWNraW5nLlxuICAgICAgICBsZXQgY2hhbmdlVHJhY2tpbmcgPSBmYWxzZVxuICAgICAgICB0aGlzLmR5bmFtaWNUb0J1ZmZlcihkeW5hbWljW2kgLSAxXSwgY29tcFRlbXBsYXRlcywgb3V0cHV0LCBjaGFuZ2VUcmFja2luZylcbiAgICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzW2ldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKHJlbmRlcmVkW0RZTkFNSUNTXS5sZW5ndGggPiAwIHx8IGRlbGV0ZUlkcy5sZW5ndGggPiAwIHx8IHJlc2V0KSl7XG4gICAgICBkZWxldGUgcmVuZGVyZWRbU1RSRUFNXVxuICAgICAgcmVuZGVyZWRbRFlOQU1JQ1NdID0gW11cbiAgICAgIG91dHB1dC5zdHJlYW1zLmFkZChzdHJlYW0pXG4gICAgfVxuICB9XG5cbiAgZHluYW1pY1RvQnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCwgY2hhbmdlVHJhY2tpbmcpe1xuICAgIGlmKHR5cGVvZiAocmVuZGVyZWQpID09PSBcIm51bWJlclwiKXtcbiAgICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlQ0lEVG9TdHJpbmcob3V0cHV0LmNvbXBvbmVudHMsIHJlbmRlcmVkLCBvdXRwdXQub25seUNpZHMpXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0clxuICAgICAgb3V0cHV0LnN0cmVhbXMgPSBuZXcgU2V0KFsuLi5vdXRwdXQuc3RyZWFtcywgLi4uc3RyZWFtc10pXG4gICAgfSBlbHNlIGlmKGlzT2JqZWN0KHJlbmRlcmVkKSl7XG4gICAgICB0aGlzLnRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCwgY2hhbmdlVHJhY2tpbmcsIHt9KVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHJlbmRlcmVkXG4gICAgfVxuICB9XG5cbiAgcmVjdXJzaXZlQ0lEVG9TdHJpbmcoY29tcG9uZW50cywgY2lkLCBvbmx5Q2lkcyl7XG4gICAgbGV0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbY2lkXSB8fCBsb2dFcnJvcihgbm8gY29tcG9uZW50IGZvciBDSUQgJHtjaWR9YCwgY29tcG9uZW50cylcbiAgICBsZXQgYXR0cnMgPSB7W1BIWF9DT01QT05FTlRdOiBjaWR9XG4gICAgbGV0IHNraXAgPSBvbmx5Q2lkcyAmJiAhb25seUNpZHMuaGFzKGNpZClcbiAgICAvLyBUd28gb3B0aW1pemF0aW9uIHBhdGhzIGFwcGx5IGhlcmU6XG4gICAgLy9cbiAgICAvLyAgIDEuIFRoZSBvbmx5Q2lkcyBvcHRpbWl6YXRpb24gd29ya3MgYnkgdGhlIHNlcnZlciBkaWZmIHRlbGxpbmcgdXMgb25seSBzcGVjaWZpY1xuICAgIC8vICAgICBjaWQncyBoYXZlIGNoYW5nZWQuIFRoaXMgYWxsb3dzIHVzIHRvIHNraXAgcmVuZGVyaW5nIGFueSBjb21wb25lbnQgdGhhdCBoYXNuJ3QgY2hhbmdlZCxcbiAgICAvLyAgICAgd2hpY2ggdWx0aW1hdGVseSBzZXRzIFBIWF9TS0lQIHJvb3QgYXR0cmlidXRlIGFuZCBhdm9pZHMgcmVuZGVyaW5nIHRoZSBpbm5lckhUTUwuXG4gICAgLy9cbiAgICAvLyAgIDIuIFRoZSByb290IFBIWF9TS0lQIG9wdGltaXphdGlvbiBnZW5lcmFsaXplcyB0byBhbGwgSEVFeCBmdW5jdGlvbiBjb21wb25lbnRzLCBhbmRcbiAgICAvLyAgICAgd29ya3MgaW4gdGhlIHNhbWUgUEhYX1NLSVAgYXR0cmlidXRlIGZhc2hpb24gYXMgMSwgYnV0IHRoZSBuZXdSZW5kZXIgdHJhY2tpbmcgaXMgZG9uZVxuICAgIC8vICAgICBhdCB0aGUgZ2VuZXJhbCBkaWZmIG1lcmdlIGxldmVsLiBJZiB3ZSBtZXJnZSBhIGRpZmYgd2l0aCBuZXcgZHluYW1pY3MsIHdlIG5lY2Vzc2FyaWx5IGhhdmVcbiAgICAvLyAgICAgZXhwZXJpZW5jZWQgYSBjaGFuZ2Ugd2hpY2ggbXVzdCBiZSBhIG5ld1JlbmRlciwgYW5kIHRodXMgd2UgY2FuJ3Qgc2tpcCB0aGUgcmVuZGVyLlxuICAgIC8vXG4gICAgLy8gQm90aCBvcHRpbWl6YXRpb24gZmxvd3MgYXBwbHkgaGVyZS4gbmV3UmVuZGVyIGlzIHNldCBiYXNlZCBvbiB0aGUgb25seUNpZHMgb3B0aW1pemF0aW9uLCBhbmRcbiAgICAvLyB3ZSB0cmFjayBhIGRldGVybWluaXN0aWMgbWFnaWNJZCBiYXNlZCBvbiB0aGUgY2lkLlxuICAgIC8vXG4gICAgLy8gY2hhbmdlVHJhY2tpbmcgaXMgYWJvdXQgdGhlIGVudGlyZSB0cmVlXG4gICAgLy8gbmV3UmVuZGVyIGlzIGFib3V0IHRoZSBjdXJyZW50IHJvb3QgaW4gdGhlIHRyZWVcbiAgICAvL1xuICAgIC8vIEJ5IGRlZmF1bHQgY2hhbmdlVHJhY2tpbmcgaXMgZW5hYmxlZCwgYnV0IHdlIHNwZWNpYWwgY2FzZSB0aGUgZmxvdyB3aGVyZSB0aGUgY2xpZW50IGlzIHBydW5pbmdcbiAgICAvLyBjaWRzIGFuZCB0aGUgc2VydmVyIGFkZHMgdGhlIGNvbXBvbmVudCBiYWNrLiBJbiBzdWNoIGNhc2VzLCB3ZSBleHBsaWNpdGx5IGRpc2FibGUgY2hhbmdlVHJhY2tpbmdcbiAgICAvLyB3aXRoIHJlc2V0UmVuZGVyIGZvciB0aGlzIGNpZCwgdGhlbiByZS1lbmFibGUgaXQgYWZ0ZXIgdGhlIHJlY3Vyc2l2ZSBjYWxsIHRvIHNraXAgdGhlIG9wdGltaXphdGlvblxuICAgIC8vIGZvciB0aGUgZW50aXJlIGNvbXBvbmVudCB0cmVlLlxuICAgIGNvbXBvbmVudC5uZXdSZW5kZXIgPSAhc2tpcFxuICAgIGNvbXBvbmVudC5tYWdpY0lkID0gYGMke2NpZH0tJHt0aGlzLnBhcmVudFZpZXdJZCgpfWBcbiAgICAvLyBlbmFibGUgY2hhbmdlIHRyYWNraW5nIGFzIGxvbmcgYXMgdGhlIGNvbXBvbmVudCBoYXNuJ3QgYmVlbiByZXNldFxuICAgIGxldCBjaGFuZ2VUcmFja2luZyA9ICFjb21wb25lbnQucmVzZXRcbiAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVUb1N0cmluZyhjb21wb25lbnQsIGNvbXBvbmVudHMsIG9ubHlDaWRzLCBjaGFuZ2VUcmFja2luZywgYXR0cnMpXG4gICAgLy8gZGlzYWJsZSByZXNldCBhZnRlciB3ZSd2ZSByZW5kZXJlZFxuICAgIGRlbGV0ZSBjb21wb25lbnQucmVzZXRcblxuICAgIHJldHVybiBbaHRtbCwgc3RyZWFtc11cbiAgfVxufVxuIiwgImxldCB2aWV3SG9va0lEID0gMVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlld0hvb2sge1xuICBzdGF0aWMgbWFrZUlEKCl7IHJldHVybiB2aWV3SG9va0lEKysgfVxuICBzdGF0aWMgZWxlbWVudElEKGVsKXsgcmV0dXJuIGVsLnBoeEhvb2tJZCB9XG5cbiAgY29uc3RydWN0b3IodmlldywgZWwsIGNhbGxiYWNrcyl7XG4gICAgdGhpcy5fX3ZpZXcgPSB2aWV3XG4gICAgdGhpcy5saXZlU29ja2V0ID0gdmlldy5saXZlU29ja2V0XG4gICAgdGhpcy5fX2NhbGxiYWNrcyA9IGNhbGxiYWNrc1xuICAgIHRoaXMuX19saXN0ZW5lcnMgPSBuZXcgU2V0KClcbiAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSBmYWxzZVxuICAgIHRoaXMuZWwgPSBlbFxuICAgIHRoaXMuZWwucGh4SG9va0lkID0gdGhpcy5jb25zdHJ1Y3Rvci5tYWtlSUQoKVxuICAgIGZvcihsZXQga2V5IGluIHRoaXMuX19jYWxsYmFja3MpeyB0aGlzW2tleV0gPSB0aGlzLl9fY2FsbGJhY2tzW2tleV0gfVxuICB9XG5cbiAgX19tb3VudGVkKCl7IHRoaXMubW91bnRlZCAmJiB0aGlzLm1vdW50ZWQoKSB9XG4gIF9fdXBkYXRlZCgpeyB0aGlzLnVwZGF0ZWQgJiYgdGhpcy51cGRhdGVkKCkgfVxuICBfX2JlZm9yZVVwZGF0ZSgpeyB0aGlzLmJlZm9yZVVwZGF0ZSAmJiB0aGlzLmJlZm9yZVVwZGF0ZSgpIH1cbiAgX19kZXN0cm95ZWQoKXsgdGhpcy5kZXN0cm95ZWQgJiYgdGhpcy5kZXN0cm95ZWQoKSB9XG4gIF9fcmVjb25uZWN0ZWQoKXtcbiAgICBpZih0aGlzLl9faXNEaXNjb25uZWN0ZWQpe1xuICAgICAgdGhpcy5fX2lzRGlzY29ubmVjdGVkID0gZmFsc2VcbiAgICAgIHRoaXMucmVjb25uZWN0ZWQgJiYgdGhpcy5yZWNvbm5lY3RlZCgpXG4gICAgfVxuICB9XG4gIF9fZGlzY29ubmVjdGVkKCl7XG4gICAgdGhpcy5fX2lzRGlzY29ubmVjdGVkID0gdHJ1ZVxuICAgIHRoaXMuZGlzY29ubmVjdGVkICYmIHRoaXMuZGlzY29ubmVjdGVkKClcbiAgfVxuXG4gIHB1c2hFdmVudChldmVudCwgcGF5bG9hZCA9IHt9LCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHJldHVybiB0aGlzLl9fdmlldy5wdXNoSG9va0V2ZW50KHRoaXMuZWwsIG51bGwsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5KVxuICB9XG5cbiAgcHVzaEV2ZW50VG8ocGh4VGFyZ2V0LCBldmVudCwgcGF5bG9hZCA9IHt9LCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHJldHVybiB0aGlzLl9fdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgKHZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgcmV0dXJuIHZpZXcucHVzaEhvb2tFdmVudCh0aGlzLmVsLCB0YXJnZXRDdHgsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5KVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVFdmVudChldmVudCwgY2FsbGJhY2spe1xuICAgIGxldCBjYWxsYmFja1JlZiA9IChjdXN0b21FdmVudCwgYnlwYXNzKSA9PiBieXBhc3MgPyBldmVudCA6IGNhbGxiYWNrKGN1c3RvbUV2ZW50LmRldGFpbClcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihgcGh4OiR7ZXZlbnR9YCwgY2FsbGJhY2tSZWYpXG4gICAgdGhpcy5fX2xpc3RlbmVycy5hZGQoY2FsbGJhY2tSZWYpXG4gICAgcmV0dXJuIGNhbGxiYWNrUmVmXG4gIH1cblxuICByZW1vdmVIYW5kbGVFdmVudChjYWxsYmFja1JlZil7XG4gICAgbGV0IGV2ZW50ID0gY2FsbGJhY2tSZWYobnVsbCwgdHJ1ZSlcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihgcGh4OiR7ZXZlbnR9YCwgY2FsbGJhY2tSZWYpXG4gICAgdGhpcy5fX2xpc3RlbmVycy5kZWxldGUoY2FsbGJhY2tSZWYpXG4gIH1cblxuICB1cGxvYWQobmFtZSwgZmlsZXMpe1xuICAgIHJldHVybiB0aGlzLl9fdmlldy5kaXNwYXRjaFVwbG9hZHMobnVsbCwgbmFtZSwgZmlsZXMpXG4gIH1cblxuICB1cGxvYWRUbyhwaHhUYXJnZXQsIG5hbWUsIGZpbGVzKXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHZpZXcuZGlzcGF0Y2hVcGxvYWRzKHRhcmdldEN0eCwgbmFtZSwgZmlsZXMpXG4gICAgfSlcbiAgfVxuXG4gIF9fY2xlYW51cF9fKCl7XG4gICAgdGhpcy5fX2xpc3RlbmVycy5mb3JFYWNoKGNhbGxiYWNrUmVmID0+IHRoaXMucmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpKVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCxcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgQ09OU0VDVVRJVkVfUkVMT0FEUyxcbiAgUEhYX0FVVE9fUkVDT1ZFUixcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgUEhYX0RJU0FCTEVfV0lUSCxcbiAgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLFxuICBQSFhfRElTQUJMRUQsXG4gIFBIWF9MT0FESU5HX0NMQVNTLFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0VSUk9SX0NMQVNTLFxuICBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTLFxuICBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfRkVFREJBQ0tfR1JPVVAsXG4gIFBIWF9IQVNfRk9DVVNFRCxcbiAgUEhYX0hBU19TVUJNSVRURUQsXG4gIFBIWF9IT09LLFxuICBQSFhfUEFHRV9MT0FESU5HLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfUFJPR1JFU1MsXG4gIFBIWF9SRUFET05MWSxcbiAgUEhYX1JFRixcbiAgUEhYX1JFRl9TUkMsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1RSQUNLX1NUQVRJQyxcbiAgUEhYX1RSQUNLX1VQTE9BRFMsXG4gIFBIWF9VUERBVEUsXG4gIFBIWF9VUExPQURfUkVGLFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX01BSU4sXG4gIFBIWF9NT1VOVEVELFxuICBQVVNIX1RJTUVPVVQsXG4gIFBIWF9WSUVXUE9SVF9UT1AsXG4gIFBIWF9WSUVXUE9SVF9CT1RUT00sXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb25lLFxuICBjbG9zZXN0UGh4QmluZGluZyxcbiAgaXNFbXB0eSxcbiAgaXNFcXVhbE9iaixcbiAgbG9nRXJyb3IsXG4gIG1heWJlLFxuICBpc0NpZCxcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQnJvd3NlciBmcm9tIFwiLi9icm93c2VyXCJcbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBET01QYXRjaCBmcm9tIFwiLi9kb21fcGF0Y2hcIlxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBSZW5kZXJlZCBmcm9tIFwiLi9yZW5kZXJlZFwiXG5pbXBvcnQgVmlld0hvb2sgZnJvbSBcIi4vdmlld19ob29rXCJcbmltcG9ydCBKUyBmcm9tIFwiLi9qc1wiXG5cbmxldCBzZXJpYWxpemVGb3JtID0gKGZvcm0sIG1ldGFkYXRhLCBvbmx5TmFtZXMgPSBbXSkgPT4ge1xuICBjb25zdCB7c3VibWl0dGVyLCAuLi5tZXRhfSA9IG1ldGFkYXRhXG5cbiAgLy8gV2UgbXVzdCBpbmplY3QgdGhlIHN1Ym1pdHRlciBpbiB0aGUgb3JkZXIgdGhhdCBpdCBleGlzdHMgaW4gdGhlIERPTVxuICAvLyByZWxlYXRpdmUgdG8gb3RoZXIgaW5wdXRzLiBGb3IgZXhhbXBsZSwgZm9yIGNoZWNrYm94IGdyb3VwcywgdGhlIG9yZGVyIG11c3QgYmUgbWFpbnRhaW5lZC5cbiAgbGV0IGluamVjdGVkRWxlbWVudFxuICBpZihzdWJtaXR0ZXIgJiYgc3VibWl0dGVyLm5hbWUpe1xuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgaW5wdXQudHlwZSA9IFwiaGlkZGVuXCJcbiAgICAvLyBzZXQgdGhlIGZvcm0gYXR0cmlidXRlIGlmIHRoZSBzdWJtaXR0ZXIgaGFzIG9uZTtcbiAgICAvLyB0aGlzIGNhbiBoYXBwZW4gaWYgdGhlIGVsZW1lbnQgaXMgb3V0c2lkZSB0aGUgYWN0dWFsIGZvcm0gZWxlbWVudFxuICAgIGNvbnN0IGZvcm1JZCA9IHN1Ym1pdHRlci5nZXRBdHRyaWJ1dGUoXCJmb3JtXCIpXG4gICAgaWYoZm9ybUlkKXtcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImZvcm1cIiwgZm9ybUlkKVxuICAgIH1cbiAgICBpbnB1dC5uYW1lID0gc3VibWl0dGVyLm5hbWVcbiAgICBpbnB1dC52YWx1ZSA9IHN1Ym1pdHRlci52YWx1ZVxuICAgIHN1Ym1pdHRlci5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShpbnB1dCwgc3VibWl0dGVyKVxuICAgIGluamVjdGVkRWxlbWVudCA9IGlucHV0XG4gIH1cblxuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKVxuICBjb25zdCB0b1JlbW92ZSA9IFtdXG5cbiAgZm9ybURhdGEuZm9yRWFjaCgodmFsLCBrZXksIF9pbmRleCkgPT4ge1xuICAgIGlmKHZhbCBpbnN0YW5jZW9mIEZpbGUpeyB0b1JlbW92ZS5wdXNoKGtleSkgfVxuICB9KVxuXG4gIC8vIENsZWFudXAgYWZ0ZXIgYnVpbGRpbmcgZmlsZURhdGFcbiAgdG9SZW1vdmUuZm9yRWFjaChrZXkgPT4gZm9ybURhdGEuZGVsZXRlKGtleSkpXG5cbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG5cbiAgZm9yKGxldCBba2V5LCB2YWxdIG9mIGZvcm1EYXRhLmVudHJpZXMoKSl7XG4gICAgaWYob25seU5hbWVzLmxlbmd0aCA9PT0gMCB8fCBvbmx5TmFtZXMuaW5kZXhPZihrZXkpID49IDApe1xuICAgICAgcGFyYW1zLmFwcGVuZChrZXksIHZhbClcbiAgICB9XG4gIH1cblxuICAvLyByZW1vdmUgdGhlIGluamVjdGVkIGVsZW1lbnQgYWdhaW5cbiAgLy8gKGl0IHdvdWxkIGJlIHJlbW92ZWQgYnkgdGhlIG5leHQgZG9tIHBhdGNoIGFueXdheSwgYnV0IHRoaXMgaXMgY2xlYW5lcilcbiAgaWYoc3VibWl0dGVyICYmIGluamVjdGVkRWxlbWVudCl7XG4gICAgc3VibWl0dGVyLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5qZWN0ZWRFbGVtZW50KVxuICB9XG5cbiAgZm9yKGxldCBtZXRhS2V5IGluIG1ldGEpeyBwYXJhbXMuYXBwZW5kKG1ldGFLZXksIG1ldGFbbWV0YUtleV0pIH1cblxuICByZXR1cm4gcGFyYW1zLnRvU3RyaW5nKClcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XG4gIGNvbnN0cnVjdG9yKGVsLCBsaXZlU29ja2V0LCBwYXJlbnRWaWV3LCBmbGFzaCwgbGl2ZVJlZmVyZXIpe1xuICAgIHRoaXMuaXNEZWFkID0gZmFsc2VcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG4gICAgdGhpcy5mbGFzaCA9IGZsYXNoXG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnRWaWV3XG4gICAgdGhpcy5yb290ID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcucm9vdCA6IHRoaXNcbiAgICB0aGlzLmVsID0gZWxcbiAgICB0aGlzLmlkID0gdGhpcy5lbC5pZFxuICAgIHRoaXMucmVmID0gMFxuICAgIHRoaXMuY2hpbGRKb2lucyA9IDBcbiAgICB0aGlzLmxvYWRlclRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0RpZmZzID0gW11cbiAgICB0aGlzLnBlbmRpbmdGb3JtcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMucmVkaXJlY3QgPSBmYWxzZVxuICAgIHRoaXMuaHJlZiA9IG51bGxcbiAgICB0aGlzLmpvaW5Db3VudCA9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuam9pbkNvdW50IC0gMSA6IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2VcbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IGZ1bmN0aW9uKG9uRG9uZSl7IG9uRG9uZSAmJiBvbkRvbmUoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2sgPSBmdW5jdGlvbigpeyB9XG4gICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IHRoaXMucGFyZW50ID8gbnVsbCA6IFtdXG4gICAgdGhpcy52aWV3SG9va3MgPSB7fVxuICAgIHRoaXMuZm9ybVN1Ym1pdHMgPSBbXVxuICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLnBhcmVudCA/IG51bGwgOiB7fVxuICAgIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXSA9IHt9XG4gICAgdGhpcy5mb3Jtc0ZvclJlY292ZXJ5ID0ge31cbiAgICB0aGlzLmNoYW5uZWwgPSB0aGlzLmxpdmVTb2NrZXQuY2hhbm5lbChgbHY6JHt0aGlzLmlkfWAsICgpID0+IHtcbiAgICAgIGxldCB1cmwgPSB0aGlzLmhyZWYgJiYgdGhpcy5leHBhbmRVUkwodGhpcy5ocmVmKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVkaXJlY3Q6IHRoaXMucmVkaXJlY3QgPyB1cmwgOiB1bmRlZmluZWQsXG4gICAgICAgIHVybDogdGhpcy5yZWRpcmVjdCA/IHVuZGVmaW5lZCA6IHVybCB8fCB1bmRlZmluZWQsXG4gICAgICAgIHBhcmFtczogdGhpcy5jb25uZWN0UGFyYW1zKGxpdmVSZWZlcmVyKSxcbiAgICAgICAgc2Vzc2lvbjogdGhpcy5nZXRTZXNzaW9uKCksXG4gICAgICAgIHN0YXRpYzogdGhpcy5nZXRTdGF0aWMoKSxcbiAgICAgICAgZmxhc2g6IHRoaXMuZmxhc2gsXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNldEhyZWYoaHJlZil7IHRoaXMuaHJlZiA9IGhyZWYgfVxuXG4gIHNldFJlZGlyZWN0KGhyZWYpe1xuICAgIHRoaXMucmVkaXJlY3QgPSB0cnVlXG4gICAgdGhpcy5ocmVmID0gaHJlZlxuICB9XG5cbiAgaXNNYWluKCl7IHJldHVybiB0aGlzLmVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikgfVxuXG4gIGNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpe1xuICAgIGxldCBwYXJhbXMgPSB0aGlzLmxpdmVTb2NrZXQucGFyYW1zKHRoaXMuZWwpXG4gICAgbGV0IG1hbmlmZXN0ID1cbiAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX1RSQUNLX1NUQVRJQyl9XWApXG4gICAgICAgIC5tYXAobm9kZSA9PiBub2RlLnNyYyB8fCBub2RlLmhyZWYpLmZpbHRlcih1cmwgPT4gdHlwZW9mICh1cmwpID09PSBcInN0cmluZ1wiKVxuXG4gICAgaWYobWFuaWZlc3QubGVuZ3RoID4gMCl7IHBhcmFtc1tcIl90cmFja19zdGF0aWNcIl0gPSBtYW5pZmVzdCB9XG4gICAgcGFyYW1zW1wiX21vdW50c1wiXSA9IHRoaXMuam9pbkNvdW50XG4gICAgcGFyYW1zW1wiX2xpdmVfcmVmZXJlclwiXSA9IGxpdmVSZWZlcmVyXG5cbiAgICByZXR1cm4gcGFyYW1zXG4gIH1cblxuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5jaGFubmVsLmNhblB1c2goKSB9XG5cbiAgZ2V0U2Vzc2lvbigpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pIH1cblxuICBnZXRTdGF0aWMoKXtcbiAgICBsZXQgdmFsID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICByZXR1cm4gdmFsID09PSBcIlwiID8gbnVsbCA6IHZhbFxuICB9XG5cbiAgZGVzdHJveShjYWxsYmFjayA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlXG4gICAgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVxuICAgIGlmKHRoaXMucGFyZW50KXsgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLnBhcmVudC5pZF1bdGhpcy5pZF0gfVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGxldCBvbkZpbmlzaGVkID0gKCkgPT4ge1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7XG4gICAgICAgIHRoaXMuZGVzdHJveUhvb2sodGhpcy52aWV3SG9va3NbaWRdKVxuICAgICAgfVxuICAgIH1cblxuICAgIERPTS5tYXJrUGh4Q2hpbGREZXN0cm95ZWQodGhpcy5lbClcblxuICAgIHRoaXMubG9nKFwiZGVzdHJveWVkXCIsICgpID0+IFtcInRoZSBjaGlsZCBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHBhcmVudFwiXSlcbiAgICB0aGlzLmNoYW5uZWwubGVhdmUoKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIG9uRmluaXNoZWQpXG4gIH1cblxuICBzZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpe1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIFBIWF9DT05ORUNURURfQ0xBU1MsXG4gICAgICBQSFhfTE9BRElOR19DTEFTUyxcbiAgICAgIFBIWF9FUlJPUl9DTEFTUyxcbiAgICAgIFBIWF9DTElFTlRfRVJST1JfQ0xBU1MsXG4gICAgICBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXG4gICAgKVxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKVxuICB9XG5cbiAgc2hvd0xvYWRlcih0aW1lb3V0KXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICBpZih0aW1lb3V0KXtcbiAgICAgIHRoaXMubG9hZGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvd0xvYWRlcigpLCB0aW1lb3V0KVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fZGlzY29ubmVjdGVkKCkgfVxuICAgICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9MT0FESU5HX0NMQVNTKVxuICAgIH1cbiAgfVxuXG4gIGV4ZWNBbGwoYmluZGluZyl7XG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7YmluZGluZ31dYCwgZWwgPT4gdGhpcy5saXZlU29ja2V0LmV4ZWNKUyhlbCwgZWwuZ2V0QXR0cmlidXRlKGJpbmRpbmcpKSlcbiAgfVxuXG4gIGhpZGVMb2FkZXIoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoUEhYX0NPTk5FQ1RFRF9DTEFTUylcbiAgICB0aGlzLmV4ZWNBbGwodGhpcy5iaW5kaW5nKFwiY29ubmVjdGVkXCIpKVxuICB9XG5cbiAgdHJpZ2dlclJlY29ubmVjdGVkKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7IHRoaXMudmlld0hvb2tzW2lkXS5fX3JlY29ubmVjdGVkKCkgfVxuICB9XG5cbiAgbG9nKGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQubG9nKHRoaXMsIGtpbmQsIG1zZ0NhbGxiYWNrKVxuICB9XG5cbiAgdHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUgPSBmdW5jdGlvbigpe30pe1xuICAgIHRoaXMubGl2ZVNvY2tldC50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIC8vIGNhbGxzIHRoZSBjYWxsYmFjayB3aXRoIHRoZSB2aWV3IGFuZCB0YXJnZXQgZWxlbWVudCBmb3IgdGhlIGdpdmVuIHBoeFRhcmdldFxuICAvLyB0YXJnZXRzIGNhbiBiZTpcbiAgLy8gICogYW4gZWxlbWVudCBpdHNlbGYsIHRoZW4gaXQgaXMgc2ltcGx5IHBhc3NlZCB0byBsaXZlU29ja2V0Lm93bmVyO1xuICAvLyAgKiBhIENJRCAoQ29tcG9uZW50IElEKSwgdGhlbiB3ZSBmaXJzdCBzZWFyY2ggdGhlIGNvbXBvbmVudCdzIGVsZW1lbnQgaW4gdGhlIERPTVxuICAvLyAgKiBhIHNlbGVjdG9yLCB0aGVuIHdlIHNlYXJjaCB0aGUgc2VsZWN0b3IgaW4gdGhlIERPTSBhbmQgY2FsbCB0aGUgY2FsbGJhY2tcbiAgLy8gICAgZm9yIGVhY2ggZWxlbWVudCBmb3VuZCB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIG93bmVyIHZpZXdcbiAgd2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsIGNhbGxiYWNrLCBkb20gPSBkb2N1bWVudCwgdmlld0VsKXtcbiAgICAvLyBpbiB0aGUgZm9ybSByZWNvdmVyeSBjYXNlIHdlIHNlYXJjaCBpbiBhIHRlbXBsYXRlIGZyYWdtZW50IGluc3RlYWQgb2ZcbiAgICAvLyB0aGUgcmVhbCBkb20sIHRoZXJlZm9yZSB3ZSBvcHRpb25hbGx5IHBhc3MgZG9tIGFuZCB2aWV3RWxcblxuICAgIGlmKHBoeFRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHBoeFRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpe1xuICAgICAgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5vd25lcihwaHhUYXJnZXQsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgcGh4VGFyZ2V0KSlcbiAgICB9XG5cbiAgICBpZihpc0NpZChwaHhUYXJnZXQpKXtcbiAgICAgIGxldCB0YXJnZXRzID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh2aWV3RWwgfHwgdGhpcy5lbCwgcGh4VGFyZ2V0KVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApe1xuICAgICAgICBsb2dFcnJvcihgbm8gY29tcG9uZW50IGZvdW5kIG1hdGNoaW5nIHBoeC10YXJnZXQgb2YgJHtwaHhUYXJnZXR9YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMsIHBhcnNlSW50KHBoeFRhcmdldCkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0YXJnZXRzID0gQXJyYXkuZnJvbShkb20ucXVlcnlTZWxlY3RvckFsbChwaHhUYXJnZXQpKVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApeyBsb2dFcnJvcihgbm90aGluZyBmb3VuZCBtYXRjaGluZyB0aGUgcGh4LXRhcmdldCBzZWxlY3RvciBcIiR7cGh4VGFyZ2V0fVwiYCkgfVxuICAgICAgdGFyZ2V0cy5mb3JFYWNoKHRhcmdldCA9PiB0aGlzLmxpdmVTb2NrZXQub3duZXIodGFyZ2V0LCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIHRhcmdldCkpKVxuICAgIH1cbiAgfVxuXG4gIGFwcGx5RGlmZih0eXBlLCByYXdEaWZmLCBjYWxsYmFjayl7XG4gICAgdGhpcy5sb2codHlwZSwgKCkgPT4gW1wiXCIsIGNsb25lKHJhd0RpZmYpXSlcbiAgICBsZXQge2RpZmYsIHJlcGx5LCBldmVudHMsIHRpdGxlfSA9IFJlbmRlcmVkLmV4dHJhY3QocmF3RGlmZilcbiAgICBjYWxsYmFjayh7ZGlmZiwgcmVwbHksIGV2ZW50c30pXG4gICAgaWYodHlwZW9mIHRpdGxlID09PSBcInN0cmluZ1wiKXsgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBET00ucHV0VGl0bGUodGl0bGUpKSB9XG4gIH1cblxuICBvbkpvaW4ocmVzcCl7XG4gICAgbGV0IHtyZW5kZXJlZCwgY29udGFpbmVyLCBsaXZldmlld192ZXJzaW9ufSA9IHJlc3BcbiAgICBpZihjb250YWluZXIpe1xuICAgICAgbGV0IFt0YWcsIGF0dHJzXSA9IGNvbnRhaW5lclxuICAgICAgdGhpcy5lbCA9IERPTS5yZXBsYWNlUm9vdENvbnRhaW5lcih0aGlzLmVsLCB0YWcsIGF0dHJzKVxuICAgIH1cbiAgICB0aGlzLmNoaWxkSm9pbnMgPSAwXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IHRydWVcbiAgICB0aGlzLmZsYXNoID0gbnVsbFxuICAgIGlmKHRoaXMucm9vdCA9PT0gdGhpcyl7XG4gICAgICB0aGlzLmZvcm1zRm9yUmVjb3ZlcnkgPSB0aGlzLmdldEZvcm1zRm9yUmVjb3ZlcnkoKVxuICAgIH1cblxuICAgIGlmKGxpdmV2aWV3X3ZlcnNpb24gIT09IHRoaXMubGl2ZVNvY2tldC52ZXJzaW9uKCkpe1xuICAgICAgY29uc29sZS5lcnJvcihgTGl2ZVZpZXcgYXNzZXQgdmVyc2lvbiBtaXNtYXRjaC4gSmF2YVNjcmlwdCB2ZXJzaW9uICR7dGhpcy5saXZlU29ja2V0LnZlcnNpb24oKX0gdnMuIHNlcnZlciAke2xpdmV2aWV3X3ZlcnNpb259LiBUbyBhdm9pZCBpc3N1ZXMsIHBsZWFzZSBlbnN1cmUgdGhhdCB5b3VyIGFzc2V0cyB1c2UgdGhlIHNhbWUgdmVyc2lvbiBhcyB0aGUgc2VydmVyLmApXG4gICAgfVxuXG4gICAgQnJvd3Nlci5kcm9wTG9jYWwodGhpcy5saXZlU29ja2V0LmxvY2FsU3RvcmFnZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCBDT05TRUNVVElWRV9SRUxPQURTKVxuICAgIHRoaXMuYXBwbHlEaWZmKFwibW91bnRcIiwgcmVuZGVyZWQsICh7ZGlmZiwgZXZlbnRzfSkgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJlZCA9IG5ldyBSZW5kZXJlZCh0aGlzLmlkLCBkaWZmKVxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKG51bGwsIFwiam9pblwiKVxuICAgICAgdGhpcy5kcm9wUGVuZGluZ1JlZnMoKVxuICAgICAgdGhpcy5qb2luQ291bnQrK1xuXG4gICAgICB0aGlzLm1heWJlUmVjb3ZlckZvcm1zKGh0bWwsICgpID0+IHtcbiAgICAgICAgdGhpcy5vbkpvaW5Db21wbGV0ZShyZXNwLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkcm9wUGVuZGluZ1JlZnMoKXtcbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7UEhYX1JFRl9TUkN9PVwiJHt0aGlzLmlkfVwiXVske1BIWF9SRUZ9XWAsIGVsID0+IHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuICAgIH0pXG4gIH1cblxuICBvbkpvaW5Db21wbGV0ZSh7bGl2ZV9wYXRjaH0sIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyl7XG4gICAgLy8gSW4gb3JkZXIgdG8gcHJvdmlkZSBhIGJldHRlciBleHBlcmllbmNlLCB3ZSB3YW50IHRvIGpvaW5cbiAgICAvLyBhbGwgTGl2ZVZpZXdzIGZpcnN0IGFuZCBvbmx5IHRoZW4gYXBwbHkgdGhlaXIgcGF0Y2hlcy5cbiAgICBpZih0aGlzLmpvaW5Db3VudCA+IDEgfHwgKHRoaXMucGFyZW50ICYmICF0aGlzLnBhcmVudC5pc0pvaW5QZW5kaW5nKCkpKXtcbiAgICAgIHJldHVybiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICB9XG5cbiAgICAvLyBPbmUgZG93bnNpZGUgb2YgdGhpcyBhcHByb2FjaCBpcyB0aGF0IHdlIG5lZWQgdG8gZmluZCBwaHhDaGlsZHJlblxuICAgIC8vIGluIHRoZSBodG1sIGZyYWdtZW50LCBpbnN0ZWFkIG9mIGRpcmVjdGx5IG9uIHRoZSBET00uIFRoZSBmcmFnbWVudFxuICAgIC8vIGFsc28gZG9lcyBub3QgaW5jbHVkZSBQSFhfU1RBVElDLCBzbyB3ZSBuZWVkIHRvIGNvcHkgaXQgb3ZlciBmcm9tXG4gICAgLy8gdGhlIERPTS5cbiAgICBsZXQgbmV3Q2hpbGRyZW4gPSBET00uZmluZFBoeENoaWxkcmVuSW5GcmFnbWVudChodG1sLCB0aGlzLmlkKS5maWx0ZXIodG9FbCA9PiB7XG4gICAgICBsZXQgZnJvbUVsID0gdG9FbC5pZCAmJiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoYFtpZD1cIiR7dG9FbC5pZH1cIl1gKVxuICAgICAgbGV0IHBoeFN0YXRpYyA9IGZyb21FbCAmJiBmcm9tRWwuZ2V0QXR0cmlidXRlKFBIWF9TVEFUSUMpXG4gICAgICBpZihwaHhTdGF0aWMpeyB0b0VsLnNldEF0dHJpYnV0ZShQSFhfU1RBVElDLCBwaHhTdGF0aWMpIH1cbiAgICAgIC8vIHNldCBQSFhfUk9PVF9JRCB0byBwcmV2ZW50IGV2ZW50cyBmcm9tIGJlaW5nIGRpc3BhdGNoZWQgdG8gdGhlIHJvb3Qgdmlld1xuICAgICAgLy8gd2hpbGUgdGhlIGNoaWxkIGpvaW4gaXMgc3RpbGwgcGVuZGluZ1xuICAgICAgaWYoZnJvbUVsKXsgZnJvbUVsLnNldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCwgdGhpcy5yb290LmlkKSB9XG4gICAgICByZXR1cm4gdGhpcy5qb2luQ2hpbGQodG9FbClcbiAgICB9KVxuXG4gICAgaWYobmV3Q2hpbGRyZW4ubGVuZ3RoID09PSAwKXtcbiAgICAgIGlmKHRoaXMucGFyZW50KXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKV0pXG4gICAgICAgIHRoaXMucGFyZW50LmFja0pvaW4odGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKVxuICAgICAgICB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKV0pXG4gICAgfVxuICB9XG5cbiAgYXR0YWNoVHJ1ZURvY0VsKCl7XG4gICAgdGhpcy5lbCA9IERPTS5ieUlkKHRoaXMuaWQpXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQsIHRoaXMucm9vdC5pZClcbiAgfVxuXG4gIC8vIHRoaXMgaXMgaW52b2tlZCBmb3IgZGVhZCBhbmQgbGl2ZSB2aWV3cywgc28gd2UgbXVzdCBmaWx0ZXIgYnlcbiAgLy8gYnkgb3duZXIgdG8gZW5zdXJlIHdlIGFyZW4ndCBkdXBsaWNhdGluZyBob29rcyBhY3Jvc3MgZGlzY29ubmVjdFxuICAvLyBhbmQgY29ubmVjdGVkIHN0YXRlcy4gVGhpcyBhbHNvIGhhbmRsZXMgY2FzZXMgd2hlcmUgaG9va3MgZXhpc3RcbiAgLy8gaW4gYSByb290IGxheW91dCB3aXRoIGEgTFYgaW4gdGhlIGJvZHlcbiAgZXhlY05ld01vdW50ZWQoKXtcbiAgICBsZXQgcGh4Vmlld3BvcnRUb3AgPSB0aGlzLmJpbmRpbmcoUEhYX1ZJRVdQT1JUX1RPUClcbiAgICBsZXQgcGh4Vmlld3BvcnRCb3R0b20gPSB0aGlzLmJpbmRpbmcoUEhYX1ZJRVdQT1JUX0JPVFRPTSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHtwaHhWaWV3cG9ydFRvcH1dLCBbJHtwaHhWaWV3cG9ydEJvdHRvbX1dYCwgaG9va0VsID0+IHtcbiAgICAgIGlmKHRoaXMub3duc0VsZW1lbnQoaG9va0VsKSl7XG4gICAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyhob29rRWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgICAgdGhpcy5tYXliZUFkZE5ld0hvb2soaG9va0VsKVxuICAgICAgfVxuICAgIH0pXG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9IT09LKX1dLCBbZGF0YS1waHgtJHtQSFhfSE9PS31dYCwgaG9va0VsID0+IHtcbiAgICAgIGlmKHRoaXMub3duc0VsZW1lbnQoaG9va0VsKSl7XG4gICAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGhvb2tFbClcbiAgICAgIH1cbiAgICB9KVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfTU9VTlRFRCl9XWAsIGVsID0+IHtcbiAgICAgIGlmKHRoaXMub3duc0VsZW1lbnQoZWwpKXtcbiAgICAgICAgdGhpcy5tYXliZU1vdW50ZWQoZWwpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyl7XG4gICAgdGhpcy5hdHRhY2hUcnVlRG9jRWwoKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgIHBhdGNoLm1hcmtQcnVuYWJsZUNvbnRlbnRGb3JSZW1vdmFsKClcbiAgICB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgZmFsc2UsIHRydWUpXG4gICAgdGhpcy5qb2luTmV3Q2hpbGRyZW4oKVxuICAgIHRoaXMuZXhlY05ld01vdW50ZWQoKVxuXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IGZhbHNlXG4gICAgdGhpcy5saXZlU29ja2V0LmRpc3BhdGNoRXZlbnRzKGV2ZW50cylcbiAgICB0aGlzLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKVxuXG4gICAgaWYobGl2ZV9wYXRjaCl7XG4gICAgICBsZXQge2tpbmQsIHRvfSA9IGxpdmVfcGF0Y2hcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UGF0Y2godG8sIGtpbmQpXG4gICAgfVxuICAgIHRoaXMuaGlkZUxvYWRlcigpXG4gICAgaWYodGhpcy5qb2luQ291bnQgPiAxKXsgdGhpcy50cmlnZ2VyUmVjb25uZWN0ZWQoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2soKVxuICB9XG5cbiAgdHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uQmVmb3JlRWxVcGRhdGVkXCIsIFtmcm9tRWwsIHRvRWxdKVxuICAgIGxldCBob29rID0gdGhpcy5nZXRIb29rKGZyb21FbClcbiAgICBsZXQgaXNJZ25vcmVkID0gaG9vayAmJiBET00uaXNJZ25vcmVkKGZyb21FbCwgdGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpKVxuICAgIGlmKGhvb2sgJiYgIWZyb21FbC5pc0VxdWFsTm9kZSh0b0VsKSAmJiAhKGlzSWdub3JlZCAmJiBpc0VxdWFsT2JqKGZyb21FbC5kYXRhc2V0LCB0b0VsLmRhdGFzZXQpKSl7XG4gICAgICBob29rLl9fYmVmb3JlVXBkYXRlKClcbiAgICAgIHJldHVybiBob29rXG4gICAgfVxuICB9XG5cbiAgbWF5YmVNb3VudGVkKGVsKXtcbiAgICBsZXQgcGh4TW91bnRlZCA9IGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpKVxuICAgIGxldCBoYXNCZWVuSW52b2tlZCA9IHBoeE1vdW50ZWQgJiYgRE9NLnByaXZhdGUoZWwsIFwibW91bnRlZFwiKVxuICAgIGlmKHBoeE1vdW50ZWQgJiYgIWhhc0JlZW5JbnZva2VkKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5leGVjSlMoZWwsIHBoeE1vdW50ZWQpXG4gICAgICBET00ucHV0UHJpdmF0ZShlbCwgXCJtb3VudGVkXCIsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgbWF5YmVBZGROZXdIb29rKGVsLCBmb3JjZSl7XG4gICAgbGV0IG5ld0hvb2sgPSB0aGlzLmFkZEhvb2soZWwpXG4gICAgaWYobmV3SG9vayl7IG5ld0hvb2suX19tb3VudGVkKCkgfVxuICB9XG5cbiAgcGVyZm9ybVBhdGNoKHBhdGNoLCBwcnVuZUNpZHMsIGlzSm9pblBhdGNoID0gZmFsc2Upe1xuICAgIGxldCByZW1vdmVkRWxzID0gW11cbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG4gICAgbGV0IHVwZGF0ZWRIb29rSWRzID0gbmV3IFNldCgpXG5cbiAgICBwYXRjaC5hZnRlcihcImFkZGVkXCIsIGVsID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50cmlnZ2VyRE9NKFwib25Ob2RlQWRkZWRcIiwgW2VsXSlcbiAgICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IHRoaXMuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgICAgbGV0IHBoeFZpZXdwb3J0Qm90dG9tID0gdGhpcy5iaW5kaW5nKFBIWF9WSUVXUE9SVF9CT1RUT00pXG4gICAgICBET00ubWF5YmVBZGRQcml2YXRlSG9va3MoZWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGVsKVxuICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKXsgdGhpcy5tYXliZU1vdW50ZWQoZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJwaHhDaGlsZEFkZGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKERPTS5pc1BoeFN0aWNreShlbCkpe1xuICAgICAgICB0aGlzLmxpdmVTb2NrZXQuam9pblJvb3RWaWV3cygpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5iZWZvcmUoXCJ1cGRhdGVkXCIsIChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgIGxldCBob29rID0gdGhpcy50cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhmcm9tRWwsIHRvRWwpXG4gICAgICBpZihob29rKXsgdXBkYXRlZEhvb2tJZHMuYWRkKGZyb21FbC5pZCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInVwZGF0ZWRcIiwgZWwgPT4ge1xuICAgICAgaWYodXBkYXRlZEhvb2tJZHMuaGFzKGVsLmlkKSl7IHRoaXMuZ2V0SG9vayhlbCkuX191cGRhdGVkKCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcImRpc2NhcmRlZFwiLCAoZWwpID0+IHtcbiAgICAgIGlmKGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7IHJlbW92ZWRFbHMucHVzaChlbCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInRyYW5zaXRpb25zRGlzY2FyZGVkXCIsIGVscyA9PiB0aGlzLmFmdGVyRWxlbWVudHNSZW1vdmVkKGVscywgcHJ1bmVDaWRzKSlcbiAgICBwYXRjaC5wZXJmb3JtKGlzSm9pblBhdGNoKVxuICAgIHRoaXMuYWZ0ZXJFbGVtZW50c1JlbW92ZWQocmVtb3ZlZEVscywgcHJ1bmVDaWRzKVxuXG4gICAgcmV0dXJuIHBoeENoaWxkcmVuQWRkZWRcbiAgfVxuXG4gIGFmdGVyRWxlbWVudHNSZW1vdmVkKGVsZW1lbnRzLCBwcnVuZUNpZHMpe1xuICAgIGxldCBkZXN0cm95ZWRDSURzID0gW11cbiAgICBlbGVtZW50cy5mb3JFYWNoKHBhcmVudCA9PiB7XG4gICAgICBsZXQgY29tcG9uZW50cyA9IERPTS5hbGwocGFyZW50LCBgWyR7UEhYX0NPTVBPTkVOVH1dYClcbiAgICAgIGxldCBob29rcyA9IERPTS5hbGwocGFyZW50LCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9IT09LKX1dYClcbiAgICAgIGNvbXBvbmVudHMuY29uY2F0KHBhcmVudCkuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGxldCBjaWQgPSB0aGlzLmNvbXBvbmVudElEKGVsKVxuICAgICAgICBpZihpc0NpZChjaWQpICYmIGRlc3Ryb3llZENJRHMuaW5kZXhPZihjaWQpID09PSAtMSl7IGRlc3Ryb3llZENJRHMucHVzaChjaWQpIH1cbiAgICAgIH0pXG4gICAgICBob29rcy5jb25jYXQocGFyZW50KS5mb3JFYWNoKGhvb2tFbCA9PiB7XG4gICAgICAgIGxldCBob29rID0gdGhpcy5nZXRIb29rKGhvb2tFbClcbiAgICAgICAgaG9vayAmJiB0aGlzLmRlc3Ryb3lIb29rKGhvb2spXG4gICAgICB9KVxuICAgIH0pXG4gICAgLy8gV2Ugc2hvdWxkIG5vdCBwcnVuZUNpZHMgb24gam9pbnMuIE90aGVyd2lzZSwgaW4gY2FzZSBvZlxuICAgIC8vIHJlam9pbnMsIHdlIG1heSBub3RpZnkgY2lkcyB0aGF0IG5vIGxvbmdlciBiZWxvbmcgdG8gdGhlXG4gICAgLy8gY3VycmVudCBMaXZlVmlldyB0byBiZSByZW1vdmVkLlxuICAgIGlmKHBydW5lQ2lkcyl7XG4gICAgICB0aGlzLm1heWJlUHVzaENvbXBvbmVudHNEZXN0cm95ZWQoZGVzdHJveWVkQ0lEcylcbiAgICB9XG4gIH1cblxuICBqb2luTmV3Q2hpbGRyZW4oKXtcbiAgICBET00uZmluZFBoeENoaWxkcmVuKHRoaXMuZWwsIHRoaXMuaWQpLmZvckVhY2goZWwgPT4gdGhpcy5qb2luQ2hpbGQoZWwpKVxuICB9XG5cbiAgbWF5YmVSZWNvdmVyRm9ybXMoaHRtbCwgY2FsbGJhY2spe1xuICAgIGNvbnN0IHBoeENoYW5nZSA9IHRoaXMuYmluZGluZyhcImNoYW5nZVwiKVxuICAgIGNvbnN0IG9sZEZvcm1zID0gdGhpcy5yb290LmZvcm1zRm9yUmVjb3ZlcnlcbiAgICAvLyBTbyB3aHkgZG8gd2UgY3JlYXRlIGEgdGVtcGxhdGUgZWxlbWVudCBoZXJlP1xuICAgIC8vIE9uZSB3YXkgdG8gcmVjb3ZlciBmb3JtcyB3b3VsZCBiZSB0byBpbW1lZGlhdGVseSBhcHBseSB0aGUgbW91bnRcbiAgICAvLyBwYXRjaCBhbmQgdGhlbiBhZnRlcndhcmRzIHJlY292ZXIgdGhlIGZvcm1zLiBIb3dldmVyLCB0aGlzIHdvdWxkXG4gICAgLy8gY2F1c2UgYSBmbGlja2VyLCBiZWNhdXNlIHRoZSBtb3VudCBwYXRjaCB3b3VsZCByZW1vdmUgdGhlIGZvcm0gY29udGVudFxuICAgIC8vIHVudGlsIGl0IGlzIHJlc3RvcmVkLiBUaGVyZWZvcmUgTFYgZGVjaWRlZCB0byBkbyBmb3JtIHJlY292ZXJ5IHdpdGggdGhlXG4gICAgLy8gcmF3IEhUTUwgYmVmb3JlIGl0IGlzIGFwcGxpZWQgYW5kIGRlbGF5IHRoZSBtb3VudCBwYXRjaCB1bnRpbCB0aGUgZm9ybVxuICAgIC8vIHJlY292ZXJ5IGV2ZW50cyBhcmUgZG9uZS5cbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgLy8gYmVjYXVzZSB3ZSB3b3JrIHdpdGggYSB0ZW1wbGF0ZSBlbGVtZW50LCB3ZSBtdXN0IG1hbnVhbGx5IGNvcHkgdGhlIGF0dHJpYnV0ZXNcbiAgICAvLyBvdGhlcndpc2UgdGhlIG93bmVyIC8gdGFyZ2V0IGhlbHBlcnMgZG9uJ3Qgd29yayBwcm9wZXJseVxuICAgIGNvbnN0IHJvb3RFbCA9IHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICByb290RWwuaWQgPSB0aGlzLmlkXG4gICAgcm9vdEVsLnNldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCwgdGhpcy5yb290LmlkKVxuICAgIHJvb3RFbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIHRoaXMuZ2V0U2Vzc2lvbigpKVxuICAgIHJvb3RFbC5zZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQywgdGhpcy5nZXRTdGF0aWMoKSlcbiAgICByb290RWwuc2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQsIHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuaWQgOiBudWxsKVxuXG4gICAgLy8gd2UgZ28gb3ZlciBhbGwgZm9ybSBlbGVtZW50cyBpbiB0aGUgbmV3IEhUTUwgZm9yIHRoZSBMVlxuICAgIC8vIGFuZCBsb29rIGZvciBvbGQgZm9ybXMgaW4gdGhlIGBmb3Jtc0ZvclJlY292ZXJ5YCBvYmplY3Q7XG4gICAgLy8gdGhlIGZvcm1zRm9yUmVjb3ZlcnkgY2FuIGFsc28gY29udGFpbiBmb3JtcyBmcm9tIGNoaWxkIHZpZXdzXG4gICAgY29uc3QgZm9ybXNUb1JlY292ZXIgPVxuICAgICAgLy8gd2UgZ28gb3ZlciBhbGwgZm9ybXMgaW4gdGhlIG5ldyBET007IGJlY2F1c2UgdGhpcyBpcyBvbmx5IHRoZSBIVE1MIGZvciB0aGUgY3VycmVudFxuICAgICAgLy8gdmlldywgd2UgY2FuIGJlIHN1cmUgdGhhdCBhbGwgZm9ybXMgYXJlIG93bmVkIGJ5IHRoaXMgdmlldzpcbiAgICAgIERPTS5hbGwodGVtcGxhdGUuY29udGVudCwgXCJmb3JtXCIpXG4gICAgICAgIC8vIG9ubHkgcmVjb3ZlciBmb3JtcyB0aGF0IGhhdmUgYW4gaWQgYW5kIGFyZSBpbiB0aGUgb2xkIERPTVxuICAgICAgICAuZmlsdGVyKG5ld0Zvcm0gPT4gbmV3Rm9ybS5pZCAmJiBvbGRGb3Jtc1tuZXdGb3JtLmlkXSlcbiAgICAgICAgLy8gYWJhbmRvbiBmb3JtcyB3ZSBhbHJlYWR5IHRyaWVkIHRvIHJlY292ZXIgdG8gcHJldmVudCBsb29waW5nIGEgZmFpbGVkIHN0YXRlXG4gICAgICAgIC5maWx0ZXIobmV3Rm9ybSA9PiAhdGhpcy5wZW5kaW5nRm9ybXMuaGFzKG5ld0Zvcm0uaWQpKVxuICAgICAgICAvLyBvbmx5IHJlY292ZXIgaWYgdGhlIGZvcm0gaGFzIHRoZSBzYW1lIHBoeC1jaGFuZ2UgdmFsdWVcbiAgICAgICAgLmZpbHRlcihuZXdGb3JtID0+IG9sZEZvcm1zW25ld0Zvcm0uaWRdLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpID09PSBuZXdGb3JtLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpKVxuICAgICAgICAubWFwKG5ld0Zvcm0gPT4ge1xuICAgICAgICAgIHJldHVybiBbb2xkRm9ybXNbbmV3Rm9ybS5pZF0sIG5ld0Zvcm1dXG4gICAgICAgIH0pXG5cbiAgICBpZihmb3Jtc1RvUmVjb3Zlci5sZW5ndGggPT09IDApe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKClcbiAgICB9XG5cbiAgICBmb3Jtc1RvUmVjb3Zlci5mb3JFYWNoKChbb2xkRm9ybSwgbmV3Rm9ybV0sIGkpID0+IHtcbiAgICAgIHRoaXMucGVuZGluZ0Zvcm1zLmFkZChuZXdGb3JtLmlkKVxuICAgICAgdGhpcy5wdXNoRm9ybVJlY292ZXJ5KG9sZEZvcm0sIG5ld0Zvcm0sIHRlbXBsYXRlLmNvbnRlbnQsICgpID0+IHtcbiAgICAgICAgdGhpcy5wZW5kaW5nRm9ybXMuZGVsZXRlKG5ld0Zvcm0uaWQpXG4gICAgICAgIC8vIHdlIG9ubHkgY2FsbCB0aGUgY2FsbGJhY2sgb25jZSBhbGwgZm9ybXMgaGF2ZSBiZWVuIHJlY292ZXJlZFxuICAgICAgICBpZihpID09PSBmb3Jtc1RvUmVjb3Zlci5sZW5ndGggLSAxKXtcbiAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGdldENoaWxkQnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF1baWRdIH1cblxuICBnZXREZXNjZW5kZW50QnlFbChlbCl7XG4gICAgaWYoZWwuaWQgPT09IHRoaXMuaWQpe1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bZWwuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpXVtlbC5pZF1cbiAgICB9XG4gIH1cblxuICBkZXN0cm95RGVzY2VuZGVudChpZCl7XG4gICAgZm9yKGxldCBwYXJlbnRJZCBpbiB0aGlzLnJvb3QuY2hpbGRyZW4pe1xuICAgICAgZm9yKGxldCBjaGlsZElkIGluIHRoaXMucm9vdC5jaGlsZHJlbltwYXJlbnRJZF0pe1xuICAgICAgICBpZihjaGlsZElkID09PSBpZCl7IHJldHVybiB0aGlzLnJvb3QuY2hpbGRyZW5bcGFyZW50SWRdW2NoaWxkSWRdLmRlc3Ryb3koKSB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgam9pbkNoaWxkKGVsKXtcbiAgICBsZXQgY2hpbGQgPSB0aGlzLmdldENoaWxkQnlJZChlbC5pZClcbiAgICBpZighY2hpbGQpe1xuICAgICAgbGV0IHZpZXcgPSBuZXcgVmlldyhlbCwgdGhpcy5saXZlU29ja2V0LCB0aGlzKVxuICAgICAgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdW3ZpZXcuaWRdID0gdmlld1xuICAgICAgdmlldy5qb2luKClcbiAgICAgIHRoaXMuY2hpbGRKb2lucysrXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGlzSm9pblBlbmRpbmcoKXsgcmV0dXJuIHRoaXMuam9pblBlbmRpbmcgfVxuXG4gIGFja0pvaW4oX2NoaWxkKXtcbiAgICB0aGlzLmNoaWxkSm9pbnMtLVxuXG4gICAgaWYodGhpcy5jaGlsZEpvaW5zID09PSAwKXtcbiAgICAgIGlmKHRoaXMucGFyZW50KXtcbiAgICAgICAgdGhpcy5wYXJlbnQuYWNrSm9pbih0aGlzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkFsbENoaWxkSm9pbnNDb21wbGV0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKXtcbiAgICAvLyB3ZSBjYW4gY2xlYXIgcGVuZGluZyBmb3JtIHJlY292ZXJpZXMgbm93IHRoYXQgd2UndmUgam9pbmVkLlxuICAgIC8vIFRoZXkgZWl0aGVyIGFsbCByZXNvbHZlZCBvciB3ZXJlIGFiYW5kb25lZFxuICAgIHRoaXMucGVuZGluZ0Zvcm1zLmNsZWFyKClcbiAgICAvLyB3ZSBjYW4gYWxzbyBjbGVhciB0aGUgZm9ybXNGb3JSZWNvdmVyeSBvYmplY3QgdG8gbm90IGtlZXAgb2xkIGZvcm0gZWxlbWVudHMgYXJvdW5kXG4gICAgdGhpcy5mb3Jtc0ZvclJlY292ZXJ5ID0ge31cbiAgICB0aGlzLmpvaW5DYWxsYmFjaygoKSA9PiB7XG4gICAgICB0aGlzLnBlbmRpbmdKb2luT3BzLmZvckVhY2goKFt2aWV3LCBvcF0pID0+IHtcbiAgICAgICAgaWYoIXZpZXcuaXNEZXN0cm95ZWQoKSl7IG9wKCkgfVxuICAgICAgfSlcbiAgICAgIHRoaXMucGVuZGluZ0pvaW5PcHMgPSBbXVxuICAgIH0pXG4gIH1cblxuICB1cGRhdGUoZGlmZiwgZXZlbnRzKXtcbiAgICBpZih0aGlzLmlzSm9pblBlbmRpbmcoKSB8fCAodGhpcy5saXZlU29ja2V0Lmhhc1BlbmRpbmdMaW5rKCkgJiYgdGhpcy5yb290LmlzTWFpbigpKSl7XG4gICAgICByZXR1cm4gdGhpcy5wZW5kaW5nRGlmZnMucHVzaCh7ZGlmZiwgZXZlbnRzfSlcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVkLm1lcmdlRGlmZihkaWZmKVxuICAgIGxldCBwaHhDaGlsZHJlbkFkZGVkID0gZmFsc2VcblxuICAgIC8vIFdoZW4gdGhlIGRpZmYgb25seSBjb250YWlucyBjb21wb25lbnQgZGlmZnMsIHRoZW4gd2FsayBjb21wb25lbnRzXG4gICAgLy8gYW5kIHBhdGNoIG9ubHkgdGhlIHBhcmVudCBjb21wb25lbnQgY29udGFpbmVycyBmb3VuZCBpbiB0aGUgZGlmZi5cbiAgICAvLyBPdGhlcndpc2UsIHBhdGNoIGVudGlyZSBMViBjb250YWluZXIuXG4gICAgaWYodGhpcy5yZW5kZXJlZC5pc0NvbXBvbmVudE9ubHlEaWZmKGRpZmYpKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50aW1lKFwiY29tcG9uZW50IHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IHBhcmVudENpZHMgPSBET00uZmluZEV4aXN0aW5nUGFyZW50Q0lEcyh0aGlzLmVsLCB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudENJRHMoZGlmZikpXG4gICAgICAgIHBhcmVudENpZHMuZm9yRWFjaChwYXJlbnRDSUQgPT4ge1xuICAgICAgICAgIGlmKHRoaXMuY29tcG9uZW50UGF0Y2godGhpcy5yZW5kZXJlZC5nZXRDb21wb25lbnQoZGlmZiwgcGFyZW50Q0lEKSwgcGFyZW50Q0lEKSl7IHBoeENoaWxkcmVuQWRkZWQgPSB0cnVlIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmKCFpc0VtcHR5KGRpZmYpKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50aW1lKFwiZnVsbCBwYXRjaCBjb21wbGV0ZVwiLCAoKSA9PiB7XG4gICAgICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlckNvbnRhaW5lcihkaWZmLCBcInVwZGF0ZVwiKVxuICAgICAgICBsZXQgcGF0Y2ggPSBuZXcgRE9NUGF0Y2godGhpcywgdGhpcy5lbCwgdGhpcy5pZCwgaHRtbCwgc3RyZWFtcywgbnVsbClcbiAgICAgICAgcGh4Q2hpbGRyZW5BZGRlZCA9IHRoaXMucGVyZm9ybVBhdGNoKHBhdGNoLCB0cnVlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLmxpdmVTb2NrZXQuZGlzcGF0Y2hFdmVudHMoZXZlbnRzKVxuICAgIGlmKHBoeENoaWxkcmVuQWRkZWQpeyB0aGlzLmpvaW5OZXdDaGlsZHJlbigpIH1cbiAgfVxuXG4gIHJlbmRlckNvbnRhaW5lcihkaWZmLCBraW5kKXtcbiAgICByZXR1cm4gdGhpcy5saXZlU29ja2V0LnRpbWUoYHRvU3RyaW5nIGRpZmYgKCR7a2luZH0pYCwgKCkgPT4ge1xuICAgICAgbGV0IHRhZyA9IHRoaXMuZWwudGFnTmFtZVxuICAgICAgLy8gRG9uJ3Qgc2tpcCBhbnkgY29tcG9uZW50IGluIHRoZSBkaWZmIG5vciBhbnkgbWFya2VkIGFzIHBydW5lZFxuICAgICAgLy8gKGFzIHRoZXkgbWF5IGhhdmUgYmVlbiBhZGRlZCBiYWNrKVxuICAgICAgbGV0IGNpZHMgPSBkaWZmID8gdGhpcy5yZW5kZXJlZC5jb21wb25lbnRDSURzKGRpZmYpIDogbnVsbFxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQudG9TdHJpbmcoY2lkcylcbiAgICAgIHJldHVybiBbYDwke3RhZ30+JHtodG1sfTwvJHt0YWd9PmAsIHN0cmVhbXNdXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudFBhdGNoKGRpZmYsIGNpZCl7XG4gICAgaWYoaXNFbXB0eShkaWZmKSkgcmV0dXJuIGZhbHNlXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQuY29tcG9uZW50VG9TdHJpbmcoY2lkKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBjaWQpXG4gICAgbGV0IGNoaWxkcmVuQWRkZWQgPSB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgdHJ1ZSlcbiAgICByZXR1cm4gY2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgZ2V0SG9vayhlbCl7IHJldHVybiB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoZWwpXSB9XG5cbiAgYWRkSG9vayhlbCl7XG4gICAgaWYoVmlld0hvb2suZWxlbWVudElEKGVsKSB8fCAhZWwuZ2V0QXR0cmlidXRlKXsgcmV0dXJuIH1cbiAgICBsZXQgaG9va05hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoYGRhdGEtcGh4LSR7UEhYX0hPT0t9YCkgfHwgZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfSE9PSykpXG4gICAgaWYoaG9va05hbWUgJiYgIXRoaXMub3duc0VsZW1lbnQoZWwpKXsgcmV0dXJuIH1cbiAgICBsZXQgY2FsbGJhY2tzID0gdGhpcy5saXZlU29ja2V0LmdldEhvb2tDYWxsYmFja3MoaG9va05hbWUpXG5cbiAgICBpZihjYWxsYmFja3Mpe1xuICAgICAgaWYoIWVsLmlkKXsgbG9nRXJyb3IoYG5vIERPTSBJRCBmb3IgaG9vayBcIiR7aG9va05hbWV9XCIuIEhvb2tzIHJlcXVpcmUgYSB1bmlxdWUgSUQgb24gZWFjaCBlbGVtZW50LmAsIGVsKSB9XG4gICAgICBsZXQgaG9vayA9IG5ldyBWaWV3SG9vayh0aGlzLCBlbCwgY2FsbGJhY2tzKVxuICAgICAgdGhpcy52aWV3SG9va3NbVmlld0hvb2suZWxlbWVudElEKGhvb2suZWwpXSA9IGhvb2tcbiAgICAgIHJldHVybiBob29rXG4gICAgfSBlbHNlIGlmKGhvb2tOYW1lICE9PSBudWxsKXtcbiAgICAgIGxvZ0Vycm9yKGB1bmtub3duIGhvb2sgZm91bmQgZm9yIFwiJHtob29rTmFtZX1cImAsIGVsKVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lIb29rKGhvb2spe1xuICAgIGhvb2suX19kZXN0cm95ZWQoKVxuICAgIGhvb2suX19jbGVhbnVwX18oKVxuICAgIGRlbGV0ZSB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldXG4gIH1cblxuICBhcHBseVBlbmRpbmdVcGRhdGVzKCl7XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaCgoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKSlcbiAgfVxuXG4gIGVhY2hDaGlsZChjYWxsYmFjayl7XG4gICAgbGV0IGNoaWxkcmVuID0gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdIHx8IHt9XG4gICAgZm9yKGxldCBpZCBpbiBjaGlsZHJlbil7IGNhbGxiYWNrKHRoaXMuZ2V0Q2hpbGRCeUlkKGlkKSkgfVxuICB9XG5cbiAgb25DaGFubmVsKGV2ZW50LCBjYil7XG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIGlmKHRoaXMuaXNKb2luUGVuZGluZygpKXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IGNiKHJlc3ApXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IGNiKHJlc3ApKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBiaW5kQ2hhbm5lbCgpe1xuICAgIC8vIFRoZSBkaWZmIGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSByZWd1bGFyIHVwZGF0ZSBvcGVyYXRpb25zLlxuICAgIC8vIEFsbCBvdGhlciBvcGVyYXRpb25zIGFyZSBxdWV1ZWQgdG8gYmUgYXBwbGllZCBvbmx5IGFmdGVyIGpvaW4uXG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIFwiZGlmZlwiLCAocmF3RGlmZikgPT4ge1xuICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByYXdEaWZmLCAoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgICB9KVxuICAgIH0pXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJyZWRpcmVjdFwiLCAoe3RvLCBmbGFzaH0pID0+IHRoaXMub25SZWRpcmVjdCh7dG8sIGZsYXNofSkpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3BhdGNoXCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVQYXRjaChyZWRpcikpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3JlZGlyZWN0XCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZWRpcikpXG4gICAgdGhpcy5jaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMub25FcnJvcihyZWFzb24pKVxuICAgIHRoaXMuY2hhbm5lbC5vbkNsb3NlKHJlYXNvbiA9PiB0aGlzLm9uQ2xvc2UocmVhc29uKSlcbiAgfVxuXG4gIGRlc3Ryb3lBbGxDaGlsZHJlbigpeyB0aGlzLmVhY2hDaGlsZChjaGlsZCA9PiBjaGlsZC5kZXN0cm95KCkpIH1cblxuICBvbkxpdmVSZWRpcmVjdChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZCwgZmxhc2h9ID0gcmVkaXJcbiAgICBsZXQgdXJsID0gdGhpcy5leHBhbmRVUkwodG8pXG4gICAgdGhpcy5saXZlU29ja2V0Lmhpc3RvcnlSZWRpcmVjdCh1cmwsIGtpbmQsIGZsYXNoKVxuICB9XG5cbiAgb25MaXZlUGF0Y2gocmVkaXIpe1xuICAgIGxldCB7dG8sIGtpbmR9ID0gcmVkaXJcbiAgICB0aGlzLmhyZWYgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICB9XG5cbiAgZXhwYW5kVVJMKHRvKXtcbiAgICByZXR1cm4gdG8uc3RhcnRzV2l0aChcIi9cIikgPyBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fSR7dG99YCA6IHRvXG4gIH1cblxuICBvblJlZGlyZWN0KHt0bywgZmxhc2h9KXsgdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHRvLCBmbGFzaCkgfVxuXG4gIGlzRGVzdHJveWVkKCl7IHJldHVybiB0aGlzLmRlc3Ryb3llZCB9XG5cbiAgam9pbkRlYWQoKXsgdGhpcy5pc0RlYWQgPSB0cnVlIH1cblxuICBqb2luKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNob3dMb2FkZXIodGhpcy5saXZlU29ja2V0LmxvYWRlclRpbWVvdXQpXG4gICAgdGhpcy5iaW5kQ2hhbm5lbCgpXG4gICAgaWYodGhpcy5pc01haW4oKSl7XG4gICAgICB0aGlzLnN0b3BDYWxsYmFjayA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe3RvOiB0aGlzLmhyZWYsIGtpbmQ6IFwiaW5pdGlhbFwifSlcbiAgICB9XG4gICAgdGhpcy5qb2luQ2FsbGJhY2sgPSAob25Eb25lKSA9PiB7XG4gICAgICBvbkRvbmUgPSBvbkRvbmUgfHwgZnVuY3Rpb24oKXt9XG4gICAgICBjYWxsYmFjayA/IGNhbGxiYWNrKHRoaXMuam9pbkNvdW50LCBvbkRvbmUpIDogb25Eb25lKClcbiAgICB9XG4gICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiBmYWxzZX0sICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuam9pbigpXG4gICAgICAgIC5yZWNlaXZlKFwib2tcIiwgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoIXRoaXMuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB0aGlzLm9uSm9pbihkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVzcCA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3IocmVzcCkpXG4gICAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3Ioe3JlYXNvbjogXCJ0aW1lb3V0XCJ9KSlcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luRXJyb3IocmVzcCl7XG4gICAgaWYocmVzcC5yZWFzb24gPT09IFwicmVsb2FkXCIpe1xuICAgICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbYGZhaWxlZCBtb3VudCB3aXRoICR7cmVzcC5zdGF0dXN9LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0YCwgcmVzcF0pXG4gICAgICBpZih0aGlzLmlzTWFpbigpKXsgdGhpcy5vblJlZGlyZWN0KHt0bzogdGhpcy5ocmVmfSkgfVxuICAgICAgcmV0dXJuXG4gICAgfSBlbHNlIGlmKHJlc3AucmVhc29uID09PSBcInVuYXV0aG9yaXplZFwiIHx8IHJlc3AucmVhc29uID09PSBcInN0YWxlXCIpe1xuICAgICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ1bmF1dGhvcml6ZWQgbGl2ZV9yZWRpcmVjdC4gRmFsbGluZyBiYWNrIHRvIHBhZ2UgcmVxdWVzdFwiLCByZXNwXSlcbiAgICAgIGlmKHRoaXMuaXNNYWluKCkpeyB0aGlzLm9uUmVkaXJlY3Qoe3RvOiB0aGlzLmhyZWZ9KSB9XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYocmVzcC5yZWRpcmVjdCB8fCByZXNwLmxpdmVfcmVkaXJlY3Qpe1xuICAgICAgdGhpcy5qb2luUGVuZGluZyA9IGZhbHNlXG4gICAgICB0aGlzLmNoYW5uZWwubGVhdmUoKVxuICAgIH1cbiAgICBpZihyZXNwLnJlZGlyZWN0KXsgcmV0dXJuIHRoaXMub25SZWRpcmVjdChyZXNwLnJlZGlyZWN0KSB9XG4gICAgaWYocmVzcC5saXZlX3JlZGlyZWN0KXsgcmV0dXJuIHRoaXMub25MaXZlUmVkaXJlY3QocmVzcC5saXZlX3JlZGlyZWN0KSB9XG4gICAgdGhpcy5kaXNwbGF5RXJyb3IoW1BIWF9MT0FESU5HX0NMQVNTLCBQSFhfRVJST1JfQ0xBU1MsIFBIWF9TRVJWRVJfRVJST1JfQ0xBU1NdKVxuICAgIHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widW5hYmxlIHRvIGpvaW5cIiwgcmVzcF0pXG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLmxpdmVTb2NrZXQucmVsb2FkV2l0aEppdHRlcih0aGlzKSB9XG4gIH1cblxuICBvbkNsb3NlKHJlYXNvbil7XG4gICAgaWYodGhpcy5pc0Rlc3Ryb3llZCgpKXsgcmV0dXJuIH1cbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaGFzUGVuZGluZ0xpbmsoKSAmJiByZWFzb24gIT09IFwibGVhdmVcIil7XG4gICAgICByZXR1cm4gdGhpcy5saXZlU29ja2V0LnJlbG9hZFdpdGhKaXR0ZXIodGhpcylcbiAgICB9XG4gICAgdGhpcy5kZXN0cm95QWxsQ2hpbGRyZW4oKVxuICAgIHRoaXMubGl2ZVNvY2tldC5kcm9wQWN0aXZlRWxlbWVudCh0aGlzKVxuICAgIC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgY2FuIGJlIG51bGwgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTFcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KXsgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCkgfVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc1VubG9hZGVkKCkpe1xuICAgICAgdGhpcy5zaG93TG9hZGVyKEJFRk9SRV9VTkxPQURfTE9BREVSX1RJTUVPVVQpXG4gICAgfVxuICB9XG5cbiAgb25FcnJvcihyZWFzb24pe1xuICAgIHRoaXMub25DbG9zZShyZWFzb24pXG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInZpZXcgY3Jhc2hlZFwiLCByZWFzb25dKSB9XG4gICAgaWYoIXRoaXMubGl2ZVNvY2tldC5pc1VubG9hZGVkKCkpe1xuICAgICAgaWYodGhpcy5saXZlU29ja2V0LmlzQ29ubmVjdGVkKCkpe1xuICAgICAgICB0aGlzLmRpc3BsYXlFcnJvcihbUEhYX0xPQURJTkdfQ0xBU1MsIFBIWF9FUlJPUl9DTEFTUywgUEhYX1NFUlZFUl9FUlJPUl9DTEFTU10pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpc3BsYXlFcnJvcihbUEhYX0xPQURJTkdfQ0xBU1MsIFBIWF9FUlJPUl9DTEFTUywgUEhYX0NMSUVOVF9FUlJPUl9DTEFTU10pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGlzcGxheUVycm9yKGNsYXNzZXMpe1xuICAgIGlmKHRoaXMuaXNNYWluKCkpeyBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCB7ZGV0YWlsOiB7dG86IHRoaXMuaHJlZiwga2luZDogXCJlcnJvclwifX0pIH1cbiAgICB0aGlzLnNob3dMb2FkZXIoKVxuICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyguLi5jbGFzc2VzKVxuICAgIHRoaXMuZXhlY0FsbCh0aGlzLmJpbmRpbmcoXCJkaXNjb25uZWN0ZWRcIikpXG4gIH1cblxuICBwdXNoV2l0aFJlcGx5KHJlZkdlbmVyYXRvciwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG5cbiAgICBsZXQgW3JlZiwgW2VsXSwgb3B0c10gPSByZWZHZW5lcmF0b3IgPyByZWZHZW5lcmF0b3IoKSA6IFtudWxsLCBbXSwge31dXG4gICAgbGV0IG9uTG9hZGluZ0RvbmUgPSBmdW5jdGlvbigpeyB9XG4gICAgaWYob3B0cy5wYWdlX2xvYWRpbmcgfHwgKGVsICYmIChlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9QQUdFX0xPQURJTkcpKSAhPT0gbnVsbCkpKXtcbiAgICAgIG9uTG9hZGluZ0RvbmUgPSB0aGlzLmxpdmVTb2NrZXQud2l0aFBhZ2VMb2FkaW5nKHtraW5kOiBcImVsZW1lbnRcIiwgdGFyZ2V0OiBlbH0pXG4gICAgfVxuXG4gICAgaWYodHlwZW9mIChwYXlsb2FkLmNpZCkgIT09IFwibnVtYmVyXCIpeyBkZWxldGUgcGF5bG9hZC5jaWQgfVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmxpdmVTb2NrZXQud3JhcFB1c2godGhpcywge3RpbWVvdXQ6IHRydWV9LCAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwucHVzaChldmVudCwgcGF5bG9hZCwgUFVTSF9USU1FT1VUKS5yZWNlaXZlKFwib2tcIiwgcmVzcCA9PiB7XG4gICAgICAgICAgbGV0IGZpbmlzaCA9IChob29rUmVwbHkpID0+IHtcbiAgICAgICAgICAgIGlmKHJlc3AucmVkaXJlY3QpeyB0aGlzLm9uUmVkaXJlY3QocmVzcC5yZWRpcmVjdCkgfVxuICAgICAgICAgICAgaWYocmVzcC5saXZlX3BhdGNoKXsgdGhpcy5vbkxpdmVQYXRjaChyZXNwLmxpdmVfcGF0Y2gpIH1cbiAgICAgICAgICAgIGlmKHJlc3AubGl2ZV9yZWRpcmVjdCl7IHRoaXMub25MaXZlUmVkaXJlY3QocmVzcC5saXZlX3JlZGlyZWN0KSB9XG4gICAgICAgICAgICBvbkxvYWRpbmdEb25lKClcbiAgICAgICAgICAgIG9uUmVwbHkocmVzcCwgaG9va1JlcGx5KVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihyZXNwLmRpZmYpe1xuICAgICAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByZXNwLmRpZmYsICh7ZGlmZiwgcmVwbHksIGV2ZW50c30pID0+IHtcbiAgICAgICAgICAgICAgICBpZihyZWYgIT09IG51bGwpeyB0aGlzLnVuZG9SZWZzKHJlZikgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cylcbiAgICAgICAgICAgICAgICBmaW5pc2gocmVwbHkpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZihyZWYgIT09IG51bGwpeyB0aGlzLnVuZG9SZWZzKHJlZikgfVxuICAgICAgICAgICAgZmluaXNoKG51bGwpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICApXG4gIH1cblxuICB1bmRvUmVmcyhyZWYsIG9ubHlFbHMpe1xuICAgIG9ubHlFbHMgPSBvbmx5RWxzID8gbmV3IFNldChvbmx5RWxzKSA6IG51bGxcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH0gLy8gZXhpdCBpZiBleHRlcm5hbCBmb3JtIHRyaWdnZXJlZFxuXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske1BIWF9SRUZfU1JDfT1cIiR7dGhpcy5pZH1cIl1bJHtQSFhfUkVGfT1cIiR7cmVmfVwiXWAsIGVsID0+IHtcbiAgICAgIGlmKG9ubHlFbHMgJiYgIW9ubHlFbHMuaGFzKGVsKSl7IHJldHVybiB9XG5cbiAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwicGh4OnVubG9ja1wiLCB7YnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogZmFsc2V9KSlcbiAgICAgIGxldCBkaXNhYmxlZFZhbCA9IGVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQpXG4gICAgICBsZXQgcmVhZE9ubHlWYWwgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX1JFQURPTkxZKVxuICAgICAgLy8gcmVtb3ZlIHJlZnNcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuICAgICAgLy8gcmVzdG9yZSBpbnB1dHNcbiAgICAgIGlmKHJlYWRPbmx5VmFsICE9PSBudWxsKXtcbiAgICAgICAgZWwucmVhZE9ubHkgPSByZWFkT25seVZhbCA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUFET05MWSlcbiAgICAgIH1cbiAgICAgIGlmKGRpc2FibGVkVmFsICE9PSBudWxsKXtcbiAgICAgICAgZWwuZGlzYWJsZWQgPSBkaXNhYmxlZFZhbCA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9ESVNBQkxFRClcbiAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSBjbGFzc2VzXG4gICAgICBQSFhfRVZFTlRfQ0xBU1NFUy5mb3JFYWNoKGNsYXNzTmFtZSA9PiBET00ucmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkpXG4gICAgICAvLyByZXN0b3JlIGRpc2FibGVzXG4gICAgICBsZXQgZGlzYWJsZVJlc3RvcmUgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKVxuICAgICAgaWYoZGlzYWJsZVJlc3RvcmUgIT09IG51bGwpe1xuICAgICAgICBlbC5pbm5lclRleHQgPSBkaXNhYmxlUmVzdG9yZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKVxuICAgICAgfVxuICAgICAgbGV0IHRvRWwgPSBET00ucHJpdmF0ZShlbCwgUEhYX1JFRilcbiAgICAgIGlmKHRvRWwpe1xuICAgICAgICBsZXQgaG9vayA9IHRoaXMudHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZWwsIHRvRWwpXG4gICAgICAgIERPTVBhdGNoLnBhdGNoRWwoZWwsIHRvRWwsIHRoaXMubGl2ZVNvY2tldC5nZXRBY3RpdmVFbGVtZW50KCkpXG4gICAgICAgIGlmKGhvb2speyBob29rLl9fdXBkYXRlZCgpIH1cbiAgICAgICAgRE9NLmRlbGV0ZVByaXZhdGUoZWwsIFBIWF9SRUYpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHB1dFJlZihlbGVtZW50cywgZXZlbnQsIG9wdHMgPSB7fSl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmKytcbiAgICBsZXQgZGlzYWJsZVdpdGggPSB0aGlzLmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSClcbiAgICBpZihvcHRzLmxvYWRpbmcpeyBlbGVtZW50cyA9IGVsZW1lbnRzLmNvbmNhdChET00uYWxsKGRvY3VtZW50LCBvcHRzLmxvYWRpbmcpKX1cblxuICAgIGZvcihsZXQgZWwgb2YgZWxlbWVudHMpe1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9SRUYsIG5ld1JlZilcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUkVGX1NSQywgdGhpcy5lbC5pZClcbiAgICAgIGlmKG9wdHMuc3VibWl0dGVyICYmICEoZWwgPT09IG9wdHMuc3VibWl0dGVyIHx8IGVsID09PSBvcHRzLmZvcm0pKXsgY29udGludWUgfVxuXG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKGBwaHgtJHtldmVudH0tbG9hZGluZ2ApXG4gICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChgcGh4OiR7ZXZlbnR9LWxvYWRpbmdgLCB7YnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogZmFsc2V9KSlcbiAgICAgIGxldCBkaXNhYmxlVGV4dCA9IGVsLmdldEF0dHJpYnV0ZShkaXNhYmxlV2l0aClcbiAgICAgIGlmKGRpc2FibGVUZXh0ICE9PSBudWxsKXtcbiAgICAgICAgaWYoIWVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpKXtcbiAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLCBlbC5pbm5lclRleHQpXG4gICAgICAgIH1cbiAgICAgICAgaWYoZGlzYWJsZVRleHQgIT09IFwiXCIpeyBlbC5pbm5lclRleHQgPSBkaXNhYmxlVGV4dCB9XG4gICAgICAgIC8vIFBIWF9ESVNBQkxFRCBjb3VsZCBoYXZlIGFscmVhZHkgYmVlbiBzZXQgaW4gZGlzYWJsZUZvcm1cbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCwgZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCkgfHwgZWwuZGlzYWJsZWQpXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbbmV3UmVmLCBlbGVtZW50cywgb3B0c11cbiAgfVxuXG4gIGNvbXBvbmVudElEKGVsKXtcbiAgICBsZXQgY2lkID0gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKVxuICAgIHJldHVybiBjaWQgPyBwYXJzZUludChjaWQpIDogbnVsbFxuICB9XG5cbiAgdGFyZ2V0Q29tcG9uZW50SUQodGFyZ2V0LCB0YXJnZXRDdHgsIG9wdHMgPSB7fSl7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7IHJldHVybiB0YXJnZXRDdHggfVxuXG4gICAgbGV0IGNpZE9yU2VsZWN0b3IgPSBvcHRzLnRhcmdldCB8fCB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInRhcmdldFwiKSlcbiAgICBpZihpc0NpZChjaWRPclNlbGVjdG9yKSl7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoY2lkT3JTZWxlY3RvcilcbiAgICB9IGVsc2UgaWYodGFyZ2V0Q3R4ICYmIChjaWRPclNlbGVjdG9yICE9PSBudWxsIHx8IG9wdHMudGFyZ2V0KSl7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpe1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpe1xuICAgICAgcmV0dXJuIHRhcmdldEN0eFxuICAgIH0gZWxzZSBpZih0YXJnZXRDdHgpe1xuICAgICAgcmV0dXJuIG1heWJlKHRhcmdldEN0eC5jbG9zZXN0KGBbJHtQSFhfQ09NUE9ORU5UfV1gKSwgZWwgPT4gdGhpcy5vd25zRWxlbWVudChlbCkgJiYgdGhpcy5jb21wb25lbnRJRChlbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgcHVzaEhvb2tFdmVudChlbCwgdGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7XG4gICAgICB0aGlzLmxvZyhcImhvb2tcIiwgKCkgPT4gW1widW5hYmxlIHRvIHB1c2ggaG9vayBldmVudC4gTGl2ZVZpZXcgbm90IGNvbm5lY3RlZFwiLCBldmVudCwgcGF5bG9hZF0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgbGV0IFtyZWYsIGVscywgb3B0c10gPSB0aGlzLnB1dFJlZihbZWxdLCBcImhvb2tcIilcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gW3JlZiwgZWxzLCBvcHRzXSwgXCJldmVudFwiLCB7XG4gICAgICB0eXBlOiBcImhvb2tcIixcbiAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgIHZhbHVlOiBwYXlsb2FkLFxuICAgICAgY2lkOiB0aGlzLmNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpXG4gICAgfSwgKHJlc3AsIHJlcGx5KSA9PiBvblJlcGx5KHJlcGx5LCByZWYpKVxuXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgZXh0cmFjdE1ldGEoZWwsIG1ldGEsIHZhbHVlKXtcbiAgICBsZXQgcHJlZml4ID0gdGhpcy5iaW5kaW5nKFwidmFsdWUtXCIpXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGVsLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgbGV0IG5hbWUgPSBlbC5hdHRyaWJ1dGVzW2ldLm5hbWVcbiAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChwcmVmaXgpKXsgbWV0YVtuYW1lLnJlcGxhY2UocHJlZml4LCBcIlwiKV0gPSBlbC5nZXRBdHRyaWJ1dGUobmFtZSkgfVxuICAgIH1cbiAgICBpZihlbC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmICEoZWwgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIG1ldGEudmFsdWUgPSBlbC52YWx1ZVxuXG4gICAgICBpZihlbC50YWdOYW1lID09PSBcIklOUFVUXCIgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUpID49IDAgJiYgIWVsLmNoZWNrZWQpe1xuICAgICAgICBkZWxldGUgbWV0YS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZih2YWx1ZSl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBmb3IobGV0IGtleSBpbiB2YWx1ZSl7IG1ldGFba2V5XSA9IHZhbHVlW2tleV0gfVxuICAgIH1cbiAgICByZXR1cm4gbWV0YVxuICB9XG5cblxuICBwdXNoRXZlbnQodHlwZSwgZWwsIHRhcmdldEN0eCwgcGh4RXZlbnQsIG1ldGEsIG9wdHMgPSB7fSwgb25SZXBseSl7XG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KCgpID0+IHRoaXMucHV0UmVmKFtlbF0sIHR5cGUsIG9wdHMpLCBcImV2ZW50XCIsIHtcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICB2YWx1ZTogdGhpcy5leHRyYWN0TWV0YShlbCwgbWV0YSwgb3B0cy52YWx1ZSksXG4gICAgICBjaWQ6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZWwsIHRhcmdldEN0eCwgb3B0cylcbiAgICB9LCAocmVzcCwgcmVwbHkpID0+IG9uUmVwbHkgJiYgb25SZXBseShyZXBseSkpXG4gIH1cblxuICBwdXNoRmlsZVByb2dyZXNzKGZpbGVFbCwgZW50cnlSZWYsIHByb2dyZXNzLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMubGl2ZVNvY2tldC53aXRoaW5Pd25lcnMoZmlsZUVsLmZvcm0sICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHZpZXcucHVzaFdpdGhSZXBseShudWxsLCBcInByb2dyZXNzXCIsIHtcbiAgICAgICAgZXZlbnQ6IGZpbGVFbC5nZXRBdHRyaWJ1dGUodmlldy5iaW5kaW5nKFBIWF9QUk9HUkVTUykpLFxuICAgICAgICByZWY6IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyeV9yZWY6IGVudHJ5UmVmLFxuICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3MsXG4gICAgICAgIGNpZDogdmlldy50YXJnZXRDb21wb25lbnRJRChmaWxlRWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgICAgfSwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgcHVzaElucHV0KGlucHV0RWwsIHRhcmdldEN0eCwgZm9yY2VDaWQsIHBoeEV2ZW50LCBvcHRzLCBjYWxsYmFjayl7XG4gICAgbGV0IHVwbG9hZHNcbiAgICBsZXQgY2lkID0gaXNDaWQoZm9yY2VDaWQpID8gZm9yY2VDaWQgOiB0aGlzLnRhcmdldENvbXBvbmVudElEKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4LCBvcHRzKVxuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLnB1dFJlZihbaW5wdXRFbCwgaW5wdXRFbC5mb3JtXSwgXCJjaGFuZ2VcIiwgb3B0cylcbiAgICBsZXQgZm9ybURhdGFcbiAgICBsZXQgbWV0YSAgPSB0aGlzLmV4dHJhY3RNZXRhKGlucHV0RWwuZm9ybSlcbiAgICBpZihpbnB1dEVsIGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQpeyBtZXRhLnN1Ym1pdHRlciA9IGlucHV0RWwgfVxuICAgIGlmKGlucHV0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSkpe1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldCwgLi4ubWV0YX0sIFtpbnB1dEVsLm5hbWVdKVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oaW5wdXRFbC5mb3JtLCB7X3RhcmdldDogb3B0cy5fdGFyZ2V0LCAuLi5tZXRhfSlcbiAgICB9XG4gICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoaW5wdXRFbCkgJiYgaW5wdXRFbC5maWxlcyAmJiBpbnB1dEVsLmZpbGVzLmxlbmd0aCA+IDApe1xuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXMoaW5wdXRFbCwgQXJyYXkuZnJvbShpbnB1dEVsLmZpbGVzKSlcbiAgICB9XG4gICAgdXBsb2FkcyA9IExpdmVVcGxvYWRlci5zZXJpYWxpemVVcGxvYWRzKGlucHV0RWwpXG5cbiAgICBsZXQgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBcImZvcm1cIixcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgIHVwbG9hZHM6IHVwbG9hZHMsXG4gICAgICBjaWQ6IGNpZFxuICAgIH1cbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIERPTS5zaG93RXJyb3IoaW5wdXRFbCwgdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUiksIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19HUk9VUCkpXG4gICAgICBpZihET00uaXNVcGxvYWRJbnB1dChpbnB1dEVsKSAmJiBET00uaXNBdXRvVXBsb2FkKGlucHV0RWwpKXtcbiAgICAgICAgaWYoTGl2ZVVwbG9hZGVyLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXRFbCkubGVuZ3RoID4gMCl7XG4gICAgICAgICAgbGV0IFtyZWYsIF9lbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZiwgW2lucHV0RWwuZm9ybV0pXG4gICAgICAgICAgdGhpcy51cGxvYWRGaWxlcyhpbnB1dEVsLmZvcm0sIHRhcmdldEN0eCwgcmVmLCBjaWQsIChfdXBsb2FkcykgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcClcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckF3YWl0aW5nU3VibWl0KGlucHV0RWwuZm9ybSlcbiAgICAgICAgICAgIHRoaXMudW5kb1JlZnMocmVmKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3ApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHRyaWdnZXJBd2FpdGluZ1N1Ym1pdChmb3JtRWwpe1xuICAgIGxldCBhd2FpdGluZ1N1Ym1pdCA9IHRoaXMuZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbClcbiAgICBpZihhd2FpdGluZ1N1Ym1pdCl7XG4gICAgICBsZXQgW19lbCwgX3JlZiwgX29wdHMsIGNhbGxiYWNrXSA9IGF3YWl0aW5nU3VibWl0XG4gICAgICB0aGlzLmNhbmNlbFN1Ym1pdChmb3JtRWwpXG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbCl7XG4gICAgcmV0dXJuIHRoaXMuZm9ybVN1Ym1pdHMuZmluZCgoW2VsLCBfcmVmLCBfb3B0cywgX2NhbGxiYWNrXSkgPT4gZWwuaXNTYW1lTm9kZShmb3JtRWwpKVxuICB9XG5cbiAgc2NoZWR1bGVTdWJtaXQoZm9ybUVsLCByZWYsIG9wdHMsIGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLmdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpKXsgcmV0dXJuIHRydWUgfVxuICAgIHRoaXMuZm9ybVN1Ym1pdHMucHVzaChbZm9ybUVsLCByZWYsIG9wdHMsIGNhbGxiYWNrXSlcbiAgfVxuXG4gIGNhbmNlbFN1Ym1pdChmb3JtRWwpe1xuICAgIHRoaXMuZm9ybVN1Ym1pdHMgPSB0aGlzLmZvcm1TdWJtaXRzLmZpbHRlcigoW2VsLCByZWYsIF9jYWxsYmFja10pID0+IHtcbiAgICAgIGlmKGVsLmlzU2FtZU5vZGUoZm9ybUVsKSl7XG4gICAgICAgIHRoaXMudW5kb1JlZnMocmVmKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRpc2FibGVGb3JtKGZvcm1FbCwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZmlsdGVySWdub3JlZCA9IGVsID0+IHtcbiAgICAgIGxldCB1c2VySWdub3JlZCA9IGNsb3Nlc3RQaHhCaW5kaW5nKGVsLCBgJHt0aGlzLmJpbmRpbmcoUEhYX1VQREFURSl9PWlnbm9yZWAsIGVsLmZvcm0pXG4gICAgICByZXR1cm4gISh1c2VySWdub3JlZCB8fCBjbG9zZXN0UGh4QmluZGluZyhlbCwgXCJkYXRhLXBoeC11cGRhdGU9aWdub3JlXCIsIGVsLmZvcm0pKVxuICAgIH1cbiAgICBsZXQgZmlsdGVyRGlzYWJsZXMgPSBlbCA9PiB7XG4gICAgICByZXR1cm4gZWwuaGFzQXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKSlcbiAgICB9XG4gICAgbGV0IGZpbHRlckJ1dHRvbiA9IGVsID0+IGVsLnRhZ05hbWUgPT0gXCJCVVRUT05cIlxuXG4gICAgbGV0IGZpbHRlcklucHV0ID0gZWwgPT4gW1wiSU5QVVRcIiwgXCJURVhUQVJFQVwiLCBcIlNFTEVDVFwiXS5pbmNsdWRlcyhlbC50YWdOYW1lKVxuXG4gICAgbGV0IGZvcm1FbGVtZW50cyA9IEFycmF5LmZyb20oZm9ybUVsLmVsZW1lbnRzKVxuICAgIGxldCBkaXNhYmxlcyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVyRGlzYWJsZXMpXG4gICAgbGV0IGJ1dHRvbnMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlckJ1dHRvbikuZmlsdGVyKGZpbHRlcklnbm9yZWQpXG4gICAgbGV0IGlucHV0cyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVySW5wdXQpLmZpbHRlcihmaWx0ZXJJZ25vcmVkKVxuXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCwgYnV0dG9uLmRpc2FibGVkKVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICAgIH0pXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFBIWF9SRUFET05MWSwgaW5wdXQucmVhZE9ubHkpXG4gICAgICBpbnB1dC5yZWFkT25seSA9IHRydWVcbiAgICAgIGlmKGlucHV0LmZpbGVzKXtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCwgaW5wdXQuZGlzYWJsZWQpXG4gICAgICAgIGlucHV0LmRpc2FibGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgZm9ybUVsLnNldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORyksIFwiXCIpXG4gICAgcmV0dXJuIHRoaXMucHV0UmVmKFtmb3JtRWxdLmNvbmNhdChkaXNhYmxlcykuY29uY2F0KGJ1dHRvbnMpLmNvbmNhdChpbnB1dHMpLCBcInN1Ym1pdFwiLCBvcHRzKVxuICB9XG5cbiAgcHVzaEZvcm1TdWJtaXQoZm9ybUVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsIG9uUmVwbHkpe1xuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLmRpc2FibGVGb3JtKGZvcm1FbCwgey4uLm9wdHMsIGZvcm06IGZvcm1FbCwgc3VibWl0dGVyOiBzdWJtaXR0ZXJ9KVxuICAgIGxldCBjaWQgPSB0aGlzLnRhcmdldENvbXBvbmVudElEKGZvcm1FbCwgdGFyZ2V0Q3R4KVxuICAgIGlmKExpdmVVcGxvYWRlci5oYXNVcGxvYWRzSW5Qcm9ncmVzcyhmb3JtRWwpKXtcbiAgICAgIGxldCBbcmVmLCBfZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICBsZXQgcHVzaCA9ICgpID0+IHRoaXMucHVzaEZvcm1TdWJtaXQoZm9ybUVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsIG9uUmVwbHkpXG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVN1Ym1pdChmb3JtRWwsIHJlZiwgb3B0cywgcHVzaClcbiAgICB9IGVsc2UgaWYoTGl2ZVVwbG9hZGVyLmlucHV0c0F3YWl0aW5nUHJlZmxpZ2h0KGZvcm1FbCkubGVuZ3RoID4gMCl7XG4gICAgICBsZXQgW3JlZiwgZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICBsZXQgcHJveHlSZWZHZW4gPSAoKSA9PiBbcmVmLCBlbHMsIG9wdHNdXG4gICAgICB0aGlzLnVwbG9hZEZpbGVzKGZvcm1FbCwgdGFyZ2V0Q3R4LCByZWYsIGNpZCwgKHVwbG9hZHMpID0+IHtcbiAgICAgICAgLy8gaWYgd2Ugc3RpbGwgaGF2aW5nIHBlbmRpbmcgcHJlZmxpZ2h0cyBpdCBtZWFucyB3ZSBoYXZlIGludmFsaWQgZW50cmllc1xuICAgICAgICAvLyBhbmQgdGhlIHBoeC1zdWJtaXQgY2Fubm90IGJlIGNvbXBsZXRlZFxuICAgICAgICBpZihMaXZlVXBsb2FkZXIuaW5wdXRzQXdhaXRpbmdQcmVmbGlnaHQoZm9ybUVsKS5sZW5ndGggPiAwKXtcbiAgICAgICAgICByZXR1cm4gdGhpcy51bmRvUmVmcyhyZWYpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1ldGEgPSB0aGlzLmV4dHJhY3RNZXRhKGZvcm1FbClcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShmb3JtRWwsIHtzdWJtaXR0ZXIsIC4uLm1ldGF9KVxuICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocHJveHlSZWZHZW4sIFwiZXZlbnRcIiwge1xuICAgICAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICAgICAgY2lkOiBjaWRcbiAgICAgICAgfSwgb25SZXBseSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmKCEoZm9ybUVsLmhhc0F0dHJpYnV0ZShQSFhfUkVGKSAmJiBmb3JtRWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIpKSl7XG4gICAgICBsZXQgbWV0YSA9IHRoaXMuZXh0cmFjdE1ldGEoZm9ybUVsKVxuICAgICAgbGV0IGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShmb3JtRWwsIHtzdWJtaXR0ZXIsIC4uLm1ldGF9KVxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbmVyYXRvciwgXCJldmVudFwiLCB7XG4gICAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgICAgY2lkOiBjaWRcbiAgICAgIH0sIG9uUmVwbHkpXG4gICAgfVxuICB9XG5cbiAgdXBsb2FkRmlsZXMoZm9ybUVsLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCBvbkNvbXBsZXRlKXtcbiAgICBsZXQgam9pbkNvdW50QXRVcGxvYWQgPSB0aGlzLmpvaW5Db3VudFxuICAgIGxldCBpbnB1dEVscyA9IExpdmVVcGxvYWRlci5hY3RpdmVGaWxlSW5wdXRzKGZvcm1FbClcbiAgICBsZXQgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MgPSBpbnB1dEVscy5sZW5ndGhcblxuICAgIC8vIGdldCBlYWNoIGZpbGUgaW5wdXRcbiAgICBpbnB1dEVscy5mb3JFYWNoKGlucHV0RWwgPT4ge1xuICAgICAgbGV0IHVwbG9hZGVyID0gbmV3IExpdmVVcGxvYWRlcihpbnB1dEVsLCB0aGlzLCAoKSA9PiB7XG4gICAgICAgIG51bUZpbGVJbnB1dHNJblByb2dyZXNzLS1cbiAgICAgICAgaWYobnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MgPT09IDApeyBvbkNvbXBsZXRlKCkgfVxuICAgICAgfSk7XG5cbiAgICAgIGxldCBlbnRyaWVzID0gdXBsb2FkZXIuZW50cmllcygpLm1hcChlbnRyeSA9PiBlbnRyeS50b1ByZWZsaWdodFBheWxvYWQoKSlcblxuICAgICAgaWYoZW50cmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MtLVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgbGV0IHBheWxvYWQgPSB7XG4gICAgICAgIHJlZjogaW5wdXRFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyaWVzOiBlbnRyaWVzLFxuICAgICAgICBjaWQ6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nKFwidXBsb2FkXCIsICgpID0+IFtcInNlbmRpbmcgcHJlZmxpZ2h0IHJlcXVlc3RcIiwgcGF5bG9hZF0pXG5cbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImFsbG93X3VwbG9hZFwiLCBwYXlsb2FkLCByZXNwID0+IHtcbiAgICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wiZ290IHByZWZsaWdodCByZXNwb25zZVwiLCByZXNwXSlcbiAgICAgICAgLy8gdGhlIHByZWZsaWdodCB3aWxsIHJlamVjdCBlbnRyaWVzIGJleW9uZCB0aGUgbWF4IGVudHJpZXNcbiAgICAgICAgLy8gc28gd2UgZXJyb3IgYW5kIGNhbmNlbCBlbnRyaWVzIG9uIHRoZSBjbGllbnQgdGhhdCBhcmUgbWlzc2luZyBmcm9tIHRoZSByZXNwb25zZVxuICAgICAgICB1cGxvYWRlci5lbnRyaWVzKCkuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgaWYocmVzcC5lbnRyaWVzICYmICFyZXNwLmVudHJpZXNbZW50cnkucmVmXSl7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZhaWxlZEVudHJ5UHJlZmxpZ2h0KGVudHJ5LnJlZiwgXCJmYWlsZWQgcHJlZmxpZ2h0XCIsIHVwbG9hZGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLy8gZm9yIGF1dG8gdXBsb2Fkcywgd2UgbWF5IGhhdmUgYW4gZW1wdHkgZW50cmllcyByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgLy8gZm9yIGZvcm0gc3VibWl0cyB0aGF0IGNvbnRhaW4gaW52YWxpZCBlbnRyaWVzXG4gICAgICAgIGlmKHJlc3AuZXJyb3IgfHwgT2JqZWN0LmtleXMocmVzcC5lbnRyaWVzKS5sZW5ndGggPT09IDApe1xuICAgICAgICAgIHRoaXMudW5kb1JlZnMocmVmKVxuICAgICAgICAgIGxldCBlcnJvcnMgPSByZXNwLmVycm9yIHx8IFtdXG4gICAgICAgICAgZXJyb3JzLm1hcCgoW2VudHJ5X3JlZiwgcmVhc29uXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVGYWlsZWRFbnRyeVByZWZsaWdodChlbnRyeV9yZWYsIHJlYXNvbiwgdXBsb2FkZXIpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgb25FcnJvciA9IChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsLm9uRXJyb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBpZih0aGlzLmpvaW5Db3VudCA9PT0gam9pbkNvdW50QXRVcGxvYWQpeyBjYWxsYmFjaygpIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwbG9hZGVyLmluaXRBZGFwdGVyVXBsb2FkKHJlc3AsIG9uRXJyb3IsIHRoaXMubGl2ZVNvY2tldClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlRmFpbGVkRW50cnlQcmVmbGlnaHQodXBsb2FkUmVmLCByZWFzb24sIHVwbG9hZGVyKXtcbiAgICBpZih1cGxvYWRlci5pc0F1dG9VcGxvYWQoKSl7XG4gICAgICAvLyB1cGxvYWRSZWYgbWF5IGJlIHRvcCBsZXZlbCB1cGxvYWQgY29uZmlnIHJlZiBvciBlbnRyeSByZWZcbiAgICAgIGxldCBlbnRyeSA9IHVwbG9hZGVyLmVudHJpZXMoKS5maW5kKGVudHJ5ID0+IGVudHJ5LnJlZiA9PT0gdXBsb2FkUmVmLnRvU3RyaW5nKCkpXG4gICAgICBpZihlbnRyeSl7IGVudHJ5LmNhbmNlbCgpIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdXBsb2FkZXIuZW50cmllcygpLm1hcChlbnRyeSA9PiBlbnRyeS5jYW5jZWwoKSlcbiAgICB9XG4gICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW2BlcnJvciBmb3IgZW50cnkgJHt1cGxvYWRSZWZ9YCwgcmVhc29uXSlcbiAgfVxuXG4gIGRpc3BhdGNoVXBsb2Fkcyh0YXJnZXRDdHgsIG5hbWUsIGZpbGVzT3JCbG9icyl7XG4gICAgbGV0IHRhcmdldEVsZW1lbnQgPSB0aGlzLnRhcmdldEN0eEVsZW1lbnQodGFyZ2V0Q3R4KSB8fCB0aGlzLmVsXG4gICAgbGV0IGlucHV0cyA9IERPTS5maW5kVXBsb2FkSW5wdXRzKHRhcmdldEVsZW1lbnQpLmZpbHRlcihlbCA9PiBlbC5uYW1lID09PSBuYW1lKVxuICAgIGlmKGlucHV0cy5sZW5ndGggPT09IDApeyBsb2dFcnJvcihgbm8gbGl2ZSBmaWxlIGlucHV0cyBmb3VuZCBtYXRjaGluZyB0aGUgbmFtZSBcIiR7bmFtZX1cImApIH1cbiAgICBlbHNlIGlmKGlucHV0cy5sZW5ndGggPiAxKXsgbG9nRXJyb3IoYGR1cGxpY2F0ZSBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgeyBET00uZGlzcGF0Y2hFdmVudChpbnB1dHNbMF0sIFBIWF9UUkFDS19VUExPQURTLCB7ZGV0YWlsOiB7ZmlsZXM6IGZpbGVzT3JCbG9ic319KSB9XG4gIH1cblxuICB0YXJnZXRDdHhFbGVtZW50KHRhcmdldEN0eCkge1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpe1xuICAgICAgbGV0IFt0YXJnZXRdID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCB0YXJnZXRDdHgpXG4gICAgICByZXR1cm4gdGFyZ2V0XG4gICAgfSBlbHNlIGlmKHRhcmdldEN0eCkge1xuICAgICAgcmV0dXJuIHRhcmdldEN0eFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHB1c2hGb3JtUmVjb3Zlcnkob2xkRm9ybSwgbmV3Rm9ybSwgdGVtcGxhdGVEb20sIGNhbGxiYWNrKXtcbiAgICAvLyB3ZSBhcmUgb25seSByZWNvdmVyaW5nIGZvcm1zIGluc2lkZSB0aGUgY3VycmVudCB2aWV3LCB0aGVyZWZvcmUgaXQgaXMgc2FmZSB0b1xuICAgIC8vIHNraXAgd2l0aGluT3duZXJzIGhlcmUgYW5kIGFsd2F5cyB1c2UgdGhpcyB3aGVuIHJlZmVycmluZyB0byB0aGUgdmlld1xuICAgIGNvbnN0IHBoeENoYW5nZSA9IHRoaXMuYmluZGluZyhcImNoYW5nZVwiKVxuICAgIGNvbnN0IHBoeFRhcmdldCA9IG5ld0Zvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInRhcmdldFwiKSkgfHwgbmV3Rm9ybVxuICAgIGNvbnN0IHBoeEV2ZW50ID0gbmV3Rm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9BVVRPX1JFQ09WRVIpKSB8fCBuZXdGb3JtLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShvbGRGb3JtLmVsZW1lbnRzKS5maWx0ZXIoZWwgPT4gRE9NLmlzRm9ybUlucHV0KGVsKSAmJiBlbC5uYW1lICYmICFlbC5oYXNBdHRyaWJ1dGUocGh4Q2hhbmdlKSlcbiAgICBpZihpbnB1dHMubGVuZ3RoID09PSAwKXsgcmV0dXJuIH1cblxuICAgIC8vIHdlIG11c3QgY2xlYXIgdHJhY2tlZCB1cGxvYWRzIGJlZm9yZSByZWNvdmVyeSBhcyB0aGV5IG5vIGxvbmdlciBoYXZlIHZhbGlkIHJlZnNcbiAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBpbnB1dC5oYXNBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpICYmIExpdmVVcGxvYWRlci5jbGVhckZpbGVzKGlucHV0KSlcbiAgICAvLyBwdXNoSW5wdXQgYXNzdW1lcyB0aGF0IHRoZXJlIGlzIGEgc291cmNlIGVsZW1lbnQgdGhhdCBpbml0aWF0ZWQgdGhlIGNoYW5nZTtcbiAgICAvLyBiZWNhdXNlIHRoaXMgaXMgbm90IHRoZSBjYXNlIHdoZW4gd2UgcmVjb3ZlciBmb3Jtcywgd2UgcHJvdmlkZSB0aGUgZmlyc3QgaW5wdXQgd2UgZmluZFxuICAgIGxldCBpbnB1dCA9IGlucHV0cy5maW5kKGVsID0+IGVsLnR5cGUgIT09IFwiaGlkZGVuXCIpIHx8IGlucHV0c1swXVxuXG4gICAgLy8gaW4gdGhlIGNhc2UgdGhhdCB0aGVyZSBhcmUgbXVsdGlwbGUgdGFyZ2V0cywgd2UgY291bnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIHJlY292ZXJ5IGV2ZW50c1xuICAgIC8vIGFuZCBvbmx5IGNhbGwgdGhlIGNhbGxiYWNrIG9uY2UgYWxsIGV2ZW50cyBoYXZlIGJlZW4gcHJvY2Vzc2VkXG4gICAgbGV0IHBlbmRpbmcgPSAwXG4gICAgLy8gd2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsIGNhbGxiYWNrLCBkb20sIHZpZXdFbClcbiAgICB0aGlzLndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCAodGFyZ2V0VmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICBjb25zdCBjaWQgPSB0aGlzLnRhcmdldENvbXBvbmVudElEKG5ld0Zvcm0sIHRhcmdldEN0eClcbiAgICAgIHBlbmRpbmcrK1xuICAgICAgdGFyZ2V0Vmlldy5wdXNoSW5wdXQoaW5wdXQsIHRhcmdldEN0eCwgY2lkLCBwaHhFdmVudCwge190YXJnZXQ6IGlucHV0Lm5hbWV9LCAoKSA9PiB7XG4gICAgICAgIHBlbmRpbmctLVxuICAgICAgICBpZihwZW5kaW5nID09PSAwKXsgY2FsbGJhY2soKSB9XG4gICAgICB9KVxuICAgIH0sIHRlbXBsYXRlRG9tLCB0ZW1wbGF0ZURvbSlcbiAgfVxuXG4gIHB1c2hMaW5rUGF0Y2goaHJlZiwgdGFyZ2V0RWwsIGNhbGxiYWNrKXtcbiAgICBsZXQgbGlua1JlZiA9IHRoaXMubGl2ZVNvY2tldC5zZXRQZW5kaW5nTGluayhocmVmKVxuICAgIGxldCByZWZHZW4gPSB0YXJnZXRFbCA/ICgpID0+IHRoaXMucHV0UmVmKFt0YXJnZXRFbF0sIFwiY2xpY2tcIikgOiBudWxsXG4gICAgbGV0IGZhbGxiYWNrID0gKCkgPT4gdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgIGxldCB1cmwgPSBocmVmLnN0YXJ0c1dpdGgoXCIvXCIpID8gYCR7bG9jYXRpb24ucHJvdG9jb2x9Ly8ke2xvY2F0aW9uLmhvc3R9JHtocmVmfWAgOiBocmVmXG5cbiAgICBsZXQgcHVzaCA9IHRoaXMucHVzaFdpdGhSZXBseShyZWZHZW4sIFwibGl2ZV9wYXRjaFwiLCB7dXJsfSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHJlc3AubGlua19yZWRpcmVjdCl7XG4gICAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcGxhY2VNYWluKGhyZWYsIG51bGwsIGNhbGxiYWNrLCBsaW5rUmVmKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmKHRoaXMubGl2ZVNvY2tldC5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7XG4gICAgICAgICAgICB0aGlzLmhyZWYgPSBocmVmXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYXBwbHlQZW5kaW5nVXBkYXRlcygpXG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sobGlua1JlZilcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaWYocHVzaCl7XG4gICAgICBwdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIGZhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBmYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgZ2V0Rm9ybXNGb3JSZWNvdmVyeSgpe1xuICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSAwKXsgcmV0dXJuIHt9IH1cblxuICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcblxuICAgIHJldHVybiBET00uYWxsKHRoaXMuZWwsIGBmb3JtWyR7cGh4Q2hhbmdlfV1gKVxuICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uaWQpXG4gICAgICAuZmlsdGVyKGZvcm0gPT4gZm9ybS5lbGVtZW50cy5sZW5ndGggPiAwKVxuICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgIT09IFwiaWdub3JlXCIpXG4gICAgICAubWFwKGZvcm0gPT4gZm9ybS5jbG9uZU5vZGUodHJ1ZSkpXG4gICAgICAucmVkdWNlKChhY2MsIGZvcm0pID0+IHtcbiAgICAgICAgYWNjW2Zvcm0uaWRdID0gZm9ybVxuICAgICAgICByZXR1cm4gYWNjXG4gICAgICB9LCB7fSlcbiAgfVxuXG4gIG1heWJlUHVzaENvbXBvbmVudHNEZXN0cm95ZWQoZGVzdHJveWVkQ0lEcyl7XG4gICAgbGV0IHdpbGxEZXN0cm95Q0lEcyA9IGRlc3Ryb3llZENJRHMuZmlsdGVyKGNpZCA9PiB7XG4gICAgICByZXR1cm4gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCBjaWQpLmxlbmd0aCA9PT0gMFxuICAgIH0pXG5cbiAgICBpZih3aWxsRGVzdHJveUNJRHMubGVuZ3RoID4gMCl7XG4gICAgICAvLyB3ZSBtdXN0IHJlc2V0IHRoZSByZW5kZXIgY2hhbmdlIHRyYWNraW5nIGZvciBjaWRzIHRoYXRcbiAgICAgIC8vIGNvdWxkIGJlIGFkZGVkIGJhY2sgZnJvbSB0aGUgc2VydmVyIHNvIHdlIGRvbid0IHNraXAgdGhlbVxuICAgICAgd2lsbERlc3Ryb3lDSURzLmZvckVhY2goY2lkID0+IHRoaXMucmVuZGVyZWQucmVzZXRSZW5kZXIoY2lkKSlcblxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiY2lkc193aWxsX2Rlc3Ryb3lcIiwge2NpZHM6IHdpbGxEZXN0cm95Q0lEc30sICgpID0+IHtcbiAgICAgICAgLy8gd2UgbXVzdCB3YWl0IGZvciBwZW5kaW5nIHRyYW5zaXRpb25zIHRvIGNvbXBsZXRlIGJlZm9yZSBkZXRlcm1pbmluZ1xuICAgICAgICAvLyBpZiB0aGUgY2lkcyB3ZXJlIGFkZGVkIGJhY2sgdG8gdGhlIERPTSBpbiB0aGUgbWVhbnRpbWUgKCMzMTM5KVxuICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgLy8gU2VlIGlmIGFueSBvZiB0aGUgY2lkcyB3ZSB3YW50ZWQgdG8gZGVzdHJveSB3ZXJlIGFkZGVkIGJhY2ssXG4gICAgICAgICAgLy8gaWYgdGhleSB3ZXJlIGFkZGVkIGJhY2ssIHdlIGRvbid0IGFjdHVhbGx5IGRlc3Ryb3kgdGhlbS5cbiAgICAgICAgICBsZXQgY29tcGxldGVseURlc3Ryb3lDSURzID0gd2lsbERlc3Ryb3lDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgY2lkKS5sZW5ndGggPT09IDBcbiAgICAgICAgICB9KVxuICBcbiAgICAgICAgICBpZihjb21wbGV0ZWx5RGVzdHJveUNJRHMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJjaWRzX2Rlc3Ryb3llZFwiLCB7Y2lkczogY29tcGxldGVseURlc3Ryb3lDSURzfSwgKHJlc3ApID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZC5wcnVuZUNJRHMocmVzcC5jaWRzKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG93bnNFbGVtZW50KGVsKXtcbiAgICBsZXQgcGFyZW50Vmlld0VsID0gZWwuY2xvc2VzdChQSFhfVklFV19TRUxFQ1RPUilcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpID09PSB0aGlzLmlkIHx8XG4gICAgICAocGFyZW50Vmlld0VsICYmIHBhcmVudFZpZXdFbC5pZCA9PT0gdGhpcy5pZCkgfHxcbiAgICAgICghcGFyZW50Vmlld0VsICYmIHRoaXMuaXNEZWFkKVxuICB9XG5cbiAgc3VibWl0Rm9ybShmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMgPSB7fSl7XG4gICAgRE9NLnB1dFByaXZhdGUoZm9ybSwgUEhYX0hBU19TVUJNSVRURUQsIHRydWUpXG4gICAgY29uc3QgcGh4RmVlZGJhY2tGb3IgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGNvbnN0IHBoeEZlZWRiYWNrR3JvdXAgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfR1JPVVApXG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5wdXRQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSkpXG4gICAgdGhpcy5saXZlU29ja2V0LmJsdXJBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsICgpID0+IHtcbiAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5zaG93RXJyb3IoaW5wdXQsIHBoeEZlZWRiYWNrRm9yLCBwaHhGZWVkYmFja0dyb3VwKSlcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXN0b3JlUHJldmlvdXNseUFjdGl2ZUZvY3VzKClcbiAgICB9KVxuICB9XG5cbiAgYmluZGluZyhraW5kKXsgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKGtpbmQpIH1cbn1cbiIsICIvKiogSW5pdGlhbGl6ZXMgdGhlIExpdmVTb2NrZXRcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVuZFBvaW50IC0gVGhlIHN0cmluZyBXZWJTb2NrZXQgZW5kcG9pbnQsIGllLCBgXCJ3c3M6Ly9leGFtcGxlLmNvbS9saXZlXCJgLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIi9saXZlXCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtQaG9lbml4LlNvY2tldH0gc29ja2V0IC0gdGhlIHJlcXVpcmVkIFBob2VuaXggU29ja2V0IGNsYXNzIGltcG9ydGVkIGZyb20gXCJwaG9lbml4XCIuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuICogICAgIGltcG9ydCB7TGl2ZVNvY2tldH0gZnJvbSBcInBob2VuaXhfbGl2ZV92aWV3XCJcbiAqICAgICBsZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7Li4ufSlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvbi4gT3V0c2lkZSBvZiBrZXlzIGxpc3RlZCBiZWxvdywgYWxsXG4gKiBjb25maWd1cmF0aW9uIGlzIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgUGhvZW5peCBTb2NrZXQgY29uc3RydWN0b3IuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuZGVmYXVsdHNdIC0gVGhlIG9wdGlvbmFsIGRlZmF1bHRzIHRvIHVzZSBmb3IgdmFyaW91cyBiaW5kaW5ncyxcbiAqIHN1Y2ggYXMgYHBoeC1kZWJvdW5jZWAuIFN1cHBvcnRzIHRoZSBmb2xsb3dpbmcga2V5czpcbiAqXG4gKiAgIC0gZGVib3VuY2UgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LWRlYm91bmNlIHRpbWUuIERlZmF1bHRzIDMwMFxuICogICAtIHRocm90dGxlIC0gdGhlIG1pbGxpc2Vjb25kIHBoeC10aHJvdHRsZSB0aW1lLiBEZWZhdWx0cyAzMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5wYXJhbXNdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBwYXNzaW5nIGNvbm5lY3QgcGFyYW1zLlxuICogVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIExpdmVWaWV3LiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgKGVsKSA9PiB7dmlldzogZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1teS12aWV3LW5hbWVcIiwgdG9rZW46IHdpbmRvdy5teVRva2VufVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iaW5kaW5nUHJlZml4XSAtIFRoZSBvcHRpb25hbCBwcmVmaXggdG8gdXNlIGZvciBhbGwgcGh4IERPTSBhbm5vdGF0aW9ucy5cbiAqIERlZmF1bHRzIHRvIFwicGh4LVwiLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmhvb2tzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IGhvb2sgY2FsbGJhY2tzLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnVwbG9hZGVyc10gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IGZvciByZWZlcmVuY2luZyBMaXZlVmlldyB1cGxvYWRlciBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmxvYWRlclRpbWVvdXRdIC0gVGhlIG9wdGlvbmFsIGRlbGF5IGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhcHBseVxuICogbG9hZGluZyBzdGF0ZXMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLm1heFJlbG9hZHNdIC0gVGhlIG1heGltdW0gcmVsb2FkcyBiZWZvcmUgZW50ZXJpbmcgZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMucmVsb2FkSml0dGVyTWluXSAtIFRoZSBtaW5pbXVtIHRpbWUgYmV0d2VlbiBub3JtYWwgcmVsb2FkIGF0dGVtcHRzLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNYXhdIC0gVGhlIG1heGltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmZhaWxzYWZlSml0dGVyXSAtIFRoZSB0aW1lIGJldHdlZW4gcmVsb2FkIGF0dGVtcHRzIGluIGZhaWxzYWZlIG1vZGUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy52aWV3TG9nZ2VyXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0byBsb2cgZGVidWcgaW5mb3JtYXRpb24uIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAodmlldywga2luZCwgbXNnLCBvYmopID0+IGNvbnNvbGUubG9nKGAke3ZpZXcuaWR9ICR7a2luZH06ICR7bXNnfSAtIGAsIG9iailcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubWV0YWRhdGFdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBtYXBwaW5nIGV2ZW50IG5hbWVzIHRvIGZ1bmN0aW9ucyBmb3JcbiAqIHBvcHVsYXRpbmcgZXZlbnQgbWV0YWRhdGEuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBtZXRhZGF0YToge1xuICogICAgICAgY2xpY2s6IChlLCBlbCkgPT4ge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgZGV0YWlsOiBlLmRldGFpbCB8fCAxLFxuICogICAgICAgICB9XG4gKiAgICAgICB9LFxuICogICAgICAga2V5ZG93bjogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAga2V5OiBlLmtleSxcbiAqICAgICAgICAgICBjdHJsS2V5OiBlLmN0cmxLZXksXG4gKiAgICAgICAgICAgbWV0YUtleTogZS5tZXRhS2V5LFxuICogICAgICAgICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuc2Vzc2lvblN0b3JhZ2VdIC0gQW4gb3B0aW9uYWwgU3RvcmFnZSBjb21wYXRpYmxlIG9iamVjdFxuICogVXNlZnVsIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYHNlc3Npb25TdG9yYWdlYC4gIEZvciBleGFtcGxlLCBUaGlzIGNvdWxkXG4gKiBoYXBwZW4gaWYgYSBzaXRlIGxvYWRzIGEgY3Jvc3MtZG9tYWluIExpdmVWaWV3IGluIGFuIGlmcmFtZS4gIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICAgIGNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gKiAgICAgICBjb25zdHJ1Y3RvcigpIHsgdGhpcy5zdG9yYWdlID0ge30gfVxuICogICAgICAgZ2V0SXRlbShrZXlOYW1lKSB7IHJldHVybiB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gfHwgbnVsbCB9XG4gKiAgICAgICByZW1vdmVJdGVtKGtleU5hbWUpIHsgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB9XG4gKiAgICAgICBzZXRJdGVtKGtleU5hbWUsIGtleVZhbHVlKSB7IHRoaXMuc3RvcmFnZVtrZXlOYW1lXSA9IGtleVZhbHVlIH1cbiAqICAgICB9XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmxvY2FsU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgZm9yIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYGxvY2FsU3RvcmFnZWAuXG4gKiBTZWUgYG9wdHMuc2Vzc2lvblN0b3JhZ2VgIGZvciBleGFtcGxlcy5cbiovXG5cbmltcG9ydCB7XG4gIEJJTkRJTkdfUFJFRklYLFxuICBDT05TRUNVVElWRV9SRUxPQURTLFxuICBERUZBVUxUUyxcbiAgRkFJTFNBRkVfSklUVEVSLFxuICBMT0FERVJfVElNRU9VVCxcbiAgTUFYX1JFTE9BRFMsXG4gIFBIWF9ERUJPVU5DRSxcbiAgUEhYX0RST1BfVEFSR0VULFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9LRVksXG4gIFBIWF9MSU5LX1NUQVRFLFxuICBQSFhfTElWRV9MSU5LLFxuICBQSFhfTFZfREVCVUcsXG4gIFBIWF9MVl9MQVRFTkNZX1NJTSxcbiAgUEhYX0xWX1BST0ZJTEUsXG4gIFBIWF9NQUlOLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9USFJPVFRMRSxcbiAgUEhYX1RSQUNLX1VQTE9BRFMsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfRkVFREJBQ0tfR1JPVVAsXG4gIFJFTE9BRF9KSVRURVJfTUlOLFxuICBSRUxPQURfSklUVEVSX01BWCxcbiAgUEhYX1JFRixcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBjbG9zdXJlLFxuICBkZWJ1ZyxcbiAgbWF5YmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQnJvd3NlciBmcm9tIFwiLi9icm93c2VyXCJcbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBIb29rcyBmcm9tIFwiLi9ob29rc1wiXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IFZpZXcgZnJvbSBcIi4vdmlld1wiXG5pbXBvcnQgSlMgZnJvbSBcIi4vanNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlU29ja2V0IHtcbiAgY29uc3RydWN0b3IodXJsLCBwaHhTb2NrZXQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy51bmxvYWRlZCA9IGZhbHNlXG4gICAgaWYoIXBoeFNvY2tldCB8fCBwaHhTb2NrZXQuY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIil7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFxuICAgICAgYSBwaG9lbml4IFNvY2tldCBtdXN0IGJlIHByb3ZpZGVkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gdGhlIExpdmVTb2NrZXQgY29uc3RydWN0b3IuIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgaW1wb3J0IHtTb2NrZXR9IGZyb20gXCJwaG9lbml4XCJcbiAgICAgICAgICBpbXBvcnQge0xpdmVTb2NrZXR9IGZyb20gXCJwaG9lbml4X2xpdmVfdmlld1wiXG4gICAgICAgICAgbGV0IGxpdmVTb2NrZXQgPSBuZXcgTGl2ZVNvY2tldChcIi9saXZlXCIsIFNvY2tldCwgey4uLn0pXG4gICAgICBgKVxuICAgIH1cbiAgICB0aGlzLnNvY2tldCA9IG5ldyBwaHhTb2NrZXQodXJsLCBvcHRzKVxuICAgIHRoaXMuYmluZGluZ1ByZWZpeCA9IG9wdHMuYmluZGluZ1ByZWZpeCB8fCBCSU5ESU5HX1BSRUZJWFxuICAgIHRoaXMub3B0cyA9IG9wdHNcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUob3B0cy5wYXJhbXMgfHwge30pXG4gICAgdGhpcy52aWV3TG9nZ2VyID0gb3B0cy52aWV3TG9nZ2VyXG4gICAgdGhpcy5tZXRhZGF0YUNhbGxiYWNrcyA9IG9wdHMubWV0YWRhdGEgfHwge31cbiAgICB0aGlzLmRlZmF1bHRzID0gT2JqZWN0LmFzc2lnbihjbG9uZShERUZBVUxUUyksIG9wdHMuZGVmYXVsdHMgfHwge30pXG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbFxuICAgIHRoaXMucHJldkFjdGl2ZSA9IG51bGxcbiAgICB0aGlzLnNpbGVuY2VkID0gZmFsc2VcbiAgICB0aGlzLm1haW4gPSBudWxsXG4gICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IG51bGxcbiAgICB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gbnVsbFxuICAgIHRoaXMubGlua1JlZiA9IDFcbiAgICB0aGlzLnJvb3RzID0ge31cbiAgICB0aGlzLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgIHRoaXMucGVuZGluZ0xpbmsgPSBudWxsXG4gICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZSh3aW5kb3cubG9jYXRpb24pXG4gICAgdGhpcy5ob29rcyA9IG9wdHMuaG9va3MgfHwge31cbiAgICB0aGlzLnVwbG9hZGVycyA9IG9wdHMudXBsb2FkZXJzIHx8IHt9XG4gICAgdGhpcy5sb2FkZXJUaW1lb3V0ID0gb3B0cy5sb2FkZXJUaW1lb3V0IHx8IExPQURFUl9USU1FT1VUXG4gICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5tYXhSZWxvYWRzID0gb3B0cy5tYXhSZWxvYWRzIHx8IE1BWF9SRUxPQURTXG4gICAgdGhpcy5yZWxvYWRKaXR0ZXJNaW4gPSBvcHRzLnJlbG9hZEppdHRlck1pbiB8fCBSRUxPQURfSklUVEVSX01JTlxuICAgIHRoaXMucmVsb2FkSml0dGVyTWF4ID0gb3B0cy5yZWxvYWRKaXR0ZXJNYXggfHwgUkVMT0FEX0pJVFRFUl9NQVhcbiAgICB0aGlzLmZhaWxzYWZlSml0dGVyID0gb3B0cy5mYWlsc2FmZUppdHRlciB8fCBGQUlMU0FGRV9KSVRURVJcbiAgICB0aGlzLmxvY2FsU3RvcmFnZSA9IG9wdHMubG9jYWxTdG9yYWdlIHx8IHdpbmRvdy5sb2NhbFN0b3JhZ2VcbiAgICB0aGlzLnNlc3Npb25TdG9yYWdlID0gb3B0cy5zZXNzaW9uU3RvcmFnZSB8fCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2VcbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSBmYWxzZVxuICAgIHRoaXMuc2VydmVyQ2xvc2VSZWYgPSBudWxsXG4gICAgdGhpcy5kb21DYWxsYmFja3MgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIG9uUGF0Y2hTdGFydDogY2xvc3VyZSgpLFxuICAgICAgb25QYXRjaEVuZDogY2xvc3VyZSgpLFxuICAgICAgb25Ob2RlQWRkZWQ6IGNsb3N1cmUoKSxcbiAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiBjbG9zdXJlKCl9LFxuICAgIG9wdHMuZG9tIHx8IHt9KVxuICAgIHRoaXMudHJhbnNpdGlvbnMgPSBuZXcgVHJhbnNpdGlvblNldCgpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCBfZSA9PiB7XG4gICAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIH0pXG4gICAgdGhpcy5zb2NrZXQub25PcGVuKCgpID0+IHtcbiAgICAgIGlmKHRoaXMuaXNVbmxvYWRlZCgpKXtcbiAgICAgICAgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGUgYW5kIGJyb3dzZXIgZG9lcyBub3QgZW1pdCBcInBhZ2VzaG93XCJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHB1YmxpY1xuXG4gIHZlcnNpb24oKXsgcmV0dXJuIExWX1ZTTiB9XG5cbiAgaXNQcm9maWxlRW5hYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9QUk9GSUxFKSA9PT0gXCJ0cnVlXCIgfVxuXG4gIGlzRGVidWdFbmFibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0RFQlVHKSA9PT0gXCJ0cnVlXCIgfVxuXG4gIGlzRGVidWdEaXNhYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9ERUJVRykgPT09IFwiZmFsc2VcIiB9XG5cbiAgZW5hYmxlRGVidWcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9ERUJVRywgXCJ0cnVlXCIpIH1cblxuICBlbmFibGVQcm9maWxpbmcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9QUk9GSUxFLCBcInRydWVcIikgfVxuXG4gIGRpc2FibGVEZWJ1ZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0RFQlVHLCBcImZhbHNlXCIpIH1cblxuICBkaXNhYmxlUHJvZmlsaW5nKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShQSFhfTFZfUFJPRklMRSkgfVxuXG4gIGVuYWJsZUxhdGVuY3lTaW0odXBwZXJCb3VuZE1zKXtcbiAgICB0aGlzLmVuYWJsZURlYnVnKClcbiAgICBjb25zb2xlLmxvZyhcImxhdGVuY3kgc2ltdWxhdG9yIGVuYWJsZWQgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGlzIGJyb3dzZXIgc2Vzc2lvbi4gQ2FsbCBkaXNhYmxlTGF0ZW5jeVNpbSgpIHRvIGRpc2FibGVcIilcbiAgICB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNLCB1cHBlckJvdW5kTXMpXG4gIH1cblxuICBkaXNhYmxlTGF0ZW5jeVNpbSgpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNKSB9XG5cbiAgZ2V0TGF0ZW5jeVNpbSgpe1xuICAgIGxldCBzdHIgPSB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNKVxuICAgIHJldHVybiBzdHIgPyBwYXJzZUludChzdHIpIDogbnVsbFxuICB9XG5cbiAgZ2V0U29ja2V0KCl7IHJldHVybiB0aGlzLnNvY2tldCB9XG5cbiAgY29ubmVjdCgpe1xuICAgIC8vIGVuYWJsZSBkZWJ1ZyBieSBkZWZhdWx0IGlmIG9uIGxvY2FsaG9zdCBhbmQgbm90IGV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICBpZih3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09IFwibG9jYWxob3N0XCIgJiYgIXRoaXMuaXNEZWJ1Z0Rpc2FibGVkKCkpeyB0aGlzLmVuYWJsZURlYnVnKCkgfVxuICAgIGxldCBkb0Nvbm5lY3QgPSAoKSA9PiB7XG4gICAgICBpZih0aGlzLmpvaW5Sb290Vmlld3MoKSl7XG4gICAgICAgIHRoaXMuYmluZFRvcExldmVsRXZlbnRzKClcbiAgICAgICAgdGhpcy5zb2NrZXQuY29ubmVjdCgpXG4gICAgICB9IGVsc2UgaWYodGhpcy5tYWluKXtcbiAgICAgICAgdGhpcy5zb2NrZXQuY29ubmVjdCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJpbmRUb3BMZXZlbEV2ZW50cyh7ZGVhZDogdHJ1ZX0pXG4gICAgICB9XG4gICAgICB0aGlzLmpvaW5EZWFkVmlldygpXG4gICAgfVxuICAgIGlmKFtcImNvbXBsZXRlXCIsIFwibG9hZGVkXCIsIFwiaW50ZXJhY3RpdmVcIl0uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKSA+PSAwKXtcbiAgICAgIGRvQ29ubmVjdCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IGRvQ29ubmVjdCgpKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoY2FsbGJhY2spe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lcilcbiAgICAvLyByZW1vdmUgdGhlIHNvY2tldCBjbG9zZSBsaXN0ZW5lciB0byBhdm9pZCB0cnlpbmcgdG8gaGFuZGxlXG4gICAgLy8gYSBzZXJ2ZXIgY2xvc2UgZXZlbnQgd2hlbiBpdCBpcyBhY3R1YWxseSBjYXVzZWQgYnkgdXMgZGlzY29ubmVjdGluZ1xuICAgIGlmKHRoaXMuc2VydmVyQ2xvc2VSZWYpe1xuICAgICAgdGhpcy5zb2NrZXQub2ZmKHRoaXMuc2VydmVyQ2xvc2VSZWYpXG4gICAgICB0aGlzLnNlcnZlckNsb3NlUmVmID0gbnVsbFxuICAgIH1cbiAgICB0aGlzLnNvY2tldC5kaXNjb25uZWN0KGNhbGxiYWNrKVxuICB9XG5cbiAgcmVwbGFjZVRyYW5zcG9ydCh0cmFuc3BvcnQpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lcilcbiAgICB0aGlzLnNvY2tldC5yZXBsYWNlVHJhbnNwb3J0KHRyYW5zcG9ydClcbiAgICB0aGlzLmNvbm5lY3QoKVxuICB9XG5cbiAgZXhlY0pTKGVsLCBlbmNvZGVkSlMsIGV2ZW50VHlwZSA9IG51bGwpe1xuICAgIHRoaXMub3duZXIoZWwsIHZpZXcgPT4gSlMuZXhlYyhldmVudFR5cGUsIGVuY29kZWRKUywgdmlldywgZWwpKVxuICB9XG5cbiAgLy8gcHJpdmF0ZVxuXG4gIGV4ZWNKU0hvb2tQdXNoKGVsLCBwaHhFdmVudCwgZGF0YSwgY2FsbGJhY2spe1xuICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgIEpTLmV4ZWMoXCJob29rXCIsIHBoeEV2ZW50LCB2aWV3LCBlbCwgW1wicHVzaFwiLCB7ZGF0YSwgY2FsbGJhY2t9XSlcbiAgICB9KVxuICB9XG5cbiAgdW5sb2FkKCl7XG4gICAgaWYodGhpcy51bmxvYWRlZCl7IHJldHVybiB9XG4gICAgaWYodGhpcy5tYWluICYmIHRoaXMuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKHRoaXMubWFpbiwgXCJzb2NrZXRcIiwgKCkgPT4gW1wiZGlzY29ubmVjdCBmb3IgcGFnZSBuYXZcIl0pIH1cbiAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveUFsbFZpZXdzKClcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICB9XG5cbiAgdHJpZ2dlckRPTShraW5kLCBhcmdzKXsgdGhpcy5kb21DYWxsYmFja3Nba2luZF0oLi4uYXJncykgfVxuXG4gIHRpbWUobmFtZSwgZnVuYyl7XG4gICAgaWYoIXRoaXMuaXNQcm9maWxlRW5hYmxlZCgpIHx8ICFjb25zb2xlLnRpbWUpeyByZXR1cm4gZnVuYygpIH1cbiAgICBjb25zb2xlLnRpbWUobmFtZSlcbiAgICBsZXQgcmVzdWx0ID0gZnVuYygpXG4gICAgY29uc29sZS50aW1lRW5kKG5hbWUpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgbG9nKHZpZXcsIGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICBpZih0aGlzLnZpZXdMb2dnZXIpe1xuICAgICAgbGV0IFttc2csIG9ial0gPSBtc2dDYWxsYmFjaygpXG4gICAgICB0aGlzLnZpZXdMb2dnZXIodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfSBlbHNlIGlmKHRoaXMuaXNEZWJ1Z0VuYWJsZWQoKSl7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIGRlYnVnKHZpZXcsIGtpbmQsIG1zZywgb2JqKVxuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RET01VcGRhdGUoY2FsbGJhY2spe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuYWZ0ZXIoY2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGRUcmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIG9uQ2hhbm5lbChjaGFubmVsLCBldmVudCwgY2Ipe1xuICAgIGNoYW5uZWwub24oZXZlbnQsIGRhdGEgPT4ge1xuICAgICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgICAgaWYoIWxhdGVuY3kpe1xuICAgICAgICBjYihkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYihkYXRhKSwgbGF0ZW5jeSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgd3JhcFB1c2godmlldywgb3B0cywgcHVzaCl7XG4gICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgIGxldCBvbGRKb2luQ291bnQgPSB2aWV3LmpvaW5Db3VudFxuICAgIGlmKCFsYXRlbmN5KXtcbiAgICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiBvcHRzLnRpbWVvdXQpe1xuICAgICAgICByZXR1cm4gcHVzaCgpLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgICAgICBpZih2aWV3LmpvaW5Db3VudCA9PT0gb2xkSm9pbkNvdW50ICYmICF2aWV3LmlzRGVzdHJveWVkKCkpe1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyKHZpZXcsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2codmlldywgXCJ0aW1lb3V0XCIsICgpID0+IFtcInJlY2VpdmVkIHRpbWVvdXQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIHNlcnZlci4gRmFsbGluZyBiYWNrIHRvIGhhcmQgcmVmcmVzaCBmb3IgcmVjb3ZlcnlcIl0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwdXNoKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZmFrZVB1c2ggPSB7XG4gICAgICByZWNlaXZlczogW10sXG4gICAgICByZWNlaXZlKGtpbmQsIGNiKXsgdGhpcy5yZWNlaXZlcy5wdXNoKFtraW5kLCBjYl0pIH1cbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgICAgZmFrZVB1c2gucmVjZWl2ZXMucmVkdWNlKChhY2MsIFtraW5kLCBjYl0pID0+IGFjYy5yZWNlaXZlKGtpbmQsIGNiKSwgcHVzaCgpKVxuICAgIH0sIGxhdGVuY3kpXG4gICAgcmV0dXJuIGZha2VQdXNoXG4gIH1cblxuICByZWxvYWRXaXRoSml0dGVyKHZpZXcsIGxvZyl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gICAgbGV0IG1pbk1zID0gdGhpcy5yZWxvYWRKaXR0ZXJNaW5cbiAgICBsZXQgbWF4TXMgPSB0aGlzLnJlbG9hZEppdHRlck1heFxuICAgIGxldCBhZnRlck1zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heE1zIC0gbWluTXMgKyAxKSkgKyBtaW5Nc1xuICAgIGxldCB0cmllcyA9IEJyb3dzZXIudXBkYXRlTG9jYWwodGhpcy5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUywgMCwgY291bnQgPT4gY291bnQgKyAxKVxuICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgIGFmdGVyTXMgPSB0aGlzLmZhaWxzYWZlSml0dGVyXG4gICAgfVxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBpZiB2aWV3IGhhcyByZWNvdmVyZWQsIHN1Y2ggYXMgdHJhbnNwb3J0IHJlcGxhY2VkLCB0aGVuIGNhbmNlbFxuICAgICAgaWYodmlldy5pc0Rlc3Ryb3llZCgpIHx8IHZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgICB2aWV3LmRlc3Ryb3koKVxuICAgICAgbG9nID8gbG9nKCkgOiB0aGlzLmxvZyh2aWV3LCBcImpvaW5cIiwgKCkgPT4gW2BlbmNvdW50ZXJlZCAke3RyaWVzfSBjb25zZWN1dGl2ZSByZWxvYWRzYF0pXG4gICAgICBpZih0cmllcyA+IHRoaXMubWF4UmVsb2Fkcyl7XG4gICAgICAgIHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGV4Y2VlZGVkICR7dGhpcy5tYXhSZWxvYWRzfSBjb25zZWN1dGl2ZSByZWxvYWRzLiBFbnRlcmluZyBmYWlsc2FmZSBtb2RlYF0pXG4gICAgICB9XG4gICAgICBpZih0aGlzLmhhc1BlbmRpbmdMaW5rKCkpe1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9LCBhZnRlck1zKVxuICB9XG5cbiAgZ2V0SG9va0NhbGxiYWNrcyhuYW1lKXtcbiAgICByZXR1cm4gbmFtZSAmJiBuYW1lLnN0YXJ0c1dpdGgoXCJQaG9lbml4LlwiKSA/IEhvb2tzW25hbWUuc3BsaXQoXCIuXCIpWzFdXSA6IHRoaXMuaG9va3NbbmFtZV1cbiAgfVxuXG4gIGlzVW5sb2FkZWQoKXsgcmV0dXJuIHRoaXMudW5sb2FkZWQgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpIH1cblxuICBnZXRCaW5kaW5nUHJlZml4KCl7IHJldHVybiB0aGlzLmJpbmRpbmdQcmVmaXggfVxuXG4gIGJpbmRpbmcoa2luZCl7IHJldHVybiBgJHt0aGlzLmdldEJpbmRpbmdQcmVmaXgoKX0ke2tpbmR9YCB9XG5cbiAgY2hhbm5lbCh0b3BpYywgcGFyYW1zKXsgcmV0dXJuIHRoaXMuc29ja2V0LmNoYW5uZWwodG9waWMsIHBhcmFtcykgfVxuXG4gIGpvaW5EZWFkVmlldygpe1xuICAgIGxldCBib2R5ID0gZG9jdW1lbnQuYm9keVxuICAgIGlmKGJvZHkgJiYgIXRoaXMuaXNQaHhWaWV3KGJvZHkpICYmICF0aGlzLmlzUGh4Vmlldyhkb2N1bWVudC5maXJzdEVsZW1lbnRDaGlsZCkpe1xuICAgICAgbGV0IHZpZXcgPSB0aGlzLm5ld1Jvb3RWaWV3KGJvZHkpXG4gICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICB2aWV3LmpvaW5EZWFkKClcbiAgICAgIGlmKCF0aGlzLm1haW4peyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdmlldy5leGVjTmV3TW91bnRlZCgpKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5Sb290Vmlld3MoKXtcbiAgICBsZXQgcm9vdHNGb3VuZCA9IGZhbHNlXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9Om5vdChbJHtQSFhfUEFSRU5UX0lEfV0pYCwgcm9vdEVsID0+IHtcbiAgICAgIGlmKCF0aGlzLmdldFJvb3RCeUlkKHJvb3RFbC5pZCkpe1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcocm9vdEVsKVxuICAgICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICAgIHZpZXcuam9pbigpXG4gICAgICAgIGlmKHJvb3RFbC5oYXNBdHRyaWJ1dGUoUEhYX01BSU4pKXsgdGhpcy5tYWluID0gdmlldyB9XG4gICAgICB9XG4gICAgICByb290c0ZvdW5kID0gdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIHJvb3RzRm91bmRcbiAgfVxuXG4gIHJlZGlyZWN0KHRvLCBmbGFzaCl7XG4gICAgdGhpcy51bmxvYWQoKVxuICAgIEJyb3dzZXIucmVkaXJlY3QodG8sIGZsYXNoKVxuICB9XG5cbiAgcmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsIGNhbGxiYWNrID0gbnVsbCwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGxldCBsaXZlUmVmZXJlciA9IHRoaXMuY3VycmVudExvY2F0aW9uLmhyZWZcbiAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gdGhpcy5vdXRnb2luZ01haW5FbCB8fCB0aGlzLm1haW4uZWxcbiAgICBsZXQgbmV3TWFpbkVsID0gRE9NLmNsb25lTm9kZSh0aGlzLm91dGdvaW5nTWFpbkVsLCBcIlwiKVxuICAgIHRoaXMubWFpbi5zaG93TG9hZGVyKHRoaXMubG9hZGVyVGltZW91dClcbiAgICB0aGlzLm1haW4uZGVzdHJveSgpXG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLm5ld1Jvb3RWaWV3KG5ld01haW5FbCwgZmxhc2gsIGxpdmVSZWZlcmVyKVxuICAgIHRoaXMubWFpbi5zZXRSZWRpcmVjdChocmVmKVxuICAgIHRoaXMudHJhbnNpdGlvblJlbW92ZXMobnVsbCwgdHJ1ZSlcbiAgICB0aGlzLm1haW4uam9pbigoam9pbkNvdW50LCBvbkRvbmUpID0+IHtcbiAgICAgIGlmKGpvaW5Db3VudCA9PT0gMSAmJiB0aGlzLmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXtcbiAgICAgICAgdGhpcy5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICBET00uZmluZFBoeFN0aWNreShkb2N1bWVudCkuZm9yRWFjaChlbCA9PiBuZXdNYWluRWwuYXBwZW5kQ2hpbGQoZWwpKVxuICAgICAgICAgIHRoaXMub3V0Z29pbmdNYWluRWwucmVwbGFjZVdpdGgobmV3TWFpbkVsKVxuICAgICAgICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSBudWxsXG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sobGlua1JlZilcbiAgICAgICAgICBvbkRvbmUoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmFuc2l0aW9uUmVtb3ZlcyhlbGVtZW50cywgc2tpcFN0aWNreSl7XG4gICAgbGV0IHJlbW92ZUF0dHIgPSB0aGlzLmJpbmRpbmcoXCJyZW1vdmVcIilcbiAgICBlbGVtZW50cyA9IGVsZW1lbnRzIHx8IERPTS5hbGwoZG9jdW1lbnQsIGBbJHtyZW1vdmVBdHRyfV1gKVxuXG4gICAgaWYoc2tpcFN0aWNreSl7XG4gICAgICBjb25zdCBzdGlja2llcyA9IERPTS5maW5kUGh4U3RpY2t5KGRvY3VtZW50KSB8fCBbXVxuICAgICAgZWxlbWVudHMgPSBlbGVtZW50cy5maWx0ZXIoZWwgPT4gIURPTS5pc0NoaWxkT2ZBbnkoZWwsIHN0aWNraWVzKSlcbiAgICB9XG4gICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICB0aGlzLmV4ZWNKUyhlbCwgZWwuZ2V0QXR0cmlidXRlKHJlbW92ZUF0dHIpLCBcInJlbW92ZVwiKVxuICAgIH0pXG4gIH1cblxuICBpc1BoeFZpZXcoZWwpeyByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgIT09IG51bGwgfVxuXG4gIG5ld1Jvb3RWaWV3KGVsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpe1xuICAgIGxldCB2aWV3ID0gbmV3IFZpZXcoZWwsIHRoaXMsIG51bGwsIGZsYXNoLCBsaXZlUmVmZXJlcilcbiAgICB0aGlzLnJvb3RzW3ZpZXcuaWRdID0gdmlld1xuICAgIHJldHVybiB2aWV3XG4gIH1cblxuICBvd25lcihjaGlsZEVsLCBjYWxsYmFjayl7XG4gICAgbGV0IHZpZXcgPSBtYXliZShjaGlsZEVsLmNsb3Nlc3QoUEhYX1ZJRVdfU0VMRUNUT1IpLCBlbCA9PiB0aGlzLmdldFZpZXdCeUVsKGVsKSkgfHwgdGhpcy5tYWluXG4gICAgaWYodmlldyl7IGNhbGxiYWNrKHZpZXcpIH1cbiAgfVxuXG4gIHdpdGhpbk93bmVycyhjaGlsZEVsLCBjYWxsYmFjayl7XG4gICAgdGhpcy5vd25lcihjaGlsZEVsLCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIGNoaWxkRWwpKVxuICB9XG5cbiAgZ2V0Vmlld0J5RWwoZWwpe1xuICAgIGxldCByb290SWQgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQpXG4gICAgcmV0dXJuIG1heWJlKHRoaXMuZ2V0Um9vdEJ5SWQocm9vdElkKSwgcm9vdCA9PiByb290LmdldERlc2NlbmRlbnRCeUVsKGVsKSlcbiAgfVxuXG4gIGdldFJvb3RCeUlkKGlkKXsgcmV0dXJuIHRoaXMucm9vdHNbaWRdIH1cblxuICBkZXN0cm95QWxsVmlld3MoKXtcbiAgICBmb3IobGV0IGlkIGluIHRoaXMucm9vdHMpe1xuICAgICAgdGhpcy5yb290c1tpZF0uZGVzdHJveSgpXG4gICAgICBkZWxldGUgdGhpcy5yb290c1tpZF1cbiAgICB9XG4gICAgdGhpcy5tYWluID0gbnVsbFxuICB9XG5cbiAgZGVzdHJveVZpZXdCeUVsKGVsKXtcbiAgICBsZXQgcm9vdCA9IHRoaXMuZ2V0Um9vdEJ5SWQoZWwuZ2V0QXR0cmlidXRlKFBIWF9ST09UX0lEKSlcbiAgICBpZihyb290ICYmIHJvb3QuaWQgPT09IGVsLmlkKXtcbiAgICAgIHJvb3QuZGVzdHJveSgpXG4gICAgICBkZWxldGUgdGhpcy5yb290c1tyb290LmlkXVxuICAgIH0gZWxzZSBpZihyb290KXtcbiAgICAgIHJvb3QuZGVzdHJveURlc2NlbmRlbnQoZWwuaWQpXG4gICAgfVxuICB9XG5cbiAgc2V0QWN0aXZlRWxlbWVudCh0YXJnZXQpe1xuICAgIGlmKHRoaXMuYWN0aXZlRWxlbWVudCA9PT0gdGFyZ2V0KXsgcmV0dXJuIH1cbiAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSB0YXJnZXRcbiAgICBsZXQgY2FuY2VsID0gKCkgPT4ge1xuICAgICAgaWYodGFyZ2V0ID09PSB0aGlzLmFjdGl2ZUVsZW1lbnQpeyB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsIH1cbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzKVxuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzKVxuICAgIH1cbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgY2FuY2VsKVxuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgY2FuY2VsKVxuICB9XG5cbiAgZ2V0QWN0aXZlRWxlbWVudCgpe1xuICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkpe1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgY2FuIGJlIG51bGwgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTFcbiAgICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmJvZHlcbiAgICB9XG4gIH1cblxuICBkcm9wQWN0aXZlRWxlbWVudCh2aWV3KXtcbiAgICBpZih0aGlzLnByZXZBY3RpdmUgJiYgdmlldy5vd25zRWxlbWVudCh0aGlzLnByZXZBY3RpdmUpKXtcbiAgICAgIHRoaXMucHJldkFjdGl2ZSA9IG51bGxcbiAgICB9XG4gIH1cblxuICByZXN0b3JlUHJldmlvdXNseUFjdGl2ZUZvY3VzKCl7XG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICYmIHRoaXMucHJldkFjdGl2ZSAhPT0gZG9jdW1lbnQuYm9keSl7XG4gICAgICB0aGlzLnByZXZBY3RpdmUuZm9jdXMoKVxuICAgIH1cbiAgfVxuXG4gIGJsdXJBY3RpdmVFbGVtZW50KCl7XG4gICAgdGhpcy5wcmV2QWN0aXZlID0gdGhpcy5nZXRBY3RpdmVFbGVtZW50KClcbiAgICBpZih0aGlzLnByZXZBY3RpdmUgIT09IGRvY3VtZW50LmJvZHkpeyB0aGlzLnByZXZBY3RpdmUuYmx1cigpIH1cbiAgfVxuXG4gIGJpbmRUb3BMZXZlbEV2ZW50cyh7ZGVhZH0gPSB7fSl7XG4gICAgaWYodGhpcy5ib3VuZFRvcExldmVsRXZlbnRzKXsgcmV0dXJuIH1cblxuICAgIHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyA9IHRydWVcbiAgICAvLyBlbnRlciBmYWlsc2FmZSByZWxvYWQgaWYgc2VydmVyIGhhcyBnb25lIGF3YXkgaW50ZW50aW9uYWxseSwgc3VjaCBhcyBcImRpc2Nvbm5lY3RcIiBicm9hZGNhc3RcbiAgICB0aGlzLnNlcnZlckNsb3NlUmVmID0gdGhpcy5zb2NrZXQub25DbG9zZShldmVudCA9PiB7XG4gICAgICAvLyBmYWlsc2FmZSByZWxvYWQgaWYgbm9ybWFsIGNsb3N1cmUgYW5kIHdlIHN0aWxsIGhhdmUgYSBtYWluIExWXG4gICAgICBpZihldmVudCAmJiBldmVudC5jb2RlID09PSAxMDAwICYmIHRoaXMubWFpbil7IHJldHVybiB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodGhpcy5tYWluKSB9XG4gICAgfSlcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKXsgfSkgLy8gZW5zdXJlIGFsbCBjbGljayBldmVudHMgYnViYmxlIGZvciBtb2JpbGUgU2FmYXJpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBlID0+IHtcbiAgICAgIGlmKGUucGVyc2lzdGVkKXsgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGVcbiAgICAgICAgdGhpcy5nZXRTb2NrZXQoKS5kaXNjb25uZWN0KClcbiAgICAgICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiB3aW5kb3cubG9jYXRpb24uaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSlcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSwgdHJ1ZSlcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZE5hdigpIH1cbiAgICB0aGlzLmJpbmRDbGlja3MoKVxuICAgIGlmKCFkZWFkKXsgdGhpcy5iaW5kRm9ybXMoKSB9XG4gICAgdGhpcy5iaW5kKHtrZXl1cDogXCJrZXl1cFwiLCBrZXlkb3duOiBcImtleWRvd25cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIHBoeFRhcmdldCkgPT4ge1xuICAgICAgbGV0IG1hdGNoS2V5ID0gdGFyZ2V0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfS0VZKSlcbiAgICAgIGxldCBwcmVzc2VkS2V5ID0gZS5rZXkgJiYgZS5rZXkudG9Mb3dlckNhc2UoKSAvLyBjaHJvbWUgY2xpY2tlZCBhdXRvY29tcGxldGVzIHNlbmQgYSBrZXlkb3duIHdpdGhvdXQga2V5XG4gICAgICBpZihtYXRjaEtleSAmJiBtYXRjaEtleS50b0xvd2VyQ2FzZSgpICE9PSBwcmVzc2VkS2V5KXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICB9KVxuICAgIHRoaXMuYmluZCh7Ymx1cjogXCJmb2N1c291dFwiLCBmb2N1czogXCJmb2N1c2luXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBwaHhUYXJnZXQpID0+IHtcbiAgICAgIGlmKCFwaHhUYXJnZXQpe1xuICAgICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLmJpbmQoe2JsdXI6IFwiYmx1clwiLCBmb2N1czogXCJmb2N1c1wifSwgKGUsIHR5cGUsIHZpZXcsIHRhcmdldEVsLCBwaHhFdmVudCwgcGh4VGFyZ2V0KSA9PiB7XG4gICAgICAvLyBibHVyIGFuZCBmb2N1cyBhcmUgdHJpZ2dlcmVkIG9uIGRvY3VtZW50IGFuZCB3aW5kb3cuIERpc2NhcmQgb25lIHRvIGF2b2lkIGR1cHNcbiAgICAgIGlmKHBoeFRhcmdldCA9PT0gXCJ3aW5kb3dcIil7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpXG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgbGV0IGRyb3BUYXJnZXRJZCA9IG1heWJlKGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCB0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSksIHRydWVUYXJnZXQgPT4ge1xuICAgICAgICByZXR1cm4gdHJ1ZVRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9EUk9QX1RBUkdFVCkpXG4gICAgICB9KVxuICAgICAgbGV0IGRyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZHJvcFRhcmdldElkKVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyB8fCBbXSlcbiAgICAgIGlmKCFkcm9wVGFyZ2V0IHx8IGRyb3BUYXJnZXQuZGlzYWJsZWQgfHwgZmlsZXMubGVuZ3RoID09PSAwIHx8ICEoZHJvcFRhcmdldC5maWxlcyBpbnN0YW5jZW9mIEZpbGVMaXN0KSl7IHJldHVybiB9XG5cbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGRyb3BUYXJnZXQsIGZpbGVzLCBlLmRhdGFUcmFuc2ZlcilcbiAgICAgIGRyb3BUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKVxuICAgIH0pXG4gICAgdGhpcy5vbihQSFhfVFJBQ0tfVVBMT0FEUywgZSA9PiB7XG4gICAgICBsZXQgdXBsb2FkVGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgIGlmKCFET00uaXNVcGxvYWRJbnB1dCh1cGxvYWRUYXJnZXQpKXsgcmV0dXJuIH1cbiAgICAgIGxldCBmaWxlcyA9IEFycmF5LmZyb20oZS5kZXRhaWwuZmlsZXMgfHwgW10pLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBGaWxlIHx8IGYgaW5zdGFuY2VvZiBCbG9iKVxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXModXBsb2FkVGFyZ2V0LCBmaWxlcylcbiAgICAgIHVwbG9hZFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgfVxuXG4gIGV2ZW50TWV0YShldmVudE5hbWUsIGUsIHRhcmdldEVsKXtcbiAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzW2V2ZW50TmFtZV1cbiAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjayhlLCB0YXJnZXRFbCkgOiB7fVxuICB9XG5cbiAgc2V0UGVuZGluZ0xpbmsoaHJlZil7XG4gICAgdGhpcy5saW5rUmVmKytcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gaHJlZlxuICAgIHJldHVybiB0aGlzLmxpbmtSZWZcbiAgfVxuXG4gIGNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpe1xuICAgIGlmKHRoaXMubGlua1JlZiAhPT0gbGlua1JlZil7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ocmVmID0gdGhpcy5wZW5kaW5nTGlua1xuICAgICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZ2V0SHJlZigpeyByZXR1cm4gdGhpcy5ocmVmIH1cblxuICBoYXNQZW5kaW5nTGluaygpeyByZXR1cm4gISF0aGlzLnBlbmRpbmdMaW5rIH1cblxuICBiaW5kKGV2ZW50cywgY2FsbGJhY2spe1xuICAgIGZvcihsZXQgZXZlbnQgaW4gZXZlbnRzKXtcbiAgICAgIGxldCBicm93c2VyRXZlbnROYW1lID0gZXZlbnRzW2V2ZW50XVxuXG4gICAgICB0aGlzLm9uKGJyb3dzZXJFdmVudE5hbWUsIGUgPT4ge1xuICAgICAgICBsZXQgYmluZGluZyA9IHRoaXMuYmluZGluZyhldmVudClcbiAgICAgICAgbGV0IHdpbmRvd0JpbmRpbmcgPSB0aGlzLmJpbmRpbmcoYHdpbmRvdy0ke2V2ZW50fWApXG4gICAgICAgIGxldCB0YXJnZXRQaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoYmluZGluZylcbiAgICAgICAgaWYodGFyZ2V0UGh4RXZlbnQpe1xuICAgICAgICAgIHRoaXMuZGVib3VuY2UoZS50YXJnZXQsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZSwgZXZlbnQsIHZpZXcsIGUudGFyZ2V0LCB0YXJnZXRQaHhFdmVudCwgbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7d2luZG93QmluZGluZ31dYCwgZWwgPT4ge1xuICAgICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHdpbmRvd0JpbmRpbmcpXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlKGVsLCBlLCBicm93c2VyRXZlbnROYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZWwsIHBoeEV2ZW50LCBcIndpbmRvd1wiKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGJpbmRDbGlja3MoKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBlID0+IHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBlLnRhcmdldClcbiAgICB0aGlzLmJpbmRDbGljayhcImNsaWNrXCIsIFwiY2xpY2tcIilcbiAgfVxuXG4gIGJpbmRDbGljayhldmVudE5hbWUsIGJpbmRpbmdOYW1lKXtcbiAgICBsZXQgY2xpY2sgPSB0aGlzLmJpbmRpbmcoYmluZGluZ05hbWUpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBudWxsXG4gICAgICAvLyBhIHN5bnRoZXRpYyBjbGljayBldmVudCAoZGV0YWlsIDApIHdpbGwgbm90IGhhdmUgY2F1c2VkIGEgbW91c2Vkb3duIGV2ZW50LFxuICAgICAgLy8gdGhlcmVmb3JlIHRoZSBjbGlja1N0YXJ0ZWRBdFRhcmdldCBpcyBzdGFsZVxuICAgICAgaWYoZS5kZXRhaWwgPT09IDApIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBlLnRhcmdldFxuICAgICAgbGV0IGNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCB8fCBlLnRhcmdldFxuICAgICAgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoY2xpY2tTdGFydGVkQXRUYXJnZXQsIGNsaWNrKVxuICAgICAgdGhpcy5kaXNwYXRjaENsaWNrQXdheShlLCBjbGlja1N0YXJ0ZWRBdFRhcmdldClcbiAgICAgIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBudWxsXG4gICAgICBsZXQgcGh4RXZlbnQgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShjbGljaylcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGlmKERPTS5pc05ld1BhZ2VDbGljayhlLCB3aW5kb3cubG9jYXRpb24pKXsgdGhpcy51bmxvYWQoKSB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZih0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIpeyBlLnByZXZlbnREZWZhdWx0KCkgfVxuXG4gICAgICAvLyBub29wIGlmIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGF3YWl0aW5nIGFuIGFjayBmb3IgdGhpcyBlbCBhbHJlYWR5XG4gICAgICBpZih0YXJnZXQuaGFzQXR0cmlidXRlKFBIWF9SRUYpKXsgcmV0dXJuIH1cblxuICAgICAgdGhpcy5kZWJvdW5jZSh0YXJnZXQsIGUsIFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyh0YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIEpTLmV4ZWMoXCJjbGlja1wiLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0LCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIHRhcmdldCl9XSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG4gIH1cblxuICBkaXNwYXRjaENsaWNrQXdheShlLCBjbGlja1N0YXJ0ZWRBdCl7XG4gICAgbGV0IHBoeENsaWNrQXdheSA9IHRoaXMuYmluZGluZyhcImNsaWNrLWF3YXlcIilcbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7cGh4Q2xpY2tBd2F5fV1gLCBlbCA9PiB7XG4gICAgICBpZighKGVsLmlzU2FtZU5vZGUoY2xpY2tTdGFydGVkQXQpIHx8IGVsLmNvbnRhaW5zKGNsaWNrU3RhcnRlZEF0KSkpe1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyhlbCwgdmlldyA9PiB7XG4gICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHBoeENsaWNrQXdheSlcbiAgICAgICAgICBpZihKUy5pc1Zpc2libGUoZWwpICYmIEpTLmlzSW5WaWV3cG9ydChlbCkpe1xuICAgICAgICAgICAgSlMuZXhlYyhcImNsaWNrXCIsIHBoeEV2ZW50LCB2aWV3LCBlbCwgW1wicHVzaFwiLCB7ZGF0YTogdGhpcy5ldmVudE1ldGEoXCJjbGlja1wiLCBlLCBlLnRhcmdldCl9XSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGJpbmROYXYoKXtcbiAgICBpZighQnJvd3Nlci5jYW5QdXNoU3RhdGUoKSl7IHJldHVybiB9XG4gICAgaWYoaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbil7IGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSBcIm1hbnVhbFwiIH1cbiAgICBsZXQgc2Nyb2xsVGltZXIgPSBudWxsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgX2UgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVyKVxuICAgICAgc2Nyb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgQnJvd3Nlci51cGRhdGVDdXJyZW50U3RhdGUoc3RhdGUgPT4gT2JqZWN0LmFzc2lnbihzdGF0ZSwge3Njcm9sbDogd2luZG93LnNjcm9sbFl9KSlcbiAgICAgIH0sIDEwMClcbiAgICB9KVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgZXZlbnQgPT4ge1xuICAgICAgaWYoIXRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pKXsgcmV0dXJuIH1cbiAgICAgIGxldCB7dHlwZSwgaWQsIHJvb3QsIHNjcm9sbH0gPSBldmVudC5zdGF0ZSB8fCB7fVxuICAgICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuXG4gICAgICBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4Om5hdmlnYXRlXCIsIHtkZXRhaWw6IHtocmVmLCBwYXRjaDogdHlwZSA9PT0gXCJwYXRjaFwiLCBwb3A6IHRydWV9fSlcbiAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHRoaXMubWFpbi5pc0Nvbm5lY3RlZCgpICYmICh0eXBlID09PSBcInBhdGNoXCIgJiYgaWQgPT09IHRoaXMubWFpbi5pZCkpe1xuICAgICAgICAgIHRoaXMubWFpbi5wdXNoTGlua1BhdGNoKGhyZWYsIG51bGwsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubWF5YmVTY3JvbGwoc2Nyb2xsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXBsYWNlTWFpbihocmVmLCBudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICBpZihyb290KXsgdGhpcy5yZXBsYWNlUm9vdEhpc3RvcnkoKSB9XG4gICAgICAgICAgICB0aGlzLm1heWJlU2Nyb2xsKHNjcm9sbClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoZS50YXJnZXQsIFBIWF9MSVZFX0xJTkspXG4gICAgICBsZXQgdHlwZSA9IHRhcmdldCAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSVZFX0xJTkspXG4gICAgICBpZighdHlwZSB8fCAhdGhpcy5pc0Nvbm5lY3RlZCgpIHx8ICF0aGlzLm1haW4gfHwgRE9NLndhbnRzTmV3VGFiKGUpKXsgcmV0dXJuIH1cblxuICAgICAgLy8gV2hlbiB3cmFwcGluZyBhbiBTVkcgZWxlbWVudCBpbiBhbiBhbmNob3IgdGFnLCB0aGUgaHJlZiBjYW4gYmUgYW4gU1ZHQW5pbWF0ZWRTdHJpbmdcbiAgICAgIGxldCBocmVmID0gdGFyZ2V0LmhyZWYgaW5zdGFuY2VvZiBTVkdBbmltYXRlZFN0cmluZyA/IHRhcmdldC5ocmVmLmJhc2VWYWwgOiB0YXJnZXQuaHJlZlxuXG4gICAgICBsZXQgbGlua1N0YXRlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShQSFhfTElOS19TVEFURSlcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSAvLyBkbyBub3QgYnViYmxlIGNsaWNrIHRvIHJlZ3VsYXIgcGh4LWNsaWNrIGJpbmRpbmdzXG4gICAgICBpZih0aGlzLnBlbmRpbmdMaW5rID09PSBocmVmKXsgcmV0dXJuIH1cblxuICAgICAgdGhpcy5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYodHlwZSA9PT0gXCJwYXRjaFwiKXtcbiAgICAgICAgICB0aGlzLnB1c2hIaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCB0YXJnZXQpXG4gICAgICAgIH0gZWxzZSBpZih0eXBlID09PSBcInJlZGlyZWN0XCIpe1xuICAgICAgICAgIHRoaXMuaGlzdG9yeVJlZGlyZWN0KGhyZWYsIGxpbmtTdGF0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkICR7UEhYX0xJVkVfTElOS30gdG8gYmUgXCJwYXRjaFwiIG9yIFwicmVkaXJlY3RcIiwgZ290OiAke3R5cGV9YClcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGh4Q2xpY2sgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNsaWNrXCIpKVxuICAgICAgICBpZihwaHhDbGljayl7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHRoaXMuZXhlY0pTKHRhcmdldCwgcGh4Q2xpY2ssIFwiY2xpY2tcIikpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG4gIH1cblxuICBtYXliZVNjcm9sbChzY3JvbGwpe1xuICAgIGlmKHR5cGVvZihzY3JvbGwpID09PSBcIm51bWJlclwiKXtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpXG4gICAgICB9KSAvLyB0aGUgYm9keSBuZWVkcyB0byByZW5kZXIgYmVmb3JlIHdlIHNjcm9sbC5cbiAgICB9XG4gIH1cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30pe1xuICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgYHBoeDoke2V2ZW50fWAsIHtkZXRhaWw6IHBheWxvYWR9KVxuICB9XG5cbiAgZGlzcGF0Y2hFdmVudHMoZXZlbnRzKXtcbiAgICBldmVudHMuZm9yRWFjaCgoW2V2ZW50LCBwYXlsb2FkXSkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkKSlcbiAgfVxuXG4gIHdpdGhQYWdlTG9hZGluZyhpbmZvLCBjYWxsYmFjayl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwge2RldGFpbDogaW5mb30pXG4gICAgbGV0IGRvbmUgPSAoKSA9PiBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIHtkZXRhaWw6IGluZm99KVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGRvbmUpIDogZG9uZVxuICB9XG5cbiAgcHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldEVsKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpIHx8ICF0aGlzLm1haW4uaXNNYWluKCkpeyByZXR1cm4gQnJvd3Nlci5yZWRpcmVjdChocmVmKSB9XG5cbiAgICB0aGlzLndpdGhQYWdlTG9hZGluZyh7dG86IGhyZWYsIGtpbmQ6IFwicGF0Y2hcIn0sIGRvbmUgPT4ge1xuICAgICAgdGhpcy5tYWluLnB1c2hMaW5rUGF0Y2goaHJlZiwgdGFyZ2V0RWwsIGxpbmtSZWYgPT4ge1xuICAgICAgICB0aGlzLmhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIGxpbmtSZWYpXG4gICAgICAgIGRvbmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGlmKCF0aGlzLmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXsgcmV0dXJuIH1cblxuICAgIEJyb3dzZXIucHVzaFN0YXRlKGxpbmtTdGF0ZSwge3R5cGU6IFwicGF0Y2hcIiwgaWQ6IHRoaXMubWFpbi5pZH0sIGhyZWYpXG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpuYXZpZ2F0ZVwiLCB7ZGV0YWlsOiB7cGF0Y2g6IHRydWUsIGhyZWYsIHBvcDogZmFsc2V9fSlcbiAgICB0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKVxuICB9XG5cbiAgaGlzdG9yeVJlZGlyZWN0KGhyZWYsIGxpbmtTdGF0ZSwgZmxhc2gpe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkgfHwgIXRoaXMubWFpbi5pc01haW4oKSl7IHJldHVybiBCcm93c2VyLnJlZGlyZWN0KGhyZWYsIGZsYXNoKSB9XG5cbiAgICAvLyBjb252ZXJ0IHRvIGZ1bGwgaHJlZiBpZiBvbmx5IHBhdGggcHJlZml4XG4gICAgaWYoL15cXC8kfF5cXC9bXlxcL10rLiokLy50ZXN0KGhyZWYpKXtcbiAgICAgIGxldCB7cHJvdG9jb2wsIGhvc3R9ID0gd2luZG93LmxvY2F0aW9uXG4gICAgICBocmVmID0gYCR7cHJvdG9jb2x9Ly8ke2hvc3R9JHtocmVmfWBcbiAgICB9XG4gICAgbGV0IHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInJlZGlyZWN0XCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsIChsaW5rUmVmKSA9PiB7XG4gICAgICAgIGlmKGxpbmtSZWYgPT09IHRoaXMubGlua1JlZil7XG4gICAgICAgICAgQnJvd3Nlci5wdXNoU3RhdGUobGlua1N0YXRlLCB7dHlwZTogXCJyZWRpcmVjdFwiLCBpZDogdGhpcy5tYWluLmlkLCBzY3JvbGw6IHNjcm9sbH0sIGhyZWYpXG4gICAgICAgICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpuYXZpZ2F0ZVwiLCB7ZGV0YWlsOiB7aHJlZiwgcGF0Y2g6IGZhbHNlLCBwb3A6IGZhbHNlfX0pXG4gICAgICAgICAgdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbilcbiAgICAgICAgfVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJlcGxhY2VSb290SGlzdG9yeSgpe1xuICAgIEJyb3dzZXIucHVzaFN0YXRlKFwicmVwbGFjZVwiLCB7cm9vdDogdHJ1ZSwgdHlwZTogXCJwYXRjaFwiLCBpZDogdGhpcy5tYWluLmlkfSlcbiAgfVxuXG4gIHJlZ2lzdGVyTmV3TG9jYXRpb24obmV3TG9jYXRpb24pe1xuICAgIGxldCB7cGF0aG5hbWUsIHNlYXJjaH0gPSB0aGlzLmN1cnJlbnRMb2NhdGlvblxuICAgIGlmKHBhdGhuYW1lICsgc2VhcmNoID09PSBuZXdMb2NhdGlvbi5wYXRobmFtZSArIG5ld0xvY2F0aW9uLnNlYXJjaCl7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZShuZXdMb2NhdGlvbilcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgYmluZEZvcm1zKCl7XG4gICAgbGV0IGl0ZXJhdGlvbnMgPSAwXG4gICAgbGV0IGV4dGVybmFsRm9ybVN1Ym1pdHRlZCA9IGZhbHNlXG5cbiAgICAvLyBkaXNhYmxlIGZvcm1zIG9uIHN1Ym1pdCB0aGF0IHRyYWNrIHBoeC1jaGFuZ2UgYnV0IHBlcmZvcm0gZXh0ZXJuYWwgc3VibWl0XG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhTdWJtaXQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwic3VibWl0XCIpKVxuICAgICAgbGV0IHBoeENoYW5nZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICBpZighZXh0ZXJuYWxGb3JtU3VibWl0dGVkICYmIHBoeENoYW5nZSAmJiAhcGh4U3VibWl0KXtcbiAgICAgICAgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gdHJ1ZVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIHZpZXcuZGlzYWJsZUZvcm0oZS50YXJnZXQpXG4gICAgICAgICAgLy8gc2FmYXJpIG5lZWRzIG5leHQgdGlja1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgaWYoRE9NLmlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSkpeyB0aGlzLnVubG9hZCgpIH1cbiAgICAgICAgICAgIGUudGFyZ2V0LnN1Ym1pdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCB0cnVlKVxuXG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgIEpTLmV4ZWMoXCJzdWJtaXRcIiwgcGh4RXZlbnQsIHZpZXcsIGUudGFyZ2V0LCBbXCJwdXNoXCIsIHtzdWJtaXR0ZXI6IGUuc3VibWl0dGVyfV0pXG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuXG4gICAgZm9yKGxldCB0eXBlIG9mIFtcImNoYW5nZVwiLCBcImlucHV0XCJdKXtcbiAgICAgIHRoaXMub24odHlwZSwgZSA9PiB7XG4gICAgICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICAgICAgbGV0IGlucHV0ID0gZS50YXJnZXRcbiAgICAgICAgbGV0IGlucHV0RXZlbnQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKVxuICAgICAgICBsZXQgZm9ybUV2ZW50ID0gaW5wdXQuZm9ybSAmJiBpbnB1dC5mb3JtLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBwaHhFdmVudCA9IGlucHV0RXZlbnQgfHwgZm9ybUV2ZW50XG4gICAgICAgIGlmKCFwaHhFdmVudCl7IHJldHVybiB9XG4gICAgICAgIGlmKGlucHV0LnR5cGUgPT09IFwibnVtYmVyXCIgJiYgaW5wdXQudmFsaWRpdHkgJiYgaW5wdXQudmFsaWRpdHkuYmFkSW5wdXQpeyByZXR1cm4gfVxuXG4gICAgICAgIGxldCBkaXNwYXRjaGVyID0gaW5wdXRFdmVudCA/IGlucHV0IDogaW5wdXQuZm9ybVxuICAgICAgICBsZXQgY3VycmVudEl0ZXJhdGlvbnMgPSBpdGVyYXRpb25zXG4gICAgICAgIGl0ZXJhdGlvbnMrK1xuICAgICAgICBsZXQge2F0OiBhdCwgdHlwZTogbGFzdFR5cGV9ID0gRE9NLnByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIikgfHwge31cbiAgICAgICAgLy8gQnJvd3NlcnMgc2hvdWxkIGFsd2F5cyBmaXJlIGF0IGxlYXN0IG9uZSBcImlucHV0XCIgZXZlbnQgYmVmb3JlIGV2ZXJ5IFwiY2hhbmdlXCJcbiAgICAgICAgLy8gSWdub3JlIFwiY2hhbmdlXCIgZXZlbnRzLCB1bmxlc3MgdGhlcmUgd2FzIG5vIHByaW9yIFwiaW5wdXRcIiBldmVudC5cbiAgICAgICAgLy8gVGhpcyBjb3VsZCBoYXBwZW4gaWYgdXNlciBjb2RlIHRyaWdnZXJzIGEgXCJjaGFuZ2VcIiBldmVudCwgb3IgaWYgdGhlIGJyb3dzZXIgaXMgbm9uLWNvbmZvcm1pbmcuXG4gICAgICAgIGlmKGF0ID09PSBjdXJyZW50SXRlcmF0aW9ucyAtIDEgJiYgdHlwZSA9PT0gXCJjaGFuZ2VcIiAmJiBsYXN0VHlwZSA9PT0gXCJpbnB1dFwiKXsgcmV0dXJuIH1cblxuICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgXCJwcmV2LWl0ZXJhdGlvblwiLCB7YXQ6IGN1cnJlbnRJdGVyYXRpb25zLCB0eXBlOiB0eXBlfSlcblxuICAgICAgICB0aGlzLmRlYm91bmNlKGlucHV0LCBlLCB0eXBlLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZGlzcGF0Y2hlciwgdmlldyA9PiB7XG4gICAgICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VELCB0cnVlKVxuICAgICAgICAgICAgaWYoIURPTS5pc1RleHR1YWxJbnB1dChpbnB1dCkpe1xuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQoaW5wdXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogZS50YXJnZXQubmFtZSwgZGlzcGF0Y2hlcjogZGlzcGF0Y2hlcn1dKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9LCBmYWxzZSlcbiAgICB9XG4gICAgdGhpcy5vbihcInJlc2V0XCIsIChlKSA9PiB7XG4gICAgICBsZXQgZm9ybSA9IGUudGFyZ2V0XG4gICAgICBET00ucmVzZXRGb3JtKGZvcm0sIHRoaXMuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKSwgdGhpcy5iaW5kaW5nKFBIWF9GRUVEQkFDS19HUk9VUCkpXG4gICAgICBsZXQgaW5wdXQgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZpbmQoZWwgPT4gZWwudHlwZSA9PT0gXCJyZXNldFwiKVxuICAgICAgaWYoaW5wdXQpe1xuICAgICAgICAvLyB3YWl0IHVudGlsIG5leHQgdGljayB0byBnZXQgdXBkYXRlZCBpbnB1dCB2YWx1ZVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiBmYWxzZX0pKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIGV2ZW50VHlwZSwgY2FsbGJhY2spe1xuICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJibHVyXCIgfHwgZXZlbnRUeXBlID09PSBcImZvY3Vzb3V0XCIpeyByZXR1cm4gY2FsbGJhY2soKSB9XG5cbiAgICBsZXQgcGh4RGVib3VuY2UgPSB0aGlzLmJpbmRpbmcoUEhYX0RFQk9VTkNFKVxuICAgIGxldCBwaHhUaHJvdHRsZSA9IHRoaXMuYmluZGluZyhQSFhfVEhST1RUTEUpXG4gICAgbGV0IGRlZmF1bHREZWJvdW5jZSA9IHRoaXMuZGVmYXVsdHMuZGVib3VuY2UudG9TdHJpbmcoKVxuICAgIGxldCBkZWZhdWx0VGhyb3R0bGUgPSB0aGlzLmRlZmF1bHRzLnRocm90dGxlLnRvU3RyaW5nKClcblxuICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgIGxldCBhc3luY0ZpbHRlciA9ICgpID0+ICF2aWV3LmlzRGVzdHJveWVkKCkgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyhlbClcbiAgICAgIERPTS5kZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCAoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHNpbGVuY2VFdmVudHMoY2FsbGJhY2spe1xuICAgIHRoaXMuc2lsZW5jZWQgPSB0cnVlXG4gICAgY2FsbGJhY2soKVxuICAgIHRoaXMuc2lsZW5jZWQgPSBmYWxzZVxuICB9XG5cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZSA9PiB7XG4gICAgICBpZighdGhpcy5zaWxlbmNlZCl7IGNhbGxiYWNrKGUpIH1cbiAgICB9KVxuICB9XG59XG5cbmNsYXNzIFRyYW5zaXRpb25TZXQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMudHJhbnNpdGlvbnMgPSBuZXcgU2V0KClcbiAgICB0aGlzLnBlbmRpbmdPcHMgPSBbXVxuICB9XG5cbiAgcmVzZXQoKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmZvckVhY2godGltZXIgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgfSlcbiAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gIH1cblxuICBhZnRlcihjYWxsYmFjayl7XG4gICAgaWYodGhpcy5zaXplKCkgPT09IDApe1xuICAgICAgY2FsbGJhY2soKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1c2hQZW5kaW5nT3AoY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgYWRkVHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpe1xuICAgIG9uU3RhcnQoKVxuICAgIGxldCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgICBvbkRvbmUoKVxuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICAgIH0sIHRpbWUpXG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGQodGltZXIpXG4gIH1cblxuICBwdXNoUGVuZGluZ09wKG9wKXsgdGhpcy5wZW5kaW5nT3BzLnB1c2gob3ApIH1cblxuICBzaXplKCl7IHJldHVybiB0aGlzLnRyYW5zaXRpb25zLnNpemUgfVxuXG4gIGZsdXNoUGVuZGluZ09wcygpe1xuICAgIGlmKHRoaXMuc2l6ZSgpID4gMCl7IHJldHVybiB9XG4gICAgbGV0IG9wID0gdGhpcy5wZW5kaW5nT3BzLnNoaWZ0KClcbiAgICBpZihvcCl7XG4gICAgICBvcCgpXG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gICAgfVxuICB9XG59XG4iLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCAiLypcblRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IHRoZSBTdXJmYWNlIGNvbXBpbGVyLlxuKi9cblxuZXhwb3J0IGRlZmF1bHQge1xuICBtb3VudGVkKCkge1xuICAgIGNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9J2NzcmYtdG9rZW4nXVwiKS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpO1xuXG4gICAgbGV0IGludGVyYWN0aW9ucyA9IFtdO1xuICAgIGxldCByZWNvcmRpbmdOYW1lID0gbnVsbDtcblxuICAgIGNvbnN0IHNlbmRSZWNvcmRpbmcgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGlzUmVjb3JkaW5nICYmIGRhdGEuaW50ZXJhY3Rpb25zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInNlbmRpbmdcIiwgZGF0YSlcbiAgICAgICAgKFwiL3Rlc3Qvc3RvcmVfaW50ZXJhY3Rpb25zXCIsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgXCJYLUNTUkYtVG9rZW5cIjogY3NyZlRva2VuXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0U2VsZWN0b3IgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQuaWQgJiYgIWVsZW1lbnQuaWQuc3RhcnRzV2l0aChcInBoeC1cIikpIHtcbiAgICAgICAgcmV0dXJuIGAjJHtlbGVtZW50LmlkfWA7XG4gICAgICB9XG4gICAgICBsZXQgcGF0aCA9IFtdO1xuICAgICAgd2hpbGUgKCFlbGVtZW50LmlkLnN0YXJ0c1dpdGgoXCJwaHgtXCIpKSB7XG4gICAgICAgIGxldCB0YWcgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IHNpYmxpbmcgPSBlbGVtZW50O1xuICAgICAgICBsZXQgbnRoID0gMTtcbiAgICAgICAgd2hpbGUgKHNpYmxpbmcgPSBzaWJsaW5nLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICBpZiAoc2libGluZy50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZykgbnRoKys7XG4gICAgICAgIH1cbiAgICAgICAgcGF0aC51bnNoaWZ0KGAke3RhZ306bnRoLW9mLXR5cGUoJHtudGh9KWApO1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhdGguam9pbihcIiA+IFwiKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZmluZFBhcmVudEZvcm0gPSAoZWxlbWVudCkgPT4ge1xuICAgICAgbGV0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZVxuICAgICAgd2hpbGUgKHBhcmVudC50YWdOYW1lICE9PSBcIkZPUk1cIikge1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJlbnQuaWRcbiAgICB9XG5cbiAgICBjb25zdCByZWNvcmRJbnRlcmFjdGlvbiA9IChpbnRlcmFjdGlvbikgPT4ge1xuICAgICAgY29uc29sZS5sb2coaW50ZXJhY3Rpb24pXG4gICAgICBpZiAocmVjb3JkaW5nTmFtZSAmJiBpbnRlcmFjdGlvbi5zZWxlY3RvciAhPT0gXCIjc3RvcC1yZWNvcmRpbmdcIikge1xuICAgICAgICBwdXNoRXZlbnRUbyh0aGlzLmVsLCBcInJlY29yZC1pbnRlcmFjdGlvblwiLCBpbnRlcmFjdGlvbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHJlY29yZENsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgbGV0IHNlbGVjdG9yID0gZ2V0U2VsZWN0b3IodGFyZ2V0KTtcbiAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICBsZXQgaW50ZXJhY3Rpb24gPSB7XG4gICAgICAgICAgdHlwZTogXCJjbGlja1wiLFxuICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcixcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmVjb3JkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCByZWNvcmRJbnB1dCA9IChldmVudCkgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIGxldCBzZWxlY3RvciA9IGdldFNlbGVjdG9yKHRhcmdldCk7XG4gICAgICBjb25zb2xlLmxvZyhldmVudClcbiAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICBsZXQgaW50ZXJhY3Rpb24gPSB7XG4gICAgICAgICAgdHlwZTogXCJpbnB1dFwiLFxuICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcixcbiAgICAgICAgICBuYW1lOiB0YXJnZXQubmFtZSxcbiAgICAgICAgICBmb3JtOiBmaW5kUGFyZW50Rm9ybSh0YXJnZXQpLFxuICAgICAgICAgIHZhbHVlOiB0YXJnZXQudmFsdWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJlY29yZEludGVyYWN0aW9uKGludGVyYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICAgICBjb25zdCByZWNvcmRUZXh0QXNzZXJ0aW9uID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoaXNSZWNvcmRpbmcpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgY29udGV4dCBtZW51IGZyb20gYXBwZWFyaW5nXG4gICAgICAgIGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhcmdldClcbiAgICAgICAgbGV0IHNlbGVjdG9yID0gZ2V0U2VsZWN0b3IodGFyZ2V0KTtcbiAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgbGV0IGludGVyYWN0aW9uID0ge1xuICAgICAgICAgICAgdHlwZTogXCJhc3NlcnRfdGV4dFwiLFxuICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLFxuICAgICAgICAgICAgdGV4dDogdGFyZ2V0LnRleHRDb250ZW50LnRyaW0oKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmVjb3JkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYXNUZXh0Q29udGVudCA9IChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gISFlbGVtZW50LnRleHQ/LnRyaW0oKTtcbiAgICB9O1xuXG4gICAgbGV0IGlzUmVjb3JkaW5nID0gZmFsc2U7XG4gICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IFwiaW5wdXRcIlxuICAgIGNvbnN0IGNsaWNrRWxlbWVudHMgPSBcImJ1dHRvbiwgYSwgaW5wdXRbdHlwZT0nY2hlY2tib3gnXVwiXG5cbiAgICBjb25zdCBhcHBseUxpc3RlbmVycyA9IChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRFbGVtZW50cykuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHJlY29yZElucHV0KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNsaWNrRWxlbWVudHMpLmZvckVhY2goKGNsaWNrYWJsZSkgPT4ge1xuICAgICAgICBjbGlja2FibGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlY29yZENsaWNrKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBpZiAoaGFzVGV4dENvbnRlbnQoZWwpKSB7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIHJlY29yZFRleHRBc3NlcnRpb24sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZUxpc3RlbmVycyA9IChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRFbGVtZW50cykuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHJlY29yZElucHV0KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNsaWNrRWxlbWVudHMpLmZvckVhY2goKGNsaWNrYWJsZSkgPT4ge1xuICAgICAgICBjbGlja2FibGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlY29yZENsaWNrKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBpZiAoaGFzVGV4dENvbnRlbnQoZWwpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZWwpXG4gICAgICAgICAgY29uc29sZS5sb2coZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIHJlY29yZFRleHRBc3NlcnRpb24sIHRydWUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpyZWRpcmVjdFwiLCAoZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9KVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwaHg6c3RhcnQtcmVjb3JkaW5nXCIsIChlKSA9PiB7XG4gICAgICBpc1JlY29yZGluZyA9IHRydWU7XG4gICAgICByZWNvcmRpbmdOYW1lID0gZS5kZXRhaWwubW9kdWxlICsgRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgY29uc29sZS5sb2cocmVjb3JkaW5nTmFtZSlcbiAgICAgIGFwcGx5TGlzdGVuZXJzKGRvY3VtZW50KTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgIHtcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGludGVyYWN0aW9ucyA9IFt7XG4gICAgICAgIHR5cGU6IFwicGF0aFwiLFxuICAgICAgICBwYXRoOiBlLmRldGFpbC5wYXRoLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1dO1xuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwaHg6c3RvcC1yZWNvcmRpbmdcIiwgKCkgPT4ge1xuICAgICAgc2VuZFJlY29yZGluZyh7IG5hbWU6IHJlY29yZGluZ05hbWUsIGludGVyYWN0aW9uczogaW50ZXJhY3Rpb25zIH0pO1xuICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICByZW1vdmVMaXN0ZW5lcnMoZG9jdW1lbnQpO1xuICAgICAgaXNSZWNvcmRpbmcgPSBmYWxzZTtcbiAgICB9KTtcblxuXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcbiAgICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpXG4gICAgICAgICAgICBhcHBseUxpc3RlbmVycyhub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsICIvKlxuVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgdGhlIFN1cmZhY2UgY29tcGlsZXIuXG4qL1xuXG5mdW5jdGlvbiBucyhob29rcywgbmFtZVNwYWNlKSB7XG4gIGNvbnN0IHVwZGF0ZWRIb29rcyA9IHt9XG4gIE9iamVjdC5rZXlzKGhvb2tzKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgdXBkYXRlZEhvb2tzW2Ake25hbWVTcGFjZX0jJHtrZXl9YF0gPSBob29rc1trZXldXG4gIH0pXG4gIHJldHVybiB1cGRhdGVkSG9va3Ncbn1cblxuaW1wb3J0ICogYXMgYzEgZnJvbSBcIi4vUHVua2l4LldlYi5Db21wb25lbnRzLkludGVyYWN0aW9uUmVjb3JkZXIuaG9va3NcIlxuXG5sZXQgaG9va3MgPSBPYmplY3QuYXNzaWduKFxuICBucyhjMSwgXCJQdW5raXguV2ViLkNvbXBvbmVudHMuSW50ZXJhY3Rpb25SZWNvcmRlclwiKVxuKVxuXG5leHBvcnQgZGVmYXVsdCBob29rc1xuIiwgImltcG9ydCB7IEVuY29kZXIsIERlY29kZXIgfSBmcm9tIFwiQG1zZ3BhY2svbXNncGFja1wiO1xuaW1wb3J0IFB1bmtpeEhvb2tzIGZyb20gXCIuLi9faG9va3NcIjtcblxuY29uc3QgZW5jb2RlciA9IG5ldyBFbmNvZGVyKHsgaWdub3JlVW5kZWZpbmVkOiB0cnVlIH0pO1xuY29uc3QgZGVjb2RlciA9IG5ldyBEZWNvZGVyKCk7XG5cbmNvbnN0IGVuY29kZSA9ICAocGF5bG9hZCwgY2FsbGJhY2spID0+IHtcblx0XHQvLyBUaGlzIGlzIG5lZWRlZCBmb3IgZmlsZVVwbG9hZCB0byB3b3JrXG5cdFx0aWYgKHBheWxvYWQucGF5bG9hZCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdFx0XHRwYXlsb2FkLnBheWxvYWQgPSBuZXcgVWludDhBcnJheShwYXlsb2FkLnBheWxvYWQpO1xuXHRcdH1cblx0XHRjYWxsYmFjayhlbmNvZGVyLmVuY29kZShwYXlsb2FkKSk7XG5cdH1cbmNvbnN0XHRkZWNvZGUgPSAocGF5bG9hZCwgY2FsbGJhY2spID0+IGNhbGxiYWNrKGRlY29kZXIuZGVjb2RlKHBheWxvYWQpKVxuZXhwb3J0IHtlbmNvZGUsIGRlY29kZSwgUHVua2l4SG9va3N9O1xuIiwgIi8vIElmIHlvdSB3YW50IHRvIHVzZSBQaG9lbml4IGNoYW5uZWxzLCBydW4gYG1peCBoZWxwIHBoeC5nZW4uY2hhbm5lbGBcbi8vIHRvIGdldCBzdGFydGVkIGFuZCB0aGVuIHVuY29tbWVudCB0aGUgbGluZSBiZWxvdy5cbi8vIGltcG9ydCBcIi4vdXNlcl9zb2NrZXQuanNcIlxuXG4vLyBZb3UgY2FuIGluY2x1ZGUgZGVwZW5kZW5jaWVzIGluIHR3byB3YXlzLlxuLy9cbi8vIFRoZSBzaW1wbGVzdCBvcHRpb24gaXMgdG8gcHV0IHRoZW0gaW4gYXNzZXRzL3ZlbmRvciBhbmRcbi8vIGltcG9ydCB0aGVtIHVzaW5nIHJlbGF0aXZlIHBhdGhzOlxuLy9cbi8vICAgICBpbXBvcnQgXCIuLi92ZW5kb3Ivc29tZS1wYWNrYWdlLmpzXCJcbi8vXG4vLyBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIGBucG0gaW5zdGFsbCBzb21lLXBhY2thZ2UgLS1wcmVmaXggYXNzZXRzYCBhbmQgaW1wb3J0XG4vLyB0aGVtIHVzaW5nIGEgcGF0aCBzdGFydGluZyB3aXRoIHRoZSBwYWNrYWdlIG5hbWU6XG4vL1xuLy8gICAgIGltcG9ydCBcInNvbWUtcGFja2FnZVwiXG4vL1xuLy8gSW5jbHVkZSBwaG9lbml4X2h0bWwgdG8gaGFuZGxlIG1ldGhvZD1QVVQvREVMRVRFIGluIGZvcm1zIGFuZCBidXR0b25zLlxuaW1wb3J0IFwicGhvZW5peF9odG1sXCJcbi8vIEVzdGFibGlzaCBQaG9lbml4IFNvY2tldCBhbmQgTGl2ZVZpZXcgY29uZmlndXJhdGlvbi5cbmltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG5pbXBvcnQge0xpdmVTb2NrZXR9IGZyb20gXCJwaG9lbml4X2xpdmVfdmlld1wiXG5pbXBvcnQgeyBlbmNvZGUsIGRlY29kZSwgUHVua2l4SG9va3N9IGZyb20gXCIuL3B1bmtpeFwiO1xuaW1wb3J0IEhvb2tzIGZyb20gXCIuL19ob29rc1wiXG5cbmNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9J2NzcmYtdG9rZW4nXVwiKS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpXG5jb25zdCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHtcblx0aG9va3M6IHsuLi5QdW5raXhIb29rcywgLi4uSG9va3N9LFxuXHQvLyBlbmNvZGU6IGVuY29kZSxcblx0Ly8gZGVjb2RlOiBkZWNvZGUsXG4gIGxvbmdQb2xsRmFsbGJhY2tNczogMjUwMCxcbiAgcGFyYW1zOiB7X2NzcmZfdG9rZW46IGNzcmZUb2tlbn1cbn0pXG5cbi8vIFN0b3JlIHRoZSBzdGF0ZSBvZiBkZXRhaWxzIGluIGxvY2FsU3RvcmFnZSBhbmQgcmVzdG9yZSB0aGVtIG9uIHVwZGF0ZVxuZnVuY3Rpb24gaW5pdERldGFpbHMoKSB7XG5cdGZvciAoZGV0YWlsIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJkZXRhaWxzXCIpKSB7XG5cdFx0ZGV0YWlsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b2dnbGVcIiwgKGV2ZW50KSA9PiB7XG5cdFx0XHRjb25zdCBrZXkgPSBgZGV0YWlsc18ke2RldGFpbC5pZH1gXG5cdFx0XHRpZiAoZGV0YWlsLm9wZW4pIHtcblx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB0cnVlKVxuXHRcdFx0fSBlbHNlXG5cdFx0XHRcdGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSlcblx0XHRcdH1cblx0XHRcdClcblx0fVxufVxuZnVuY3Rpb24gcmVzdG9yZURldGFpbHNTdGF0ZXMoKSB7XG5cdGZvciAoZGV0YWlsIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJkZXRhaWxzXCIpKSB7XG5cdFx0aWYgKGRldGFpbC5pZCkge1xuXHRcdFx0aWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBkZXRhaWxzXyR7ZGV0YWlsLmlkfWApKSB7XG5cdFx0XHRcdGRldGFpbC5zZXRBdHRyaWJ1dGUoXCJvcGVuXCIsIFwiXCIpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicGh4OnVwZGF0ZVwiLCByZXN0b3JlRGV0YWlsc1N0YXRlcylcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0RGV0YWlscyk7XG5cbi8vIFNob3cgcHJvZ3Jlc3MgYmFyIG9uIGxpdmUgbmF2aWdhdGlvbiBhbmQgZm9ybSBzdWJtaXRzXG4vLyBjb25uZWN0IGlmIHRoZXJlIGFyZSBhbnkgTGl2ZVZpZXdzIG9uIHRoZSBwYWdlXG5saXZlU29ja2V0LmNvbm5lY3QoKVxuXG4vLyBleHBvc2UgbGl2ZVNvY2tldCBvbiB3aW5kb3cgZm9yIHdlYiBjb25zb2xlIGRlYnVnIGxvZ3MgYW5kIGxhdGVuY3kgc2ltdWxhdGlvbjpcbi8vID4+IGxpdmVTb2NrZXQuZW5hYmxlRGVidWcoKVxuLy8gPj4gbGl2ZVNvY2tldC5lbmFibGVMYXRlbmN5U2ltKDEwMDApICAvLyBlbmFibGVkIGZvciBkdXJhdGlvbiBvZiBicm93c2VyIHNlc3Npb25cbi8vID4+IGxpdmVTb2NrZXQuZGlzYWJsZUxhdGVuY3lTaW0oKVxud2luZG93LmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG4iXSwKICAibWFwcGluZ3MiOiAiaUpBQUEsYUFFQSxBQUFDLFdBQVcsQ0FDVixHQUFJLEdBQWdCLElBRXBCLFlBQTRCLENBQzFCLEdBQUksTUFBTyxRQUFPLGFBQWdCLFdBQVksTUFBTyxRQUFPLFlBRTVELFdBQXFCLEVBQU8sRUFBUSxDQUNsQyxFQUFTLEdBQVUsQ0FBQyxRQUFTLEdBQU8sV0FBWSxHQUFPLE9BQVEsUUFDL0QsR0FBSSxHQUFNLFNBQVMsWUFBWSxlQUMvQixTQUFJLGdCQUFnQixFQUFPLEVBQU8sUUFBUyxFQUFPLFdBQVksRUFBTyxRQUM5RCxFQUVULFNBQVksVUFBWSxPQUFPLE1BQU0sVUFDOUIsRUFHVCxXQUEwQixFQUFNLEVBQU8sQ0FDckMsR0FBSSxHQUFRLFNBQVMsY0FBYyxTQUNuQyxTQUFNLEtBQU8sU0FDYixFQUFNLEtBQU8sRUFDYixFQUFNLE1BQVEsRUFDUCxFQUdULFdBQXFCLEVBQVMsRUFBbUIsQ0FDL0MsR0FBSSxHQUFLLEVBQVEsYUFBYSxXQUMxQixFQUFTLEVBQWlCLFVBQVcsRUFBUSxhQUFhLGdCQUMxRCxFQUFPLEVBQWlCLGNBQWUsRUFBUSxhQUFhLGNBQzVELEVBQU8sU0FBUyxjQUFjLFFBQzlCLEVBQVMsU0FBUyxjQUFjLFNBQ2hDLEVBQVMsRUFBUSxhQUFhLFVBRWxDLEVBQUssT0FBVSxFQUFRLGFBQWEsaUJBQW1CLE1BQVMsTUFBUSxPQUN4RSxFQUFLLE9BQVMsRUFDZCxFQUFLLE1BQU0sUUFBVSxPQUVyQixBQUFJLEVBQVEsRUFBSyxPQUFTLEVBQ2pCLEdBQW1CLEdBQUssT0FBUyxVQUUxQyxFQUFLLFlBQVksR0FDakIsRUFBSyxZQUFZLEdBQ2pCLFNBQVMsS0FBSyxZQUFZ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
